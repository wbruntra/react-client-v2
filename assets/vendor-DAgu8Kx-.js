import{g as $h,c as hn}from"./lodash-CmFMvF3r.js";function ux(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var iS={exports:{}},qh={},sS={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql=Symbol.for("react.element"),lx=Symbol.for("react.portal"),cx=Symbol.for("react.fragment"),dx=Symbol.for("react.strict_mode"),hx=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),px=Symbol.for("react.context"),mx=Symbol.for("react.forward_ref"),gx=Symbol.for("react.suspense"),yx=Symbol.for("react.memo"),_x=Symbol.for("react.lazy"),iE=Symbol.iterator;function vx(t){return t===null||typeof t!="object"?null:(t=iE&&t[iE]||t["@@iterator"],typeof t=="function"?t:null)}var oS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aS=Object.assign,uS={};function Pa(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||oS}Pa.prototype.isReactComponent={};Pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lS(){}lS.prototype=Pa.prototype;function vy(t,e,n){this.props=t,this.context=e,this.refs=uS,this.updater=n||oS}var wy=vy.prototype=new lS;wy.constructor=vy;aS(wy,Pa.prototype);wy.isPureReactComponent=!0;var sE=Array.isArray,cS=Object.prototype.hasOwnProperty,Ey={current:null},dS={key:!0,ref:!0,__self:!0,__source:!0};function hS(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cS.call(e,r)&&!dS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ql,type:t,key:s,ref:o,props:i,_owner:Ey.current}}function wx(t,e){return{$$typeof:ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iy(t){return typeof t=="object"&&t!==null&&t.$$typeof===ql}function Ex(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var oE=/\/+/g;function _p(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ex(""+t.key):e.toString(36)}function md(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ql:case lx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+_p(o,0):r,sE(i)?(n="",t!=null&&(n=t.replace(oE,"$&/")+"/"),md(i,e,n,"",function(c){return c})):i!=null&&(Iy(i)&&(i=wx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(oE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",sE(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+_p(s,a);o+=md(s,e,n,u,i)}else if(u=vx(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+_p(s,a++),o+=md(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bc(t,e,n){if(t==null)return t;var r=[],i=0;return md(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ix(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},gd={transition:null},Tx={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:gd,ReactCurrentOwner:Ey};function fS(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Bc,forEach:function(t,e,n){Bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bc(t,function(){e++}),e},toArray:function(t){return Bc(t,function(e){return e})||[]},only:function(t){if(!Iy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Pa;pe.Fragment=cx;pe.Profiler=hx;pe.PureComponent=vy;pe.StrictMode=dx;pe.Suspense=gx;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tx;pe.act=fS;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ey.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)cS.call(e,u)&&!dS.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ql,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:px,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fx,_context:t},t.Consumer=t};pe.createElement=hS;pe.createFactory=function(t){var e=hS.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:mx,render:t}};pe.isValidElement=Iy;pe.lazy=function(t){return{$$typeof:_x,_payload:{_status:-1,_result:t},_init:Ix}};pe.memo=function(t,e){return{$$typeof:yx,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=gd.transition;gd.transition={};try{t()}finally{gd.transition=e}};pe.unstable_act=fS;pe.useCallback=function(t,e){return Jt.current.useCallback(t,e)};pe.useContext=function(t){return Jt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Jt.current.useEffect(t,e)};pe.useId=function(){return Jt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Jt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};pe.useRef=function(t){return Jt.current.useRef(t)};pe.useState=function(t){return Jt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Jt.current.useTransition()};pe.version="18.3.1";sS.exports=pe;var D=sS.exports;const Sr=$h(D),Em=ux({__proto__:null,default:Sr},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=D,Rx=Symbol.for("react.element"),Ax=Symbol.for("react.fragment"),Px=Object.prototype.hasOwnProperty,Cx=Sx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bx={key:!0,ref:!0,__self:!0,__source:!0};function pS(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Px.call(e,r)&&!bx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Rx,type:t,key:s,ref:o,props:i,_owner:Cx.current}}qh.Fragment=Ax;qh.jsx=pS;qh.jsxs=pS;iS.exports=qh;var Se=iS.exports,mS={exports:{}},An={},gS={exports:{}},yS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var J=B.length;B.push(W);e:for(;0<J;){var te=J-1>>>1,ae=B[te];if(0<i(ae,W))B[te]=W,B[J]=ae,J=te;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],J=B.pop();if(J!==W){B[0]=J;e:for(var te=0,ae=B.length,oe=ae>>>1;te<oe;){var Ee=2*(te+1)-1,he=B[Ee],Ae=Ee+1,De=B[Ae];if(0>i(he,J))Ae<ae&&0>i(De,he)?(B[te]=De,B[Ae]=J,te=Ae):(B[te]=he,B[Ee]=J,te=Ee);else if(Ae<ae&&0>i(De,J))B[te]=De,B[Ae]=J,te=Ae;else break e}}return W}function i(B,W){var J=B.sortIndex-W.sortIndex;return J!==0?J:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,h=null,p=3,y=!1,g=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=B)r(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function k(B){if(A=!1,w(B),!g)if(n(u)!==null)g=!0,se(V);else{var W=n(c);W!==null&&ee(k,W.startTime-B)}}function V(B,W){g=!1,A&&(A=!1,I(_),_=-1),y=!0;var J=p;try{for(w(W),h=n(u);h!==null&&(!(h.expirationTime>W)||B&&!x());){var te=h.callback;if(typeof te=="function"){h.callback=null,p=h.priorityLevel;var ae=te(h.expirationTime<=W);W=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(u)&&r(u),w(W)}else r(u);h=n(u)}if(h!==null)var oe=!0;else{var Ee=n(c);Ee!==null&&ee(k,Ee.startTime-W),oe=!1}return oe}finally{h=null,p=J,y=!1}}var M=!1,S=null,_=-1,C=5,b=-1;function x(){return!(t.unstable_now()-b<C)}function P(){if(S!==null){var B=t.unstable_now();b=B;var W=!0;try{W=S(!0,B)}finally{W?T():(M=!1,S=null)}}else M=!1}var T;if(typeof v=="function")T=function(){v(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=P,T=function(){re.postMessage(null)}}else T=function(){R(P,0)};function se(B){S=B,M||(M=!0,T())}function ee(B,W){_=R(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,se(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var J=p;p=W;try{return B()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=p;p=B;try{return W()}finally{p=J}},t.unstable_scheduleCallback=function(B,W,J){var te=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,B){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=J+ae,B={id:d++,callback:W,priorityLevel:B,startTime:J,expirationTime:ae,sortIndex:-1},J>te?(B.sortIndex=J,e(c,B),n(u)===null&&B===n(c)&&(A?(I(_),_=-1):A=!0,ee(k,J-te))):(B.sortIndex=ae,e(u,B),g||y||(g=!0,se(V))),B},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(B){var W=p;return function(){var J=p;p=W;try{return B.apply(this,arguments)}finally{p=J}}}})(yS);gS.exports=yS;var kx=gS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx=D,En=kx;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _S=new Set,tl={};function Ys(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(tl[t]=e,t=0;t<e.length;t++)_S.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Im=Object.prototype.hasOwnProperty,Nx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aE={},uE={};function Dx(t){return Im.call(uE,t)?!0:Im.call(aE,t)?!1:Nx.test(t)?uE[t]=!0:(aE[t]=!0,!1)}function Ox(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vx(t,e,n,r){if(e===null||typeof e>"u"||Ox(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ty=/[\-:]([a-z])/g;function Sy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ty,Sy);Nt[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ty,Sy);Nt[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ty,Sy);Nt[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ry(t,e,n,r){var i=Nt.hasOwnProperty(e)?Nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vx(e,n,i,r)&&(n=null),r||i===null?Dx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jc=Symbol.for("react.element"),Po=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),Ay=Symbol.for("react.strict_mode"),Tm=Symbol.for("react.profiler"),vS=Symbol.for("react.provider"),wS=Symbol.for("react.context"),Py=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),Rm=Symbol.for("react.suspense_list"),Cy=Symbol.for("react.memo"),si=Symbol.for("react.lazy"),ES=Symbol.for("react.offscreen"),lE=Symbol.iterator;function uu(t){return t===null||typeof t!="object"?null:(t=lE&&t[lE]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,vp;function Ru(t){if(vp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vp=e&&e[1]||""}return`
`+vp+t}var wp=!1;function Ep(t,e){if(!t||wp)return"";wp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{wp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ru(t):""}function Mx(t){switch(t.tag){case 5:return Ru(t.type);case 16:return Ru("Lazy");case 13:return Ru("Suspense");case 19:return Ru("SuspenseList");case 0:case 2:case 15:return t=Ep(t.type,!1),t;case 11:return t=Ep(t.type.render,!1),t;case 1:return t=Ep(t.type,!0),t;default:return""}}function Am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Co:return"Fragment";case Po:return"Portal";case Tm:return"Profiler";case Ay:return"StrictMode";case Sm:return"Suspense";case Rm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wS:return(t.displayName||"Context")+".Consumer";case vS:return(t._context.displayName||"Context")+".Provider";case Py:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cy:return e=t.displayName||null,e!==null?e:Am(t.type)||"Memo";case si:e=t._payload,t=t._init;try{return Am(t(e))}catch{}}return null}function Lx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Am(e);case 8:return e===Ay?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function IS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fx(t){var e=IS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zc(t){t._valueTracker||(t._valueTracker=Fx(t))}function TS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=IS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pm(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SS(t,e){e=e.checked,e!=null&&Ry(t,"checked",e,!1)}function Cm(t,e){SS(t,e);var n=Ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bm(t,e.type,n):e.hasOwnProperty("defaultValue")&&bm(t,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bm(t,e,n){(e!=="number"||jd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Au=Array.isArray;function zo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ci(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Au(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ci(n)}}function RS(t,e){var n=Ci(e.value),r=Ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,PS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ux=["Webkit","ms","Moz","O"];Object.keys(Lu).forEach(function(t){Ux.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lu[e]=Lu[t]})});function CS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lu.hasOwnProperty(t)&&Lu[t]?(""+e).trim():e+"px"}function bS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=CS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Bx=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nm(t,e){if(e){if(Bx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Dm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=null;function by(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vm=null,$o=null,qo=null;function pE(t){if(t=Gl(t)){if(typeof Vm!="function")throw Error($(280));var e=t.stateNode;e&&(e=Qh(e),Vm(t.stateNode,t.type,e))}}function kS(t){$o?qo?qo.push(t):qo=[t]:$o=t}function xS(){if($o){var t=$o,e=qo;if(qo=$o=null,pE(t),e)for(t=0;t<e.length;t++)pE(e[t])}}function NS(t,e){return t(e)}function DS(){}var Ip=!1;function OS(t,e,n){if(Ip)return t(e,n);Ip=!0;try{return NS(t,e,n)}finally{Ip=!1,($o!==null||qo!==null)&&(DS(),xS())}}function rl(t,e){var n=t.stateNode;if(n===null)return null;var r=Qh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Mm=!1;if(Dr)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Mm=!1}function jx(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Fu=!1,zd=null,$d=!1,Lm=null,zx={onError:function(t){Fu=!0,zd=t}};function $x(t,e,n,r,i,s,o,a,u){Fu=!1,zd=null,jx.apply(zx,arguments)}function qx(t,e,n,r,i,s,o,a,u){if($x.apply(this,arguments),Fu){if(Fu){var c=zd;Fu=!1,zd=null}else throw Error($(198));$d||($d=!0,Lm=c)}}function Js(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mE(t){if(Js(t)!==t)throw Error($(188))}function Wx(t){var e=t.alternate;if(!e){if(e=Js(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mE(i),t;if(s===r)return mE(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function MS(t){return t=Wx(t),t!==null?LS(t):null}function LS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LS(t);if(e!==null)return e;t=t.sibling}return null}var FS=En.unstable_scheduleCallback,gE=En.unstable_cancelCallback,Kx=En.unstable_shouldYield,Gx=En.unstable_requestPaint,rt=En.unstable_now,Hx=En.unstable_getCurrentPriorityLevel,ky=En.unstable_ImmediatePriority,US=En.unstable_UserBlockingPriority,qd=En.unstable_NormalPriority,Qx=En.unstable_LowPriority,BS=En.unstable_IdlePriority,Wh=null,cr=null;function Yx(t){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Wh,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Zx,Jx=Math.log,Xx=Math.LN2;function Zx(t){return t>>>=0,t===0?32:31-(Jx(t)/Xx|0)|0}var qc=64,Wc=4194304;function Pu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pu(a):(s&=o,s!==0&&(r=Pu(s)))}else o=n&~i,o!==0?r=Pu(o):s!==0&&(r=Pu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),i=1<<n,r|=t[n],e&=~i;return r}function eN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Kn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=eN(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jS(){var t=qc;return qc<<=1,!(qc&4194240)&&(qc=64),t}function Tp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function nN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Kn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function zS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $S,Ny,qS,WS,KS,Um=!1,Kc=[],yi=null,_i=null,vi=null,il=new Map,sl=new Map,ui=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yE(t,e){switch(t){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(e.pointerId)}}function cu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gl(e),e!==null&&Ny(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iN(t,e,n,r,i){switch(e){case"focusin":return yi=cu(yi,t,e,n,r,i),!0;case"dragenter":return _i=cu(_i,t,e,n,r,i),!0;case"mouseover":return vi=cu(vi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return il.set(s,cu(il.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sl.set(s,cu(sl.get(s)||null,t,e,n,r,i)),!0}return!1}function GS(t){var e=ys(t.target);if(e!==null){var n=Js(e);if(n!==null){if(e=n.tag,e===13){if(e=VS(n),e!==null){t.blockedOn=e,KS(t.priority,function(){qS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Om=r,n.target.dispatchEvent(r),Om=null}else return e=Gl(n),e!==null&&Ny(e),t.blockedOn=n,!1;e.shift()}return!0}function _E(t,e,n){yd(t)&&n.delete(e)}function sN(){Um=!1,yi!==null&&yd(yi)&&(yi=null),_i!==null&&yd(_i)&&(_i=null),vi!==null&&yd(vi)&&(vi=null),il.forEach(_E),sl.forEach(_E)}function du(t,e){t.blockedOn===e&&(t.blockedOn=null,Um||(Um=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,sN)))}function ol(t){function e(i){return du(i,t)}if(0<Kc.length){du(Kc[0],t);for(var n=1;n<Kc.length;n++){var r=Kc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yi!==null&&du(yi,t),_i!==null&&du(_i,t),vi!==null&&du(vi,t),il.forEach(e),sl.forEach(e),n=0;n<ui.length;n++)r=ui[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)GS(n),n.blockedOn===null&&ui.shift()}var Wo=$r.ReactCurrentBatchConfig,Kd=!0;function oN(t,e,n,r){var i=Ce,s=Wo.transition;Wo.transition=null;try{Ce=1,Dy(t,e,n,r)}finally{Ce=i,Wo.transition=s}}function aN(t,e,n,r){var i=Ce,s=Wo.transition;Wo.transition=null;try{Ce=4,Dy(t,e,n,r)}finally{Ce=i,Wo.transition=s}}function Dy(t,e,n,r){if(Kd){var i=Bm(t,e,n,r);if(i===null)Dp(t,e,r,Gd,n),yE(t,r);else if(iN(i,t,e,n,r))r.stopPropagation();else if(yE(t,r),e&4&&-1<rN.indexOf(t)){for(;i!==null;){var s=Gl(i);if(s!==null&&$S(s),s=Bm(t,e,n,r),s===null&&Dp(t,e,r,Gd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dp(t,e,r,null,n)}}var Gd=null;function Bm(t,e,n,r){if(Gd=null,t=by(r),t=ys(t),t!==null)if(e=Js(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gd=t,null}function HS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hx()){case ky:return 1;case US:return 4;case qd:case Qx:return 16;case BS:return 536870912;default:return 16}default:return 16}}var hi=null,Oy=null,_d=null;function QS(){if(_d)return _d;var t,e=Oy,n=e.length,r,i="value"in hi?hi.value:hi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return _d=i.slice(t,1<r?1-r:void 0)}function vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gc(){return!0}function vE(){return!1}function Pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Gc:vE,this.isPropagationStopped=vE,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gc)},persist:function(){},isPersistent:Gc}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=Pn(Ca),Kl=Ge({},Ca,{view:0,detail:0}),uN=Pn(Kl),Sp,Rp,hu,Kh=Ge({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:My,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hu&&(hu&&t.type==="mousemove"?(Sp=t.screenX-hu.screenX,Rp=t.screenY-hu.screenY):Rp=Sp=0,hu=t),Sp)},movementY:function(t){return"movementY"in t?t.movementY:Rp}}),wE=Pn(Kh),lN=Ge({},Kh,{dataTransfer:0}),cN=Pn(lN),dN=Ge({},Kl,{relatedTarget:0}),Ap=Pn(dN),hN=Ge({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),fN=Pn(hN),pN=Ge({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mN=Pn(pN),gN=Ge({},Ca,{data:0}),EE=Pn(gN),yN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_N={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vN[t])?!!e[t]:!1}function My(){return wN}var EN=Ge({},Kl,{key:function(t){if(t.key){var e=yN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_N[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:My,charCode:function(t){return t.type==="keypress"?vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IN=Pn(EN),TN=Ge({},Kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IE=Pn(TN),SN=Ge({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:My}),RN=Pn(SN),AN=Ge({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),PN=Pn(AN),CN=Ge({},Kh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bN=Pn(CN),kN=[9,13,27,32],Ly=Dr&&"CompositionEvent"in window,Uu=null;Dr&&"documentMode"in document&&(Uu=document.documentMode);var xN=Dr&&"TextEvent"in window&&!Uu,YS=Dr&&(!Ly||Uu&&8<Uu&&11>=Uu),TE=" ",SE=!1;function JS(t,e){switch(t){case"keyup":return kN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bo=!1;function NN(t,e){switch(t){case"compositionend":return XS(e);case"keypress":return e.which!==32?null:(SE=!0,TE);case"textInput":return t=e.data,t===TE&&SE?null:t;default:return null}}function DN(t,e){if(bo)return t==="compositionend"||!Ly&&JS(t,e)?(t=QS(),_d=Oy=hi=null,bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YS&&e.locale!=="ko"?null:e.data;default:return null}}var ON={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ON[t.type]:e==="textarea"}function ZS(t,e,n,r){kS(r),e=Hd(e,"onChange"),0<e.length&&(n=new Vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bu=null,al=null;function VN(t){cR(t,0)}function Gh(t){var e=No(t);if(TS(e))return t}function MN(t,e){if(t==="change")return e}var eR=!1;if(Dr){var Pp;if(Dr){var Cp="oninput"in document;if(!Cp){var AE=document.createElement("div");AE.setAttribute("oninput","return;"),Cp=typeof AE.oninput=="function"}Pp=Cp}else Pp=!1;eR=Pp&&(!document.documentMode||9<document.documentMode)}function PE(){Bu&&(Bu.detachEvent("onpropertychange",tR),al=Bu=null)}function tR(t){if(t.propertyName==="value"&&Gh(al)){var e=[];ZS(e,al,t,by(t)),OS(VN,e)}}function LN(t,e,n){t==="focusin"?(PE(),Bu=e,al=n,Bu.attachEvent("onpropertychange",tR)):t==="focusout"&&PE()}function FN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gh(al)}function UN(t,e){if(t==="click")return Gh(e)}function BN(t,e){if(t==="input"||t==="change")return Gh(e)}function jN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:jN;function ul(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Im.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function CE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bE(t,e){var n=CE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CE(n)}}function nR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rR(){for(var t=window,e=jd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jd(t.document)}return e}function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zN(t){var e=rR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nR(n.ownerDocument.documentElement,n)){if(r!==null&&Fy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bE(n,s);var o=bE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $N=Dr&&"documentMode"in document&&11>=document.documentMode,ko=null,jm=null,ju=null,zm=!1;function kE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zm||ko==null||ko!==jd(r)||(r=ko,"selectionStart"in r&&Fy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ju&&ul(ju,r)||(ju=r,r=Hd(jm,"onSelect"),0<r.length&&(e=new Vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function Hc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xo={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},bp={},iR={};Dr&&(iR=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Hh(t){if(bp[t])return bp[t];if(!xo[t])return t;var e=xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iR)return bp[t]=e[n];return t}var sR=Hh("animationend"),oR=Hh("animationiteration"),aR=Hh("animationstart"),uR=Hh("transitionend"),lR=new Map,xE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(t,e){lR.set(t,e),Ys(e,[t])}for(var kp=0;kp<xE.length;kp++){var xp=xE[kp],qN=xp.toLowerCase(),WN=xp[0].toUpperCase()+xp.slice(1);zi(qN,"on"+WN)}zi(sR,"onAnimationEnd");zi(oR,"onAnimationIteration");zi(aR,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(uR,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function NE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qx(r,e,void 0,t),t.currentTarget=null}function cR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;NE(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;NE(i,a,c),s=u}}}if($d)throw t=Lm,$d=!1,Lm=null,t}function Me(t,e){var n=e[Gm];n===void 0&&(n=e[Gm]=new Set);var r=t+"__bubble";n.has(r)||(dR(e,t,2,!1),n.add(r))}function Np(t,e,n){var r=0;e&&(r|=4),dR(n,t,r,e)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function ll(t){if(!t[Qc]){t[Qc]=!0,_S.forEach(function(n){n!=="selectionchange"&&(KN.has(n)||Np(n,!1,t),Np(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qc]||(e[Qc]=!0,Np("selectionchange",!1,e))}}function dR(t,e,n,r){switch(HS(e)){case 1:var i=oN;break;case 4:i=aN;break;default:i=Dy}n=i.bind(null,e,n,t),i=void 0,!Mm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ys(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}OS(function(){var c=s,d=by(n),h=[];e:{var p=lR.get(t);if(p!==void 0){var y=Vy,g=t;switch(t){case"keypress":if(vd(n)===0)break e;case"keydown":case"keyup":y=IN;break;case"focusin":g="focus",y=Ap;break;case"focusout":g="blur",y=Ap;break;case"beforeblur":case"afterblur":y=Ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=wE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=RN;break;case sR:case oR:case aR:y=fN;break;case uR:y=PN;break;case"scroll":y=uN;break;case"wheel":y=bN;break;case"copy":case"cut":case"paste":y=mN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=IE}var A=(e&4)!==0,R=!A&&t==="scroll",I=A?p!==null?p+"Capture":null:p;A=[];for(var v=c,w;v!==null;){w=v;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,I!==null&&(k=rl(v,I),k!=null&&A.push(cl(v,k,w)))),R)break;v=v.return}0<A.length&&(p=new y(p,g,null,n,d),h.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==Om&&(g=n.relatedTarget||n.fromElement)&&(ys(g)||g[Or]))break e;if((y||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=c,g=g?ys(g):null,g!==null&&(R=Js(g),g!==R||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=c),y!==g)){if(A=wE,k="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=IE,k="onPointerLeave",I="onPointerEnter",v="pointer"),R=y==null?p:No(y),w=g==null?p:No(g),p=new A(k,v+"leave",y,n,d),p.target=R,p.relatedTarget=w,k=null,ys(d)===c&&(A=new A(I,v+"enter",g,n,d),A.target=w,A.relatedTarget=R,k=A),R=k,y&&g)t:{for(A=y,I=g,v=0,w=A;w;w=fo(w))v++;for(w=0,k=I;k;k=fo(k))w++;for(;0<v-w;)A=fo(A),v--;for(;0<w-v;)I=fo(I),w--;for(;v--;){if(A===I||I!==null&&A===I.alternate)break t;A=fo(A),I=fo(I)}A=null}else A=null;y!==null&&DE(h,p,y,A,!1),g!==null&&R!==null&&DE(h,R,g,A,!0)}}e:{if(p=c?No(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var V=MN;else if(RE(p))if(eR)V=BN;else{V=FN;var M=LN}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=UN);if(V&&(V=V(t,c))){ZS(h,V,n,d);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&bm(p,"number",p.value)}switch(M=c?No(c):window,t){case"focusin":(RE(M)||M.contentEditable==="true")&&(ko=M,jm=c,ju=null);break;case"focusout":ju=jm=ko=null;break;case"mousedown":zm=!0;break;case"contextmenu":case"mouseup":case"dragend":zm=!1,kE(h,n,d);break;case"selectionchange":if($N)break;case"keydown":case"keyup":kE(h,n,d)}var S;if(Ly)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else bo?JS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(YS&&n.locale!=="ko"&&(bo||_!=="onCompositionStart"?_==="onCompositionEnd"&&bo&&(S=QS()):(hi=d,Oy="value"in hi?hi.value:hi.textContent,bo=!0)),M=Hd(c,_),0<M.length&&(_=new EE(_,t,null,n,d),h.push({event:_,listeners:M}),S?_.data=S:(S=XS(n),S!==null&&(_.data=S)))),(S=xN?NN(t,n):DN(t,n))&&(c=Hd(c,"onBeforeInput"),0<c.length&&(d=new EE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=S))}cR(h,e)})}function cl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rl(t,n),s!=null&&r.unshift(cl(t,s,i)),s=rl(t,e),s!=null&&r.push(cl(t,s,i))),t=t.return}return r}function fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function DE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=rl(n,s),u!=null&&o.unshift(cl(n,u,a))):i||(u=rl(n,s),u!=null&&o.push(cl(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GN=/\r\n?/g,HN=/\u0000|\uFFFD/g;function OE(t){return(typeof t=="string"?t:""+t).replace(GN,`
`).replace(HN,"")}function Yc(t,e,n){if(e=OE(e),OE(t)!==e&&n)throw Error($(425))}function Qd(){}var $m=null,qm=null;function Wm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Km=typeof setTimeout=="function"?setTimeout:void 0,QN=typeof clearTimeout=="function"?clearTimeout:void 0,VE=typeof Promise=="function"?Promise:void 0,YN=typeof queueMicrotask=="function"?queueMicrotask:typeof VE<"u"?function(t){return VE.resolve(null).then(t).catch(JN)}:Km;function JN(t){setTimeout(function(){throw t})}function Op(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ol(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ME(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),tr="__reactFiber$"+ba,dl="__reactProps$"+ba,Or="__reactContainer$"+ba,Gm="__reactEvents$"+ba,XN="__reactListeners$"+ba,ZN="__reactHandles$"+ba;function ys(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ME(t);t!==null;){if(n=t[tr])return n;t=ME(t)}return e}t=n,n=t.parentNode}return null}function Gl(t){return t=t[tr]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function No(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Qh(t){return t[dl]||null}var Hm=[],Do=-1;function $i(t){return{current:t}}function Fe(t){0>Do||(t.current=Hm[Do],Hm[Do]=null,Do--)}function xe(t,e){Do++,Hm[Do]=t.current,t.current=e}var bi={},Ut=$i(bi),an=$i(!1),xs=bi;function ta(t,e){var n=t.type.contextTypes;if(!n)return bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function un(t){return t=t.childContextTypes,t!=null}function Yd(){Fe(an),Fe(Ut)}function LE(t,e,n){if(Ut.current!==bi)throw Error($(168));xe(Ut,e),xe(an,n)}function hR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,Lx(t)||"Unknown",i));return Ge({},n,r)}function Jd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bi,xs=Ut.current,xe(Ut,t),xe(an,an.current),!0}function FE(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=hR(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,Fe(an),Fe(Ut),xe(Ut,t)):Fe(an),xe(an,n)}var Tr=null,Yh=!1,Vp=!1;function fR(t){Tr===null?Tr=[t]:Tr.push(t)}function eD(t){Yh=!0,fR(t)}function qi(){if(!Vp&&Tr!==null){Vp=!0;var t=0,e=Ce;try{var n=Tr;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tr=null,Yh=!1}catch(i){throw Tr!==null&&(Tr=Tr.slice(t+1)),FS(ky,qi),i}finally{Ce=e,Vp=!1}}return null}var Oo=[],Vo=0,Xd=null,Zd=0,kn=[],xn=0,Ns=null,Rr=1,Ar="";function ss(t,e){Oo[Vo++]=Zd,Oo[Vo++]=Xd,Xd=t,Zd=e}function pR(t,e,n){kn[xn++]=Rr,kn[xn++]=Ar,kn[xn++]=Ns,Ns=t;var r=Rr;t=Ar;var i=32-Kn(r)-1;r&=~(1<<i),n+=1;var s=32-Kn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Rr=1<<32-Kn(e)+i|n<<i|r,Ar=s+t}else Rr=1<<s|n<<i|r,Ar=t}function Uy(t){t.return!==null&&(ss(t,1),pR(t,1,0))}function By(t){for(;t===Xd;)Xd=Oo[--Vo],Oo[Vo]=null,Zd=Oo[--Vo],Oo[Vo]=null;for(;t===Ns;)Ns=kn[--xn],kn[xn]=null,Ar=kn[--xn],kn[xn]=null,Rr=kn[--xn],kn[xn]=null}var vn=null,yn=null,Be=!1,qn=null;function mR(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function UE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,yn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ns!==null?{id:Rr,overflow:Ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,yn=null,!0):!1;default:return!1}}function Qm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ym(t){if(Be){var e=yn;if(e){var n=e;if(!UE(t,e)){if(Qm(t))throw Error($(418));e=wi(n.nextSibling);var r=vn;e&&UE(t,e)?mR(r,n):(t.flags=t.flags&-4097|2,Be=!1,vn=t)}}else{if(Qm(t))throw Error($(418));t.flags=t.flags&-4097|2,Be=!1,vn=t}}}function BE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function Jc(t){if(t!==vn)return!1;if(!Be)return BE(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wm(t.type,t.memoizedProps)),e&&(e=yn)){if(Qm(t))throw gR(),Error($(418));for(;e;)mR(t,e),e=wi(e.nextSibling)}if(BE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yn=null}}else yn=vn?wi(t.stateNode.nextSibling):null;return!0}function gR(){for(var t=yn;t;)t=wi(t.nextSibling)}function na(){yn=vn=null,Be=!1}function jy(t){qn===null?qn=[t]:qn.push(t)}var tD=$r.ReactCurrentBatchConfig;function fu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Xc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jE(t){var e=t._init;return e(t._payload)}function yR(t){function e(I,v){if(t){var w=I.deletions;w===null?(I.deletions=[v],I.flags|=16):w.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function r(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function i(I,v){return I=Si(I,v),I.index=0,I.sibling=null,I}function s(I,v,w){return I.index=w,t?(w=I.alternate,w!==null?(w=w.index,w<v?(I.flags|=2,v):w):(I.flags|=2,v)):(I.flags|=1048576,v)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,v,w,k){return v===null||v.tag!==6?(v=zp(w,I.mode,k),v.return=I,v):(v=i(v,w),v.return=I,v)}function u(I,v,w,k){var V=w.type;return V===Co?d(I,v,w.props.children,k,w.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===si&&jE(V)===v.type)?(k=i(v,w.props),k.ref=fu(I,v,w),k.return=I,k):(k=Ad(w.type,w.key,w.props,null,I.mode,k),k.ref=fu(I,v,w),k.return=I,k)}function c(I,v,w,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=$p(w,I.mode,k),v.return=I,v):(v=i(v,w.children||[]),v.return=I,v)}function d(I,v,w,k,V){return v===null||v.tag!==7?(v=Rs(w,I.mode,k,V),v.return=I,v):(v=i(v,w),v.return=I,v)}function h(I,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=zp(""+v,I.mode,w),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jc:return w=Ad(v.type,v.key,v.props,null,I.mode,w),w.ref=fu(I,null,v),w.return=I,w;case Po:return v=$p(v,I.mode,w),v.return=I,v;case si:var k=v._init;return h(I,k(v._payload),w)}if(Au(v)||uu(v))return v=Rs(v,I.mode,w,null),v.return=I,v;Xc(I,v)}return null}function p(I,v,w,k){var V=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(I,v,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jc:return w.key===V?u(I,v,w,k):null;case Po:return w.key===V?c(I,v,w,k):null;case si:return V=w._init,p(I,v,V(w._payload),k)}if(Au(w)||uu(w))return V!==null?null:d(I,v,w,k,null);Xc(I,w)}return null}function y(I,v,w,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return I=I.get(w)||null,a(v,I,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case jc:return I=I.get(k.key===null?w:k.key)||null,u(v,I,k,V);case Po:return I=I.get(k.key===null?w:k.key)||null,c(v,I,k,V);case si:var M=k._init;return y(I,v,w,M(k._payload),V)}if(Au(k)||uu(k))return I=I.get(w)||null,d(v,I,k,V,null);Xc(v,k)}return null}function g(I,v,w,k){for(var V=null,M=null,S=v,_=v=0,C=null;S!==null&&_<w.length;_++){S.index>_?(C=S,S=null):C=S.sibling;var b=p(I,S,w[_],k);if(b===null){S===null&&(S=C);break}t&&S&&b.alternate===null&&e(I,S),v=s(b,v,_),M===null?V=b:M.sibling=b,M=b,S=C}if(_===w.length)return n(I,S),Be&&ss(I,_),V;if(S===null){for(;_<w.length;_++)S=h(I,w[_],k),S!==null&&(v=s(S,v,_),M===null?V=S:M.sibling=S,M=S);return Be&&ss(I,_),V}for(S=r(I,S);_<w.length;_++)C=y(S,I,_,w[_],k),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?_:C.key),v=s(C,v,_),M===null?V=C:M.sibling=C,M=C);return t&&S.forEach(function(x){return e(I,x)}),Be&&ss(I,_),V}function A(I,v,w,k){var V=uu(w);if(typeof V!="function")throw Error($(150));if(w=V.call(w),w==null)throw Error($(151));for(var M=V=null,S=v,_=v=0,C=null,b=w.next();S!==null&&!b.done;_++,b=w.next()){S.index>_?(C=S,S=null):C=S.sibling;var x=p(I,S,b.value,k);if(x===null){S===null&&(S=C);break}t&&S&&x.alternate===null&&e(I,S),v=s(x,v,_),M===null?V=x:M.sibling=x,M=x,S=C}if(b.done)return n(I,S),Be&&ss(I,_),V;if(S===null){for(;!b.done;_++,b=w.next())b=h(I,b.value,k),b!==null&&(v=s(b,v,_),M===null?V=b:M.sibling=b,M=b);return Be&&ss(I,_),V}for(S=r(I,S);!b.done;_++,b=w.next())b=y(S,I,_,b.value,k),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?_:b.key),v=s(b,v,_),M===null?V=b:M.sibling=b,M=b);return t&&S.forEach(function(P){return e(I,P)}),Be&&ss(I,_),V}function R(I,v,w,k){if(typeof w=="object"&&w!==null&&w.type===Co&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case jc:e:{for(var V=w.key,M=v;M!==null;){if(M.key===V){if(V=w.type,V===Co){if(M.tag===7){n(I,M.sibling),v=i(M,w.props.children),v.return=I,I=v;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===si&&jE(V)===M.type){n(I,M.sibling),v=i(M,w.props),v.ref=fu(I,M,w),v.return=I,I=v;break e}n(I,M);break}else e(I,M);M=M.sibling}w.type===Co?(v=Rs(w.props.children,I.mode,k,w.key),v.return=I,I=v):(k=Ad(w.type,w.key,w.props,null,I.mode,k),k.ref=fu(I,v,w),k.return=I,I=k)}return o(I);case Po:e:{for(M=w.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(I,v.sibling),v=i(v,w.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=$p(w,I.mode,k),v.return=I,I=v}return o(I);case si:return M=w._init,R(I,v,M(w._payload),k)}if(Au(w))return g(I,v,w,k);if(uu(w))return A(I,v,w,k);Xc(I,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(I,v.sibling),v=i(v,w),v.return=I,I=v):(n(I,v),v=zp(w,I.mode,k),v.return=I,I=v),o(I)):n(I,v)}return R}var ra=yR(!0),_R=yR(!1),eh=$i(null),th=null,Mo=null,zy=null;function $y(){zy=Mo=th=null}function qy(t){var e=eh.current;Fe(eh),t._currentValue=e}function Jm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){th=t,zy=Mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(zy!==t)if(t={context:t,memoizedValue:e,next:null},Mo===null){if(th===null)throw Error($(308));Mo=t,th.dependencies={lanes:0,firstContext:t}}else Mo=Mo.next=t;return e}var _s=null;function Wy(t){_s===null?_s=[t]:_s.push(t)}function vR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Wy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vr(t,r)}function Vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oi=!1;function Ky(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vr(t,n)}return i=r.interleaved,i===null?(e.next=e,Wy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vr(t,n)}function wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xy(t,n)}}function zE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nh(t,e,n,r){var i=t.updateQueue;oi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,d=c=u=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,A=a;switch(p=e,y=n,A.tag){case 1:if(g=A.payload,typeof g=="function"){h=g.call(y,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=A.payload,p=typeof g=="function"?g.call(y,h,p):g,p==null)break e;h=Ge({},h,p);break e;case 2:oi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,u=h):d=d.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=h}}function $E(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Hl={},dr=$i(Hl),hl=$i(Hl),fl=$i(Hl);function vs(t){if(t===Hl)throw Error($(174));return t}function Gy(t,e){switch(xe(fl,e),xe(hl,t),xe(dr,Hl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xm(e,t)}Fe(dr),xe(dr,e)}function ia(){Fe(dr),Fe(hl),Fe(fl)}function ER(t){vs(fl.current);var e=vs(dr.current),n=xm(e,t.type);e!==n&&(xe(hl,t),xe(dr,n))}function Hy(t){hl.current===t&&(Fe(dr),Fe(hl))}var qe=$i(0);function rh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mp=[];function Qy(){for(var t=0;t<Mp.length;t++)Mp[t]._workInProgressVersionPrimary=null;Mp.length=0}var Ed=$r.ReactCurrentDispatcher,Lp=$r.ReactCurrentBatchConfig,Ds=0,We=null,ft=null,wt=null,ih=!1,zu=!1,pl=0,nD=0;function Vt(){throw Error($(321))}function Yy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Jy(t,e,n,r,i,s){if(Ds=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?oD:aD,t=n(r,i),zu){s=0;do{if(zu=!1,pl=0,25<=s)throw Error($(301));s+=1,wt=ft=null,e.updateQueue=null,Ed.current=uD,t=n(r,i)}while(zu)}if(Ed.current=sh,e=ft!==null&&ft.next!==null,Ds=0,wt=ft=We=null,ih=!1,e)throw Error($(300));return t}function Xy(){var t=pl!==0;return pl=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?We.memoizedState=wt=t:wt=wt.next=t,wt}function Fn(){if(ft===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=wt===null?We.memoizedState:wt.next;if(e!==null)wt=e,ft=t;else{if(t===null)throw Error($(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},wt===null?We.memoizedState=wt=t:wt=wt.next=t}return wt}function ml(t,e){return typeof e=="function"?e(t):e}function Fp(t){var e=Fn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((Ds&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,o=r):u=u.next=h,We.lanes|=d,Os|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Hn(r,e.memoizedState)||(nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,Os|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Up(t){var e=Fn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hn(s,e.memoizedState)||(nn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function IR(){}function TR(t,e){var n=We,r=Fn(),i=e(),s=!Hn(r.memoizedState,i);if(s&&(r.memoizedState=i,nn=!0),r=r.queue,Zy(AR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,gl(9,RR.bind(null,n,r,i,e),void 0,null),It===null)throw Error($(349));Ds&30||SR(n,e,i)}return i}function SR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function RR(t,e,n,r){e.value=n,e.getSnapshot=r,PR(e)&&CR(t)}function AR(t,e,n){return n(function(){PR(e)&&CR(t)})}function PR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function CR(t){var e=Vr(t,1);e!==null&&Gn(e,t,1,-1)}function qE(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:t},e.queue=t,t=t.dispatch=sD.bind(null,We,t),[e.memoizedState,t]}function gl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bR(){return Fn().memoizedState}function Id(t,e,n,r){var i=er();We.flags|=t,i.memoizedState=gl(1|e,n,void 0,r===void 0?null:r)}function Jh(t,e,n,r){var i=Fn();r=r===void 0?null:r;var s=void 0;if(ft!==null){var o=ft.memoizedState;if(s=o.destroy,r!==null&&Yy(r,o.deps)){i.memoizedState=gl(e,n,s,r);return}}We.flags|=t,i.memoizedState=gl(1|e,n,s,r)}function WE(t,e){return Id(8390656,8,t,e)}function Zy(t,e){return Jh(2048,8,t,e)}function kR(t,e){return Jh(4,2,t,e)}function xR(t,e){return Jh(4,4,t,e)}function NR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DR(t,e,n){return n=n!=null?n.concat([t]):null,Jh(4,4,NR.bind(null,e,t),n)}function e_(){}function OR(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VR(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MR(t,e,n){return Ds&21?(Hn(n,e)||(n=jS(),We.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function rD(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Lp.transition;Lp.transition={};try{t(!1),e()}finally{Ce=n,Lp.transition=r}}function LR(){return Fn().memoizedState}function iD(t,e,n){var r=Ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FR(t))UR(e,n);else if(n=vR(t,e,n,r),n!==null){var i=Kt();Gn(n,t,r,i),BR(n,e,r)}}function sD(t,e,n){var r=Ti(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FR(t))UR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var u=e.interleaved;u===null?(i.next=i,Wy(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=vR(t,e,i,r),n!==null&&(i=Kt(),Gn(n,t,r,i),BR(n,e,r))}}function FR(t){var e=t.alternate;return t===We||e!==null&&e===We}function UR(t,e){zu=ih=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xy(t,n)}}var sh={readContext:Ln,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},oD={readContext:Ln,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:WE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Id(4194308,4,NR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Id(4194308,4,t,e)},useInsertionEffect:function(t,e){return Id(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iD.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:qE,useDebugValue:e_,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=qE(!1),e=t[0];return t=rD.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=er();if(Be){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),It===null)throw Error($(349));Ds&30||SR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,WE(AR.bind(null,r,s,t),[t]),r.flags|=2048,gl(9,RR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=er(),e=It.identifierPrefix;if(Be){var n=Ar,r=Rr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aD={readContext:Ln,useCallback:OR,useContext:Ln,useEffect:Zy,useImperativeHandle:DR,useInsertionEffect:kR,useLayoutEffect:xR,useMemo:VR,useReducer:Fp,useRef:bR,useState:function(){return Fp(ml)},useDebugValue:e_,useDeferredValue:function(t){var e=Fn();return MR(e,ft.memoizedState,t)},useTransition:function(){var t=Fp(ml)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:TR,useId:LR,unstable_isNewReconciler:!1},uD={readContext:Ln,useCallback:OR,useContext:Ln,useEffect:Zy,useImperativeHandle:DR,useInsertionEffect:kR,useLayoutEffect:xR,useMemo:VR,useReducer:Up,useRef:bR,useState:function(){return Up(ml)},useDebugValue:e_,useDeferredValue:function(t){var e=Fn();return ft===null?e.memoizedState=t:MR(e,ft.memoizedState,t)},useTransition:function(){var t=Up(ml)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:IR,useSyncExternalStore:TR,useId:LR,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xh={isMounted:function(t){return(t=t._reactInternals)?Js(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Ti(t),s=xr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Gn(e,t,i,r),wd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),i=Ti(t),s=xr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ei(t,s,i),e!==null&&(Gn(e,t,i,r),wd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=Ti(t),i=xr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ei(t,i,r),e!==null&&(Gn(e,t,r,n),wd(e,t,r))}};function KE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ul(n,r)||!ul(i,s):!0}function jR(t,e,n){var r=!1,i=bi,s=e.contextType;return typeof s=="object"&&s!==null?s=Ln(s):(i=un(e)?xs:Ut.current,r=e.contextTypes,s=(r=r!=null)?ta(t,i):bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function GE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Xh.enqueueReplaceState(e,e.state,null)}function Zm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ky(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ln(s):(s=un(e)?xs:Ut.current,i.context=ta(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xh.enqueueReplaceState(i,i.state,null),nh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=Mx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lD=typeof WeakMap=="function"?WeakMap:Map;function zR(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ah||(ah=!0,cg=r),eg(t,e)},n}function $R(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){eg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eg(t,e),typeof r!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function HE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=TD.bind(null,t,e,n),e.then(t,t))}function QE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function YE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,Ei(n,e,1))),n.lanes|=1),t)}var cD=$r.ReactCurrentOwner,nn=!1;function $t(t,e,n,r){e.child=t===null?_R(e,null,n,r):ra(e,t.child,n,r)}function JE(t,e,n,r,i){n=n.render;var s=e.ref;return Ko(e,i),r=Jy(t,e,n,r,s,i),n=Xy(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Be&&n&&Uy(e),e.flags|=1,$t(t,e,r,i),e.child)}function XE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!u_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qR(t,e,s,r,i)):(t=Ad(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ul,n(o,r)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=Si(s,r),t.ref=e.ref,t.return=e,e.child=t}function qR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ul(s,r)&&t.ref===e.ref)if(nn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return tg(t,e,n,r,i)}function WR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Fo,mn),mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Fo,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Fo,mn),mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(Fo,mn),mn|=r;return $t(t,e,i,n),e.child}function KR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tg(t,e,n,r,i){var s=un(n)?xs:Ut.current;return s=ta(e,s),Ko(e,i),n=Jy(t,e,n,r,s,i),r=Xy(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Be&&r&&Uy(e),e.flags|=1,$t(t,e,n,i),e.child)}function ZE(t,e,n,r,i){if(un(n)){var s=!0;Jd(e)}else s=!1;if(Ko(e,i),e.stateNode===null)Td(t,e),jR(e,n,r),Zm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=un(n)?xs:Ut.current,c=ta(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&GE(e,o,r,c),oi=!1;var p=e.memoizedState;o.state=p,nh(e,r,o,i),u=e.memoizedState,a!==r||p!==u||an.current||oi?(typeof d=="function"&&(Xm(e,n,d,r),u=e.memoizedState),(a=oi||KE(e,n,a,r,p,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:zn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ln(u):(u=un(n)?xs:Ut.current,u=ta(e,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==u)&&GE(e,o,r,u),oi=!1,p=e.memoizedState,o.state=p,nh(e,r,o,i);var g=e.memoizedState;a!==h||p!==g||an.current||oi?(typeof y=="function"&&(Xm(e,n,y,r),g=e.memoizedState),(c=oi||KE(e,n,c,r,p,g,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ng(t,e,n,r,s,i)}function ng(t,e,n,r,i,s){KR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&FE(e,n,!1),Mr(t,e,s);r=e.stateNode,cD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ra(e,t.child,null,s),e.child=ra(e,null,a,s)):$t(t,e,a,s),e.memoizedState=r.state,i&&FE(e,n,!0),e.child}function GR(t){var e=t.stateNode;e.pendingContext?LE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&LE(t,e.context,!1),Gy(t,e.containerInfo)}function eI(t,e,n,r,i){return na(),jy(i),e.flags|=256,$t(t,e,n,r),e.child}var rg={dehydrated:null,treeContext:null,retryLane:0};function ig(t){return{baseLanes:t,cachePool:null,transitions:null}}function HR(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(qe,i&1),t===null)return Ym(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tf(o,r,0,null),t=Rs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ig(n),e.memoizedState=rg,t):t_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Si(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Si(a,s):(s=Rs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ig(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rg,r}return s=t.child,t=s.sibling,r=Si(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function t_(t,e){return e=tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zc(t,e,n,r){return r!==null&&jy(r),ra(e,t.child,null,n),t=t_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Bp(Error($(422))),Zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tf({mode:"visible",children:r.children},i,0,null),s=Rs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ra(e,t.child,null,o),e.child.memoizedState=ig(o),e.memoizedState=rg,s);if(!(e.mode&1))return Zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Bp(s,r,void 0),Zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,nn||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vr(t,i),Gn(r,t,i,-1))}return a_(),r=Bp(Error($(421))),Zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=SD.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yn=wi(i.nextSibling),vn=e,Be=!0,qn=null,t!==null&&(kn[xn++]=Rr,kn[xn++]=Ar,kn[xn++]=Ns,Rr=t.id,Ar=t.overflow,Ns=e),e=t_(e,r.children),e.flags|=4096,e)}function tI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jm(t.return,e,n)}function jp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tI(t,n,e);else if(t.tag===19)tI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jp(e,!0,n,null,s);break;case"together":jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hD(t,e,n){switch(e.tag){case 3:GR(e),na();break;case 5:ER(e);break;case 1:un(e.type)&&Jd(e);break;case 4:Gy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(eh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?HR(t,e,n):(xe(qe,qe.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);xe(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,WR(t,e,n)}return Mr(t,e,n)}var YR,sg,JR,XR;YR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sg=function(){};JR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vs(dr.current);var s=null;switch(n){case"input":i=Pm(t,i),r=Pm(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=km(t,i),r=km(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qd)}Nm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};XR=function(t,e,n,r){n!==r&&(e.flags|=4)};function pu(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fD(t,e,n){var r=e.pendingProps;switch(By(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return un(e.type)&&Yd(),Mt(e),null;case 3:return r=e.stateNode,ia(),Fe(an),Fe(Ut),Qy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(fg(qn),qn=null))),sg(t,e),Mt(e),null;case 5:Hy(e);var i=vs(fl.current);if(n=e.type,t!==null&&e.stateNode!=null)JR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Mt(e),null}if(t=vs(dr.current),Jc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tr]=e,r[dl]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<Cu.length;i++)Me(Cu[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":cE(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":hE(r,s),Me("invalid",r)}Nm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yc(r.textContent,a,t),i=["children",""+a]):tl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":zc(r),dE(r,s,!0);break;case"textarea":zc(r),fE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Qd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tr]=e,t[dl]=r,YR(t,e,!1,!1),e.stateNode=t;e:{switch(o=Dm(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<Cu.length;i++)Me(Cu[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":cE(t,r),i=Pm(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Me("invalid",t);break;case"textarea":hE(t,r),i=km(t,r),Me("invalid",t);break;default:i=r}Nm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?bS(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&PS(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&nl(t,u):typeof u=="number"&&nl(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Me("scroll",t):u!=null&&Ry(t,s,u,o))}switch(n){case"input":zc(t),dE(t,r,!1);break;case"textarea":zc(t),fE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ci(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zo(t,!!r.multiple,s,!1):r.defaultValue!=null&&zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)XR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=vs(fl.current),vs(dr.current),Jc(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(s=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:Yc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Fe(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&yn!==null&&e.mode&1&&!(e.flags&128))gR(),na(),e.flags|=98560,s=!1;else if(s=Jc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[tr]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),s=!1}else qn!==null&&(fg(qn),qn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?pt===0&&(pt=3):a_())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return ia(),sg(t,e),t===null&&ll(e.stateNode.containerInfo),Mt(e),null;case 10:return qy(e.type._context),Mt(e),null;case 17:return un(e.type)&&Yd(),Mt(e),null;case 19:if(Fe(qe),s=e.memoizedState,s===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pu(s,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rh(t),o!==null){for(e.flags|=128,pu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&rt()>oa&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304)}else{if(!r)if(t=rh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return Mt(e),null}else 2*rt()-s.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,r=!0,pu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,n=qe.current,xe(qe,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return o_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function pD(t,e){switch(By(e),e.tag){case 1:return un(e.type)&&Yd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),Fe(an),Fe(Ut),Qy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hy(e),null;case 13:if(Fe(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(qe),null;case 4:return ia(),null;case 10:return qy(e.type._context),null;case 22:case 23:return o_(),null;case 24:return null;default:return null}}var ed=!1,Ft=!1,mD=typeof WeakSet=="function"?WeakSet:Set,X=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function og(t,e,n){try{n()}catch(r){Je(t,e,r)}}var nI=!1;function gD(t,e){if($m=Kd,t=rR(),Fy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(u=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(u=o),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qm={focusedElem:t,selectionRange:n},Kd=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var A=g.memoizedProps,R=g.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:zn(e.type,A),R);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){Je(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return g=nI,nI=!1,g}function $u(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&og(e,n,s)}i=i.next}while(i!==r)}}function Zh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ag(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZR(t){var e=t.alternate;e!==null&&(t.alternate=null,ZR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[dl],delete e[Gm],delete e[XN],delete e[ZN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eA(t){return t.tag===5||t.tag===3||t.tag===4}function rI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ug(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qd));else if(r!==4&&(t=t.child,t!==null))for(ug(t,e,n),t=t.sibling;t!==null;)ug(t,e,n),t=t.sibling}function lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var Pt=null,$n=!1;function Zr(t,e,n){for(n=n.child;n!==null;)tA(t,e,n),n=n.sibling}function tA(t,e,n){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Wh,n)}catch{}switch(n.tag){case 5:Ft||Lo(n,e);case 6:var r=Pt,i=$n;Pt=null,Zr(t,e,n),Pt=r,$n=i,Pt!==null&&($n?(t=Pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&($n?(t=Pt,n=n.stateNode,t.nodeType===8?Op(t.parentNode,n):t.nodeType===1&&Op(t,n),ol(t)):Op(Pt,n.stateNode));break;case 4:r=Pt,i=$n,Pt=n.stateNode.containerInfo,$n=!0,Zr(t,e,n),Pt=r,$n=i;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&og(n,e,o),i=i.next}while(i!==r)}Zr(t,e,n);break;case 1:if(!Ft&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,Zr(t,e,n),Ft=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function iI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mD),e.forEach(function(r){var i=RD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,$n=!1;break e;case 3:Pt=a.stateNode.containerInfo,$n=!0;break e;case 4:Pt=a.stateNode.containerInfo,$n=!0;break e}a=a.return}if(Pt===null)throw Error($(160));tA(s,o,i),Pt=null,$n=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Je(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nA(e,t),e=e.sibling}function nA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jn(e,t),Zn(t),r&4){try{$u(3,t,t.return),Zh(3,t)}catch(A){Je(t,t.return,A)}try{$u(5,t,t.return)}catch(A){Je(t,t.return,A)}}break;case 1:jn(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(jn(e,t),Zn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{nl(i,"")}catch(A){Je(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&SS(i,s),Dm(a,o);var c=Dm(a,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?bS(i,h):d==="dangerouslySetInnerHTML"?PS(i,h):d==="children"?nl(i,h):Ry(i,d,h,c)}switch(a){case"input":Cm(i,s);break;case"textarea":RS(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?zo(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?zo(i,!!s.multiple,s.defaultValue,!0):zo(i,!!s.multiple,s.multiple?[]:"",!1))}i[dl]=s}catch(A){Je(t,t.return,A)}}break;case 6:if(jn(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Je(t,t.return,A)}}break;case 3:if(jn(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ol(e.containerInfo)}catch(A){Je(t,t.return,A)}break;case 4:jn(e,t),Zn(t);break;case 13:jn(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(i_=rt())),r&4&&iI(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(c=Ft)||d,jn(e,t),Ft=c):jn(e,t),Zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(p=X,y=p.child,p.tag){case 0:case 11:case 14:case 15:$u(4,p,p.return);break;case 1:Lo(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(A){Je(r,n,A)}}break;case 5:Lo(p,p.return);break;case 22:if(p.memoizedState!==null){oI(h);continue}}y!==null?(y.return=p,X=y):oI(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=CS("display",o))}catch(A){Je(t,t.return,A)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(A){Je(t,t.return,A)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:jn(e,t),Zn(t),r&4&&iI(t);break;case 21:break;default:jn(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eA(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nl(i,""),r.flags&=-33);var s=rI(t);lg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=rI(t);ug(t,a,o);break;default:throw Error($(161))}}catch(u){Je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yD(t,e,n){X=t,rA(t)}function rA(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ed;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ft;a=ed;var c=Ft;if(ed=o,(Ft=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?aI(i):u!==null?(u.return=o,X=u):aI(i);for(;s!==null;)X=s,rA(s),s=s.sibling;X=i,ed=a,Ft=c}sI(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):sI(t)}}function sI(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||Zh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$E(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$E(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ol(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ft||e.flags&512&&ag(e)}catch(p){Je(e,e.return,p)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function oI(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function aI(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zh(4,e)}catch(u){Je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Je(e,i,u)}}var s=e.return;try{ag(e)}catch(u){Je(e,s,u)}break;case 5:var o=e.return;try{ag(e)}catch(u){Je(e,o,u)}}}catch(u){Je(e,e.return,u)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var _D=Math.ceil,oh=$r.ReactCurrentDispatcher,n_=$r.ReactCurrentOwner,On=$r.ReactCurrentBatchConfig,Ie=0,It=null,ct=null,kt=0,mn=0,Fo=$i(0),pt=0,yl=null,Os=0,ef=0,r_=0,qu=null,tn=null,i_=0,oa=1/0,Ir=null,ah=!1,cg=null,Ii=null,td=!1,fi=null,uh=0,Wu=0,dg=null,Sd=-1,Rd=0;function Kt(){return Ie&6?rt():Sd!==-1?Sd:Sd=rt()}function Ti(t){return t.mode&1?Ie&2&&kt!==0?kt&-kt:tD.transition!==null?(Rd===0&&(Rd=jS()),Rd):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:HS(t.type)),t):1}function Gn(t,e,n,r){if(50<Wu)throw Wu=0,dg=null,Error($(185));Wl(t,n,r),(!(Ie&2)||t!==It)&&(t===It&&(!(Ie&2)&&(ef|=n),pt===4&&li(t,kt)),ln(t,r),n===1&&Ie===0&&!(e.mode&1)&&(oa=rt()+500,Yh&&qi()))}function ln(t,e){var n=t.callbackNode;tN(t,e);var r=Wd(t,t===It?kt:0);if(r===0)n!==null&&gE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gE(n),e===1)t.tag===0?eD(uI.bind(null,t)):fR(uI.bind(null,t)),YN(function(){!(Ie&6)&&qi()}),n=null;else{switch(zS(r)){case 1:n=ky;break;case 4:n=US;break;case 16:n=qd;break;case 536870912:n=BS;break;default:n=qd}n=dA(n,iA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iA(t,e){if(Sd=-1,Rd=0,Ie&6)throw Error($(327));var n=t.callbackNode;if(Go()&&t.callbackNode!==n)return null;var r=Wd(t,t===It?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lh(t,r);else{e=r;var i=Ie;Ie|=2;var s=oA();(It!==t||kt!==e)&&(Ir=null,oa=rt()+500,Ss(t,e));do try{ED();break}catch(a){sA(t,a)}while(!0);$y(),oh.current=s,Ie=i,ct!==null?e=0:(It=null,kt=0,e=pt)}if(e!==0){if(e===2&&(i=Fm(t),i!==0&&(r=i,e=hg(t,i))),e===1)throw n=yl,Ss(t,0),li(t,r),ln(t,rt()),n;if(e===6)li(t,r);else{if(i=t.current.alternate,!(r&30)&&!vD(i)&&(e=lh(t,r),e===2&&(s=Fm(t),s!==0&&(r=s,e=hg(t,s))),e===1))throw n=yl,Ss(t,0),li(t,r),ln(t,rt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:os(t,tn,Ir);break;case 3:if(li(t,r),(r&130023424)===r&&(e=i_+500-rt(),10<e)){if(Wd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Km(os.bind(null,t,tn,Ir),e);break}os(t,tn,Ir);break;case 4:if(li(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Kn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_D(r/1960))-r,10<r){t.timeoutHandle=Km(os.bind(null,t,tn,Ir),r);break}os(t,tn,Ir);break;case 5:os(t,tn,Ir);break;default:throw Error($(329))}}}return ln(t,rt()),t.callbackNode===n?iA.bind(null,t):null}function hg(t,e){var n=qu;return t.current.memoizedState.isDehydrated&&(Ss(t,e).flags|=256),t=lh(t,e),t!==2&&(e=tn,tn=n,e!==null&&fg(e)),t}function fg(t){tn===null?tn=t:tn.push.apply(tn,t)}function vD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function li(t,e){for(e&=~r_,e&=~ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function uI(t){if(Ie&6)throw Error($(327));Go();var e=Wd(t,0);if(!(e&1))return ln(t,rt()),null;var n=lh(t,e);if(t.tag!==0&&n===2){var r=Fm(t);r!==0&&(e=r,n=hg(t,r))}if(n===1)throw n=yl,Ss(t,0),li(t,e),ln(t,rt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,tn,Ir),ln(t,rt()),null}function s_(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(oa=rt()+500,Yh&&qi())}}function Vs(t){fi!==null&&fi.tag===0&&!(Ie&6)&&Go();var e=Ie;Ie|=1;var n=On.transition,r=Ce;try{if(On.transition=null,Ce=1,t)return t()}finally{Ce=r,On.transition=n,Ie=e,!(Ie&6)&&qi()}}function o_(){mn=Fo.current,Fe(Fo)}function Ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QN(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(By(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yd();break;case 3:ia(),Fe(an),Fe(Ut),Qy();break;case 5:Hy(r);break;case 4:ia();break;case 13:Fe(qe);break;case 19:Fe(qe);break;case 10:qy(r.type._context);break;case 22:case 23:o_()}n=n.return}if(It=t,ct=t=Si(t.current,null),kt=mn=e,pt=0,yl=null,r_=ef=Os=0,tn=qu=null,_s!==null){for(e=0;e<_s.length;e++)if(n=_s[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_s=null}return t}function sA(t,e){do{var n=ct;try{if($y(),Ed.current=sh,ih){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ih=!1}if(Ds=0,wt=ft=We=null,zu=!1,pl=0,n_.current=null,n===null||n.return===null){pt=1,yl=e,ct=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=kt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=QE(o);if(y!==null){y.flags&=-257,YE(y,o,a,s,e),y.mode&1&&HE(s,c,e),e=y,u=c;var g=e.updateQueue;if(g===null){var A=new Set;A.add(u),e.updateQueue=A}else g.add(u);break e}else{if(!(e&1)){HE(s,c,e),a_();break e}u=Error($(426))}}else if(Be&&a.mode&1){var R=QE(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),YE(R,o,a,s,e),jy(sa(u,a));break e}}s=u=sa(u,a),pt!==4&&(pt=2),qu===null?qu=[s]:qu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=zR(s,u,e);zE(s,I);break e;case 1:a=u;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ii===null||!Ii.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=$R(s,a,e);zE(s,k);break e}}s=s.return}while(s!==null)}uA(n)}catch(V){e=V,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function oA(){var t=oh.current;return oh.current=sh,t===null?sh:t}function a_(){(pt===0||pt===3||pt===2)&&(pt=4),It===null||!(Os&268435455)&&!(ef&268435455)||li(It,kt)}function lh(t,e){var n=Ie;Ie|=2;var r=oA();(It!==t||kt!==e)&&(Ir=null,Ss(t,e));do try{wD();break}catch(i){sA(t,i)}while(!0);if($y(),Ie=n,oh.current=r,ct!==null)throw Error($(261));return It=null,kt=0,pt}function wD(){for(;ct!==null;)aA(ct)}function ED(){for(;ct!==null&&!Kx();)aA(ct)}function aA(t){var e=cA(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?uA(t):ct=e,n_.current=null}function uA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pD(n,e),n!==null){n.flags&=32767,ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,ct=null;return}}else if(n=fD(n,e,mn),n!==null){ct=n;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=t}while(e!==null);pt===0&&(pt=5)}function os(t,e,n){var r=Ce,i=On.transition;try{On.transition=null,Ce=1,ID(t,e,n,r)}finally{On.transition=i,Ce=r}return null}function ID(t,e,n,r){do Go();while(fi!==null);if(Ie&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nN(t,s),t===It&&(ct=It=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||td||(td=!0,dA(qd,function(){return Go(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=On.transition,On.transition=null;var o=Ce;Ce=1;var a=Ie;Ie|=4,n_.current=null,gD(t,n),nA(n,t),zN(qm),Kd=!!$m,qm=$m=null,t.current=n,yD(n),Gx(),Ie=a,Ce=o,On.transition=s}else t.current=n;if(td&&(td=!1,fi=t,uh=i),s=t.pendingLanes,s===0&&(Ii=null),Yx(n.stateNode),ln(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ah)throw ah=!1,t=cg,cg=null,t;return uh&1&&t.tag!==0&&Go(),s=t.pendingLanes,s&1?t===dg?Wu++:(Wu=0,dg=t):Wu=0,qi(),null}function Go(){if(fi!==null){var t=zS(uh),e=On.transition,n=Ce;try{if(On.transition=null,Ce=16>t?16:t,fi===null)var r=!1;else{if(t=fi,fi=null,uh=0,Ie&6)throw Error($(331));var i=Ie;for(Ie|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:$u(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var p=d.sibling,y=d.return;if(ZR(d),d===c){X=null;break}if(p!==null){p.return=y,X=p;break}X=y}}}var g=s.alternate;if(g!==null){var A=g.child;if(A!==null){g.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$u(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,X=I;break e}X=s.return}}var v=t.current;for(X=v;X!==null;){o=X;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,X=w;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zh(9,a)}}catch(V){Je(a,a.return,V)}if(a===o){X=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,X=k;break e}X=a.return}}if(Ie=i,qi(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Wh,t)}catch{}r=!0}return r}finally{Ce=n,On.transition=e}}return!1}function lI(t,e,n){e=sa(n,e),e=zR(t,e,1),t=Ei(t,e,1),e=Kt(),t!==null&&(Wl(t,1,e),ln(t,e))}function Je(t,e,n){if(t.tag===3)lI(t,t,n);else for(;e!==null;){if(e.tag===3){lI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ii===null||!Ii.has(r))){t=sa(n,t),t=$R(e,t,1),e=Ei(e,t,1),t=Kt(),e!==null&&(Wl(e,1,t),ln(e,t));break}}e=e.return}}function TD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(kt&n)===n&&(pt===4||pt===3&&(kt&130023424)===kt&&500>rt()-i_?Ss(t,0):r_|=n),ln(t,e)}function lA(t,e){e===0&&(t.mode&1?(e=Wc,Wc<<=1,!(Wc&130023424)&&(Wc=4194304)):e=1);var n=Kt();t=Vr(t,e),t!==null&&(Wl(t,e,n),ln(t,n))}function SD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lA(t,n)}function RD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),lA(t,n)}var cA;cA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,hD(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Be&&e.flags&1048576&&pR(e,Zd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Td(t,e),t=e.pendingProps;var i=ta(e,Ut.current);Ko(e,n),i=Jy(null,e,r,t,i,n);var s=Xy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,un(r)?(s=!0,Jd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ky(e),i.updater=Xh,e.stateNode=i,i._reactInternals=e,Zm(e,r,t,n),e=ng(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&Uy(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=PD(r),t=zn(r,t),i){case 0:e=tg(null,e,r,t,n);break e;case 1:e=ZE(null,e,r,t,n);break e;case 11:e=JE(null,e,r,t,n);break e;case 14:e=XE(null,e,r,zn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),tg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),ZE(t,e,r,i,n);case 3:e:{if(GR(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wR(t,e),nh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sa(Error($(423)),e),e=eI(t,e,r,n,i);break e}else if(r!==i){i=sa(Error($(424)),e),e=eI(t,e,r,n,i);break e}else for(yn=wi(e.stateNode.containerInfo.firstChild),vn=e,Be=!0,qn=null,n=_R(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),r===i){e=Mr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return ER(e),t===null&&Ym(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wm(r,i)?o=null:s!==null&&Wm(r,s)&&(e.flags|=32),KR(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Ym(e),null;case 13:return HR(t,e,n);case 4:return Gy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ra(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),JE(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(eh,r._currentValue),r._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!an.current){e=Mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=xr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Jm(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ko(e,n),i=Ln(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=zn(r,e.pendingProps),i=zn(r.type,i),XE(t,e,r,i,n);case 15:return qR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),Td(t,e),e.tag=1,un(r)?(t=!0,Jd(e)):t=!1,Ko(e,n),jR(e,r,i),Zm(e,r,i,n),ng(null,e,r,!0,t,n);case 19:return QR(t,e,n);case 22:return WR(t,e,n)}throw Error($(156,e.tag))};function dA(t,e){return FS(t,e)}function AD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new AD(t,e,n,r)}function u_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PD(t){if(typeof t=="function")return u_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Py)return 11;if(t===Cy)return 14}return 2}function Si(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ad(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")u_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Co:return Rs(n.children,i,s,e);case Ay:o=8,i|=8;break;case Tm:return t=Nn(12,n,e,i|2),t.elementType=Tm,t.lanes=s,t;case Sm:return t=Nn(13,n,e,i),t.elementType=Sm,t.lanes=s,t;case Rm:return t=Nn(19,n,e,i),t.elementType=Rm,t.lanes=s,t;case ES:return tf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vS:o=10;break e;case wS:o=9;break e;case Py:o=11;break e;case Cy:o=14;break e;case si:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Rs(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function tf(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=ES,t.lanes=n,t.stateNode={isHidden:!1},t}function zp(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function $p(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function l_(t,e,n,r,i,s,o,a,u){return t=new CD(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ky(s),t}function bD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Po,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hA(t){if(!t)return bi;t=t._reactInternals;e:{if(Js(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(un(n))return hR(t,n,e)}return e}function fA(t,e,n,r,i,s,o,a,u){return t=l_(n,r,!0,t,i,s,o,a,u),t.context=hA(null),n=t.current,r=Kt(),i=Ti(n),s=xr(r,i),s.callback=e??null,Ei(n,s,i),t.current.lanes=i,Wl(t,i,r),ln(t,r),t}function nf(t,e,n,r){var i=e.current,s=Kt(),o=Ti(i);return n=hA(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ei(i,e,o),t!==null&&(Gn(t,i,o,s),wd(t,i,o)),o}function ch(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function c_(t,e){cI(t,e),(t=t.alternate)&&cI(t,e)}function kD(){return null}var pA=typeof reportError=="function"?reportError:function(t){console.error(t)};function d_(t){this._internalRoot=t}rf.prototype.render=d_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));nf(t,e,null,null)};rf.prototype.unmount=d_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vs(function(){nf(null,t,null,null)}),e[Or]=null}};function rf(t){this._internalRoot=t}rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=WS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&GS(t)}};function h_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dI(){}function xD(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ch(o);s.call(c)}}var o=fA(e,r,t,0,null,!1,!1,"",dI);return t._reactRootContainer=o,t[Or]=o.current,ll(t.nodeType===8?t.parentNode:t),Vs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ch(u);a.call(c)}}var u=l_(t,0,!1,null,null,!1,!1,"",dI);return t._reactRootContainer=u,t[Or]=u.current,ll(t.nodeType===8?t.parentNode:t),Vs(function(){nf(e,u,n,r)}),u}function of(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=ch(o);a.call(u)}}nf(e,o,t,i)}else o=xD(n,e,t,i,r);return ch(o)}$S=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pu(e.pendingLanes);n!==0&&(xy(e,n|1),ln(e,rt()),!(Ie&6)&&(oa=rt()+500,qi()))}break;case 13:Vs(function(){var r=Vr(t,1);if(r!==null){var i=Kt();Gn(r,t,1,i)}}),c_(t,1)}};Ny=function(t){if(t.tag===13){var e=Vr(t,134217728);if(e!==null){var n=Kt();Gn(e,t,134217728,n)}c_(t,134217728)}};qS=function(t){if(t.tag===13){var e=Ti(t),n=Vr(t,e);if(n!==null){var r=Kt();Gn(n,t,e,r)}c_(t,e)}};WS=function(){return Ce};KS=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Vm=function(t,e,n){switch(e){case"input":if(Cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qh(r);if(!i)throw Error($(90));TS(r),Cm(r,i)}}}break;case"textarea":RS(t,n);break;case"select":e=n.value,e!=null&&zo(t,!!n.multiple,e,!1)}};NS=s_;DS=Vs;var ND={usingClientEntryPoint:!1,Events:[Gl,No,Qh,kS,xS,s_]},mu={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DD={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MS(t),t===null?null:t.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||kD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{Wh=nd.inject(DD),cr=nd}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ND;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h_(e))throw Error($(200));return bD(t,e,null,n)};An.createRoot=function(t,e){if(!h_(t))throw Error($(299));var n=!1,r="",i=pA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=l_(t,1,!1,null,null,n,!1,r,i),t[Or]=e.current,ll(t.nodeType===8?t.parentNode:t),new d_(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=MS(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return Vs(t)};An.hydrate=function(t,e,n){if(!sf(e))throw Error($(200));return of(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!h_(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fA(e,null,t,1,n??null,i,!1,s,o),t[Or]=e.current,ll(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rf(e)};An.render=function(t,e,n){if(!sf(e))throw Error($(200));return of(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!sf(t))throw Error($(40));return t._reactRootContainer?(Vs(function(){of(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};An.unstable_batchedUpdates=s_;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sf(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return of(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function mA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mA)}catch(t){console.error(t)}}mA(),mS.exports=An;var gA=mS.exports;const Uo=$h(gA);var OD,hI=gA;OD=hI.createRoot,hI.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_l.apply(this,arguments)}var pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pi||(pi={}));const fI="popstate";function VD(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return pg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dh(i)}return LD(e,n,null,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MD(){return Math.random().toString(36).substr(2,8)}function pI(t,e){return{usr:t.state,key:t.key,idx:e}}function pg(t,e,n,r){return n===void 0&&(n=null),_l({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ka(e):e,{state:n,key:e&&e.key||r||MD()})}function dh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LD(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=pi.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(_l({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=pi.Pop;let R=d(),I=R==null?null:R-c;c=R,u&&u({action:a,location:A.location,delta:I})}function p(R,I){a=pi.Push;let v=pg(A.location,R,I);c=d()+1;let w=pI(v,c),k=A.createHref(v);try{o.pushState(w,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(k)}s&&u&&u({action:a,location:A.location,delta:1})}function y(R,I){a=pi.Replace;let v=pg(A.location,R,I);c=d();let w=pI(v,c),k=A.createHref(v);o.replaceState(w,"",k),s&&u&&u({action:a,location:A.location,delta:0})}function g(R){let I=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof R=="string"?R:dh(R);return v=v.replace(/ $/,"%20"),dt(I,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,I)}let A={get action(){return a},get location(){return t(i,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(fI,h),u=R,()=>{i.removeEventListener(fI,h),u=null}},createHref(R){return e(i,R)},createURL:g,encodeLocation(R){let I=g(R);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:y,go(R){return o.go(R)}};return A}var mI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mI||(mI={}));function FD(t,e,n){return n===void 0&&(n="/"),UD(t,e,n,!1)}function UD(t,e,n,r){let i=typeof e=="string"?ka(e):e,s=f_(i.pathname||"/",n);if(s==null)return null;let o=_A(t);BD(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=JD(s);a=QD(o[u],c,r)}return a}function _A(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(dt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Ri([r,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_A(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:GD(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of vA(s.path))i(s,o,u)}),e}function vA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=vA(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function BD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jD=/^:[\w-]+$/,zD=3,$D=2,qD=1,WD=10,KD=-2,gI=t=>t==="*";function GD(t,e){let n=t.split("/"),r=n.length;return n.some(gI)&&(r+=KD),e&&(r+=$D),n.filter(i=>!gI(i)).reduce((i,s)=>i+(jD.test(s)?zD:s===""?qD:WD),r)}function HD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function QD(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=yI({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),p=u.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=yI({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Ri([s,h.pathname]),pathnameBase:tO(Ri([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Ri([s,h.pathnameBase]))}return o}function yI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:y}=d;if(p==="*"){let A=a[h]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const g=a[h];return y&&!g?c[p]=void 0:c[p]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function YD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function f_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function XD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ka(t):t;return{pathname:n?n.startsWith("/")?n:ZD(n,e):e,search:nO(r),hash:rO(i)}}function ZD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wA(t,e){let n=eO(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function EA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ka(t):(i=_l({},t),dt(!i.pathname||!i.pathname.includes("?"),qp("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),qp("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),qp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let u=XD(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Ri=t=>t.join("/").replace(/\/\/+/g,"/"),tO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const IA=["post","put","patch","delete"];new Set(IA);const sO=["get",...IA];new Set(sO);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vl(){return vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vl.apply(this,arguments)}const p_=D.createContext(null),oO=D.createContext(null),Xs=D.createContext(null),af=D.createContext(null),Wi=D.createContext({outlet:null,matches:[],isDataRoute:!1}),TA=D.createContext(null);function aO(t,e){let{relative:n}=e===void 0?{}:e;Ql()||dt(!1);let{basename:r,navigator:i}=D.useContext(Xs),{hash:s,pathname:o,search:a}=RA(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ri([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Ql(){return D.useContext(af)!=null}function uf(){return Ql()||dt(!1),D.useContext(af).location}function SA(t){D.useContext(Xs).static||D.useLayoutEffect(t)}function uO(){let{isDataRoute:t}=D.useContext(Wi);return t?EO():lO()}function lO(){Ql()||dt(!1);let t=D.useContext(p_),{basename:e,future:n,navigator:r}=D.useContext(Xs),{matches:i}=D.useContext(Wi),{pathname:s}=uf(),o=JSON.stringify(wA(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return SA(()=>{a.current=!0}),D.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=EA(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ri([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function F6(){let{matches:t}=D.useContext(Wi),e=t[t.length-1];return e?e.params:{}}function RA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Xs),{matches:i}=D.useContext(Wi),{pathname:s}=uf(),o=JSON.stringify(wA(i,r.v7_relativeSplatPath));return D.useMemo(()=>EA(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function cO(t,e){return dO(t,e)}function dO(t,e,n,r){Ql()||dt(!1);let{navigator:i}=D.useContext(Xs),{matches:s}=D.useContext(Wi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=uf(),d;if(e){var h;let R=typeof e=="string"?ka(e):e;u==="/"||(h=R.pathname)!=null&&h.startsWith(u)||dt(!1),d=R}else d=c;let p=d.pathname||"/",y=p;if(u!=="/"){let R=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let g=FD(t,{pathname:y}),A=gO(g&&g.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:Ri([u,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Ri([u,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&A?D.createElement(af.Provider,{value:{location:vl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:pi.Pop}},A):A}function hO(){let t=wO(),e=iO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const fO=D.createElement(hO,null);class pO extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Wi.Provider,{value:this.props.routeContext},D.createElement(TA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mO(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(p_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Wi.Provider,{value:e},r)}function gO(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||dt(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:y}=n,g=h.route.loader&&p[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||g){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let y,g=!1,A=null,R=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,A=h.route.errorElement||fO,u&&(c<0&&p===0?(g=!0,R=null):c===p&&(g=!0,R=h.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),v=()=>{let w;return y?w=A:g?w=R:h.route.Component?w=D.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,D.createElement(mO,{match:h,routeContext:{outlet:d,matches:I,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?D.createElement(pO,{location:n.location,revalidation:n.revalidation,component:A,error:y,children:v(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):v()},null)}var AA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(AA||{}),hh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hh||{});function yO(t){let e=D.useContext(p_);return e||dt(!1),e}function _O(t){let e=D.useContext(oO);return e||dt(!1),e}function vO(t){let e=D.useContext(Wi);return e||dt(!1),e}function PA(t){let e=vO(),n=e.matches[e.matches.length-1];return n.route.id||dt(!1),n.route.id}function wO(){var t;let e=D.useContext(TA),n=_O(hh.UseRouteError),r=PA(hh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function EO(){let{router:t}=yO(AA.UseNavigateStable),e=PA(hh.UseNavigateStable),n=D.useRef(!1);return SA(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,vl({fromRouteId:e},s)))},[t,e])}function IO(t){dt(!1)}function TO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=pi.Pop,navigator:s,static:o=!1,future:a}=t;Ql()&&dt(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:vl({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=ka(r));let{pathname:d="/",search:h="",hash:p="",state:y=null,key:g="default"}=r,A=D.useMemo(()=>{let R=f_(d,u);return R==null?null:{location:{pathname:R,search:h,hash:p,state:y,key:g},navigationType:i}},[u,d,h,p,y,g,i]);return A==null?null:D.createElement(Xs.Provider,{value:c},D.createElement(af.Provider,{children:n,value:A}))}function U6(t){let{children:e,location:n}=t;return cO(mg(e),n)}new Promise(()=>{});function mg(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,mg(r.props.children,s));return}r.type!==IO&&dt(!1),!r.props.index||!r.props.children||dt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gg(){return gg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gg.apply(this,arguments)}function SO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AO(t,e){return t.button===0&&(!e||e==="_self")&&!RO(t)}const PO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CO="6";try{window.__reactRouterVersion=CO}catch{}const bO="startTransition",_I=Em[bO];function B6(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=VD({window:i,v5Compat:!0}));let o=s.current,[a,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=D.useCallback(h=>{c&&_I?_I(()=>u(h)):u(h)},[u,c]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.createElement(TO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const kO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j6=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:d,viewTransition:h}=e,p=SO(e,PO),{basename:y}=D.useContext(Xs),g,A=!1;if(typeof c=="string"&&xO.test(c)&&(g=c,kO))try{let w=new URL(window.location.href),k=c.startsWith("//")?new URL(w.protocol+c):new URL(c),V=f_(k.pathname,y);k.origin===w.origin&&V!=null?c=V+k.search+k.hash:A=!0}catch{}let R=aO(c,{relative:i}),I=NO(c,{replace:o,state:a,target:u,preventScrollReset:d,relative:i,viewTransition:h});function v(w){r&&r(w),w.defaultPrevented||I(w)}return D.createElement("a",gg({},p,{href:g||R,onClick:A||s?r:v,ref:n,target:u}))});var vI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vI||(vI={}));var wI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wI||(wI={}));function NO(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=uO(),c=uf(),d=RA(t,{relative:o});return D.useCallback(h=>{if(AO(h,n)){h.preventDefault();let p=r!==void 0?r:dh(c)===dh(d);u(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,u,d,r,i,n,t,s,o,a])}var EI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(p=64)),r.push(n[d],n[h],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new OO;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),h!==64){const g=c<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VO=function(t){const e=CA(t);return bA.encodeByteArray(e,!0)},fh=function(t){return VO(t).replace(/\./g,"")},kA=function(t){try{return bA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ph(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!MO(n)||(t[n]=ph(t[n],e[n]));return t}function MO(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=()=>xA().__FIREBASE_DEFAULTS__,FO=()=>{if(typeof process>"u"||typeof EI>"u")return;const t=EI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kA(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return LO()||FO()||UO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NA=t=>{var e,n;return(n=(e=lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BO=t=>{const e=NA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DA=()=>{var t;return(t=lf())===null||t===void 0?void 0:t.config},OA=t=>{var e;return(e=lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fh(JSON.stringify(n)),fh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $O(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function m_(){var t;const e=(t=lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qO(){return typeof window<"u"||VA()}function VA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function WO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function g_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LA(){const t=He();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function FA(){return!m_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wl(){try{return typeof indexedDB=="object"}catch{return!1}}function KO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="FirebaseError";class Gt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GO,Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zs.prototype.create)}}class Zs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}}function HO(t,e){return t.replace(QO,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const QO=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function YO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function aa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(TI(s)&&TI(o)){if(!aa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function TI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function bu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UA(t,e){const n=new JO(t,e);return n.subscribe.bind(n)}class JO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XO(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wp),i.error===void 0&&(i.error=Wp),i.complete===void 0&&(i.complete=Wp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t){return t&&t._delegate?t._delegate:t}class mr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZO=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tV(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function eV(t){return t===as?void 0:t}function tV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const jA={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},nV=fe.INFO,rV={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},iV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=rV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cf{constructor(e){this.name=e,this._logLevel=nV,this._logHandler=iV,this._userLogHandler=null,y_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function sV(t){y_.forEach(e=>{e.setLogLevel(t)})}function oV(t,e){for(const n of y_){let r=null;e&&e.level&&(r=jA[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch{return null}}).filter(u=>u).join(" ");s>=(r??i.logLevel)&&t({level:fe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const aV=(t,e)=>e.some(n=>t instanceof n);let SI,RI;function uV(){return SI||(SI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lV(){return RI||(RI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zA=new WeakMap,yg=new WeakMap,$A=new WeakMap,Kp=new WeakMap,__=new WeakMap;function cV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zA.set(n,t)}).catch(()=>{}),__.set(e,t),e}function dV(t){if(yg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$A.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hV(t){_g=t(_g)}function fV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gp(this),e,...n);return $A.set(r,e.sort?e.sort():[e]),Ai(r)}:lV().includes(t)?function(...e){return t.apply(Gp(this),e),Ai(zA.get(this))}:function(...e){return Ai(t.apply(Gp(this),e))}}function pV(t){return typeof t=="function"?fV(t):(t instanceof IDBTransaction&&dV(t),aV(t,uV())?new Proxy(t,_g):t)}function Ai(t){if(t instanceof IDBRequest)return cV(t);if(Kp.has(t))return Kp.get(t);const e=pV(t);return e!==t&&(Kp.set(t,e),__.set(e,t)),e}const Gp=t=>__.get(t);function mV(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ai(o.result),u.oldVersion,u.newVersion,Ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const gV=["get","getKey","getAll","getAllKeys","count"],yV=["put","add","delete","clear"],Hp=new Map;function AI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gV.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Hp.set(e,s),s}hV(t=>({...t,get:(e,n,r)=>AI(e,n)||t.get(e,n,r),has:(e,n)=>!!AI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mh="@firebase/app",vg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new cf("@firebase/app"),wV="@firebase/app-compat",EV="@firebase/analytics-compat",IV="@firebase/analytics",TV="@firebase/app-check-compat",SV="@firebase/app-check",RV="@firebase/auth",AV="@firebase/auth-compat",PV="@firebase/database",CV="@firebase/data-connect",bV="@firebase/database-compat",kV="@firebase/functions",xV="@firebase/functions-compat",NV="@firebase/installations",DV="@firebase/installations-compat",OV="@firebase/messaging",VV="@firebase/messaging-compat",MV="@firebase/performance",LV="@firebase/performance-compat",FV="@firebase/remote-config",UV="@firebase/remote-config-compat",BV="@firebase/storage",jV="@firebase/storage-compat",zV="@firebase/firestore",$V="@firebase/vertexai-preview",qV="@firebase/firestore-compat",WV="firebase",KV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]",GV={[mh]:"fire-core",[wV]:"fire-core-compat",[IV]:"fire-analytics",[EV]:"fire-analytics-compat",[SV]:"fire-app-check",[TV]:"fire-app-check-compat",[RV]:"fire-auth",[AV]:"fire-auth-compat",[PV]:"fire-rtdb",[CV]:"fire-data-connect",[bV]:"fire-rtdb-compat",[kV]:"fire-fn",[xV]:"fire-fn-compat",[NV]:"fire-iid",[DV]:"fire-iid-compat",[OV]:"fire-fcm",[VV]:"fire-fcm-compat",[MV]:"fire-perf",[LV]:"fire-perf-compat",[FV]:"fire-rc",[UV]:"fire-rc-compat",[BV]:"fire-gcs",[jV]:"fire-gcs-compat",[zV]:"fire-fst",[qV]:"fire-fst-compat",[$V]:"fire-vertex","fire-js":"fire-js",[WV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,ua=new Map,la=new Map;function El(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qA(t,e){t.container.addOrOverwriteComponent(e)}function Ni(t){const e=t.name;if(la.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;la.set(e,t);for(const n of xi.values())El(n,t);for(const n of ua.values())El(n,t);return!0}function Yl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HV(t,e,n=ki){Yl(t,e).clearInstance(n)}function WA(t){return t.options!==void 0}function Xe(t){return t.settings!==void 0}function QV(){la.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vn=new Zs("app","Firebase",YV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KA=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV extends KA{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Mn(mh,vg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){E_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=KV;function v_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ki,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(n||(n=DA()),!n)throw Vn.create("no-options");const s=xi.get(i);if(s){if(aa(n,s.options)&&aa(r,s.config))return s;throw Vn.create("duplicate-app",{appName:i})}const o=new BA(i);for(const u of la.values())o.addComponent(u);const a=new KA(n,r,o);return xi.set(i,a),a}function XV(t,e){if(qO()&&!VA())throw Vn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;WA(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=ua.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new BA(s);for(const c of la.values())a.addComponent(c);const u=new JV(n,e,s,a);return ua.set(s,u),u}function w_(t=ki){const e=xi.get(t);if(!e&&t===ki&&DA())return v_();if(!e)throw Vn.create("no-app",{appName:t});return e}function ZV(){return Array.from(xi.values())}async function E_(t){let e=!1;const n=t.name;xi.has(n)?(e=!0,xi.delete(n)):ua.has(n)&&t.decRefCount()<=0&&(ua.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Mn(t,e,n){var r;let i=(r=GV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Ni(new mr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function GA(t,e){if(t!==null&&typeof t!="function")throw Vn.create("invalid-log-argument");oV(t,e)}function HA(t){sV(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="firebase-heartbeat-database",tM=1,Il="firebase-heartbeat-store";let Qp=null;function QA(){return Qp||(Qp=mV(eM,tM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Il)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vn.create("idb-open",{originalErrorMessage:t.message})})),Qp}async function nM(t){try{const n=(await QA()).transaction(Il),r=await n.objectStore(Il).get(YA(t));return await n.done,r}catch(e){if(e instanceof Gt)Lr.warn(e.message);else{const n=Vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function PI(t,e){try{const r=(await QA()).transaction(Il,"readwrite");await r.objectStore(Il).put(e,YA(t)),await r.done}catch(n){if(n instanceof Gt)Lr.warn(n.message);else{const r=Vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function YA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=1024,iM=30*24*60*60*1e3;class sM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=CI();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=iM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CI(),{heartbeatsToSend:r,unsentEntries:i}=oM(this._heartbeatsCache.heartbeats),s=fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function CI(){return new Date().toISOString().substring(0,10)}function oM(t,e=rM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),bI(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bI(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wl()?KO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return PI(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bI(t){return fh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){Ni(new mr("platform-logger",e=>new _V(e),"PRIVATE")),Ni(new mr("heartbeat",e=>new sM(e),"PRIVATE")),Mn(mh,vg,t),Mn(mh,vg,"esm2017"),Mn("fire-js","")}uM("");const lM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gt,SDK_VERSION:Ki,_DEFAULT_ENTRY_NAME:ki,_addComponent:El,_addOrOverwriteComponent:qA,_apps:xi,_clearComponents:QV,_components:la,_getProvider:Yl,_isFirebaseApp:WA,_isFirebaseServerApp:Xe,_registerComponent:Ni,_removeServiceInstance:HV,_serverApps:ua,deleteApp:E_,getApp:w_,getApps:ZV,initializeApp:v_,initializeServerApp:XV,onLog:GA,registerVersion:Mn,setLogLevel:HA},Symbol.toStringTag,{value:"Module"}));function I_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const gu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},po={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function JA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dM=cM,hM=JA,XA=new Zs("auth","Firebase",JA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new cf("@firebase/auth");function fM(t,...e){gh.logLevel<=fe.WARN&&gh.warn(`Auth (${Ki}): ${t}`,...e)}function Pd(t,...e){gh.logLevel<=fe.ERROR&&gh.error(`Auth (${Ki}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,...e){throw S_(t,...e)}function mt(t,...e){return S_(t,...e)}function T_(t,e,n){const r=Object.assign(Object.assign({},hM()),{[e]:n});return new Zs("auth","Firebase",r).create(e,{appName:t.name})}function Tt(t){return T_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Na(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&St(t,"argument-error"),T_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XA.create(t,...e)}function q(t,e,...n){if(!t)throw S_(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pd(e),new Error(e)}function Qn(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function R_(){return kI()==="http:"||kI()==="https:"}function kI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R_()||MA()||"connection"in navigator)?navigator.onLine:!0}function mM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=$O()||g_()}get(){return pM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new Jl(3e4,6e4);function tt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function nt(t,e,n,r,i={}){return eP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return WO()||(c.referrerPolicy="no-referrer"),ZA.fetch()(tP(t,t.config.apiHost,n,a),c)})}async function eP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},gM),e);try{const i=new vM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ku(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ku(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ku(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw T_(t,d,c);St(t,d)}}catch(i){if(i instanceof Gt)throw i;St(t,"network-request-failed",{message:String(i)})}}async function qr(t,e,n,r,i={}){const s=await nt(t,e,n,r,i);return"mfaPendingCredential"in s&&St(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?A_(t.config,i):`${t.config.apiScheme}://${i}`}function _M(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mt(this.auth,"network-request-failed")),yM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ku(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){return t!==void 0&&t.getResponse!==void 0}function NI(t){return t!==void 0&&t.enterprise!==void 0}class wM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _M(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t){return(await nt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function IM(t,e){return nt(t,"GET","/v2/recaptchaConfig",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(t,e){return nt(t,"POST","/v1/accounts:delete",e)}async function SM(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function nP(t,e){return nt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RM(t,e=!1){const n=ie(t),r=await n.getIdToken(e),i=df(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ku(Yp(i.auth_time)),issuedAtTime:Ku(Yp(i.iat)),expirationTime:Ku(Yp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yp(t){return Number(t)*1e3}function df(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pd("JWT malformed, contained fewer than 3 sections"),null;try{const i=kA(n);return i?JSON.parse(i):(Pd("Failed to decode base64 JWT payload"),null)}catch(i){return Pd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function DI(t){const e=df(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gt&&AM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Fr(t,nP(n,{idToken:r}));q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rP(s.providerUserInfo):[],a=bM(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function CM(t){const e=ie(t);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rP(t){return t.map(e=>{var{providerId:n}=e,r=I_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e){const n=await eP(t,{},async()=>{const r=xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=tP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xM(t,e){return nt(t,"POST","/v2/accounts:revokeToken",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=DI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await kM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ho;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=I_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fr(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RM(this,e)}reload(){return CM(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xe(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await Fr(this,TM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:k,isAnonymous:V,providerData:M,stsTokenManager:S}=n;q(w&&S,e,"internal-error");const _=Ho.fromJSON(this.name,S);q(typeof w=="string",e,"internal-error"),ei(h,e.name),ei(p,e.name),q(typeof k=="boolean",e,"internal-error"),q(typeof V=="boolean",e,"internal-error"),ei(y,e.name),ei(g,e.name),ei(A,e.name),ei(R,e.name),ei(I,e.name),ei(v,e.name);const C=new Pr({uid:w,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:V,photoURL:g,phoneNumber:y,tenantId:A,stsTokenManager:_,createdAt:I,lastLoginAt:v});return M&&Array.isArray(M)&&(C.providerData=M.map(b=>Object.assign({},b))),R&&(C._redirectEventId=R),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ho;i.updateFromServerResponse(n);const s=new Pr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ho;a.updateFromIdToken(r);const u=new Pr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new Map;function _n(t){Qn(t instanceof Function,"Expected a class definition");let e=OI.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,OI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iP.type="NONE";const ca=iP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t,e,n){return`firebase:${t}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=As(this.userKey,i.apiKey,s),this.fullPersistenceKey=As("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(_n(ca),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||_n(ca);const o=As(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const h=Pr._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Qo(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Qo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lP(e))return"Blackberry";if(cP(e))return"Webos";if(oP(e))return"Safari";if((e.includes("chrome/")||aP(e))&&!e.includes("edge/"))return"Chrome";if(Xl(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sP(t=He()){return/firefox\//i.test(t)}function oP(t=He()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aP(t=He()){return/crios\//i.test(t)}function uP(t=He()){return/iemobile/i.test(t)}function Xl(t=He()){return/android/i.test(t)}function lP(t=He()){return/blackberry/i.test(t)}function cP(t=He()){return/webos/i.test(t)}function Zl(t=He()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NM(t=He()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function DM(t=He()){var e;return Zl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OM(){return LA()&&document.documentMode===10}function dP(t=He()){return Zl(t)||Xl(t)||cP(t)||lP(t)||/windows phone/i.test(t)||uP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t,e=[]){let n;switch(t){case"Browser":n=VI(He());break;case"Worker":n=`${VI(He())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ki}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e={}){return nt(t,"GET","/v2/passwordPolicy",tt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=6;class FM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new MI(this),this.idTokenSubscription=new MI(this),this.beforeStateQueue=new VM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_n(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nP(this,{idToken:e}),r=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xe(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xe(this.app))return Promise.reject(Tt(this));const n=e?ie(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xe(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xe(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MM(this),n=new FM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_n(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[_n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&fM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ze(t){return ie(t)}class MI{constructor(e){this.auth=e,this.observer=null,this.addObserver=UA(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BM(t){ec=t}function P_(t){return ec.loadJS(t)}function jM(){return ec.recaptchaV2Script}function zM(){return ec.recaptchaEnterpriseScript}function $M(){return ec.gapiScript}function fP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qM="recaptcha-enterprise",WM="NO_RECAPTCHA";class KM{constructor(e){this.type=qM,this.auth=Ze(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{IM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wM(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;NI(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(WM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&NI(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zM();u.length!==0&&(u+=a),P_(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function LI(t,e,n,r=!1){const i=new KM(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rl(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await LI(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await LI(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t,e){const n=Yl(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(aa(s,e??{}))return i;St(i,"already-initialized")}return n.initialize({options:e})}function HM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pP(t,e,n){const r=Ze(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=mP(e),{host:o,port:a}=QM(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||YM()}function mP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QM(t){const e=mP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:FI(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:FI(o)}}}function FI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(t,e){return nt(t,"POST","/v1/accounts:resetPassword",tt(t,e))}async function JM(t,e){return nt(t,"POST","/v1/accounts:update",e)}async function XM(t,e){return nt(t,"POST","/v1/accounts:signUp",e)}async function ZM(t,e){return nt(t,"POST","/v1/accounts:update",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){return qr(t,"POST","/v1/accounts:signInWithPassword",tt(t,e))}async function hf(t,e){return nt(t,"POST","/v1/accounts:sendOobCode",tt(t,e))}async function tL(t,e){return hf(t,e)}async function nL(t,e){return hf(t,e)}async function rL(t,e){return hf(t,e)}async function iL(t,e){return hf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){return qr(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}async function oL(t,e){return qr(t,"POST","/v1/accounts:signInWithEmailLink",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends Da{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Al(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Al(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rl(e,n,"signInWithPassword",eL);case"emailLink":return sL(e,{email:this._email,oobCode:this._password});default:St(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rl(e,r,"signUpPassword",XM);case"emailLink":return oL(e,{idToken:n,email:this._email,oobCode:this._password});default:St(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(t,e){return qr(t,"POST","/v1/accounts:signInWithIdp",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL="http://localhost";class gr extends Da{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):St("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=I_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}buildRequest(){const e={requestUri:aL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){return nt(t,"POST","/v1/accounts:sendVerificationCode",tt(t,e))}async function lL(t,e){return qr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e))}async function cL(t,e){const n=await qr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,e));if(n.temporaryProof)throw ku(t,"account-exists-with-different-credential",n);return n}const dL={USER_NOT_FOUND:"user-not-found"};async function hL(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return qr(t,"POST","/v1/accounts:signInWithPhoneNumber",tt(t,n),dL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Da{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ps({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ps({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return lL(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return cL(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return hL(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Ps({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pL(t){const e=Bo(bu(t)).link,n=e?Bo(bu(e)).deep_link_id:null,r=Bo(bu(t)).deep_link_id;return(r?Bo(bu(r)).link:null)||r||n||e||t}class ff{constructor(e){var n,r,i,s,o,a;const u=Bo(bu(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=fL((i=u.mode)!==null&&i!==void 0?i:null);q(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pL(e);try{return new ff(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.providerId=Gi.PROVIDER_ID}static credential(e,n){return Al._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ff.parseLink(n);return q(r,"argument-error"),Al._fromEmailAndCode(e,r.code,r.tenantId)}}Gi.PROVIDER_ID="password";Gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Wr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yo extends Oa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),gr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),gr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Yo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Yo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Oa{constructor(){super("facebook.com")}static credential(e){return gr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Oa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return gr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rr.credential(n,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Oa{constructor(){super("github.com")}static credential(e){return gr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="http://localhost";class da extends Da{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nr(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new da(r,s)}static _create(e,n){return new da(e,n)}buildRequest(){return{requestUri:mL,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="saml.";class yh extends Wr{constructor(e){q(e.startsWith(gL),"argument-error"),super(e)}static credentialFromResult(e){return yh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return yh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=da.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return da._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Oa{constructor(){super("twitter.com")}static credential(e,n){return gr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(t,e){return qr(t,"POST","/v1/accounts:signUp",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Pr._fromIdTokenResponse(e,r,i),o=UI(r);return new Un({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=UI(r);return new Un({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function UI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t){var e;if(Xe(t.app))return Promise.reject(Tt(t));const n=Ze(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Un({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yP(n,{returnSecureToken:!0}),i=await Un._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends Gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_h.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _h(e,n,r,i)}}function _P(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_h._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e){const n=ie(t);await pf(!0,n,e);const{providerUserInfo:r}=await SM(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=vP(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function C_(t,e,n=!1){const r=await Fr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Un._forOperation(t,"link",r)}async function pf(t,e,n){await Sl(e);const r=vP(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";q(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e,n=!1){const{auth:r}=t;if(Xe(r.app))return Promise.reject(Tt(r));const i="reauthenticate";try{const s=await Fr(t,_P(r,i,e,t),n);q(s.idToken,r,"internal-error");const o=df(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),Un._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&St(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,e,n=!1){if(Xe(t.app))return Promise.reject(Tt(t));const r="signIn",i=await _P(t,r,e),s=await Un._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function mf(t,e){return EP(Ze(t),e)}async function IP(t,e){const n=ie(t);return await pf(!1,n,e.providerId),C_(n,e)}async function TP(t,e){return wP(ie(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e){return qr(t,"POST","/v1/accounts:signInWithCustomToken",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e){if(Xe(t.app))return Promise.reject(Tt(t));const n=Ze(t),r=await vL(n,{token:e,returnSecureToken:!0}),i=await Un._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?b_._fromServerResponse(e,n):"totpInfo"in n?k_._fromServerResponse(e,n):St(e,"internal-error")}}class b_ extends tc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new b_(n)}}class k_ extends tc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new k_(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t,e,n){var r;q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x_(t){const e=Ze(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EL(t,e,n){const r=Ze(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&gf(r,i,n),await Rl(r,i,"getOobCode",nL)}async function IL(t,e,n){await gP(ie(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x_(t),r})}async function TL(t,e){await ZM(ie(t),{oobCode:e})}async function SP(t,e){const n=ie(t),r=await gP(n,{oobCode:e}),i=r.requestType;switch(q(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(r.mfaInfo,n,"internal-error");default:q(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=tc._fromServerResponse(Ze(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function SL(t,e){const{data:n}=await SP(ie(t),e);return n.email}async function RL(t,e,n){if(Xe(t.app))return Promise.reject(Tt(t));const r=Ze(t),o=await Rl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&x_(t),u}),a=await Un._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function AL(t,e,n){return Xe(t.app)?Promise.reject(Tt(t)):mf(ie(t),Gi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&x_(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e,n){const r=Ze(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){q(a.handleCodeInApp,r,"argument-error"),a&&gf(r,o,a)}s(i,n),await Rl(r,i,"getOobCode",rL)}function CL(t,e){const n=ff.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function bL(t,e,n){if(Xe(t.app))return Promise.reject(Tt(t));const r=ie(t),i=Gi.credentialWithLink(e,n||Tl());return q(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),mf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){return nt(t,"POST","/v1/accounts:createAuthUri",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e){const n=R_()?Tl():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await kL(ie(t),r);return i||[]}async function NL(t,e){const n=ie(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&gf(n.auth,i,e);const{email:s}=await tL(n.auth,i);s!==t.email&&await t.reload()}async function DL(t,e,n){const r=ie(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&gf(r.auth,s,n);const{email:o}=await iL(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OL(t,e){return nt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ie(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fr(r,OL(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function ML(t,e){const n=ie(t);return Xe(n.auth.app)?Promise.reject(Tt(n.auth)):RP(n,e,null)}function LL(t,e){return RP(ie(t),null,e)}async function RP(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Fr(t,JM(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=df(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Jo(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new UL(s,i);case"github.com":return new BL(s,i);case"google.com":return new jL(s,i);case"twitter.com":return new zL(s,i,t.screenName||null);case"custom":case"anonymous":return new Jo(s,null);default:return new Jo(s,r,i)}}class Jo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class AP extends Jo{constructor(e,n,r,i){super(e,n,r),this.username=i}}class UL extends Jo{constructor(e,n){super(e,"facebook.com",n)}}class BL extends AP{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class jL extends Jo{constructor(e,n){super(e,"google.com",n)}}class zL extends AP{constructor(e,n,r){super(e,"twitter.com",n,r)}}function $L(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:FL(n)}function qL(t,e,n,r){return ie(t).onIdTokenChanged(e,n,r)}function WL(t,e,n){return ie(t).beforeAuthStateChanged(e,n)}function KL(t,e,n,r){return ie(t).onAuthStateChanged(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ws("enroll",e,n)}static _fromMfaPendingCredential(e){return new ws("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ws._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ws._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ze(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>tc._fromServerResponse(r,a));q(i.mfaPendingCredential,r,"internal-error");const o=ws._fromMfaPendingCredential(i.mfaPendingCredential);return new N_(o,s,async a=>{const u=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const d=await Un._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return q(n.user,r,"internal-error"),Un._forOperation(n.user,n.operationType,c);default:St(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function GL(t,e){var n;const r=ie(t),i=e;return q(e.customData.operationType,r,"argument-error"),q((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),N_._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:start",tt(t,e))}function QL(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:finalize",tt(t,e))}function YL(t,e){return nt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(t,e))}class D_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>tc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new D_(e)}async getSession(){return ws._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Fr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Fr(this.user,YL(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Jp=new WeakMap;function JL(t){const e=ie(t);return Jp.has(e)||Jp.set(e,D_._fromUser(e)),Jp.get(e)}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=1e3,ZL=10;class CP extends PP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);OM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CP.type="LOCAL";const yf=CP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP extends PP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bP.type="SESSION";const Di=bP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _f(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await eF(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=nc("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return window}function nF(t){lt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}async function rF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sF(){return O_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="firebaseLocalStorageDb",oF=1,wh="firebaseLocalStorage",xP="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(t,e){return t.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function aF(){const t=indexedDB.deleteDatabase(kP);return new rc(t).toPromise()}function Eg(){const t=indexedDB.open(kP,oF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wh,{keyPath:xP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wh)?e(r):(r.close(),await aF(),e(await Eg()))})})}async function BI(t,e,n){const r=vf(t,!0).put({[xP]:e,value:n});return new rc(r).toPromise()}async function uF(t,e){const n=vf(t,!1).get(e),r=await new rc(n).toPromise();return r===void 0?null:r.value}function jI(t,e){const n=vf(t,!0).delete(e);return new rc(n).toPromise()}const lF=800,cF=3;class NP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(sF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rF(),!this.activeServiceWorker)return;this.sender=new tF(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eg();return await BI(e,vh,"1"),await jI(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>BI(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=vf(i,!1).getAll();return new rc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NP.type="LOCAL";const ha=NP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:start",tt(t,e))}function hF(t,e){return nt(t,"POST","/v2/accounts/mfaSignIn:finalize",tt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=500,pF=6e4,rd=1e12;class mF{constructor(e){this.auth=e,this.counter=rd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new gF(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||rd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||rd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||rd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class gF{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;q(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=yF(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},pF)},fF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function yF(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=fP("rcb"),_F=new Jl(3e4,6e4);class vF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=lt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(wF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&xI(lt().grecaptcha)?Promise.resolve(lt().grecaptcha):new Promise((r,i)=>{const s=lt().setTimeout(()=>{i(mt(e,"network-request-failed"))},_F.get());lt()[Xp]=()=>{lt().clearTimeout(s),delete lt()[Xp];const a=lt().grecaptcha;if(!a||!xI(a)){i(mt(e,"internal-error"));return}const u=a.render;a.render=(c,d)=>{const h=u(c,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${jM()}?${xa({onload:Xp,render:"explicit",hl:n})}`;P_(o).catch(()=>{clearTimeout(s),i(mt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=lt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function wF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class EF{async load(e){return new mF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="recaptcha",IF={theme:"light",type:"image"};let TF=class{constructor(e,n,r=Object.assign({},IF)){this.parameters=r,this.type=DP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ze(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new EF:new vF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=lt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(R_()&&!O_(),this.auth,"internal-error"),await SF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await EM(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function SF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ps._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function RF(t,e,n){if(Xe(t.app))return Promise.reject(Tt(t));const r=Ze(t),i=await wf(r,e,ie(n));return new V_(i,s=>mf(r,s))}async function AF(t,e,n){const r=ie(t);await pf(!1,r,"phone");const i=await wf(r.auth,e,ie(n));return new V_(i,s=>IP(r,s))}async function PF(t,e,n){const r=ie(t);if(Xe(r.auth.app))return Promise.reject(Tt(r.auth));const i=await wf(r.auth,e,ie(n));return new V_(i,s=>TP(r,s))}async function wf(t,e,n){var r;const i=await n.verify();try{q(typeof i=="string",t,"argument-error"),q(n.type===DP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return q(o.type==="enroll",t,"internal-error"),(await HL(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{q(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return q(a,t,"missing-multi-factor-info"),(await dF(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await uL(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function CF(t,e){const n=ie(t);if(Xe(n.auth.app))return Promise.reject(Tt(n.auth));await C_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms=class Cd{constructor(e){this.providerId=Cd.PROVIDER_ID,this.auth=Ze(e)}verifyPhoneNumber(e,n){return wf(this.auth,e,ie(n))}static credential(e,n){return Ps._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Cd.credentialFromTaggedObject(n)}static credentialFromError(e){return Cd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ps._fromTokenResponse(n,r):null}};Ms.PROVIDER_ID="phone";Ms.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t,e){return e?_n(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_ extends Da{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bF(t){return EP(t.auth,new M_(t),t.bypassAuthState)}function kF(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),wP(n,new M_(t),t.bypassAuthState)}async function xF(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),C_(n,new M_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bF;case"linkViaPopup":case"linkViaRedirect":return xF;case"reauthViaPopup":case"reauthViaRedirect":return kF;default:St(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new Jl(2e3,1e4);async function DF(t,e,n){if(Xe(t.app))return Promise.reject(mt(t,"operation-not-supported-in-this-environment"));const r=Ze(t);Na(t,e,Wr);const i=eo(r,n);return new Cr(r,"signInViaPopup",e,i).executeNotNull()}async function OF(t,e,n){const r=ie(t);if(Xe(r.auth.app))return Promise.reject(mt(r.auth,"operation-not-supported-in-this-environment"));Na(r.auth,e,Wr);const i=eo(r.auth,n);return new Cr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function VF(t,e,n){const r=ie(t);Na(r.auth,e,Wr);const i=eo(r.auth,n);return new Cr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Cr extends OP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cr.currentPopupAction&&Cr.currentPopupAction.cancel(),Cr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=nc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NF.get())};e()}}Cr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF="pendingRedirect",Gu=new Map;class LF extends OP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const r=await FF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FF(t,e){const n=MP(e),r=VP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function L_(t,e){return VP(t)._set(MP(e),"true")}function UF(){Gu.clear()}function F_(t,e){Gu.set(t._key(),e)}function VP(t){return _n(t._redirectPersistence)}function MP(t){return As(MF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t,e,n){return jF(t,e,n)}async function jF(t,e,n){if(Xe(t.app))return Promise.reject(Tt(t));const r=Ze(t);Na(t,e,Wr),await r._initializationPromise;const i=eo(r,n);return await L_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function zF(t,e,n){return $F(t,e,n)}async function $F(t,e,n){const r=ie(t);if(Na(r.auth,e,Wr),Xe(r.auth.app))return Promise.reject(Tt(r.auth));await r.auth._initializationPromise;const i=eo(r.auth,n);await L_(i,r.auth);const s=await LP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function qF(t,e,n){return WF(t,e,n)}async function WF(t,e,n){const r=ie(t);Na(r.auth,e,Wr),await r.auth._initializationPromise;const i=eo(r.auth,n);await pf(!1,r,e.providerId),await L_(i,r.auth);const s=await LP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function KF(t,e){return await Ze(t)._initializationPromise,Ef(t,e,!1)}async function Ef(t,e,n=!1){if(Xe(t.app))return Promise.reject(Tt(t));const r=Ze(t),i=eo(r,e),o=await new LF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function LP(t){const e=nc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=10*60*1e3;class FP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GF&&this.cachedEventUids.clear(),this.cachedEventUids.has(zI(e))}saveEventToCache(e){this.cachedEventUids.add(zI(e)),this.lastProcessedEventTime=Date.now()}}function zI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(t,e={}){return nt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YF=/^https?/;async function JF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BP(t);for(const n of e)try{if(XF(n))return}catch{}St(t,"unauthorized-domain")}function XF(t){const e=Tl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YF.test(n))return!1;if(QF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=new Jl(3e4,6e4);function $I(){const t=lt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function e2(t){return new Promise((e,n)=>{var r,i,s;function o(){$I(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$I(),n(mt(t,"network-request-failed"))},timeout:ZF.get()})}if(!((i=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lt().gapi)===null||s===void 0)&&s.load)o();else{const a=fP("iframefcb");return lt()[a]=()=>{gapi.load?o():n(mt(t,"network-request-failed"))},P_(`${$M()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw bd=null,e})}let bd=null;function t2(t){return bd=bd||e2(t),bd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Jl(5e3,15e3),r2="__/auth/iframe",i2="emulator/auth/iframe",s2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a2(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?A_(e,i2):`https://${t.config.authDomain}/${r2}`,r={apiKey:e.apiKey,appName:t.name,v:Ki},i=o2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xa(r).slice(1)}`}async function u2(t){const e=await t2(t),n=lt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:a2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=mt(t,"network-request-failed"),a=lt().setTimeout(()=>{s(o)},n2.get());function u(){lt().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c2=500,d2=600,h2="_blank",f2="http://localhost";class qI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function p2(t,e,n,r=c2,i=d2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},l2),{width:r.toString(),height:i.toString(),top:s,left:o}),c=He().toLowerCase();n&&(a=aP(c)?h2:n),sP(c)&&(e=e||f2,u.scrollbars="yes");const d=Object.entries(u).reduce((p,[y,g])=>`${p}${y}=${g},`,"");if(DM(c)&&a!=="_self")return m2(e||"",a),new qI(null);const h=window.open(e||"",a,d);q(h,t,"popup-blocked");try{h.focus()}catch{}return new qI(h)}function m2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="__/auth/handler",y2="emulator/auth/handler",_2=encodeURIComponent("fac");async function Ig(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ki,eventId:i};if(e instanceof Wr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Oa){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${_2}=${encodeURIComponent(u)}`:"";return`${v2(t)}?${xa(a).slice(1)}${c}`}function v2({config:t}){return t.emulator?A_(t,y2):`https://${t.authDomain}/${g2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="webStorageSupport";class w2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Di,this._completeRedirectFn=Ef,this._overrideRedirectResult=F_}async _openPopup(e,n,r,i){var s;Qn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ig(e,n,r,Tl(),i);return p2(e,o,nc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ig(e,n,r,Tl(),i);return nF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await u2(e),r=new FP(e);return n.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zp,{type:Zp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Zp];o!==void 0&&n(!!o),St(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dP()||oP()||Zl()}}const jP=w2;class E2{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ar("unexpected MultiFactorSessionType")}}}class U_ extends E2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new U_(e)}_finalizeEnroll(e,n,r){return QL(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return hF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zP{constructor(){}static assertion(e){return U_._fromCredential(e)}}zP.FACTOR_ID="phone";var WI="@firebase/auth",KI="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S2(t){Ni(new mr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hP(t)},c=new UM(r,i,s,u);return HM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ni(new mr("auth-internal",e=>{const n=Ze(e.getProvider("auth").getImmediate());return(r=>new I2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(WI,KI,T2(t)),Mn(WI,KI,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=5*60,A2=OA("authIdTokenMaxAge")||R2;let GI=null;const P2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A2)return;const i=n==null?void 0:n.token;GI!==i&&(GI=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function W6(t=w_()){const e=Yl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=GM(t,{popupRedirectResolver:jP,persistence:[ha,yf,Di]}),r=OA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=P2(s.toString());WL(n,o,()=>o(n.currentUser)),qL(n,a=>o(a))}}const i=NA("auth");return i&&pP(n,`http://${i}`),n}function C2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",C2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S2("Browser");var b2="firebase",k2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn(b2,k2,"app");var HI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,$P;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function C(){}C.prototype=_.prototype,S.D=_.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(b,x,P){for(var T=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)T[Q-2]=arguments[Q];return _.prototype[x].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,C){C||(C=0);var b=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)b[x]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(x=0;16>x;++x)b[x]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=S.g[0],C=S.g[1],x=S.g[2];var P=S.g[3],T=_+(P^C&(x^P))+b[0]+3614090360&4294967295;_=C+(T<<7&4294967295|T>>>25),T=P+(x^_&(C^x))+b[1]+3905402710&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(C^P&(_^C))+b[2]+606105819&4294967295,x=P+(T<<17&4294967295|T>>>15),T=C+(_^x&(P^_))+b[3]+3250441966&4294967295,C=x+(T<<22&4294967295|T>>>10),T=_+(P^C&(x^P))+b[4]+4118548399&4294967295,_=C+(T<<7&4294967295|T>>>25),T=P+(x^_&(C^x))+b[5]+1200080426&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(C^P&(_^C))+b[6]+2821735955&4294967295,x=P+(T<<17&4294967295|T>>>15),T=C+(_^x&(P^_))+b[7]+4249261313&4294967295,C=x+(T<<22&4294967295|T>>>10),T=_+(P^C&(x^P))+b[8]+1770035416&4294967295,_=C+(T<<7&4294967295|T>>>25),T=P+(x^_&(C^x))+b[9]+2336552879&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(C^P&(_^C))+b[10]+4294925233&4294967295,x=P+(T<<17&4294967295|T>>>15),T=C+(_^x&(P^_))+b[11]+2304563134&4294967295,C=x+(T<<22&4294967295|T>>>10),T=_+(P^C&(x^P))+b[12]+1804603682&4294967295,_=C+(T<<7&4294967295|T>>>25),T=P+(x^_&(C^x))+b[13]+4254626195&4294967295,P=_+(T<<12&4294967295|T>>>20),T=x+(C^P&(_^C))+b[14]+2792965006&4294967295,x=P+(T<<17&4294967295|T>>>15),T=C+(_^x&(P^_))+b[15]+1236535329&4294967295,C=x+(T<<22&4294967295|T>>>10),T=_+(x^P&(C^x))+b[1]+4129170786&4294967295,_=C+(T<<5&4294967295|T>>>27),T=P+(C^x&(_^C))+b[6]+3225465664&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^C&(P^_))+b[11]+643717713&4294967295,x=P+(T<<14&4294967295|T>>>18),T=C+(P^_&(x^P))+b[0]+3921069994&4294967295,C=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(C^x))+b[5]+3593408605&4294967295,_=C+(T<<5&4294967295|T>>>27),T=P+(C^x&(_^C))+b[10]+38016083&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^C&(P^_))+b[15]+3634488961&4294967295,x=P+(T<<14&4294967295|T>>>18),T=C+(P^_&(x^P))+b[4]+3889429448&4294967295,C=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(C^x))+b[9]+568446438&4294967295,_=C+(T<<5&4294967295|T>>>27),T=P+(C^x&(_^C))+b[14]+3275163606&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^C&(P^_))+b[3]+4107603335&4294967295,x=P+(T<<14&4294967295|T>>>18),T=C+(P^_&(x^P))+b[8]+1163531501&4294967295,C=x+(T<<20&4294967295|T>>>12),T=_+(x^P&(C^x))+b[13]+2850285829&4294967295,_=C+(T<<5&4294967295|T>>>27),T=P+(C^x&(_^C))+b[2]+4243563512&4294967295,P=_+(T<<9&4294967295|T>>>23),T=x+(_^C&(P^_))+b[7]+1735328473&4294967295,x=P+(T<<14&4294967295|T>>>18),T=C+(P^_&(x^P))+b[12]+2368359562&4294967295,C=x+(T<<20&4294967295|T>>>12),T=_+(C^x^P)+b[5]+4294588738&4294967295,_=C+(T<<4&4294967295|T>>>28),T=P+(_^C^x)+b[8]+2272392833&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^C)+b[11]+1839030562&4294967295,x=P+(T<<16&4294967295|T>>>16),T=C+(x^P^_)+b[14]+4259657740&4294967295,C=x+(T<<23&4294967295|T>>>9),T=_+(C^x^P)+b[1]+2763975236&4294967295,_=C+(T<<4&4294967295|T>>>28),T=P+(_^C^x)+b[4]+1272893353&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^C)+b[7]+4139469664&4294967295,x=P+(T<<16&4294967295|T>>>16),T=C+(x^P^_)+b[10]+3200236656&4294967295,C=x+(T<<23&4294967295|T>>>9),T=_+(C^x^P)+b[13]+681279174&4294967295,_=C+(T<<4&4294967295|T>>>28),T=P+(_^C^x)+b[0]+3936430074&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^C)+b[3]+3572445317&4294967295,x=P+(T<<16&4294967295|T>>>16),T=C+(x^P^_)+b[6]+76029189&4294967295,C=x+(T<<23&4294967295|T>>>9),T=_+(C^x^P)+b[9]+3654602809&4294967295,_=C+(T<<4&4294967295|T>>>28),T=P+(_^C^x)+b[12]+3873151461&4294967295,P=_+(T<<11&4294967295|T>>>21),T=x+(P^_^C)+b[15]+530742520&4294967295,x=P+(T<<16&4294967295|T>>>16),T=C+(x^P^_)+b[2]+3299628645&4294967295,C=x+(T<<23&4294967295|T>>>9),T=_+(x^(C|~P))+b[0]+4096336452&4294967295,_=C+(T<<6&4294967295|T>>>26),T=P+(C^(_|~x))+b[7]+1126891415&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~C))+b[14]+2878612391&4294967295,x=P+(T<<15&4294967295|T>>>17),T=C+(P^(x|~_))+b[5]+4237533241&4294967295,C=x+(T<<21&4294967295|T>>>11),T=_+(x^(C|~P))+b[12]+1700485571&4294967295,_=C+(T<<6&4294967295|T>>>26),T=P+(C^(_|~x))+b[3]+2399980690&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~C))+b[10]+4293915773&4294967295,x=P+(T<<15&4294967295|T>>>17),T=C+(P^(x|~_))+b[1]+2240044497&4294967295,C=x+(T<<21&4294967295|T>>>11),T=_+(x^(C|~P))+b[8]+1873313359&4294967295,_=C+(T<<6&4294967295|T>>>26),T=P+(C^(_|~x))+b[15]+4264355552&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~C))+b[6]+2734768916&4294967295,x=P+(T<<15&4294967295|T>>>17),T=C+(P^(x|~_))+b[13]+1309151649&4294967295,C=x+(T<<21&4294967295|T>>>11),T=_+(x^(C|~P))+b[4]+4149444226&4294967295,_=C+(T<<6&4294967295|T>>>26),T=P+(C^(_|~x))+b[11]+3174756917&4294967295,P=_+(T<<10&4294967295|T>>>22),T=x+(_^(P|~C))+b[2]+718787259&4294967295,x=P+(T<<15&4294967295|T>>>17),T=C+(P^(x|~_))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(x+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var C=_-this.blockSize,b=this.B,x=this.h,P=0;P<_;){if(x==0)for(;P<=C;)i(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<_;)if(b[x++]=S.charCodeAt(P++),x==this.blockSize){i(this,b),x=0;break}}else for(;P<_;)if(b[x++]=S[P++],x==this.blockSize){i(this,b),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var C=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=C&255,C/=256;for(this.u(S),S=Array(16),_=C=0;4>_;++_)for(var b=0;32>b;b+=8)S[C++]=this.g[_]>>>b&255;return S};function s(S,_){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=_(S)}function o(S,_){this.h=_;for(var C=[],b=!0,x=S.length-1;0<=x;x--){var P=S[x]|0;b&&P==_||(C[x]=P,b=!1)}this.g=C}var a={};function u(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return h;if(0>S)return R(c(-S));for(var _=[],C=1,b=0;S>=C;b++)_[b]=S/C|0,C*=4294967296;return new o(_,0)}function d(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return R(d(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(_,8)),b=h,x=0;x<S.length;x+=8){var P=Math.min(8,S.length-x),T=parseInt(S.substring(x,x+P),_);8>P?(P=c(Math.pow(_,P)),b=b.j(P).add(c(T))):(b=b.j(C),b=b.add(c(T)))}return b}var h=u(0),p=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();for(var S=0,_=1,C=0;C<this.g.length;C++){var b=this.i(C);S+=(0<=b?b:4294967296+b)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(g(this))return"0";if(A(this))return"-"+R(this).toString(S);for(var _=c(Math.pow(S,6)),C=this,b="";;){var x=k(C,_).g;C=I(C,x.j(_));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=x,g(C))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function g(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function A(S){return S.h==-1}t.l=function(S){return S=I(this,S),A(S)?-1:g(S)?0:1};function R(S){for(var _=S.g.length,C=[],b=0;b<_;b++)C[b]=~S.g[b];return new o(C,~S.h).add(p)}t.abs=function(){return A(this)?R(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],b=0,x=0;x<=_;x++){var P=b+(this.i(x)&65535)+(S.i(x)&65535),T=(P>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);b=T>>>16,P&=65535,T&=65535,C[x]=T<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function I(S,_){return S.add(R(_))}t.j=function(S){if(g(this)||g(S))return h;if(A(this))return A(S)?R(this).j(R(S)):R(R(this).j(S));if(A(S))return R(this.j(R(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var _=this.g.length+S.g.length,C=[],b=0;b<2*_;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(var x=0;x<S.g.length;x++){var P=this.i(b)>>>16,T=this.i(b)&65535,Q=S.i(x)>>>16,re=S.i(x)&65535;C[2*b+2*x]+=T*re,v(C,2*b+2*x),C[2*b+2*x+1]+=P*re,v(C,2*b+2*x+1),C[2*b+2*x+1]+=T*Q,v(C,2*b+2*x+1),C[2*b+2*x+2]+=P*Q,v(C,2*b+2*x+2)}for(b=0;b<_;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=_;b<2*_;b++)C[b]=0;return new o(C,0)};function v(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function w(S,_){this.g=S,this.h=_}function k(S,_){if(g(_))throw Error("division by zero");if(g(S))return new w(h,h);if(A(S))return _=k(R(S),_),new w(R(_.g),R(_.h));if(A(_))return _=k(S,R(_)),new w(R(_.g),_.h);if(30<S.g.length){if(A(S)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var C=p,b=_;0>=b.l(S);)C=V(C),b=V(b);var x=M(C,1),P=M(b,1);for(b=M(b,2),C=M(C,2);!g(b);){var T=P.add(b);0>=T.l(S)&&(x=x.add(C),P=T),b=M(b,1),C=M(C,1)}return _=I(S,x.j(_)),new w(x,_)}for(x=h;0<=S.l(_);){for(C=Math.max(1,Math.floor(S.m()/_.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(C),T=P.j(_);A(T)||0<T.l(S);)C-=b,P=c(C),T=P.j(_);g(P)&&(P=p),x=x.add(P),S=I(S,T)}return new w(x,S)}t.A=function(S){return k(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],b=0;b<_;b++)C[b]=this.i(b)&S.i(b);return new o(C,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],b=0;b<_;b++)C[b]=this.i(b)|S.i(b);return new o(C,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],b=0;b<_;b++)C[b]=this.i(b)^S.i(b);return new o(C,this.h^S.h)};function V(S){for(var _=S.g.length+1,C=[],b=0;b<_;b++)C[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(C,S.h)}function M(S,_){var C=_>>5;_%=32;for(var b=S.g.length-C,x=[],P=0;P<b;P++)x[P]=0<_?S.i(P+C)>>>_|S.i(P+C+1)<<32-_:S.i(P+C);return new o(x,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$P=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Cs=o}).apply(typeof HI<"u"?HI:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qP,xu,WP,kd,Tg,KP,GP,HP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,m){return l==Array.prototype||l==Object.prototype||(l[f]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var f=0;f<l.length;++f){var m=l[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var m=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var N=l[E];if(!(N in m))break e;m=m[N]}l=l[l.length-1],E=m[l],f=f(E),f!=E&&f!=null&&e(m,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var m=0,E=!1,N={next:function(){if(!E&&m<l.length){var F=m++;return{value:f(F,l[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,m){return l.call.apply(l.bind,arguments)}function h(l,f,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,E),l.apply(f,N)}}return function(){return l.apply(f,arguments)}}function p(l,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function y(l,f){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function g(l,f){function m(){}m.prototype=f.prototype,l.aa=f.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,N,F){for(var K=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)K[ke-2]=arguments[ke];return f.prototype[N].apply(E,K)}}function A(l){const f=l.length;if(0<f){const m=Array(f);for(let E=0;E<f;E++)m[E]=l[E];return m}return[]}function R(l,f){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(u(E)){const N=l.length||0,F=E.length||0;l.length=N+F;for(let K=0;K<F;K++)l[N+K]=E[K]}else l.push(E)}}class I{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function k(l){return k[" "](l),l}k[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(l,f,m){for(const E in l)f.call(m,l[E],E,l)}function S(l,f){for(const m in l)f.call(void 0,l[m],m,l)}function _(l){const f={};for(const m in l)f[m]=l[m];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let m,E;for(let N=1;N<arguments.length;N++){E=arguments[N];for(m in E)l[m]=E[m];for(let F=0;F<C.length;F++)m=C[F],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function x(l){var f=1;l=l.split(":");const m=[];for(;0<f&&l.length;)m.push(l.shift()),f--;return l.length&&m.push(l.join(":")),m}function P(l){a.setTimeout(()=>{throw l},0)}function T(){var l=W;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Q{constructor(){this.h=this.g=null}add(f,m){const E=re.get();E.set(f,m),this.h?this.h.next=E:this.g=E,this.h=E}}var re=new I(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,B=!1,W=new Q,J=()=>{const l=a.Promise.resolve(void 0);ee=()=>{l.then(te)}};var te=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(m){P(m)}var f=re;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}B=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return l}();function he(l,f){if(oe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(V){e:{try{k(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else m=="mouseover"?f=l.fromElement:m=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ae[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&he.aa.h.call(this)}}g(he,oe);var Ae={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function jt(l,f,m,E,N){this.listener=l,this.proxy=null,this.src=f,this.type=m,this.capture=!!E,this.ha=N,this.key=++Cn,this.da=this.fa=!1}function at(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function fn(l){this.src=l,this.g={},this.h=0}fn.prototype.add=function(l,f,m,E,N){var F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);var K=_t(l,f,E,N);return-1<K?(f=l[K],m||(f.fa=!1)):(f=new jt(f,this.src,F,!!E,N),f.fa=m,l.push(f)),f};function Oe(l,f){var m=f.type;if(m in l.g){var E=l.g[m],N=Array.prototype.indexOf.call(E,f,void 0),F;(F=0<=N)&&Array.prototype.splice.call(E,N,1),F&&(at(f),l.g[m].length==0&&(delete l.g[m],l.h--))}}function _t(l,f,m,E){for(var N=0;N<l.length;++N){var F=l[N];if(!F.da&&F.listener==f&&F.capture==!!m&&F.ha==E)return N}return-1}var bn="closure_lm_"+(1e6*Math.random()|0),ye={};function Jn(l,f,m,E,N){if(Array.isArray(f)){for(var F=0;F<f.length;F++)Jn(l,f[F],m,E,N);return null}return m=Sc(m),l&&l[De]?l.K(f,m,c(E)?!!E.capture:!!E,N):Xn(l,f,m,!1,E,N)}function Xn(l,f,m,E,N,F){if(!f)throw Error("Invalid event type");var K=c(N)?!!N.capture:!!N,ke=Ha(l);if(ke||(l[bn]=ke=new fn(l)),m=ke.add(f,m,E,K,F),m.proxy)return m;if(E=oo(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)Ee||(N=K),N===void 0&&(N=!1),l.addEventListener(f.toString(),E,N);else if(l.attachEvent)l.attachEvent(Tc(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function oo(){function l(m){return f.call(l.src,l.listener,m)}const f=tp;return l}function Ic(l,f,m,E,N){if(Array.isArray(f))for(var F=0;F<f.length;F++)Ic(l,f[F],m,E,N);else E=c(E)?!!E.capture:!!E,m=Sc(m),l&&l[De]?(l=l.i,f=String(f).toString(),f in l.g&&(F=l.g[f],m=_t(F,m,E,N),-1<m&&(at(F[m]),Array.prototype.splice.call(F,m,1),F.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ha(l))&&(f=l.g[f.toString()],l=-1,f&&(l=_t(f,m,E,N)),(m=-1<l?f[l]:null)&&Ga(m))}function Ga(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[De])Oe(f.i,l);else{var m=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(m,E,l.capture):f.detachEvent?f.detachEvent(Tc(m),E):f.addListener&&f.removeListener&&f.removeListener(E),(m=Ha(f))?(Oe(m,l),m.h==0&&(m.src=null,f[bn]=null)):at(l)}}}function Tc(l){return l in ye?ye[l]:ye[l]="on"+l}function tp(l,f){if(l.da)l=!0;else{f=new he(f,this);var m=l.listener,E=l.ha||l.src;l.fa&&Ga(l),l=m.call(E,f)}return l}function Ha(l){return l=l[bn],l instanceof fn?l:null}var ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sc(l){return typeof l=="function"?l:(l[ao]||(l[ao]=function(f){return l.handleEvent(f)}),l[ao])}function ue(){ae.call(this),this.i=new fn(this),this.M=this,this.F=null}g(ue,ae),ue.prototype[De]=!0,ue.prototype.removeEventListener=function(l,f,m,E){Ic(this,l,f,m,E)};function Qe(l,f){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new oe(f,l);else if(f instanceof oe)f.target=f.target||l;else{var N=f;f=new oe(E,l),b(f,N)}if(N=!0,m)for(var F=m.length-1;0<=F;F--){var K=f.g=m[F];N=Zi(K,E,!0,f)&&N}if(K=f.g=l,N=Zi(K,E,!0,f)&&N,N=Zi(K,E,!1,f)&&N,m)for(F=0;F<m.length;F++)K=f.g=m[F],N=Zi(K,E,!1,f)&&N}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var m=l.g[f],E=0;E<m.length;E++)at(m[E]);delete l.g[f],l.h--}}this.F=null},ue.prototype.K=function(l,f,m,E){return this.i.add(String(l),f,!1,m,E)},ue.prototype.L=function(l,f,m,E){return this.i.add(String(l),f,!0,m,E)};function Zi(l,f,m,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,F=0;F<f.length;++F){var K=f[F];if(K&&!K.da&&K.capture==m){var ke=K.listener,Rt=K.ha||K.src;K.fa&&Oe(l.i,K),N=ke.call(Rt,E)!==!1&&N}}return N&&!E.defaultPrevented}function lw(l,f,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function cw(l){l.g=lw(()=>{l.g=null,l.i&&(l.i=!1,cw(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Mk extends ae{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:cw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qa(l){ae.call(this),this.h=l,this.g={}}g(Qa,ae);var dw=[];function hw(l){M(l.g,function(f,m){this.g.hasOwnProperty(m)&&Ga(f)},l),l.g={}}Qa.prototype.N=function(){Qa.aa.N.call(this),hw(this)},Qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var np=a.JSON.stringify,Lk=a.JSON.parse,Fk=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function rp(){}rp.prototype.h=null;function fw(l){return l.h||(l.h=l.i())}function pw(){}var Ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ip(){oe.call(this,"d")}g(ip,oe);function sp(){oe.call(this,"c")}g(sp,oe);var es={},mw=null;function Rc(){return mw=mw||new ue}es.La="serverreachability";function gw(l){oe.call(this,es.La,l)}g(gw,oe);function Ja(l){const f=Rc();Qe(f,new gw(f))}es.STAT_EVENT="statevent";function yw(l,f){oe.call(this,es.STAT_EVENT,l),this.stat=f}g(yw,oe);function zt(l){const f=Rc();Qe(f,new yw(f,l))}es.Ma="timingevent";function _w(l,f){oe.call(this,es.Ma,l),this.size=f}g(_w,oe);function Xa(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Za(){this.g=!0}Za.prototype.xa=function(){this.g=!1};function Uk(l,f,m,E,N,F){l.info(function(){if(l.g)if(F)for(var K="",ke=F.split("&"),Rt=0;Rt<ke.length;Rt++){var Te=ke[Rt].split("=");if(1<Te.length){var Dt=Te[0];Te=Te[1];var Ot=Dt.split("_");K=2<=Ot.length&&Ot[1]=="type"?K+(Dt+"="+Te+"&"):K+(Dt+"=redacted&")}}else K=null;else K=F;return"XMLHTTP REQ ("+E+") [attempt "+N+"]: "+f+`
`+m+`
`+K})}function Bk(l,f,m,E,N,F,K){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+N+"]: "+f+`
`+m+`
`+F+" "+K})}function uo(l,f,m,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+zk(l,m)+(E?" "+E:"")})}function jk(l,f){l.info(function(){return"TIMEOUT: "+f})}Za.prototype.info=function(){};function zk(l,f){if(!l.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var N=E[1];if(Array.isArray(N)&&!(1>N.length)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(var K=1;K<N.length;K++)N[K]=""}}}}return np(m)}catch{return f}}var Ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},op;function Pc(){}g(Pc,rp),Pc.prototype.g=function(){return new XMLHttpRequest},Pc.prototype.i=function(){return{}},op=new Pc;function Yr(l,f,m,E){this.j=l,this.i=f,this.l=m,this.R=E||1,this.U=new Qa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ww}function ww(){this.i=null,this.g="",this.h=!1}var Ew={},ap={};function up(l,f,m){l.L=1,l.v=xc(wr(f)),l.m=m,l.P=!0,Iw(l,null)}function Iw(l,f){l.F=Date.now(),Cc(l),l.A=wr(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Mw(m.i,"t",E),l.C=0,m=l.j.J,l.h=new ww,l.g=eE(l.j,m?f:null,!l.m),0<l.O&&(l.M=new Mk(p(l.Y,l,l.g),l.O)),f=l.U,m=l.g,E=l.ca;var N="readystatechange";Array.isArray(N)||(N&&(dw[0]=N.toString()),N=dw);for(var F=0;F<N.length;F++){var K=Jn(m,N[F],E||f.handleEvent,!1,f.h||f);if(!K)break;f.g[K.key]=K}f=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Ja(),Uk(l.i,l.u,l.A,l.l,l.R,l.m)}Yr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Er(l)==3?f.j():this.Y(l)},Yr.prototype.Y=function(l){try{if(l==this.g)e:{const Ot=Er(this.g);var f=this.g.Ba();const ho=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||$w(this.g)))){this.J||Ot!=4||f==7||(f==8||0>=ho?Ja(3):Ja(2)),lp(this);var m=this.g.Z();this.X=m;t:if(Tw(this)){var E=$w(this.g);l="";var N=E.length,F=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),eu(this);var K="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(F&&f==N-1)});E.length=0,this.h.g+=l,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=m==200,Bk(this.i,this.u,this.A,this.l,this.R,Ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,Rt=this.g;if((ke=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ke)){var Te=ke;break t}}Te=null}if(m=Te)uo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cp(this,m);else{this.o=!1,this.s=3,zt(12),ts(this),eu(this);break e}}if(this.P){m=!0;let Bn;for(;!this.J&&this.C<K.length;)if(Bn=$k(this,K),Bn==ap){Ot==4&&(this.s=4,zt(14),m=!1),uo(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Ew){this.s=4,zt(15),uo(this.i,this.l,K,"[Invalid Chunk]"),m=!1;break}else uo(this.i,this.l,Bn,null),cp(this,Bn);if(Tw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||K.length!=0||this.h.h||(this.s=1,zt(16),m=!1),this.o=this.o&&m,!m)uo(this.i,this.l,K,"[Invalid Chunked Response]"),ts(this),eu(this);else if(0<K.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),gp(Dt),Dt.M=!0,zt(11))}}else uo(this.i,this.l,K,null),cp(this,K);Ot==4&&ts(this),this.o&&!this.J&&(Ot==4?Yw(this.j,this):(this.o=!1,Cc(this)))}else ox(this.g),m==400&&0<K.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),ts(this),eu(this)}}}catch{}finally{}};function Tw(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function $k(l,f){var m=l.C,E=f.indexOf(`
`,m);return E==-1?ap:(m=Number(f.substring(m,E)),isNaN(m)?Ew:(E+=1,E+m>f.length?ap:(f=f.slice(E,E+m),l.C=E+m,f)))}Yr.prototype.cancel=function(){this.J=!0,ts(this)};function Cc(l){l.S=Date.now()+l.I,Sw(l,l.I)}function Sw(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Xa(p(l.ba,l),f)}function lp(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Yr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jk(this.i,this.A),this.L!=2&&(Ja(),zt(17)),ts(this),this.s=2,eu(this)):Sw(this,this.S-l)};function eu(l){l.j.G==0||l.J||Yw(l.j,l)}function ts(l){lp(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,hw(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function cp(l,f){try{var m=l.j;if(m.G!=0&&(m.g==l||dp(m.h,l))){if(!l.K&&dp(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var N=E;if(N[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Lc(m),Vc(m);else break e;mp(m),zt(18)}}else m.za=N[1],0<m.za-m.T&&37500>N[2]&&m.F&&m.v==0&&!m.C&&(m.C=Xa(p(m.Za,m),6e3));if(1>=Pw(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else rs(m,11)}else if((l.K||m.g==l)&&Lc(m),!v(f))for(N=m.Da.g.parse(f),f=0;f<N.length;f++){let Te=N[f];if(m.T=Te[0],Te=Te[1],m.G==2)if(Te[0]=="c"){m.K=Te[1],m.ia=Te[2];const Dt=Te[3];Dt!=null&&(m.la=Dt,m.j.info("VER="+m.la));const Ot=Te[4];Ot!=null&&(m.Aa=Ot,m.j.info("SVER="+m.Aa));const ho=Te[5];ho!=null&&typeof ho=="number"&&0<ho&&(E=1.5*ho,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Bn=l.g;if(Bn){const Uc=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var F=E.h;F.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(hp(F,F.h),F.h=null))}if(E.D){const yp=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;yp&&(E.ya=yp,Ve(E.I,E.D,yp))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var K=l;if(E.qa=Zw(E,E.J?E.ia:null,E.W),K.K){Cw(E.h,K);var ke=K,Rt=E.L;Rt&&(ke.I=Rt),ke.B&&(lp(ke),Cc(ke)),E.g=K}else Hw(E);0<m.i.length&&Mc(m)}else Te[0]!="stop"&&Te[0]!="close"||rs(m,7);else m.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?rs(m,7):pp(m):Te[0]!="noop"&&m.l&&m.l.ta(Te),m.v=0)}}Ja(4)}catch{}}var qk=class{constructor(l,f){this.g=l,this.map=f}};function Rw(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Aw(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Pw(l){return l.h?1:l.g?l.g.size:0}function dp(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function hp(l,f){l.g?l.g.add(f):l.h=f}function Cw(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Rw.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function bw(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const m of l.g.values())f=f.concat(m.D);return f}return A(l.i)}function Wk(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],m=l.length,E=0;E<m;E++)f.push(l[E]);return f}f=[],m=0;for(E in l)f[m++]=l[E];return f}function Kk(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var m=0;m<l;m++)f.push(m);return f}f=[],m=0;for(const E in l)f[m++]=E;return f}}}function kw(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var m=Kk(l),E=Wk(l),N=E.length,F=0;F<N;F++)f.call(void 0,E[F],m&&m[F],l)}var xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gk(l,f){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),N=null;if(0<=E){var F=l[m].substring(0,E);N=l[m].substring(E+1)}else F=l[m];f(F,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ns(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ns){this.h=l.h,bc(this,l.j),this.o=l.o,this.g=l.g,kc(this,l.s),this.l=l.l;var f=l.i,m=new ru;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Nw(this,m),this.m=l.m}else l&&(f=String(l).match(xw))?(this.h=!1,bc(this,f[1]||"",!0),this.o=tu(f[2]||""),this.g=tu(f[3]||"",!0),kc(this,f[4]),this.l=tu(f[5]||"",!0),Nw(this,f[6]||"",!0),this.m=tu(f[7]||"")):(this.h=!1,this.i=new ru(null,this.h))}ns.prototype.toString=function(){var l=[],f=this.j;f&&l.push(nu(f,Dw,!0),":");var m=this.g;return(m||f=="file")&&(l.push("//"),(f=this.o)&&l.push(nu(f,Dw,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(nu(m,m.charAt(0)=="/"?Yk:Qk,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",nu(m,Xk)),l.join("")};function wr(l){return new ns(l)}function bc(l,f,m){l.j=m?tu(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function kc(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Nw(l,f,m){f instanceof ru?(l.i=f,Zk(l.i,l.h)):(m||(f=nu(f,Jk)),l.i=new ru(f,l.h))}function Ve(l,f,m){l.i.set(f,m)}function xc(l){return Ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function tu(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function nu(l,f,m){return typeof l=="string"?(l=encodeURI(l).replace(f,Hk),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Hk(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Dw=/[#\/\?@]/g,Qk=/[#\?:]/g,Yk=/[#\?]/g,Jk=/[#\?@]/g,Xk=/#/g;function ru(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Jr(l){l.g||(l.g=new Map,l.h=0,l.i&&Gk(l.i,function(f,m){l.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=ru.prototype,t.add=function(l,f){Jr(this),this.i=null,l=lo(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(f),this.h+=1,this};function Ow(l,f){Jr(l),f=lo(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Vw(l,f){return Jr(l),f=lo(l,f),l.g.has(f)}t.forEach=function(l,f){Jr(this),this.g.forEach(function(m,E){m.forEach(function(N){l.call(f,N,E,this)},this)},this)},t.na=function(){Jr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let E=0;E<f.length;E++){const N=l[E];for(let F=0;F<N.length;F++)m.push(f[E])}return m},t.V=function(l){Jr(this);let f=[];if(typeof l=="string")Vw(this,l)&&(f=f.concat(this.g.get(lo(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)f=f.concat(l[m])}return f},t.set=function(l,f){return Jr(this),this.i=null,l=lo(this,l),Vw(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Mw(l,f,m){Ow(l,f),0<m.length&&(l.i=null,l.g.set(lo(l,f),A(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var E=f[m];const F=encodeURIComponent(String(E)),K=this.V(E);for(E=0;E<K.length;E++){var N=F;K[E]!==""&&(N+="="+encodeURIComponent(String(K[E]))),l.push(N)}}return this.i=l.join("&")};function lo(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Zk(l,f){f&&!l.j&&(Jr(l),l.i=null,l.g.forEach(function(m,E){var N=E.toLowerCase();E!=N&&(Ow(this,E),Mw(this,N,m))},l)),l.j=f}function ex(l,f){const m=new Za;if(a.Image){const E=new Image;E.onload=y(Xr,m,"TestLoadImage: loaded",!0,f,E),E.onerror=y(Xr,m,"TestLoadImage: error",!1,f,E),E.onabort=y(Xr,m,"TestLoadImage: abort",!1,f,E),E.ontimeout=y(Xr,m,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function tx(l,f){const m=new Za,E=new AbortController,N=setTimeout(()=>{E.abort(),Xr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(F=>{clearTimeout(N),F.ok?Xr(m,"TestPingServer: ok",!0,f):Xr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),Xr(m,"TestPingServer: error",!1,f)})}function Xr(l,f,m,E,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),E(m)}catch{}}function nx(){this.g=new Fk}function rx(l,f,m){const E=m||"";try{kw(l,function(N,F){let K=N;c(N)&&(K=np(N)),f.push(E+F+"="+encodeURIComponent(K))})}catch(N){throw f.push(E+"type="+encodeURIComponent("_badmap")),N}}function Nc(l){this.l=l.Ub||null,this.j=l.eb||!1}g(Nc,rp),Nc.prototype.g=function(){return new Dc(this.l,this.j)},Nc.prototype.i=function(l){return function(){return l}}({});function Dc(l,f){ue.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Dc,ue),t=Dc.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,su(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,iu(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,su(this)),this.g&&(this.readyState=3,su(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lw(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lw(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?iu(this):su(this),this.readyState==3&&Lw(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,iu(this))},t.Qa=function(l){this.g&&(this.response=l,iu(this))},t.ga=function(){this.g&&iu(this)};function iu(l){l.readyState=4,l.l=null,l.j=null,l.v=null,su(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=f.next();return l.join(`\r
`)};function su(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Fw(l){let f="";return M(l,function(m,E){f+=E,f+=":",f+=m,f+=`\r
`}),f}function fp(l,f,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Fw(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Ve(l,f,m))}function Ye(l){ue.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Ye,ue);var ix=/^https?$/i,sx=["POST","PUT"];t=Ye.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():op.g(),this.v=this.o?fw(this.o):fw(op),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(F){Uw(this,F);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var N in E)m.set(N,E[N]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())m.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),N=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sx,f,void 0))||E||N||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of m)this.g.setRequestHeader(F,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zw(this),this.u=!0,this.g.send(l),this.u=!1}catch(F){Uw(this,F)}};function Uw(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Bw(l),Oc(l)}function Bw(l){l.A||(l.A=!0,Qe(l,"complete"),Qe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Qe(this,"complete"),Qe(this,"abort"),Oc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oc(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jw(this):this.bb())},t.bb=function(){jw(this)};function jw(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Er(l)!=4||l.Z()!=2)){if(l.u&&Er(l)==4)lw(l.Ea,0,l);else if(Qe(l,"readystatechange"),Er(l)==4){l.h=!1;try{const K=l.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var E;if(E=K===0){var N=String(l.D).match(xw)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),E=!ix.test(N?N.toLowerCase():"")}m=E}if(m)Qe(l,"complete"),Qe(l,"success");else{l.m=6;try{var F=2<Er(l)?l.g.statusText:""}catch{F=""}l.l=F+" ["+l.Z()+"]",Bw(l)}}finally{Oc(l)}}}}function Oc(l,f){if(l.g){zw(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Qe(l,"ready");try{m.onreadystatechange=E}catch{}}}function zw(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Er(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Lk(f)}};function $w(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ox(l){const f={};l=(l.g&&2<=Er(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(v(l[E]))continue;var m=x(l[E]);const N=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=f[N]||[];f[N]=F,F.push(m)}S(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ou(l,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||f}function qw(l){this.Aa=0,this.i=[],this.j=new Za,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ou("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ou("baseRetryDelayMs",5e3,l),this.cb=ou("retryDelaySeedMs",1e4,l),this.Wa=ou("forwardChannelMaxRetries",2,l),this.wa=ou("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Rw(l&&l.concurrentRequestLimit),this.Da=new nx,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qw.prototype,t.la=8,t.G=1,t.connect=function(l,f,m,E){zt(0),this.W=l,this.H=f||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=Zw(this,null,this.W),Mc(this)};function pp(l){if(Ww(l),l.G==3){var f=l.U++,m=wr(l.I);if(Ve(m,"SID",l.K),Ve(m,"RID",f),Ve(m,"TYPE","terminate"),au(l,m),f=new Yr(l,l.j,f),f.L=2,f.v=xc(wr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=eE(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Cc(f)}Xw(l)}function Vc(l){l.g&&(gp(l),l.g.cancel(),l.g=null)}function Ww(l){Vc(l),l.u&&(a.clearTimeout(l.u),l.u=null),Lc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Mc(l){if(!Aw(l.h)&&!l.s){l.s=!0;var f=l.Ga;ee||J(),B||(ee(),B=!0),W.add(f,l),l.B=0}}function ax(l,f){return Pw(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Xa(p(l.Ga,l,f),Jw(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const N=new Yr(this,this.j,l);let F=this.o;if(this.S&&(F?(F=_(F),b(F,this.S)):F=this.S),this.m!==null||this.O||(N.H=F,F=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Gw(this,N,f),m=wr(this.I),Ve(m,"RID",l),Ve(m,"CVER",22),this.D&&Ve(m,"X-HTTP-Session-Id",this.D),au(this,m),F&&(this.O?f="headers="+encodeURIComponent(String(Fw(F)))+"&"+f:this.m&&fp(m,this.m,F)),hp(this.h,N),this.Ua&&Ve(m,"TYPE","init"),this.P?(Ve(m,"$req",f),Ve(m,"SID","null"),N.T=!0,up(N,m,null)):up(N,m,f),this.G=2}}else this.G==3&&(l?Kw(this,l):this.i.length==0||Aw(this.h)||Kw(this))};function Kw(l,f){var m;f?m=f.l:m=l.U++;const E=wr(l.I);Ve(E,"SID",l.K),Ve(E,"RID",m),Ve(E,"AID",l.T),au(l,E),l.m&&l.o&&fp(E,l.m,l.o),m=new Yr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Gw(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),hp(l.h,m),up(m,E,f)}function au(l,f){l.H&&M(l.H,function(m,E){Ve(f,E,m)}),l.l&&kw({},function(m,E){Ve(f,E,m)})}function Gw(l,f,m){m=Math.min(l.i.length,m);var E=l.l?p(l.l.Na,l.l,l):null;e:{var N=l.i;let F=-1;for(;;){const K=["count="+m];F==-1?0<m?(F=N[0].g,K.push("ofs="+F)):F=0:K.push("ofs="+F);let ke=!0;for(let Rt=0;Rt<m;Rt++){let Te=N[Rt].g;const Dt=N[Rt].map;if(Te-=F,0>Te)F=Math.max(0,N[Rt].g-100),ke=!1;else try{rx(Dt,K,"req"+Te+"_")}catch{E&&E(Dt)}}if(ke){E=K.join("&");break e}}}return l=l.i.splice(0,m),f.D=l,E}function Hw(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ee||J(),B||(ee(),B=!0),W.add(f,l),l.v=0}}function mp(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Xa(p(l.Fa,l),Jw(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Qw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Xa(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Vc(this),Qw(this))};function gp(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Qw(l){l.g=new Yr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=wr(l.qa);Ve(f,"RID","rpc"),Ve(f,"SID",l.K),Ve(f,"AID",l.T),Ve(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ve(f,"TO",l.ja),Ve(f,"TYPE","xmlhttp"),au(l,f),l.m&&l.o&&fp(f,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=xc(wr(f)),m.m=null,m.P=!0,Iw(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Vc(this),mp(this),zt(19))};function Lc(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Yw(l,f){var m=null;if(l.g==f){Lc(l),gp(l),l.g=null;var E=2}else if(dp(l.h,f))m=f.D,Cw(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var N=l.B;E=Rc(),Qe(E,new _w(E,m)),Mc(l)}else Hw(l);else if(N=f.s,N==3||N==0&&0<f.X||!(E==1&&ax(l,f)||E==2&&mp(l)))switch(m&&0<m.length&&(f=l.h,f.i=f.i.concat(m)),N){case 1:rs(l,5);break;case 4:rs(l,10);break;case 3:rs(l,6);break;default:rs(l,2)}}}function Jw(l,f){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*f}function rs(l,f){if(l.j.info("Error code "+f),f==2){var m=p(l.fb,l),E=l.Xa;const N=!E;E=new ns(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bc(E,"https"),xc(E),N?ex(E.toString(),m):tx(E.toString(),m)}else zt(2);l.G=0,l.l&&l.l.sa(f),Xw(l),Ww(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function Xw(l){if(l.G=0,l.ka=[],l.l){const f=bw(l.h);(f.length!=0||l.i.length!=0)&&(R(l.ka,f),R(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function Zw(l,f,m){var E=m instanceof ns?wr(m):new ns(m);if(E.g!="")f&&(E.g=f+"."+E.g),kc(E,E.s);else{var N=a.location;E=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var F=new ns(null);E&&bc(F,E),f&&(F.g=f),N&&kc(F,N),m&&(F.l=m),E=F}return m=l.D,f=l.ya,m&&f&&Ve(E,m,f),Ve(E,"VER",l.la),au(l,E),E}function eE(l,f,m){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ye(new Nc({eb:m})):new Ye(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tE(){}t=tE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fc(){}Fc.prototype.g=function(l,f){return new pn(l,f)};function pn(l,f){ue.call(this),this.g=new qw(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!v(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new co(this)}g(pn,ue),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){pp(this.g)},pn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=np(l),l=m);f.i.push(new qk(f.Ya++,l)),f.G==3&&Mc(f)},pn.prototype.N=function(){this.g.l=null,delete this.j,pp(this.g),delete this.g,pn.aa.N.call(this)};function nE(l){ip.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const m in f){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}g(nE,ip);function rE(){sp.call(this),this.status=1}g(rE,sp);function co(l){this.g=l}g(co,tE),co.prototype.ua=function(){Qe(this.g,"a")},co.prototype.ta=function(l){Qe(this.g,new nE(l))},co.prototype.sa=function(l){Qe(this.g,new rE)},co.prototype.ra=function(){Qe(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,HP=function(){return new Fc},GP=function(){return Rc()},KP=es,Tg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,kd=Ac,vw.COMPLETE="complete",WP=vw,pw.EventType=Ya,Ya.OPEN="a",Ya.CLOSE="b",Ya.ERROR="c",Ya.MESSAGE="d",ue.prototype.listen=ue.prototype.K,xu=pw,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,qP=Ye}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const QI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new cf("@firebase/firestore");function Io(){return Oi.logLevel}function x2(t){Oi.setLogLevel(t)}function z(t,...e){if(Oi.logLevel<=fe.DEBUG){const n=e.map(B_);Oi.debug(`Firestore (${Va}): ${t}`,...n)}}function it(t,...e){if(Oi.logLevel<=fe.ERROR){const n=e.map(B_);Oi.error(`Firestore (${Va}): ${t}`,...n)}}function yr(t,...e){if(Oi.logLevel<=fe.WARN){const n=e.map(B_);Oi.warn(`Firestore (${Va}): ${t}`,...n)}}function B_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Va}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function Z(t,e){t||Y()}function N2(t,e){t||Y()}function H(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class D2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class O2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Z(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new xt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Z(typeof r.accessToken=="string"),new QP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new Et(e)}}class M2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class L2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new M2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Z(this.o===void 0);const r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string"),this.R=n.token,new F2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=B2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function fa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function JP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new $e(0,0))}static max(){return new ne(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends Pl{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends Pl{construct(e,n,r){return new je(e,n,r)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new je(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new j(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new je(n)}static emptyPath(){return new je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(me.fromString(e))}static fromName(e){return new G(me.fromString(e).popFirst(5))}static empty(){return new G(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Sg(t){return t.fields.find(e=>e.kind===2)}function us(t){return t.fields.filter(e=>e.kind!==2)}Eh.UNKNOWN_ID=-1;class xd{constructor(e,n){this.fieldPath=e,this.kind=n}}class Cl{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Cl(0,In.min())}}function XP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new In(i,G.empty(),e)}function ZP(t){return new In(t.readTime,t.key,-1)}class In{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new In(ne.min(),G.empty(),-1)}static max(){return new In(ne.max(),G.empty(),-1)}}function j_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==eC)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Hu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=z_(r.target.error);this.V.reject(new Hu(e,i))}}static open(e,n,r,i){try{return new If(n,e.transaction(i,r))}catch(s){throw new Hu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new $2(n)}}class hr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,hr.S(He())===12.2&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),ds(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!wl())return!1;if(hr.v())return!0;const e=He(),n=hr.S(e),r=0<n&&n<10,i=nC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Hu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new j(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Hu(e,o))},i.onupgradeneeded=s=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=If.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),O.reject(c))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,c=u.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class z2{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ds(this.B.delete())}}class Hu extends j{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qi(t){return t.name==="IndexedDbTransactionError"}class $2{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ds(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),ds(this.store.add(e))}get(e){return ds(this.store.get(e)).next(n=>(n===void 0&&(n=null),z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),ds(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),ds(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new O((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new O((r,i)=>{n.onerror=s=>{const o=z_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new z2(a),c=n(a.primaryKey,a.value,u);if(c instanceof O){const d=c.catch(h=>(u.done(),O.reject(h)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ds(t){return new O((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=z_(r.target.error);n(i)}})}let YI=!1;function z_(t){const e=hr.S(He());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YI||(YI=!0,setTimeout(()=>{throw r},0)),r}}return t}class q2{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Qi(n)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Hi(n)}await this.X(6e4)})}}class W2{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=ZP(s);j_(o,r)>0&&(r=o)}),new In(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rn.oe=-1;function ic(t){return t==null}function bl(t){return t===0&&1/t==-1/0}function rC(t){return typeof t=="number"&&Number.isInteger(t)&&!bl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JI(e)),e=K2(t.get(n),e);return JI(e)}function K2(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function JI(t){return t+""}function ur(t){const e=t.length;if(Z(e>=2),e===2)return Z(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Y(),t.charAt(o+1)){case"":const a=t.substring(s,o);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Y()}s=o+2}return new me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e){return[t,Ht(e)]}function iC(t,e,n){return[t,Ht(e),n]}const G2={},H2=["prefixPath","collectionGroup","readTime","documentId"],Q2=["prefixPath","collectionGroup","documentId"],Y2=["collectionGroup","readTime","prefixPath","documentId"],J2=["canonicalId","targetId"],X2=["targetId","path"],Z2=["path","targetId"],eU=["collectionId","parent"],tU=["indexId","uid"],nU=["uid","sequenceNumber"],rU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iU=["indexId","uid","orderedDocumentKey"],sU=["userId","collectionPath","documentId"],oU=["userId","collectionPath","largestBatchId"],aU=["userId","collectionGroup","largestBatchId"],sC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uU=[...sC,"documentOverlays"],oC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aC=oC,$_=[...aC,"indexConfiguration","indexState","indexEntries"],lU=$_,cU=[...$_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends tC{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function yt(t,e){const n=H(t);return hr.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ct.RED,this.left=i??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eT(this.data.getIterator())}getIteratorFrom(e){return new eT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new be(this.comparator);return n.data=e,n}}class eT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(je.comparator)}static empty(){return new sn([])}unionWith(e){let n=new be(je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lC("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const hU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(Z(!!t),typeof t=="string"){let e=0;const n=hU.exec(t);if(Z(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vi(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function q_(t){const e=t.mapValue.fields.__previous_value__;return Tf(e)?q_(e):e}function kl(t){const e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Mi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dd={nullValue:"NULL_VALUE"};function Ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tf(t)?4:cC(t)?9007199254740991:Sf(t)?10:11:Y()}function _r(t,e){if(t===e)return!0;const n=Ls(t);if(n!==Ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kl(t).isEqual(kl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ur(i.timestampValue),a=Ur(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vi(i.bytesValue).isEqual(Vi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ue(i.geoPointValue.latitude)===Ue(s.geoPointValue.latitude)&&Ue(i.geoPointValue.longitude)===Ue(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ue(i.integerValue)===Ue(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ue(i.doubleValue),a=Ue(s.doubleValue);return o===a?bl(o)===bl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fa(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ZI(o)!==ZI(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!_r(o[u],a[u])))return!1;return!0}(t,e);default:return Y()}}function xl(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Li(t,e){if(t===e)return 0;const n=Ls(t),r=Ls(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ue(s.integerValue||s.doubleValue),u=Ue(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return tT(t.timestampValue,e.timestampValue);case 4:return tT(kl(t),kl(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Vi(s),u=Vi(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=le(a[c],u[c]);if(d!==0)return d}return le(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=le(Ue(s.latitude),Ue(o.latitude));return a!==0?a:le(Ue(s.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,d;const h=s.fields||{},p=o.fields||{},y=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(u=p.value)===null||u===void 0?void 0:u.arrayValue,A=le(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:nT(y,g)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===mi.mapValue&&o===mi.mapValue)return 0;if(s===mi.mapValue)return 1;if(o===mi.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const p=le(u[h],d[h]);if(p!==0)return p;const y=Li(a[u[h]],c[d[h]]);if(y!==0)return y}return le(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Y()}}function tT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Ur(t),r=Ur(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function nT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Li(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function pa(t){return Ag(t)}function Ag(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ag(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ag(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Fs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pg(t){return!!t&&"integerValue"in t}function Nl(t){return!!t&&"arrayValue"in t}function rT(t){return!!t&&"nullValue"in t}function iT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Od(t){return!!t&&"mapValue"in t}function Sf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const dC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function pU(t){return"nullValue"in t?Dd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fs(Mi.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Sf(t)?dC:{mapValue:{}}:Y()}function mU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fs(Mi.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dC:"mapValue"in t?Sf(t)?{mapValue:{}}:mi:Y()}function sT(t,e){const n=Li(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function oT(t,e){const n=Li(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(n)}setAll(e){let n=je.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){to(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(Qu(this.value))}}function hC(t){const e=[];return to(t.fields,(n,r)=>{const i=new je([n]);if(Od(r)){const s=hC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Le(e,0,ne.min(),ne.min(),ne.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new Le(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new Le(e,2,n,ne.min(),ne.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Le(e,3,n,ne.min(),ne.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Le&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Le(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.position=e,this.inclusive=n}}function aT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Li(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function gU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{}class ge extends fC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yU(e,n,r):n==="array-contains"?new wU(e,r):n==="in"?new vC(e,r):n==="not-in"?new EU(e,r):n==="array-contains-any"?new IU(e,r):new ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _U(e,r):new vU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Li(n,this.value)):n!==null&&Ls(this.value)===Ls(n)&&this.matchesComparison(Li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pe extends fC{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pe(e,n)}matches(e){return ma(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ma(t){return t.op==="and"}function Cg(t){return t.op==="or"}function W_(t){return pC(t)&&ma(t)}function pC(t){for(const e of t.filters)if(e instanceof Pe)return!1;return!0}function bg(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+pa(t.value);if(W_(t))return t.filters.map(e=>bg(e)).join(",");{const e=t.filters.map(n=>bg(n)).join(",");return`${t.op}(${e})`}}function mC(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&mC(o,i.filters[a]),!0):!1}(t,e):void Y()}function gC(t,e){const n=t.filters.concat(e);return Pe.create(n,t.op)}function yC(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${pa(n.value)}`}(t):t instanceof Pe?function(n){return n.op.toString()+" {"+n.getFilters().map(yC).join(" ,")+"}"}(t):"Filter"}class yU extends ge{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class _U extends ge{constructor(e,n){super(e,"in",n),this.keys=_C("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vU extends ge{constructor(e,n){super(e,"not-in",n),this.keys=_C("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _C(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class wU extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nl(n)&&xl(n.arrayValue,this.value)}}class vC extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xl(this.value.arrayValue,n)}}class EU extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xl(this.value.arrayValue,n)}}class IU extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function kg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new TU(t,e,n,r,i,s,o)}function Us(t){const e=H(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ic(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>pa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>pa(r)).join(",")),e.ue=n}return e.ue}function sc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uT(t.startAt,e.startAt)&&uT(t.endAt,e.endAt)}function Ih(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Th(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function lT(t,e,n){let r=Dd,i=!0;for(const s of Th(t,e)){let o=Dd,a=!0;switch(s.op){case"<":case"<=":o=pU(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Dd}sT({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];sT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function cT(t,e,n){let r=mi,i=!0;for(const s of Th(t,e)){let o=mi,a=!0;switch(s.op){case">=":case">":o=mU(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=mi}oT({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];oT({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wC(t,e,n,r,i,s,o,a){return new Kr(t,e,n,r,i,s,o,a)}function Ma(t){return new Kr(t)}function dT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function K_(t){return t.collectionGroup!==null}function Xo(t){const e=H(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new be(je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Dl(s,r))}),n.has(je.keyField().canonicalString())||e.ce.push(new Dl(je.keyField(),r))}return e.ce}function Qt(t){const e=H(t);return e.le||(e.le=SU(e,Xo(t))),e.le}function SU(t,e){if(t.limitType==="F")return kg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Dl(i.field,s)});const n=t.endAt?new Fi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fi(t.startAt.position,t.startAt.inclusive):null;return kg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xg(t,e){const n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sh(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oc(t,e){return sc(Qt(t),Qt(e))&&t.limitType===e.limitType}function EC(t){return`${Us(Qt(t))}|lt:${t.limitType}`}function To(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yC(i)).join(", ")}]`),ic(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>pa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>pa(i)).join(",")),`Target(${r})`}(Qt(t))}; limitType=${t.limitType})`}function ac(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=aT(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Xo(r),i)||r.endAt&&!function(o,a,u){const c=aT(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Xo(r),i))}(t,e)}function IC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TC(t){return(e,n)=>{let r=!1;for(const i of Xo(t)){const s=RU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RU(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Li(u,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return uC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=new Ne(G.comparator);function on(){return AU}const SC=new Ne(G.comparator);function Nu(...t){let e=SC;for(const n of t)e=e.insert(n.key,n);return e}function RC(t){let e=SC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lr(){return Yu()}function AC(){return Yu()}function Yu(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const PU=new Ne(G.comparator),CU=new be(G.comparator);function de(...t){let e=CU;for(const n of t)e=e.add(n);return e}const bU=new be(le);function G_(){return bU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function PC(t){return{integerValue:""+t}}function CC(t,e){return rC(e)?PC(e):H_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function kU(t,e,n){return t instanceof ga?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tf(s)&&(s=q_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Bs?kC(t,e):t instanceof js?xC(t,e):function(i,s){const o=bC(i,s),a=hT(o)+hT(i.Pe);return Pg(o)&&Pg(i.Pe)?PC(a):H_(i.serializer,a)}(t,e)}function xU(t,e,n){return t instanceof Bs?kC(t,e):t instanceof js?xC(t,e):n}function bC(t,e){return t instanceof ya?function(r){return Pg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ga extends Rf{}class Bs extends Rf{constructor(e){super(),this.elements=e}}function kC(t,e){const n=NC(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class js extends Rf{constructor(e){super(),this.elements=e}}function xC(t,e){let n=NC(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class ya extends Rf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hT(t){return Ue(t.integerValue||t.doubleValue)}function NC(t){return Nl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.field=e,this.transform=n}}function NU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Bs&&i instanceof Bs||r instanceof js&&i instanceof js?fa(r.elements,i.elements,_r):r instanceof ya&&i instanceof ya?_r(r.Pe,i.Pe):r instanceof ga&&i instanceof ga}(t.transform,e.transform)}class DU{constructor(e,n){this.version=e,this.transformResults=n}}class ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ze}static exists(e){return new ze(void 0,e)}static updateTime(e){return new ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function DC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fa(t.key,ze.none()):new La(t.key,t.data,ze.none());{const n=t.data,r=bt.empty();let i=new be(je.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gr(t.key,r,new sn(i.toArray()),ze.none())}}function OU(t,e,n){t instanceof La?function(i,s,o){const a=i.value.clone(),u=pT(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(i,s,o){if(!Vd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=pT(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(OC(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ju(t,e,n,r){return t instanceof La?function(s,o,a,u){if(!Vd(s.precondition,o))return a;const c=s.value.clone(),d=mT(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gr?function(s,o,a,u){if(!Vd(s.precondition,o))return a;const c=mT(s.fieldTransforms,u,o),d=o.data;return d.setAll(OC(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Vd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function VU(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=bC(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function fT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fa(r,i,(s,o)=>NU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class La extends Af{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gr extends Af{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function OC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pT(t,e,n){const r=new Map;Z(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xU(o,a,n[i]))}return r}function mT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,kU(s,o,e))}return r}class Fa extends Af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q_ extends Af{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&OU(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=AC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=DC(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,(n,r)=>fT(n,r))&&fa(this.baseMutations,e.baseMutations,(n,r)=>fT(n,r))}}class J_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Z(e.mutations.length===r.length);let i=function(){return PU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new J_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,_e;function VC(t){switch(t){default:return Y();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function MC(t){if(t===void 0)return it("GRPC error has no .code"),L.UNKNOWN;switch(t){case ut.OK:return L.OK;case ut.CANCELLED:return L.CANCELLED;case ut.UNKNOWN:return L.UNKNOWN;case ut.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case ut.INTERNAL:return L.INTERNAL;case ut.UNAVAILABLE:return L.UNAVAILABLE;case ut.UNAUTHENTICATED:return L.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case ut.NOT_FOUND:return L.NOT_FOUND;case ut.ALREADY_EXISTS:return L.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return L.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case ut.ABORTED:return L.ABORTED;case ut.OUT_OF_RANGE:return L.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return L.UNIMPLEMENTED;case ut.DATA_LOSS:return L.DATA_LOSS;default:return Y()}}(_e=ut||(ut={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Cs([4294967295,4294967295],0);function gT(t){const e=LC().encode(t),n=new $P;return n.update(e),new Uint8Array(n.digest())}function yT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cs([n,r],0),new Cs([i,s],0)]}class Z_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Du(`Invalid padding: ${n}`);if(r<0)throw new Du(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Du(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Du(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Cs.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Cs.fromNumber(r)));return i.compare(LU)===1&&(i=new Cs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gT(e),[r,i]=yT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Z_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gT(e),[r,i]=yT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,cc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lc(ne.min(),i,new Ne(le),on(),de())}}class cc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cc(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FC{constructor(e,n){this.targetId=e,this.me=n}}class UC{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class _T{constructor(){this.fe=0,this.ge=wT(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new cc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class FU{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=vT(),this.Qe=new Ne(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ih(s))if(r===0){const o=new G(s.path);this.Ue(n,o,Le.newNoDocument(o,ne.min()))}else Z(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Vi(r).toUint8Array()}catch(u){if(u instanceof lC)return yr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Z_(o,i,s)}catch(u){return yr(u instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ih(a.target)){const u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Le.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new lc(e,n,this.Qe,this.ke,r);return this.ke=on(),this.qe=vT(),this.Qe=new Ne(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _T,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new be(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _T),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function vT(){return new Ne(G.comparator)}function wT(){return new Ne(G.comparator)}const UU={asc:"ASCENDING",desc:"DESCENDING"},BU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jU={and:"AND",or:"OR"};class zU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ng(t,e){return t.useProto3Json||ic(e)?e:{value:e}}function _a(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $U(t,e){return _a(t,e.toTimestamp())}function st(t){return Z(!!t),ne.fromTimestamp(function(n){const r=Ur(n);return new $e(r.seconds,r.nanos)}(t))}function ev(t,e){return Dg(t,e).canonicalString()}function Dg(t,e){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jC(t){const e=me.fromString(t);return Z(JC(e)),e}function Ol(t,e){return ev(t.databaseId,e.path)}function fr(t,e){const n=jC(e);if(n.get(1)!==t.databaseId.projectId)throw new j(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(qC(n))}function zC(t,e){return ev(t.databaseId,e)}function $C(t){const e=jC(t);return e.length===4?me.emptyPath():qC(e)}function Og(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qC(t){return Z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ET(t,e,n){return{name:Ol(t,e),fields:n.value.mapValue.fields}}function WC(t,e,n){const r=fr(t,e.name),i=st(e.updateTime),s=e.createTime?st(e.createTime):ne.min(),o=new bt({mapValue:{fields:e.fields}}),a=Le.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function qU(t,e){return"found"in e?function(r,i){Z(!!i.found),i.found.name,i.found.updateTime;const s=fr(r,i.found.name),o=st(i.found.updateTime),a=i.found.createTime?st(i.found.createTime):ne.min(),u=new bt({mapValue:{fields:i.found.fields}});return Le.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){Z(!!i.missing),Z(!!i.readTime);const s=fr(r,i.missing),o=st(i.readTime);return Le.newNoDocument(s,o)}(t,e):Y()}function WU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Z(d===void 0||typeof d=="string"),et.fromBase64String(d||"")):(Z(d===void 0||d instanceof Buffer||d instanceof Uint8Array),et.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:MC(c.code);return new j(d,c.message||"")}(o);n=new UC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fr(t,r.document.name),s=st(r.document.updateTime),o=r.document.createTime?st(r.document.createTime):ne.min(),a=new bt({mapValue:{fields:r.document.fields}}),u=Le.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Md(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fr(t,r.document),s=r.readTime?st(r.readTime):ne.min(),o=Le.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Md([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fr(t,r.document),s=r.removedTargetIds||[];n=new Md([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new MU(i,s),a=r.targetId;n=new FC(a,o)}}return n}function Vl(t,e){let n;if(e instanceof La)n={update:ET(t,e.key,e.value)};else if(e instanceof Fa)n={delete:Ol(t,e.key)};else if(e instanceof Gr)n={update:ET(t,e.key,e.data),updateMask:JU(e.fieldMask)};else{if(!(e instanceof Q_))return Y();n={verify:Ol(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ga)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof js)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ya)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$U(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function Vg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?ze.updateTime(st(s.updateTime)):s.exists!==void 0?ze.exists(s.exists):ze.none()}(e.currentDocument):ze.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),u=new ga;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];u=new Bs(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];u=new js(d)}else"increment"in a?u=new ya(o,a.increment):Y();const c=je.fromServerFormat(a.fieldPath);return new uc(c,u)}(t,i)):[];if(e.update){e.update.name;const i=fr(t,e.update.name),s=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(u){const c=u.fieldPaths||[];return new sn(c.map(d=>je.fromServerFormat(d)))}(e.updateMask);return new Gr(i,s,o,n,r)}return new La(i,s,n,r)}if(e.delete){const i=fr(t,e.delete);return new Fa(i,n)}if(e.verify){const i=fr(t,e.verify);return new Q_(i,n)}return Y()}function KU(t,e){return t&&t.length>0?(Z(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?st(i.updateTime):st(s);return o.isEqual(ne.min())&&(o=st(s)),new DU(o,i.transformResults||[])}(n,e))):[]}function KC(t,e){return{documents:[zC(t,e.path)]}}function GC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zC(t,i);const s=function(c){if(c.length!==0)return YC(Pe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:So(p.field),direction:HU(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ng(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function HC(t){let e=$C(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Z(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=QC(h);return p instanceof Pe&&W_(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(g){return new Dl(Ro(g.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,ic(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(h){const p=!!h.before,y=h.values||[];return new Fi(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,y=h.values||[];return new Fi(y,p)}(n.endAt)),wC(e,i,o,s,a,"F",u,c)}function GU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ro(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ro(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ro(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ro(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(Ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pe.create(n.compositeFilter.filters.map(r=>QC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function HU(t){return UU[t]}function QU(t){return BU[t]}function YU(t){return jU[t]}function So(t){return{fieldPath:t.canonicalString()}}function Ro(t){return je.fromServerFormat(t.fieldPath)}function YC(t){return t instanceof ge?function(n){if(n.op==="=="){if(iT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(rT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(rT(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:QU(n.op),value:n.value}}}(t):t instanceof Pe?function(n){const r=n.getFilters().map(i=>YC(i));return r.length===1?r[0]:{compositeFilter:{op:YU(n.op),filters:r}}}(t):Y()}function JU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.ct=e}}function XU(t,e){let n;if(e.document)n=WC(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=$s(e.noDocument.readTime);n=Le.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=G.fromSegments(e.unknownDocument.path),i=$s(e.unknownDocument.version);n=Le.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new $e(i[0],i[1]);return ne.fromTimestamp(s)}(e.readTime)),n}function IT(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Ol(s,o.key),fields:o.data.value.mapValue.fields,updateTime:_a(s,o.version.toTimestamp()),createTime:_a(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zs(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:zs(e.version)}}return r}function Rh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $s(t){const e=new $e(t.seconds,t.nanoseconds);return ne.fromTimestamp(e)}function hs(t,e){const n=(e.baseMutations||[]).map(s=>Vg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Vg(t.ct,s)),i=$e.fromMillis(e.localWriteTimeMs);return new Y_(e.batchId,i,n,r)}function Ou(t){const e=$s(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$s(t.lastLimboFreeSnapshotVersion):ne.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Z(s.documents.length===1),Qt(Ma($C(s.documents[0])))}(t.query):function(s){return Qt(HC(s))}(t.query),new br(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function ZC(t,e){const n=zs(e.snapshotVersion),r=zs(e.lastLimboFreeSnapshotVersion);let i;i=Ih(e.target)?KC(t.ct,e.target):GC(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Us(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tv(t){const e=HC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sh(e,e.limit,"L"):e}function em(t,e){return new X_(e.largestBatchId,Vg(t.ct,e.overlayMutation))}function TT(t,e){const n=e.path.lastSegment();return[t,Ht(e.path.popLast()),n]}function ST(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:zs(r.readTime),documentKey:Ht(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{getBundleMetadata(e,n){return RT(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:$s(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return RT(e).put(function(i){return{bundleId:i.id,createTime:zs(st(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return AT(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:tv(s.bundledQuery),readTime:$s(s.readTime)}}(r)})}saveNamedQuery(e,n){return AT(e).put(function(i){return{name:i.name,readTime:zs(st(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function RT(t){return yt(t,"bundles")}function AT(t){return yt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Pf(e,r)}getOverlay(e,n){return yu(e).get(TT(this.userId,n)).next(r=>r?em(this.serializer,r):null)}getOverlays(e,n){const r=lr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new X_(n,o);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Ht(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(yu(e).j("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,n,r){const i=lr(),s=Ht(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return yu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const c=em(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=lr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return yu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,c,d)=>{const h=em(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return yu(e).put(function(i,s,o){const[a,u,c]=TT(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Vl(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function yu(t){return yt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{Pt(e){return yt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ue(e.integerValue));else if("doubleValue"in e){const r=Ue(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),bl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ur(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Vi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?cC(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Sf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Y()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ue(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}fs.vt=new fs;function tB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function PT(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=tB(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class nB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=PT(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=PT(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rB{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class iB{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class _u{constructor(){this.jt=new nB,this.Ht=new rB(this.jt),this.Jt=new iB(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ps(this.indexId,this.documentKey,this.arrayValue,r)}}function ti(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=CT(t.arrayValue,e.arrayValue),n!==0?n:(n=CT(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function CT(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.Xt=new be((n,r)=>je.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;const n=Sg(e);if(n!==void 0&&!this.sn(n))return!1;const r=us(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new be(je.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new xd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new xd(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new xd(r.field,r.dir==="asc"?0:1)));return new Eh(Eh.UNKNOWN_ID,this.collectionId,n,Cl.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){var e,n;if(Z(t instanceof ge||t instanceof Pe),t instanceof ge){if(t instanceof vC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return Pe.create(i,"or")}return t}const r=t.filters.map(i=>e1(i));return Pe.create(r,t.op)}function sB(t){if(t.getFilters().length===0)return[];const e=Fg(e1(t));return Z(t1(e)),Mg(e)||Lg(e)?[e]:e.getFilters()}function Mg(t){return t instanceof ge}function Lg(t){return t instanceof Pe&&W_(t)}function t1(t){return Mg(t)||Lg(t)||function(n){if(n instanceof Pe&&Cg(n)){for(const r of n.getFilters())if(!Mg(r)&&!Lg(r))return!1;return!0}return!1}(t)}function Fg(t){if(Z(t instanceof ge||t instanceof Pe),t instanceof ge)return t;if(t.filters.length===1)return Fg(t.filters[0]);const e=t.filters.map(r=>Fg(r));let n=Pe.create(e,t.op);return n=Ah(n),t1(n)?n:(Z(n instanceof Pe),Z(ma(n)),Z(n.filters.length>1),n.filters.reduce((r,i)=>nv(r,i)))}function nv(t,e){let n;return Z(t instanceof ge||t instanceof Pe),Z(e instanceof ge||e instanceof Pe),n=t instanceof ge?e instanceof ge?function(i,s){return Pe.create([i,s],"and")}(t,e):kT(t,e):e instanceof ge?kT(e,t):function(i,s){if(Z(i.filters.length>0&&s.filters.length>0),ma(i)&&ma(s))return gC(i,s.getFilters());const o=Cg(i)?i:s,a=Cg(i)?s:i,u=o.filters.map(c=>nv(c,a));return Pe.create(u,"or")}(t,e),Ah(n)}function kT(t,e){if(ma(e))return gC(e,t.getFilters());{const n=e.filters.map(r=>nv(t,r));return Pe.create(n,"or")}}function Ah(t){if(Z(t instanceof ge||t instanceof Pe),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return Ah(e[0]);if(pC(t))return t;const n=e.map(i=>Ah(i)),r=[];return n.forEach(i=>{i instanceof ge?r.push(i):i instanceof Pe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.un=new rv}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(In.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(In.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class rv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new be(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=new Uint8Array(0);class aB{constructor(e,n){this.databaseId=n,this.cn=new rv,this.ln=new Yi(r=>Us(r),(r,i)=>sc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Ht(i)};return xT(e).put(s)}return O.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[JP(n),""],!1,!0);return xT(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ur(o.parent))}return r})}addFieldIndex(e,n){const r=vu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=yo(e);return s.next(a=>{o.put(ST(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=vu(e),i=yo(e),s=go(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=vu(e),r=go(e),i=yo(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return O.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new bT(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=go(e);let i=!0;const s=new Map;return O.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de();const a=[];return O.forEach(s,(u,c)=>{z("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(u)} to execute ${Us(n)}`);const d=function(w,k){const V=Sg(k);if(V===void 0)return null;for(const M of Th(w,V.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(c,u),h=function(w,k){const V=new Map;for(const M of us(k))for(const S of Th(w,M.fieldPath))switch(S.op){case"==":case"in":V.set(M.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return V.set(M.fieldPath.canonicalString(),S.value),Array.from(V.values())}return null}(c,u),p=function(w,k){const V=[];let M=!0;for(const S of us(k)){const _=S.kind===0?lT(w,S.fieldPath,w.startAt):cT(w,S.fieldPath,w.startAt);V.push(_.value),M&&(M=_.inclusive)}return new Fi(V,M)}(c,u),y=function(w,k){const V=[];let M=!0;for(const S of us(k)){const _=S.kind===0?cT(w,S.fieldPath,w.endAt):lT(w,S.fieldPath,w.endAt);V.push(_.value),M&&(M=_.inclusive)}return new Fi(V,M)}(c,u),g=this.In(u,c,p),A=this.In(u,c,y),R=this.Tn(u,c,h),I=this.En(u.indexId,d,g,p.inclusive,A,y.inclusive,R);return O.forEach(I,v=>r.G(v,n.limit).next(w=>{w.forEach(k=>{const V=G.fromSegments(k.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=sB(Pe.create(e.filters,"and")).map(r=>kg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const u=(n!=null?n.length:1)*Math.max(r.length,s.length),c=u/(n!=null?n.length:1),d=[];for(let h=0;h<u;++h){const p=n?this.dn(n[h/c]):od,y=this.An(e,p,r[h%c],i),g=this.Rn(e,p,s[h%c],o),A=a.map(R=>this.An(e,p,R,!0));d.push(...this.createRange(y,g,A))}return d}An(e,n,r,i){const s=new ps(e,G.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new ps(e,G.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new bT(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return O.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let c=new be(je.comparator),d=!1;for(const h of u.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of u.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new _u;for(const i of us(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);fs.vt.It(s,o)}return r.zt()}dn(e){const n=new _u;return fs.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new _u;return fs.vt.It(Fs(this.databaseId,n),r.Yt(function(s){const o=us(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new _u);let s=0;for(const o of us(e)){const a=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&Nl(a))i=this.gn(i,o,a);else{const c=u.Yt(o.kind);fs.vt.It(a,c)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new _u;u.seed(a.zt()),fs.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=vu(e),i=yo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(d,h){const p=h?new Cl(h.sequenceNumber,new In($s(h.readTime),new G(ur(h.documentKey)),h.largestBatchId)):Cl.empty(),y=d.fields.map(([g,A])=>new xd(je.fromServerFormat(g),A));return new Eh(d.indexId,d.collectionGroup,y,p)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:le(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=vu(e),s=yo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,u=>s.put(ST(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,u=>this.wn(e,i,u).next(c=>{const d=this.Sn(s,u);return c.isEqual(d)?O.resolve():this.bn(e,s,u,c,d)}))))})}Dn(e,n,r,i){return go(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return go(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=go(e);let s=new be(ti);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new ps(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new be(ti);const i=this.Vn(n,e);if(i==null)return r;const s=Sg(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Nl(o))for(const a of o.arrayValue.values||[])r=r.add(new ps(n.indexId,e.key,this.dn(a),i))}else r=r.add(new ps(n.indexId,e.key,od,i));return r}bn(e,n,r,i,s){z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,c,d,h,p){const y=u.getIterator(),g=c.getIterator();let A=mo(y),R=mo(g);for(;A||R;){let I=!1,v=!1;if(A&&R){const w=d(A,R);w<0?v=!0:w>0&&(I=!0)}else A!=null?v=!0:I=!0;I?(h(R),R=mo(g)):v?(p(A),A=mo(y)):(A=mo(y),R=mo(g))}}(i,s,ti,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),O.waitFor(o)}yn(e){let n=1;return yo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ti(o,a)).filter((o,a,u)=>!a||ti(o,u[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ti(o,e),u=ti(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,od,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,od,[]];s.push(IDBKeyRange.bound(a,u))}return s}Cn(e,n){return ti(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(NT)}getMinOffset(e,n){return O.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Y())).next(NT)}}function xT(t){return yt(t,"collectionParents")}function go(t){return yt(t,"indexEntries")}function vu(t){return yt(t,"indexConfiguration")}function yo(t){return yt(t,"indexState")}function NT(t){Z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;j_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new In(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(u.next(()=>{Z(a===1)}));const c=[];for(const d of n.mutations){const h=iC(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return O.waitFor(s).next(()=>c)}function Ph(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(41943040,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);class Cf{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Cf(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ao(e),o=ni(e);return o.add({}).next(a=>{Z(typeof a=="number");const u=new Y_(a,n,r,i),c=function(y,g,A){const R=A.baseMutations.map(v=>Vl(y.ct,v)),I=A.mutations.map(v=>Vl(y.ct,v));return{userId:g,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:R,mutations:I}}(this.serializer,this.userId,u),d=[];let h=new be((p,y)=>le(p.canonicalString(),y.canonicalString()));for(const p of i){const y=iC(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(y,G2))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),O.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return ni(e).get(n).next(r=>r?(Z(r.userId===this.userId),hs(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?O.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ni(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Z(a.batchId>=r),s=hs(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ni(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ni(e).U("userMutationsIndex",n).next(r=>r.map(i=>hs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Nd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ao(e).J({range:i},(o,a,u)=>{const[c,d,h]=o,p=ur(d);if(c===this.userId&&n.path.isEqual(p))return ni(e).get(h).next(y=>{if(!y)throw Y();Z(y.userId===this.userId),s.push(hs(this.serializer,y))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new be(le);const i=[];return n.forEach(s=>{const o=Nd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Ao(e).J({range:a},(c,d,h)=>{const[p,y,g]=c,A=ur(y);p===this.userId&&s.path.isEqual(A)?r=r.add(g):h.done()});i.push(u)}),O.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Nd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new be(le);return Ao(e).J({range:o},(u,c,d)=>{const[h,p,y]=u,g=ur(p);h===this.userId&&r.isPrefixOf(g)?g.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(ni(e).get(s).next(o=>{if(o===null)throw Y();Z(o.userId===this.userId),r.push(hs(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return n1(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ao(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=ur(s[1]);i.push(u)}else a.done()}).next(()=>{Z(i.length===0)})})}containsKey(e,n){return r1(e,this.userId,n)}Nn(e){return i1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function r1(t,e,n){const r=Nd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ao(t).J({range:s,H:!0},(a,u,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function ni(t){return yt(t,"mutations")}function Ao(t){return yt(t,"documentMutations")}function i1(t){return yt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new qs(0)}static kn(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new qs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ne.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_o(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return _o(e).J((o,a)=>{const u=Ou(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,n){return _o(e).J((r,i)=>{const s=Ou(i);n(s)})}qn(e){return OT(e).get("targetGlobalKey").next(n=>(Z(n!==null),n))}Qn(e,n){return OT(e).put("targetGlobalKey",n)}Kn(e,n){return _o(e).put(ZC(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Us(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return _o(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const c=Ou(a);sc(n,c.target)&&(s=c,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ci(e);return n.forEach(o=>{const a=Ht(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,n,r){const i=ci(e);return O.forEach(n,s=>{const o=Ht(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ci(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ci(e);let s=de();return i.J({range:r,H:!0},(o,a,u)=>{const c=ur(o[1]),d=new G(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Ht(n.path),i=IDBKeyRange.bound([r],[JP(r)],!1,!0);let s=0;return ci(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ot(e,n){return _o(e).get(n).next(r=>r?Ou(r):null)}}function _o(t){return yt(t,"targets")}function OT(t){return yt(t,"targetGlobal")}function ci(t){return yt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class lB{constructor(e){this.Un=e,this.buffer=new be(VT),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();VT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qi(n)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Hi(n)}await this.Hn(3e5)})}}class dB{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(rn.oe);const r=new lB(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(DT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DT):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Io()<=fe.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function hB(t,e){return new dB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n){this.db=e,this.garbageCollector=hB(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return ad(e,r)}removeReference(e,n,r){return ad(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ad(e,n)}nr(e,n){return function(i,s){let o=!1;return i1(i).Y(a=>r1(i,a,s).next(u=>(u&&(o=!0),O.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const u=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ne.min()),ci(e).delete(function(h){return[0,Ht(h.path)]}(o))))});i.push(u)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ad(e,n)}tr(e,n){const r=ci(e);let i,s=rn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:c})=>{o===0?(s!==rn.oe&&n(new G(ur(i)),s),s=c,i=u):s=rn.oe}).next(()=>{s!==rn.oe&&n(new G(ur(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ad(t,e){return ci(t).put(function(r,i){return{targetId:0,path:Ht(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return is(e).put(r)}removeEntry(e,n,r){return is(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Rh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Le.newInvalidDocument(n);return is(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wu(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Le.newInvalidDocument(n)};return is(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(wu(n))},(i,s)=>{r={document:this.ir(n,s),size:Ph(s)}}).next(()=>r)}getEntries(e,n){let r=on();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=on(),i=new Ne(G.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Ph(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return O.resolve();let i=new be(FT);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(wu(i.first()),wu(i.last())),o=i.getIterator();let a=o.getNext();return is(e).J({index:"documentKeyIndex",range:s},(u,c,d)=>{const h=G.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&FT(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(wu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Rh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return is(e).U(IDBKeyRange.bound(a,u,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=on();for(const h of c){const p=this.ir(G.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(ac(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=on();const o=LT(n,r),a=LT(n,In.max());return is(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,c,d)=>{const h=this.ir(G.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new mB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return MT(e).get("remoteDocumentGlobalKey").next(n=>(Z(!!n),n))}rr(e,n){return MT(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=XU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ne.min())))return r}return Le.newInvalidDocument(e)}}function o1(t){return new pB(t)}class mB extends s1{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Yi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new be((s,o)=>le(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=IT(this.cr.serializer,o);i=i.add(s.path.popLast());const c=Ph(u);r+=c-a.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=IT(this.cr.serializer,o.convertToNoDocument(ne.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function MT(t){return yt(t,"remoteDocumentGlobal")}function is(t){return yt(t,"remoteDocumentsV14")}function wu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LT(t,e){const n=e.documentKey.path.toArray();return[t,Rh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FT(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=le(n[s],r[s]),i)return i;return i=le(n.length,r.length),i||(i=le(n[n.length-2],r[r.length-2]),i||le(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ju(r.mutation,i,sn.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=lr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Nu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=on();const o=Yu(),a=function(){return Yu()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Gr)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Ju(d.mutation,c,d.mutation.getFieldMask(),$e.now())):o.set(c.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new gB(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Yu();let i=new Ne((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||sn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=AC();d.forEach(p=>{if(!s.has(p)){const y=DC(n.get(p),r.get(p));y!==null&&h.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):K_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(lr());let a=-1,u=s;return o.next(c=>O.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,de())).next(d=>({batchId:a,changes:RC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Nu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Nu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{const c=function(h,p){return new Kr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Le.newInvalidDocument(d)))});let a=Nu();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Ju(d.mutation,c,sn.empty(),$e.now()),ac(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:st(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:tv(i.bundledQuery),readTime:st(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(){this.overlays=new Ne(G.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=lr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=lr(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=lr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=lr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X_(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.Tr=new be(vt.Er),this.dr=new be(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new vt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new me([])),r=new vt(n,e),i=new vt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new me([])),r=new vt(n,e),i=new vt(n,e+1);let s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new vt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new be(vt.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new vt(n,0),i=new vt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new be(le);return n.forEach(i=>{const s=new vt(i,0),o=new vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new vt(new G(s),0);let a=new be(le);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Z(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{const s=new vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new vt(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.Mr=e,this.docs=function(){return new Ne(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Le.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=on();const o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||j_(ZP(d),r)<=0||(i.has(d.key)||ac(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IB(this)}getSize(e){return O.resolve(this.size)}}class IB extends s1{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.persistence=e,this.Nr=new Yi(n=>Us(n),sc),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new iv,this.targetCount=0,this.kr=qs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new qs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rn(0),this.Kr=!1,this.Kr=!0,this.$r=new vB,this.referenceDelegate=e(this),this.Ur=new TB(this),this.indexManager=new oB,this.remoteDocumentCache=function(i){return new EB(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new XC(n),this.Gr=new yB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _B,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new wB(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const i=new SB(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class SB extends tC{constructor(e){super(),this.currentSequenceNumber=e}}class bf{constructor(e){this.persistence=e,this.Jr=new iv,this.Yr=null}static Zr(e){return new bf(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.serializer=e}O(e,n,r,i){const s=new If("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XI,{unique:!0}),u.createObjectStore("documentMutations")}(e),UT(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),UT(e)),o=o.next(()=>function(u){const c=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ne.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,c){return c.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XI,{unique:!0});const h=c.store("mutations"),p=d.map(y=>h.put(y));return O.waitFor(p)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){const c=u.createObjectStore("documentOverlays",{keyPath:sU});c.createIndex("collectionPathOverlayIndex",oU,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",aU,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const c=u.createObjectStore("remoteDocumentsV14",{keyPath:H2});c.createIndex("documentKeyIndex",Q2),c.createIndex("collectionGroupIndex",Y2)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:tU}).createIndex("sequenceNumberIndex",nU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:rU}).createIndex("documentKeyIndex",iU,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Ph(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>O.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,u=>{Z(u.userId===s.userId);const c=hs(this.serializer,u);return n1(e,s.userId,c).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new me(o),c=function(h){return[0,Ht(h)]}(u);s.push(n.get(c).next(d=>d?O.resolve():(h=>n.put({targetId:0,path:Ht(h),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>O.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:eU});const r=n.store("collectionParents"),i=new rv,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Ht(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new me(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],c)=>{const d=ur(a);return s(d.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Ou(i),o=ZC(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=function(h){return h.document?new G(me.fromString(h.document.name).popFirst(5)):h.noDocument?G.fromSegments(h.noDocument.path):h.unknownDocument?G.fromSegments(h.unknownDocument.path):Y()}(o).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>O.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=o1(this.serializer),s=new u1(bf.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var c;let d=(c=a.get(u.userId))!==null&&c!==void 0?c:de();hs(this.serializer,u).keys().forEach(h=>d=d.add(h)),a.set(u.userId,d)}),O.forEach(a,(u,c)=>{const d=new Et(c),h=Pf.lt(this.serializer,d),p=s.getIndexManager(d),y=Cf.lt(d,this.serializer,p,s.referenceDelegate);return new a1(i,y,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Rg(n,rn.oe),u).next()})})}}function UT(t){t.createObjectStore("targetDocuments",{keyPath:X2}).createIndex("documentTargetsIndex",Z2,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",J2,{unique:!0}),t.createObjectStore("targetGlobal")}const tm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sv{constructor(e,n,r,i,s,o,a,u,c,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!sv.D())throw new j(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fB(this,i),this.Ai=n+"main",this.serializer=new XC(u),this.Ri=new hr(this.Ai,this.hi,new RB(this.serializer)),this.$r=new eB,this.Ur=new uB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=o1(this.serializer),this.Gr=new ZU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(L.FAILED_PRECONDITION,tm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new rn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ud(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Qi(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Eu(e).get("owner").next(n=>O.resolve(this.vi(n)))}Ci(e){return ud(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=yt(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):Eu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new j(L.FAILED_PRECONDITION,tm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ud(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Rg(e,rn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ud(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Cf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aB(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Pf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(u){return u===17?cU:u===16?lU:u===15?$_:u===14?aC:u===13?oC:u===12?uU:u===11?sC:void Y()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new Rg(a,this.Qr?this.Qr.next():rn.oe),n==="readwrite-primary"?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(L.FAILED_PRECONDITION,eC);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Eu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(L.FAILED_PRECONDITION,tm)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eu(e).put("owner",n)}static D(){return hr.D()}bi(e){const n=Eu(e);return n.get("owner").next(r=>this.vi(r)?(z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(it(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;FA()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return it("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Eu(t){return yt(t,"owner")}function ud(t){return yt(t,"clientMetadata")}function ov(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new av(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return FA()?8:nC(He())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new AB;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Io()<=fe.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Io()<=fe.DEBUG&&z("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Io()<=fe.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(n))):O.resolve())}Yi(e,n){if(dT(n))return O.resolve(null);let r=Qt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sh(n,null,"F"),r=Qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Sh(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return dT(n)||i.isEqual(ne.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):(Io()<=fe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),To(n)),this.rs(e,o,n,XP(i,-1)).next(a=>a))})}ts(e,n){let r=new be(TC(e));return n.forEach((i,s)=>{ac(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Io()<=fe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",To(n)),this.Ji.getDocumentsMatchingQuery(e,n,In.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(le),this._s=new Yi(s=>Us(s),sc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function c1(t,e,n,r){return new PB(t,e,n,r)}async function d1(t,e){const n=H(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=de();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function CB(t,e){const n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,p=h.keys();let y=O.resolve();return p.forEach(g=>{y=y.next(()=>d.getEntry(u,g)).next(A=>{const R=c.docVersions.get(g);Z(R!==null),A.version.compareTo(R)<0&&(h.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function h1(t){const e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bB(t,e){const n=H(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,h)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(A,R,I){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,y,d)&&a.push(n.Ur.updateTargetData(s,y))});let u=on(),c=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(f1(s,o,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(ne.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(h=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function f1(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=on();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function kB(t,e){const n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function va(t,e){const n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function wa(t,e,n){const r=H(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qi(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Ch(t,e,n){const r=H(t);let i=ne.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=H(u),p=h._s.get(d);return p!==void 0?O.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,o,Qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:de())).next(a=>(g1(r,IC(e),a),{documents:a,Ts:s})))}function p1(t,e){const n=H(t),r=H(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function m1(t,e){const n=H(t),r=n.us.get(e)||ne.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,XP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(g1(n,e,i),i))}function g1(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function xB(t,e,n,r){const i=H(t);let s=de(),o=on();for(const c of n){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const h=e.ds(c);h.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,h)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=await va(i,function(d){return Qt(Ma(me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>f1(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Ur.addMatchingKeys(c,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))}async function NB(t,e,n=de()){const r=await va(t,Qt(tv(e.bundledQuery))),i=H(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=st(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(et.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function BT(t,e){return`firestore_clients_${t}_${e}`}function jT(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nm(t,e){return`firestore_targets_${t}_${e}`}class bh{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new bh(e,n,i.state,s):(it("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new Xu(e,r.state,i):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=G_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=rC(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new kh(e,s):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class uv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new uv(n.clientId,n.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ug{constructor(){this.activeTargetIds=G_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rm{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(le),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=BT(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ug),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(BT(this.persistenceKey,r));if(i){const s=kh.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(nm(this.persistenceKey,e));if(i){const s=Xu.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nm(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return z("SharedClientState","READ",e,n),n}setItem(e,n){z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=rn.oe;if(s!=null)try{const a=JSON.parse(s);Z(typeof a=="number"),o=a}catch(a){it("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==rn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new bh(this.currentUser,e,n,r),s=jT(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=jT(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=nm(this.persistenceKey,e),s=new Xu(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return kh.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bh.Rs(new Et(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Xu.Rs(i,n)}Ls(e){return uv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=G_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class y1{constructor(){this.so=new Ug,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ug,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function im(){return ld===null?ld=function(){return 268435456+Math.round(2147483648*Math.random())}():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class MB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=im(),u=this.xo(n,r.toUriEncodedString());z("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(d=>(z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw yr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Va}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=OB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=im();return new Promise((o,a)=>{const u=new qP;u.setWithCredentials(!0),u.listenOnce(WP.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case kd.NO_ERROR:const d=u.getResponseJson();z(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case kd.TIMEOUT:z(Lt,`RPC '${e}' ${s} timed out`),a(new j(L.DEADLINE_EXCEEDED,"Request time out"));break;case kd.HTTP_ERROR:const h=u.getStatus();if(z(Lt,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const g=function(R){const I=R.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(I)>=0?I:L.UNKNOWN}(y.status);a(new j(g,y.message))}else a(new j(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new j(L.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{z(Lt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);z(Lt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=im(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=HP(),a=GP(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");z(Lt,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=o.createWebChannel(d,u);let p=!1,y=!1;const g=new VB({Io:R=>{y?z(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(z(Lt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),z(Lt,`RPC '${e}' stream ${i} sending:`,R),h.send(R))},To:()=>h.close()}),A=(R,I,v)=>{R.listen(I,w=>{try{v(w)}catch(k){setTimeout(()=>{throw k},0)}})};return A(h,xu.EventType.OPEN,()=>{y||(z(Lt,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),A(h,xu.EventType.CLOSE,()=>{y||(y=!0,z(Lt,`RPC '${e}' stream ${i} transport closed`),g.So())}),A(h,xu.EventType.ERROR,R=>{y||(y=!0,yr(Lt,`RPC '${e}' stream ${i} transport errored:`,R),g.So(new j(L.UNAVAILABLE,"The operation could not be completed")))}),A(h,xu.EventType.MESSAGE,R=>{var I;if(!y){const v=R.data[0];Z(!!v);const w=v,k=w.error||((I=w[0])===null||I===void 0?void 0:I.error);if(k){z(Lt,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let M=function(C){const b=ut[C];if(b!==void 0)return MC(b)}(V),S=k.message;M===void 0&&(M=L.INTERNAL,S="Unknown error status: "+V+" with message "+k.message),y=!0,g.So(new j(M,S)),h.close()}else z(Lt,`RPC '${e}' stream ${i} received:`,v),g.bo(v)}}),A(a,KP.STAT_EVENT,R=>{R.stat===Tg.PROXY?z(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Tg.NOPROXY&&z(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){return typeof window<"u"?window:null}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){return new zU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new lv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new j(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LB extends v1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=WU(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?st(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Og(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=Ih(u)?{documents:KC(s,u)}:{query:GC(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BC(s,o.resumeToken);const c=Ng(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=_a(s,o.snapshotVersion.toTimestamp());const c=Ng(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=GU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Og(this.serializer),n.removeTarget=e,this.a_(n)}}class FB extends v1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KU(e.writeResults,e.commitTime),r=st(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Og(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Vl(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Dg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(L.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Dg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(L.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class BB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(it(n),this.D_=!1):z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ji(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=H(u);c.L_.add(4),await Ua(c),c.q_.set("Unknown"),c.L_.delete(4),await hc(c)}(this))})}),this.q_=new BB(r,i)}}async function hc(t){if(Ji(t))for(const e of t.B_)await e(!0)}async function Ua(t){for(const e of t.B_)await e(!1)}function kf(t,e){const n=H(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hv(n)?dv(n):ja(n).r_()&&cv(n,e))}function Ea(t,e){const n=H(t),r=ja(n);n.N_.delete(e),r.r_()&&w1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ji(n)&&n.q_.set("Unknown"))}function cv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).A_(e)}function w1(t,e){t.Q_.xe(e),ja(t).R_(e)}function dv(t){t.Q_=new FU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.q_.v_()}function hv(t){return Ji(t)&&!ja(t).n_()&&t.N_.size>0}function Ji(t){return H(t).L_.size===0}function E1(t){t.Q_=void 0}async function zB(t){t.q_.set("Online")}async function $B(t){t.N_.forEach((e,n)=>{cv(t,e)})}async function qB(t,e){E1(t),hv(t)?(t.q_.M_(e),dv(t)):t.q_.set("Unknown")}async function WB(t,e,n){if(t.q_.set("Online"),e instanceof UC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(t,r)}else if(e instanceof Md?t.Q_.Ke(e):e instanceof FC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await h1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken(et.EMPTY_BYTE_STRING,d.snapshotVersion)),w1(s,u);const h=new br(d.target,u,c,d.sequenceNumber);cv(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await xh(t,r)}}async function xh(t,e,n){if(!Qi(e))throw e;t.L_.add(1),await Ua(t),t.q_.set("Offline"),n||(n=()=>h1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hc(t)})}function I1(t,e){return e().catch(n=>xh(t,n,e))}async function Ba(t){const e=H(t),n=Ui(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KB(e);)try{const i=await kB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,GB(e,i)}catch(i){await xh(e,i)}T1(e)&&S1(e)}function KB(t){return Ji(t)&&t.O_.length<10}function GB(t,e){t.O_.push(e);const n=Ui(t);n.r_()&&n.V_&&n.m_(e.mutations)}function T1(t){return Ji(t)&&!Ui(t).n_()&&t.O_.length>0}function S1(t){Ui(t).start()}async function HB(t){Ui(t).p_()}async function QB(t){const e=Ui(t);for(const n of t.O_)e.m_(n.mutations)}async function YB(t,e,n){const r=t.O_.shift(),i=J_.from(r,e,n);await I1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ba(t)}async function JB(t,e){e&&Ui(t).V_&&await async function(r,i){if(function(o){return VC(o)&&o!==L.ABORTED}(i.code)){const s=r.O_.shift();Ui(r).s_(),await I1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ba(r)}}(t,e),T1(t)&&S1(t)}async function $T(t,e){const n=H(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Ji(n);n.L_.add(3),await Ua(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hc(n)}async function Bg(t,e){const n=H(t);e?(n.L_.delete(2),await hc(n)):e||(n.L_.add(2),await Ua(n),n.q_.set("Unknown"))}function ja(t){return t.K_||(t.K_=function(n,r,i){const s=H(n);return s.w_(),new LB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:zB.bind(null,t),Ro:$B.bind(null,t),mo:qB.bind(null,t),d_:WB.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),hv(t)?dv(t):t.q_.set("Unknown")):(await t.K_.stop(),E1(t))})),t.K_}function Ui(t){return t.U_||(t.U_=function(n,r,i){const s=H(n);return s.w_(),new FB(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HB.bind(null,t),mo:JB.bind(null,t),f_:QB.bind(null,t),g_:YB.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ba(t)):(await t.U_.stop(),t.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function za(t,e){if(it("AsyncQueue",`${e}: ${t}`),Qi(t))return new j(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Nu(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Zo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.W_=new Ne(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ia{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ia(e,n,Zo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ZB{constructor(){this.queries=WT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=H(n),s=i.queries;i.queries=WT(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new j(L.ABORTED,"Firestore shutting down"))}}function WT(){return new Yi(t=>EC(t),oc)}async function pv(t,e){const n=H(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new XB,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=za(o,`Initialization of query '${To(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&gv(n)}async function mv(t,e){const n=H(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function e4(t,e){const n=H(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&gv(n)}function t4(t,e,n){const r=H(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function gv(t){t.Y_.forEach(e=>{e.next()})}var jg,KT;(KT=jg||(jg={})).ea="default",KT.Cache="cache";class yv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.serializer=e}Es(e){return fr(this.serializer,e)}ds(e){return e.metadata.exists?WC(this.serializer,e.document,!1):Le.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return st(e)}}class r4{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=R1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new GT(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||de()).add(s);n.set(o,a)}}return n}async complete(){const e=await xB(this.localStore,new GT(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await NB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function R1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.key=e}}class P1{constructor(e){this.key=e}}class C1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=TC(e),this.Ra=new Zo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new qT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),y=ac(this.query,h)?h:null,g=!!p&&this.mutatedKeys.has(p.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?g!==A&&(r.track({type:3,doc:y}),R=!0):this.ga(p,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),R=!0):p&&!y&&(r.track({type:1,doc:p}),R=!0,(u||c)&&(a=!0)),R&&(y?(o=o.add(y),s=A?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,h)=>function(y,g){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return A(y)-A(g)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Ia(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new P1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new A1(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class i4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class s4{constructor(e){this.key=e,this.va=!1}}class o4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Yi(a=>EC(a),oc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(G.comparator),this.Na=new Map,this.La=new iv,this.Ba={},this.ka=new Map,this.qa=qs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function a4(t,e,n=!0){const r=xf(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await b1(r,e,n,!0),i}async function u4(t,e){const n=xf(t);await b1(n,e,!0,!1)}async function b1(t,e,n,r){const i=await va(t.localStore,Qt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await _v(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&kf(t.remoteStore,i),a}async function _v(t,e,n,r,i){t.Ka=(h,p,y)=>async function(A,R,I,v){let w=R.view.ma(I);w.ns&&(w=await Ch(A.localStore,R.query,!1).then(({documents:S})=>R.view.ma(S,w)));const k=v&&v.targetChanges.get(R.targetId),V=v&&v.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(w,A.isPrimaryClient,k,V);return zg(A,R.targetId,M.wa),M.snapshot}(t,h,p,y);const s=await Ch(t.localStore,e,!0),o=new C1(e,s.Ts),a=o.ma(s.documents),u=cc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);zg(t,n,c.wa);const d=new i4(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function l4(t,e,n){const r=H(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!oc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ea(r.remoteStore,i.targetId),Ta(r,i.targetId)}).catch(Hi)):(Ta(r,i.targetId),await wa(r.localStore,i.targetId,!0))}async function c4(t,e){const n=H(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ea(n.remoteStore,r.targetId))}async function d4(t,e,n){const r=Iv(t);try{const i=await function(o,a){const u=H(o),c=$e.now(),d=a.reduce((y,g)=>y.add(g.key),de());let h,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let g=on(),A=de();return u.cs.getEntries(y,d).next(R=>{g=R,g.forEach((I,v)=>{v.isValidDocument()||(A=A.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,g)).next(R=>{h=R;const I=[];for(const v of a){const w=VU(v,h.get(v.key).overlayedDocument);w!=null&&I.push(new Gr(v.key,w,hC(w.value.mapValue),ze.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,I,a)}).next(R=>{p=R;const I=R.applyToLocalDocumentSet(h,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,I)})}).then(()=>({batchId:p.batchId,changes:RC(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ne(le)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Hr(r,i.changes),await Ba(r.remoteStore)}catch(i){const s=za(i,"Failed to persist write");n.reject(s)}}async function k1(t,e){const n=H(t);try{const r=await bB(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Z(o.va):i.removedDocuments.size>0&&(Z(o.va),o.va=!1))}),await Hr(n,r,e)}catch(r){await Hi(r)}}function HT(t,e,n){const r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=H(o);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&gv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h4(t,e,n){const r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(G.comparator);o=o.insert(s,Le.newNoDocument(s,ne.min()));const a=de().add(s),u=new lc(ne.min(),new Map,new Ne(le),o,a);await k1(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ev(r)}else await wa(r.localStore,e,!1).then(()=>Ta(r,e,n)).catch(Hi)}async function f4(t,e){const n=H(t),r=e.batch.batchId;try{const i=await CB(n.localStore,e);wv(n,r,null),vv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hr(n,i)}catch(i){await Hi(i)}}async function p4(t,e,n){const r=H(t);try{const i=await function(o,a){const u=H(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(Z(h!==null),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);wv(r,e,n),vv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hr(r,i)}catch(i){await Hi(i)}}async function m4(t,e){const n=H(t);Ji(n.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=H(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=za(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function vv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function wv(t,e,n){const r=H(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ta(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||x1(t,r)})}function x1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ea(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ev(t))}function zg(t,e,n){for(const r of n)r instanceof A1?(t.La.addReference(r.key,e),g4(t,r)):r instanceof P1?(z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||x1(t,r.key)):Y()}function g4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(z("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ev(t))}function Ev(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(me.fromString(e)),r=t.qa.next();t.Na.set(r,new s4(n)),t.Oa=t.Oa.insert(n,r),kf(t.remoteStore,new br(Qt(Ma(n.path)),r,"TargetPurposeLimboResolution",rn.oe))}}async function Hr(t,e,n){const r=H(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=av.Wi(u.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const d=H(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(c,p=>O.forEach(p.$i,y=>d.persistence.referenceDelegate.addReference(h,p.targetId,y)).next(()=>O.forEach(p.Ui,y=>d.persistence.referenceDelegate.removeReference(h,p.targetId,y)))))}catch(h){if(!Qi(h))throw h;z("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const y=d.os.get(p),g=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(g);d.os=d.os.insert(p,A)}}}(r.localStore,s))}async function y4(t,e){const n=H(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await d1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new j(L.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hr(n,r.hs)}}function _4(t,e){const n=H(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function v4(t,e){const n=H(t),r=await Ch(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&zg(n,e.targetId,i.wa),i}async function w4(t,e){const n=H(t);return m1(n.localStore,e).then(r=>Hr(n,r))}async function E4(t,e,n,r){const i=H(t),s=await function(a,u){const c=H(a),d=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,u).next(p=>p?c.localDocuments.getDocuments(h,p):O.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Ba(i.remoteStore):n==="acknowledged"||n==="rejected"?(wv(i,e,r||null),vv(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):Y(),await Hr(i,s)):z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function I4(t,e){const n=H(t);if(xf(n),Iv(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await QT(n,r.toArray());n.Qa=!0,await Bg(n.remoteStore,!0);for(const s of i)kf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ta(n,o),wa(n.localStore,o,!0))),Ea(n.remoteStore,o)}),await i,await QT(n,r),function(o){const a=H(o);a.Na.forEach((u,c)=>{Ea(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne(G.comparator)}(n),n.Qa=!1,await Bg(n.remoteStore,!1)}}async function QT(t,e,n){const r=H(t),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&u.length!==0){a=await va(r.localStore,Qt(u[0]));for(const c of u){const d=r.Fa.get(c),h=await v4(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await p1(r.localStore,o);a=await va(r.localStore,c),await _v(r,N1(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function N1(t){return wC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function T4(t){return function(n){return H(H(n).persistence).Qi()}(H(t).localStore)}async function S4(t,e,n,r){const i=H(t);if(i.Qa)return void z("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await m1(i.localStore,IC(s[0])),a=lc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await Hr(i,o,a);break}case"rejected":await wa(i.localStore,e,!0),Ta(i,e,r);break;default:Y()}}async function R4(t,e,n){const r=xf(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){z("SyncEngine","Adding an already active target "+i);continue}const s=await p1(r.localStore,i),o=await va(r.localStore,s);await _v(r,N1(s),o.targetId,!1,o.resumeToken),kf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await wa(r.localStore,i,!1).then(()=>{Ea(r.remoteStore,i),Ta(r,i)}).catch(Hi)}}function xf(t){const e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h4.bind(null,e),e.Ca.d_=e4.bind(null,e.eventManager),e.Ca.$a=t4.bind(null,e.eventManager),e}function Iv(t){const e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p4.bind(null,e),e}function A4(t,e,n){const r=H(t);(async function(s,o,a){try{const u=await o.getMetadata();if(await function(y,g){const A=H(y),R=st(g.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",I=>A.Gr.getBundleMetadata(I,g.id)).then(I=>!!I&&I.createTime.compareTo(R)>=0)}(s.localStore,u))return await o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(R1(u));const c=new r4(u,s.localStore,o.serializer);let d=await o.Ua();for(;d;){const p=await c.la(d);p&&a._updateProgress(p),d=await o.Ua()}const h=await c.complete();return await Hr(s,h.Ia,void 0),await function(y,g){const A=H(y);return A.persistence.runTransaction("Save bundle","readwrite",R=>A.Gr.saveBundleMetadata(R,g))}(s.localStore,u),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(u){return yr("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ml{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}Ga(e){return new u1(bf.Zr,this.serializer)}Wa(e){return new y1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ml.provider={build:()=>new Ml};class D1 extends Ml{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Iv(this.Ja.syncEngine),await Ba(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return c1(this.persistence,new l1,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new cB(r,e.asyncQueue,n)}Ha(e,n){const r=new W2(n,this.persistence);return new q2(e.asyncQueue,r)}Ga(e){const n=ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new sv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,_1(),Ld(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new y1}}class P4 extends D1{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof rm&&(this.sharedClientState.syncEngine={no:E4.bind(null,n),ro:S4.bind(null,n),io:R4.bind(null,n),Qi:T4.bind(null,n),eo:w4.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await I4(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=_1();if(!rm.D(n))throw new j(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rm(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ll{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y4.bind(null,this.syncEngine),await Bg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZB}()}createDatastore(e){const n=dc(e.databaseInfo.databaseId),r=function(s){return new MB(s)}(e.databaseInfo);return function(s,o,a,u){return new UB(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new jB(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>HT(this.syncEngine,n,0),function(){return zT.D()?new zT:new DB}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const h=new o4(i,s,o,a,u,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=H(i);z("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ua(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ll.provider={build:()=>new Ll};function YT(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new xt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new n4(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=H(i),a={documents:s.map(h=>Ol(o.serializer,h))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,me.emptyPath(),a,s.length),c=new Map;u.forEach(h=>{const p=qU(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());Z(!!p),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=G.fromPath(r);this.mutations.push(new Q_(i,this.precondition(i)))}),await async function(r,i){const s=H(r),o={writes:i.map(a=>Vl(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,me.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y();n=ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ne.min())?ze.exists(!1):ze.updateTime(n):ze.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ne.min()))throw new j(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ze.updateTime(n)}return ze.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new lv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new b4(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!ic(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VC(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=YP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=za(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await d1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function JT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Tv(t);z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$T(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>$T(e.remoteStore,i)),t._onlineComponents=e}async function Tv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yr("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new Ml)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await sm(t,new Ml);return t._offlineComponents}async function Df(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await JT(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await JT(t,new Ll))),t._onlineComponents}function O1(t){return Tv(t).then(e=>e.persistence)}function Sv(t){return Tv(t).then(e=>e.localStore)}function V1(t){return Df(t).then(e=>e.remoteStore)}function Rv(t){return Df(t).then(e=>e.syncEngine)}function N4(t){return Df(t).then(e=>e.datastore)}async function Sa(t){const e=await Df(t),n=e.eventManager;return n.onListen=a4.bind(null,e.syncEngine),n.onUnlisten=l4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=c4.bind(null,e.syncEngine),n}function D4(t){return t.asyncQueue.enqueue(async()=>{const e=await O1(t),n=await V1(t);return e.setNetworkEnabled(!0),function(i){const s=H(i);return s.L_.delete(0),hc(s)}(n)})}function O4(t){return t.asyncQueue.enqueue(async()=>{const e=await O1(t),n=await V1(t);return e.setNetworkEnabled(!1),async function(i){const s=H(i);s.L_.add(0),await Ua(s),s.q_.set("Offline")}(n)})}function V4(t,e){const n=new xt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=H(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=za(a,`Failed to get document '${s} from cache`);o.reject(u)}}(await Sv(t),e,n)),n.promise}function M1(t,e,n={}){const r=new xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Nf({next:p=>{d.Za(),o.enqueueAndForget(()=>mv(s,h));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new j(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?c.reject(new j(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new yv(Ma(a.path),d,{includeMetadataChanges:!0,_a:!0});return pv(s,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function M4(t,e){const n=new xt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Ch(i,s,!0),u=new C1(s,a.Ts),c=u.ma(a.documents),d=u.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const u=za(a,`Failed to execute query '${s} against cache`);o.reject(u)}}(await Sv(t),e,n)),n.promise}function L1(t,e,n={}){const r=new xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Nf({next:p=>{d.Za(),o.enqueueAndForget(()=>mv(s,h)),p.fromCache&&u.source==="server"?c.reject(new j(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new yv(a,d,{includeMetadataChanges:!0,_a:!0});return pv(s,h)}(await Sa(t),t.asyncQueue,e,n,r)),r.promise}function L4(t,e){const n=new Nf(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Y_.add(s),s.next()}(await Sa(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){H(i).Y_.delete(s)}(await Sa(t),n))}}function F4(t,e,n,r){const i=function(o,a){let u;return u=typeof o=="string"?LC().encode(o):o,function(d,h){return new C4(d,h)}(function(d,h){if(d instanceof Uint8Array)return YT(d,h);if(d instanceof ArrayBuffer)return YT(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,dc(e));t.asyncQueue.enqueueAndForget(async()=>{A4(await Rv(t),i,r)})}function U4(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=H(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await Sv(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e,n){if(!n)throw new j(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U1(t,e,n,r){if(e===!0&&r===!0)throw new j(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZT(t){if(!G.isDocumentKey(t))throw new j(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e0(t){if(G.isDocumentKey(t))throw new j(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Of(t);throw new j(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function B1(t,e){if(e<=0)throw new j(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new D2;switch(r.type){case"firstParty":return new L2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XT.get(n);r&&(z("ComponentProvider","Removing Datastore"),XT.delete(n),r.terminate())}(this),Promise.resolve()}}function j1(t,e,n,r={}){var i;const s=(t=Re(t,fc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Et.MOCK_USER;else{a=zO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new j(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Et(c)}t._authCredentials=new O2(new QP(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yt=class z1{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new z1(this.firestore,e,this._query)}},Ke=class $1{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $1(this.firestore,e,this._key)}},Pi=class q1 extends Yt{constructor(e,n,r){super(e,n,Ma(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new G(e))}withConverter(e){return new q1(this.firestore,e,this._path)}};function W1(t,e,...n){if(t=ie(t),Av("collection","path",e),t instanceof fc){const r=me.fromString(e,...n);return e0(r),new Pi(t,null,r)}{if(!(t instanceof Ke||t instanceof Pi))throw new j(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return e0(r),new Pi(t.firestore,null,r)}}function B4(t,e){if(t=Re(t,fc),Av("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yt(t,null,function(r){return new Kr(me.emptyPath(),r)}(e))}function Nh(t,e,...n){if(t=ie(t),arguments.length===1&&(e=YP.newId()),Av("doc","path",e),t instanceof fc){const r=me.fromString(e,...n);return ZT(r),new Ke(t,null,new G(r))}{if(!(t instanceof Ke||t instanceof Pi))throw new j(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return ZT(r),new Ke(t.firestore,t instanceof Pi?t.converter:null,new G(r))}}function K1(t,e){return t=ie(t),e=ie(e),(t instanceof Ke||t instanceof Pi)&&(e instanceof Ke||e instanceof Pi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function G1(t,e){return t=ie(t),e=ie(e),t instanceof Yt&&e instanceof Yt&&t.firestore===e.firestore&&oc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new lv(this,"async_queue_retry"),this.Vu=()=>{const r=Ld();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new xt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qi(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw it("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=fv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $g(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class j4{constructor(){this._progressObserver={},this._taskCompletionResolver=new xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=-1;let ot=class extends fc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new n0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}};function J6(t,e){const n=typeof t=="object"?t:w_(),r=typeof t=="string"?t:"(default)",i=Yl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=BO("firestore");s&&j1(i,...s)}return i}function Bt(t){if(t._terminated)throw new j(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||H1(t),t._firestoreClient}function H1(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,d){return new fU(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,F1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new x4(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}function $4(t,e){yr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Q1(t,Ll.provider,{build:r=>new D1(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function q4(t){yr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();Q1(t,Ll.provider,{build:n=>new P4(n,e.cacheSizeBytes)})}function Q1(t,e,n){if((t=Re(t,ot))._firestoreClient||t._terminated)throw new j(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new j(L.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},H1(t)}function W4(t){if(t._initialized&&!t._terminated)throw new j(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!hr.D())return Promise.resolve();const i=r+"main";await hr.delete(i)}(ov(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function K4(t){return function(n){const r=new xt;return n.asyncQueue.enqueueAndForget(async()=>m4(await Rv(n),r)),r.promise}(Bt(t=Re(t,ot)))}function G4(t){return D4(Bt(t=Re(t,ot)))}function H4(t){return O4(Bt(t=Re(t,ot)))}function Q4(t,e){const n=Bt(t=Re(t,ot)),r=new j4;return F4(n,t._databaseId,e,r),r}function Y4(t,e){return U4(Bt(t=Re(t,ot)),e).then(n=>n?new Yt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(et.fromBase64String(e))}catch(n){throw new j(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=/^__.*__$/;class X4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new La(e,this.data,n,this.fieldTransforms)}}class Y1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function J1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Mf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Dh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(J1(this.Cu)&&J4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Z4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dc(e)}Qu(e,n,r,i=!1){return new Mf({Cu:e,methodName:n,qu:r,path:je.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ro(t){const e=t._freezeSettings(),n=dc(t._databaseId);return new Z4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lf(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ov("Data must be an object, but it was:",o,r);const a=eb(r,o);let u,c;if(s.merge)u=new sn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=qg(e,h,n);if(!o.contains(p))throw new j(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);nb(d,p)||d.push(p)}u=new sn(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new X4(new bt(a),u,c)}class pc extends no{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pc}}function X1(t,e,n){return new Mf({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cv extends no{_toFieldTransform(e){return new uc(e.path,new ga)}isEqual(e){return e instanceof Cv}}class bv extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=X1(this,e,!0),r=this.Ku.map(s=>io(s,n)),i=new Bs(r);return new uc(e.path,i)}isEqual(e){return e instanceof bv&&aa(this.Ku,e.Ku)}}class kv extends no{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=X1(this,e,!0),r=this.Ku.map(s=>io(s,n)),i=new js(r);return new uc(e.path,i)}isEqual(e){return e instanceof kv&&aa(this.Ku,e.Ku)}}class xv extends no{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new ya(e.serializer,CC(e.serializer,this.$u));return new uc(e.path,n)}isEqual(e){return e instanceof xv&&this.$u===e.$u}}function Nv(t,e,n,r){const i=t.Qu(1,e,n);Ov("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();to(r,(u,c)=>{const d=Vv(e,u,n);c=ie(c);const h=i.Nu(d);if(c instanceof pc)s.push(d);else{const p=io(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new sn(s);return new Y1(o,a,i.fieldTransforms)}function Dv(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[qg(e,r,n)],u=[i];if(s.length%2!=0)throw new j(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(qg(e,s[p])),u.push(s[p+1]);const c=[],d=bt.empty();for(let p=a.length-1;p>=0;--p)if(!nb(c,a[p])){const y=a[p];let g=u[p];g=ie(g);const A=o.Nu(y);if(g instanceof pc)c.push(y);else{const R=io(g,A);R!=null&&(c.push(y),d.set(y,R))}}const h=new sn(c);return new Y1(d,h,o.fieldTransforms)}function Z1(t,e,n,r=!1){return io(n,t.Qu(r?4:3,e))}function io(t,e){if(tb(t=ie(t)))return Ov("Unsupported field value:",e,t),eb(t,e);if(t instanceof no)return function(r,i){if(!J1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=io(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$e.fromDate(r);return{timestampValue:_a(i.serializer,s)}}if(r instanceof $e){const s=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_a(i.serializer,s)}}if(r instanceof Vf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:BC(i.serializer,r._byteString)};if(r instanceof Ke){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ev(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return H_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Of(r)}`)}(t,e)}function eb(t,e){const n={};return uC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(r,i)=>{const s=io(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function tb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Vf||t instanceof vr||t instanceof Ke||t instanceof no||t instanceof Pv)}function Ov(t,e,n){if(!tb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Of(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function qg(t,e,n){if((e=ie(e))instanceof Bi)return e._internalPath;if(typeof e=="string")return Vv(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}const ej=new RegExp("[~\\*/\\[\\]]");function Vv(t,e,n){if(e.search(ej)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bi(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new j(L.INVALID_ARGUMENT,a+t+u)}function nb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ff("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tj extends Fl{data(){return super.data()}}function Ff(t,e){return typeof e=="string"?Vv(t,e):e instanceof Bi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mv{}class mc extends Mv{}function ri(t,e,...n){let r=[];e instanceof Mv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Lv).length,a=s.filter(u=>u instanceof Uf).length;if(o>1||o>0&&a>0)throw new j(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Uf extends mc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uf(e,n,r)}_apply(e){const n=this._parse(e);return sb(e._query,n),new Yt(e.firestore,e.converter,xg(e._query,n))}_parse(e){const n=ro(e.firestore);return function(s,o,a,u,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){i0(h,d);const y=[];for(const g of h)y.push(r0(u,s,g));p={arrayValue:{values:y}}}else p=r0(u,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||i0(h,d),p=Z1(a,o,h,d==="in"||d==="not-in");return ge.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nj(t,e,n){const r=e,i=Ff("where",t);return Uf._create(i,r,n)}class Lv extends Mv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)sb(o,u),o=xg(o,u)}(e._query,n),new Yt(e.firestore,e.converter,xg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fv extends mc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new j(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(s,o)}(e._query,this._field,this._direction);return new Yt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Kr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function rj(t,e="asc"){const n=e,r=Ff("orderBy",t);return Fv._create(r,n)}class Bf extends mc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bf(e,n,r)}_apply(e){return new Yt(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function ij(t){return B1("limit",t),Bf._create("limit",t,"F")}function sj(t){return B1("limitToLast",t),Bf._create("limitToLast",t,"L")}class jf extends mc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new jf(e,n,r)}_apply(e){const n=ib(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function oj(...t){return jf._create("startAt",t,!0)}function aj(...t){return jf._create("startAfter",t,!1)}class zf extends mc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new zf(e,n,r)}_apply(e){const n=ib(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Kr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function uj(...t){return zf._create("endBefore",t,!1)}function lj(...t){return zf._create("endAt",t,!0)}function ib(t,e,n,r){if(n[0]=ie(n[0]),n[0]instanceof Fl)return function(s,o,a,u,c){if(!u)throw new j(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Xo(s))if(h.field.isKeyField())d.push(Fs(o,u.key));else{const p=u.data.field(h.field);if(Tf(p))throw new j(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const y=h.field.canonicalString();throw new j(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(p)}return new Fi(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ro(t.firestore);return function(o,a,u,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new j(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let g=0;g<d.length;g++){const A=d[g];if(p[g].field.isKeyField()){if(typeof A!="string")throw new j(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof A}`);if(!K_(o)&&A.indexOf("/")!==-1)throw new j(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${A}' contains a slash.`);const R=o.path.child(me.fromString(A));if(!G.isDocumentKey(R))throw new j(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const I=new G(R);y.push(Fs(a,I))}else{const R=Z1(u,c,A);y.push(R)}}return new Fi(y,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function r0(t,e,n){if(typeof(n=ie(n))=="string"){if(n==="")throw new j(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K_(e)&&n.indexOf("/")!==-1)throw new j(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!G.isDocumentKey(r))throw new j(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fs(t,new G(r))}if(n instanceof Ke)return Fs(t,n._key);throw new j(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(n)}.`)}function i0(t,e){if(!Array.isArray(t)||t.length===0)throw new j(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sb(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Uv{convertValue(e,n="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return to(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ue(o.doubleValue));return new Pv(s)}convertGeoPoint(e){return new Vf(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=q_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);Z(JC(r));const i=new Mi(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cj extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Br=class extends Fl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Zu=class extends Br{data(e={}){return super.data(e)}},ji=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Es(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zu(this._firestore,this._userDataWriter,r.key,r,new Es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Zu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Zu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:dj(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function dj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function ob(t,e){return t instanceof Br&&e instanceof Br?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ji&&e instanceof ji&&t._firestore===e._firestore&&G1(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t){t=Re(t,Ke);const e=Re(t.firestore,ot);return M1(Bt(e),t._key).then(n=>Bv(e,t,n))}class so extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}}function fj(t){t=Re(t,Ke);const e=Re(t.firestore,ot),n=Bt(e),r=new so(e);return V4(n,t._key).then(i=>new Br(e,r,t._key,i,new Es(i!==null&&i.hasLocalMutations,!0),t.converter))}function pj(t){t=Re(t,Ke);const e=Re(t.firestore,ot);return M1(Bt(e),t._key,{source:"server"}).then(n=>Bv(e,t,n))}function mj(t){t=Re(t,Yt);const e=Re(t.firestore,ot),n=Bt(e),r=new so(e);return rb(t._query),L1(n,t._query).then(i=>new ji(e,r,t,i))}function gj(t){t=Re(t,Yt);const e=Re(t.firestore,ot),n=Bt(e),r=new so(e);return M4(n,t._query).then(i=>new ji(e,r,t,i))}function yj(t){t=Re(t,Yt);const e=Re(t.firestore,ot),n=Bt(e),r=new so(e);return L1(n,t._query,{source:"server"}).then(i=>new ji(e,r,t,i))}function s0(t,e,n){t=Re(t,Ke);const r=Re(t.firestore,ot),i=$f(t.converter,e,n);return gc(r,[Lf(ro(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ze.none())])}function o0(t,e,n,...r){t=Re(t,Ke);const i=Re(t.firestore,ot),s=ro(i);let o;return o=typeof(e=ie(e))=="string"||e instanceof Bi?Dv(s,"updateDoc",t._key,e,n,r):Nv(s,"updateDoc",t._key,e),gc(i,[o.toMutation(t._key,ze.exists(!0))])}function _j(t){return gc(Re(t.firestore,ot),[new Fa(t._key,ze.none())])}function vj(t,e){const n=Re(t.firestore,ot),r=Nh(t),i=$f(t.converter,e);return gc(n,[Lf(ro(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ze.exists(!1))]).then(()=>r)}function ab(t,...e){var n,r,i;t=ie(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$g(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($g(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,d;if(t instanceof Ke)c=Re(t.firestore,ot),d=Ma(t._key.path),u={next:h=>{e[o]&&e[o](Bv(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Re(t,Yt);c=Re(h.firestore,ot),d=h._query;const p=new so(c);u={next:y=>{e[o]&&e[o](new ji(c,p,h,y))},error:e[o+1],complete:e[o+2]},rb(t._query)}return function(p,y,g,A){const R=new Nf(A),I=new yv(y,R,g);return p.asyncQueue.enqueueAndForget(async()=>pv(await Sa(p),I)),()=>{R.Za(),p.asyncQueue.enqueueAndForget(async()=>mv(await Sa(p),I))}}(Bt(c),d,a,u)}function wj(t,e){return L4(Bt(t=Re(t,ot)),$g(e)?e:{next:e})}function gc(t,e){return function(r,i){const s=new xt;return r.asyncQueue.enqueueAndForget(async()=>d4(await Rv(r),i,s)),s.promise}(Bt(t),e)}function Bv(t,e,n){const r=n.docs.get(e._key),i=new so(t);return new Br(t,i,e._key,r,new Es(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ij=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,n,r){this._verifyNotCommitted();const i=di(e,this._firestore),s=$f(i.converter,n,r),o=Lf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ze.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=di(e,this._firestore);let o;return o=typeof(n=ie(n))=="string"||n instanceof Bi?Dv(this._dataReader,"WriteBatch.update",s._key,n,r,i):Nv(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=di(e,this._firestore);return this._mutations=this._mutations.concat(new Fa(n._key,ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function di(t,e){if((t=ie(t)).firestore!==e)throw new j(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tj=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ro(n)}get(n){const r=di(n,this._firestore),i=new cj(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();const o=s[0];if(o.isFoundDocument())return new Fl(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Fl(this._firestore,i,r._key,null,r.converter);throw Y()})}set(n,r,i){const s=di(n,this._firestore),o=$f(s.converter,r,i),a=Lf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=di(n,this._firestore);let a;return a=typeof(r=ie(r))=="string"||r instanceof Bi?Dv(this._dataReader,"Transaction.update",o._key,r,i,s):Nv(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=di(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=di(e,this._firestore),r=new so(this._firestore);return super.get(e).then(i=>new Br(this._firestore,r,n._key,i._document,new Es(!1,!1),n.converter))}};function Sj(t,e,n){t=Re(t,ot);const r=Object.assign(Object.assign({},Ej),n);return function(s){if(s.maxAttempts<1)throw new j(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new xt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await N4(s);new k4(s.asyncQueue,c,a,o,u).au()}),u.promise}(Bt(t),i=>e(new Tj(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){return new pc("deleteField")}function Aj(){return new Cv("serverTimestamp")}function Pj(...t){return new bv("arrayUnion",t)}function Cj(...t){return new kv("arrayRemove",t)}function bj(t){return new xv("increment",t)}(function(e,n=!0){(function(i){Va=i})(Ki),Ni(new mr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ot(new V2(r.getProvider("auth-internal")),new U2(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mi(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Mn(QI,"4.7.3",e),Mn(QI,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this._delegate=e,this.firebase=n,El(e,new mr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),E_(this._delegate)))}_getService(e,n=ki){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=ki){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){El(this._delegate,e)}_addOrOverwriteComponent(e){qA(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},a0=new Zs("app-compat","Firebase",xj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Mn,setLogLevel:HA,onLog:GA,apps:null,SDK_VERSION:Ki,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:lM}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||ki,!II(e,c))throw a0.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,d={}){const h=v_(c,d);if(II(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,h=d.replace("-compat","");if(Ni(c)&&c.type==="PUBLIC"){const p=(y=i())=>{if(typeof y[h]!="function")throw a0.create("invalid-app-argument",{appName:d});return y[h]()};c.serviceProps!==void 0&&ph(p,c.serviceProps),n[h]=p,t.prototype[h]=function(...y){return this._getService.bind(this,d).apply(this,c.multipleInstances?y:[])}}return c.type==="PUBLIC"?n[h]:null}function u(c,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(){const t=Nj(kj);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:ub,extendNamespace:e,createSubscribe:UA,ErrorFactory:Zs,deepExtend:ph});function e(n){ph(t,n)}return t}const Dj=ub();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new cf("@firebase/app-compat"),Oj="@firebase/app-compat",Vj="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){Mn(Oj,Vj,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=xA();if(t.firebase!==void 0){u0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const yc=Dj;Mj();var Lj="firebase",Fj="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yc.registerVersion(Lj,Fj,"app-compat");var lb={exports:{}},cb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=D;function Uj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bj=typeof Object.is=="function"?Object.is:Uj,jj=_c.useSyncExternalStore,zj=_c.useRef,$j=_c.useEffect,qj=_c.useMemo,Wj=_c.useDebugValue;cb.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=zj(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=qj(function(){function u(y){if(!c){if(c=!0,d=y,y=r(y),i!==void 0&&o.hasValue){var g=o.value;if(i(g,y))return h=g}return h=y}if(g=h,Bj(d,y))return g;var A=r(y);return i!==void 0&&i(g,A)?g:(d=y,h=A)}var c=!1,d,h,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,i]);var a=jj(t,s[0],s[1]);return $j(function(){o.hasValue=!0,o.value=a},[a]),Wj(a),a};lb.exports=cb;var Kj=lb.exports,we="default"in Em?Sr:Em,l0=Symbol.for("react-redux-context"),c0=typeof globalThis<"u"?globalThis:{};function Gj(){if(!we.createContext)return{};const t=c0[l0]??(c0[l0]=new Map);let e=t.get(we.createContext);return e||(e=we.createContext(null),t.set(we.createContext,e)),e}var jr=Gj(),db=()=>{throw new Error("uSES not initialized!")};function jv(t=jr){return function(){return we.useContext(t)}}var hb=jv(),fb=db,Hj=t=>{fb=t},Qj=(t,e)=>t===e;function Yj(t=jr){const e=t===jr?hb:jv(t),n=(r,i={})=>{const{equalityFn:s=Qj,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:c,stabilityCheck:d,identityFunctionCheck:h}=e();we.useRef(!0);const p=we.useCallback({[r.name](g){return r(g)}}[r.name],[r,d,o.stabilityCheck]),y=fb(u.addNestedSub,a.getState,c||a.getState,p,s);return we.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var o5=Yj(),Jj=Symbol.for("react.element"),Xj=Symbol.for("react.portal"),Zj=Symbol.for("react.fragment"),ez=Symbol.for("react.strict_mode"),tz=Symbol.for("react.profiler"),nz=Symbol.for("react.provider"),rz=Symbol.for("react.context"),iz=Symbol.for("react.server_context"),pb=Symbol.for("react.forward_ref"),sz=Symbol.for("react.suspense"),oz=Symbol.for("react.suspense_list"),zv=Symbol.for("react.memo"),az=Symbol.for("react.lazy"),uz=pb,lz=zv;function cz(t){if(typeof t=="object"&&t!==null){const e=t.$$typeof;switch(e){case Jj:{const n=t.type;switch(n){case Zj:case tz:case ez:case sz:case oz:return n;default:{const r=n&&n.$$typeof;switch(r){case iz:case rz:case pb:case az:case zv:case nz:return r;default:return e}}}}case Xj:return e}}}function dz(t){return cz(t)===zv}function hz(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,u,c,d,h,p;function y(v,w){return u=v,c=w,d=t(u,c),h=e(r,c),p=n(d,h,c),a=!0,p}function g(){return d=t(u,c),e.dependsOnOwnProps&&(h=e(r,c)),p=n(d,h,c),p}function A(){return t.dependsOnOwnProps&&(d=t(u,c)),e.dependsOnOwnProps&&(h=e(r,c)),p=n(d,h,c),p}function R(){const v=t(u,c),w=!o(v,d);return d=v,w&&(p=n(d,h,c)),p}function I(v,w){const k=!s(w,c),V=!i(v,u,w,c);return u=v,c=w,k&&V?g():k?A():V?R():p}return function(w,k){return a?I(w,k):y(w,k)}}function fz(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=e(t,i),o=n(t,i),a=r(t,i);return hz(s,o,a,t,i)}function pz(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function Wg(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function d0(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function mb(t,e){return function(r,{displayName:i}){const s=function(a,u){return s.dependsOnOwnProps?s.mapToProps(a,u):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,u){s.mapToProps=t,s.dependsOnOwnProps=d0(t);let c=s(a,u);return typeof c=="function"&&(s.mapToProps=c,s.dependsOnOwnProps=d0(c),c=s(a,u)),c},s}}function $v(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function mz(t){return t&&typeof t=="object"?Wg(e=>pz(t,e)):t?typeof t=="function"?mb(t):$v(t,"mapDispatchToProps"):Wg(e=>({dispatch:e}))}function gz(t){return t?typeof t=="function"?mb(t):$v(t,"mapStateToProps"):Wg(()=>({}))}function yz(t,e,n){return{...n,...t,...e}}function _z(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(u,c,d){const h=t(u,c,d);return s?i(h,o)||(o=h):(s=!0,o=h),o}}}function vz(t){return t?typeof t=="function"?_z(t):$v(t,"mergeProps"):()=>yz}function wz(t){t()}function Ez(){let t=null,e=null;return{clear(){t=null,e=null},notify(){wz(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var h0={notify(){},get:()=>[]};function gb(t,e){let n,r=h0,i=0,s=!1;function o(A){d();const R=r.subscribe(A);let I=!1;return()=>{I||(I=!0,R(),h())}}function a(){r.notify()}function u(){g.onStateChange&&g.onStateChange()}function c(){return s}function d(){i++,n||(n=e?e.addNestedSub(u):t.subscribe(u),r=Ez())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=h0)}function p(){s||(s=!0,d())}function y(){s&&(s=!1,h())}const g={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:c,trySubscribe:p,tryUnsubscribe:y,getListeners:()=>r};return g}var Iz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tz=typeof navigator<"u"&&navigator.product==="ReactNative",Oh=Iz||Tz?we.useLayoutEffect:we.useEffect;function f0(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function om(t,e){if(f0(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!f0(t[n[i]],e[n[i]]))return!1;return!0}var Sz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Rz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Az={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Pz={[uz]:Az,[lz]:yb};function p0(t){return dz(t)?yb:Pz[t.$$typeof]||Sz}var Cz=Object.defineProperty,bz=Object.getOwnPropertyNames,m0=Object.getOwnPropertySymbols,kz=Object.getOwnPropertyDescriptor,xz=Object.getPrototypeOf,g0=Object.prototype;function Kg(t,e){if(typeof e!="string"){if(g0){const s=xz(e);s&&s!==g0&&Kg(t,s)}let n=bz(e);m0&&(n=n.concat(m0(e)));const r=p0(t),i=p0(e);for(let s=0;s<n.length;++s){const o=n[s];if(!Rz[o]&&!(i&&i[o])&&!(r&&r[o])){const a=kz(e,o);try{Cz(t,o,a)}catch{}}}}return t}var _b=db,Nz=t=>{_b=t},Dz=[null,null];function Oz(t,e,n){Oh(()=>t(...e),n)}function Vz(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function Mz(t,e,n,r,i,s,o,a,u,c,d){if(!t)return()=>{};let h=!1,p=null;const y=()=>{if(h||!a.current)return;const A=e.getState();let R,I;try{R=r(A,i.current)}catch(v){I=v,p=v}I||(p=null),R===s.current?o.current||c():(s.current=R,u.current=R,o.current=!0,d())};return n.onStateChange=y,n.trySubscribe(),y(),()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function Lz(t,e){return t===e}function Fz(t,e,n,{pure:r,areStatesEqual:i=Lz,areOwnPropsEqual:s=om,areStatePropsEqual:o=om,areMergedPropsEqual:a=om,forwardRef:u=!1,context:c=jr}={}){const d=c,h=gz(t),p=mz(e),y=vz(n),g=!!t;return R=>{const I=R.displayName||R.name||"Component",v=`Connect(${I})`,w={shouldHandleStateChanges:g,displayName:v,wrappedComponentName:I,WrappedComponent:R,initMapStateToProps:h,initMapDispatchToProps:p,initMergeProps:y,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function k(S){const[_,C,b]=we.useMemo(()=>{const{reactReduxForwardedRef:Oe,..._t}=S;return[S.context,Oe,_t]},[S]),x=we.useMemo(()=>{let Oe=d;return _!=null&&_.Consumer,Oe},[_,d]),P=we.useContext(x),T=!!S.store&&!!S.store.getState&&!!S.store.dispatch,Q=!!P&&!!P.store,re=T?S.store:P.store,se=Q?P.getServerState:re.getState,ee=we.useMemo(()=>fz(re.dispatch,w),[re]),[B,W]=we.useMemo(()=>{if(!g)return Dz;const Oe=gb(re,T?void 0:P.subscription),_t=Oe.notifyNestedSubs.bind(Oe);return[Oe,_t]},[re,T,P]),J=we.useMemo(()=>T?P:{...P,subscription:B},[T,P,B]),te=we.useRef(void 0),ae=we.useRef(b),oe=we.useRef(void 0),Ee=we.useRef(!1),he=we.useRef(!1),Ae=we.useRef(void 0);Oh(()=>(he.current=!0,()=>{he.current=!1}),[]);const De=we.useMemo(()=>()=>oe.current&&b===ae.current?oe.current:ee(re.getState(),b),[re,b]),Cn=we.useMemo(()=>_t=>B?Mz(g,re,B,ee,ae,te,Ee,he,oe,W,_t):()=>{},[B]);Oz(Vz,[ae,te,Ee,b,oe,W]);let jt;try{jt=_b(Cn,De,se?()=>ee(se(),b):De)}catch(Oe){throw Ae.current&&(Oe.message+=`
The error may be correlated with this previous error:
${Ae.current.stack}

`),Oe}Oh(()=>{Ae.current=void 0,oe.current=void 0,te.current=jt});const at=we.useMemo(()=>we.createElement(R,{...jt,ref:C}),[C,R,jt]);return we.useMemo(()=>g?we.createElement(x.Provider,{value:J},at):at,[x,at,J])}const M=we.memo(k);if(M.WrappedComponent=R,M.displayName=k.displayName=v,u){const _=we.forwardRef(function(b,x){return we.createElement(M,{...b,reactReduxForwardedRef:x})});return _.displayName=v,_.WrappedComponent=R,Kg(_,R)}return Kg(M,R)}}var a5=Fz;function Uz({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=we.useMemo(()=>{const c=gb(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=we.useMemo(()=>t.getState(),[t]);Oh(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const u=e||jr;return we.createElement(u.Provider,{value:o},n)}var u5=Uz;function vb(t=jr){const e=t===jr?hb:jv(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var Bz=vb();function jz(t=jr){const e=t===jr?Bz:vb(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var l5=jz();Hj(Kj.useSyncExternalStoreWithSelector);Nz(D.useSyncExternalStore);var wb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(wb);var zz=wb.exports;const Tn=$h(zz),$a=!!(typeof window<"u"&&window.document&&window.document.createElement);var Gg=!1,Hg=!1;try{var am={get passive(){return Gg=!0},get once(){return Hg=Gg=!0}};$a&&(window.addEventListener("test",am,am),window.removeEventListener("test",am,!0))}catch{}function Eb(t,e,n,r){if(r&&typeof r!="boolean"&&!Hg){var i=r.once,s=r.capture,o=n;!Hg&&i&&(o=n.__once||function a(u){this.removeEventListener(e,a,s),n.call(this,u)},n.__once=o),t.addEventListener(e,o,Gg?r:s)}t.addEventListener(e,n,r)}function qf(t){return t&&t.ownerDocument||document}function Qg(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}var cd;function y0(t){if((!cd&&cd!==0||t)&&$a){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),cd=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return cd}function $z(){return D.useState(null)}function qz(t){const e=D.useRef(t);return D.useEffect(()=>{e.current=t},[t]),e}function or(t){const e=qz(t);return D.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const _0=t=>!t||typeof t=="function"?t:e=>{t.current=e};function Wz(t,e){const n=_0(t),r=_0(e);return i=>{n&&n(i),r&&r(i)}}function vc(t,e){return D.useMemo(()=>Wz(t,e),[t,e])}function Kz(t){const e=D.useRef(t);return e.current=t,e}function Ib(t){const e=Kz(t);D.useEffect(()=>()=>e.current(),[])}function Gz(t){var e=qf(t);return e&&e.defaultView||window}function Hz(t,e){return Gz(t).getComputedStyle(t,e)}var Qz=/([A-Z])/g;function Yz(t){return t.replace(Qz,"-$1").toLowerCase()}var Jz=/^ms-/;function dd(t){return Yz(t).replace(Jz,"-ms-")}var Xz=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Zz(t){return!!(t&&Xz.test(t))}function bs(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(dd(e))||Hz(t).getPropertyValue(dd(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(dd(i)):Zz(i)?r+=i+"("+s+") ":n+=dd(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function Vh(t,e,n,r){return Eb(t,e,n,r),function(){Qg(t,e,n,r)}}function e$(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function t$(t){var e=bs(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function n$(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||e$(t,"transitionend",!0)},e+n),s=Vh(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function Tb(t,e,n,r){n==null&&(n=t$(t)||0);var i=n$(t,n,r),s=Vh(t,"transitionend",e);return function(){i(),s()}}function um(t){t===void 0&&(t=qf());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function v0(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function r$(){const t=D.useRef(!0),e=D.useRef(()=>t.current);return D.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function i$(t){const e=D.useRef(null);return D.useEffect(()=>{e.current=t}),e.current}const s$="data-rr-ui-";function o$(t){return`${s$}${t}`}function a$(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const w0=o$("modal-open");class qv{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return a$(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(bs(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(w0,""),bs(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(w0),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Sb=D.createContext($a?window:void 0);Sb.Provider;function Wv(){return D.useContext(Sb)}const lm=(t,e)=>$a?t==null?(e||qf()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function u$(t,e){const n=Wv(),[r,i]=D.useState(()=>lm(t,n==null?void 0:n.document));if(!r){const s=lm(t);s&&i(s)}return D.useEffect(()=>{},[e,r]),D.useEffect(()=>{const s=lm(t);s!==r&&i(s)},[t,r]),r}const l$=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",c$=typeof document<"u",E0=c$||l$?D.useLayoutEffect:D.useEffect;function d$({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=D.useRef(null),o=D.useRef(e),a=or(n);D.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const u=vc(s,t.ref),c=D.cloneElement(t,{ref:u});return e?c:i||!o.current&&r?null:c}function h$(t){return t.code==="Escape"||t.keyCode===27}function Rb(){const t=D.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const f$=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function p$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function m$(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:o,addEndListener:a,children:u}=t,c=p$(t,f$);const{major:d}=Rb(),h=d>=19?u.props.ref:u.ref,p=D.useRef(null),y=vc(p,typeof u=="function"?null:h),g=M=>S=>{M&&p.current&&M(p.current,S)},A=D.useCallback(g(e),[e]),R=D.useCallback(g(n),[n]),I=D.useCallback(g(r),[r]),v=D.useCallback(g(i),[i]),w=D.useCallback(g(s),[s]),k=D.useCallback(g(o),[o]),V=D.useCallback(g(a),[a]);return Object.assign({},c,{nodeRef:p},e&&{onEnter:A},n&&{onEntering:R},r&&{onEntered:I},i&&{onExit:v},s&&{onExiting:w},o&&{onExited:k},a&&{addEndListener:V},{children:typeof u=="function"?(M,S)=>u(M,Object.assign({},S,{ref:y})):D.cloneElement(u,{ref:y})})}const g$=["component"];function y$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const _$=D.forwardRef((t,e)=>{let{component:n}=t,r=y$(t,g$);const i=m$(r);return Se.jsx(n,Object.assign({ref:e},i))});function v$({in:t,onTransition:e}){const n=D.useRef(null),r=D.useRef(!0),i=or(e);return E0(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),E0(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function w$({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=D.useState(!e);e&&s&&o(!1);const a=v$({in:!!e,onTransition:c=>{const d=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(d,h=>{throw c.in||o(!0),h})}}),u=vc(a,t.ref);return s&&!e?null:D.cloneElement(t,{ref:u})}function I0(t,e,n){return t?Se.jsx(_$,Object.assign({},n,{component:t})):e?Se.jsx(w$,Object.assign({},n,{transition:e})):Se.jsx(d$,Object.assign({},n))}const E$=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function I$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let cm;function T$(t){return cm||(cm=new qv({ownerDocument:t==null?void 0:t.document})),cm}function S$(t){const e=Wv(),n=t||T$(e),r=D.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:D.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:D.useCallback(i=>{r.current.backdrop=i},[])})}const Ab=D.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:u=!0,onBackdropClick:c,onEscapeKeyDown:d,transition:h,runTransition:p,backdropTransition:y,runBackdropTransition:g,autoFocus:A=!0,enforceFocus:R=!0,restoreFocus:I=!0,restoreFocusOptions:v,renderDialog:w,renderBackdrop:k=ye=>Se.jsx("div",Object.assign({},ye)),manager:V,container:M,onShow:S,onHide:_=()=>{},onExit:C,onExited:b,onExiting:x,onEnter:P,onEntering:T,onEntered:Q}=t,re=I$(t,E$);const se=Wv(),ee=u$(M),B=S$(V),W=r$(),J=i$(n),[te,ae]=D.useState(!n),oe=D.useRef(null);D.useImperativeHandle(e,()=>B,[B]),$a&&!J&&n&&(oe.current=um(se==null?void 0:se.document)),n&&te&&ae(!1);const Ee=or(()=>{if(B.add(),at.current=Vh(document,"keydown",Cn),jt.current=Vh(document,"focus",()=>setTimeout(Ae),!0),S&&S(),A){var ye,Jn;const Xn=um((ye=(Jn=B.dialog)==null?void 0:Jn.ownerDocument)!=null?ye:se==null?void 0:se.document);B.dialog&&Xn&&!v0(B.dialog,Xn)&&(oe.current=Xn,B.dialog.focus())}}),he=or(()=>{if(B.remove(),at.current==null||at.current(),jt.current==null||jt.current(),I){var ye;(ye=oe.current)==null||ye.focus==null||ye.focus(v),oe.current=null}});D.useEffect(()=>{!n||!ee||Ee()},[n,ee,Ee]),D.useEffect(()=>{te&&he()},[te,he]),Ib(()=>{he()});const Ae=or(()=>{if(!R||!W()||!B.isTopModal())return;const ye=um(se==null?void 0:se.document);B.dialog&&ye&&!v0(B.dialog,ye)&&B.dialog.focus()}),De=or(ye=>{ye.target===ye.currentTarget&&(c==null||c(ye),a===!0&&_())}),Cn=or(ye=>{u&&h$(ye)&&B.isTopModal()&&(d==null||d(ye),ye.defaultPrevented||_())}),jt=D.useRef(),at=D.useRef(),fn=(...ye)=>{ae(!0),b==null||b(...ye)};if(!ee)return null;const Oe=Object.assign({role:r,ref:B.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},re,{style:s,className:i,tabIndex:-1});let _t=w?w(Oe):Se.jsx("div",Object.assign({},Oe,{children:D.cloneElement(o,{role:"document"})}));_t=I0(h,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:x,onExited:fn,onEnter:P,onEntering:T,onEntered:Q,children:_t});let bn=null;return a&&(bn=k({ref:B.setBackdropRef,onClick:De}),bn=I0(y,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:bn})),Se.jsx(Se.Fragment,{children:Uo.createPortal(Se.jsxs(Se.Fragment,{children:[bn,_t]}),ee)})});Ab.displayName="Modal";const R$=Object.assign(Ab,{Manager:qv});function A$(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function P$(t,e){t.classList?t.classList.add(e):A$(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var C$=Function.prototype.bind.call(Function.prototype.call,[].slice);function vo(t,e){return C$(t.querySelectorAll(e))}function T0(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function b$(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=T0(t.className,e):t.setAttribute("class",T0(t.className&&t.className.baseVal||"",e))}const wo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class k$ extends qv{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,bs(n,{[e]:`${parseFloat(bs(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],bs(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(P$(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";vo(n,wo.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),vo(n,wo.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),vo(n,wo.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();b$(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";vo(n,wo.FIXED_CONTENT).forEach(s=>this.restore(r,s)),vo(n,wo.STICKY_CONTENT).forEach(s=>this.restore(i,s)),vo(n,wo.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let dm;function x$(t){return dm||(dm=new k$(t)),dm}function N$(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Yg(t,e){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yg(t,e)}function D$(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yg(t,e)}var Pb={exports:{}},O$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V$=O$,M$=V$;function Cb(){}function bb(){}bb.resetWarningCache=Cb;var L$=function(){function t(r,i,s,o,a,u){if(u!==M$){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bb,resetWarningCache:Cb};return n.PropTypes=n,n};Pb.exports=L$();var F$=Pb.exports;const hm=$h(F$),S0={disabled:!1},kb=Sr.createContext(null);var U$=function(e){return e.scrollTop},Vu="unmounted",ls="exited",ai="entering",ms="entered",Jg="exiting",Qr=function(t){D$(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=ls,s.appearStatus=ai):u=ms:r.unmountOnExit||r.mountOnEnter?u=Vu:u=ls,s.state={status:u},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Vu?{status:ls}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==ai&&o!==ms&&(s=ai):(o===ai||o===ms)&&(s=Jg)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===ai){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Uo.findDOMNode(this);o&&U$(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ls&&this.setState({status:Vu})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[Uo.findDOMNode(this),a],c=u[0],d=u[1],h=this.getTimeouts(),p=a?h.appear:h.enter;if(!i&&!o||S0.disabled){this.safeSetState({status:ms},function(){s.props.onEntered(c)});return}this.props.onEnter(c,d),this.safeSetState({status:ai},function(){s.props.onEntering(c,d),s.onTransitionEnd(p,function(){s.safeSetState({status:ms},function(){s.props.onEntered(c,d)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Uo.findDOMNode(this);if(!s||S0.disabled){this.safeSetState({status:ls},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Jg},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ls},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Uo.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=u[0],d=u[1];this.props.addEndListener(c,d)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Vu)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=N$(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Sr.createElement(kb.Provider,{value:null},typeof o=="function"?o(i,a):Sr.cloneElement(Sr.Children.only(o),a))},e}(Sr.Component);Qr.contextType=kb;Qr.propTypes={};function Eo(){}Qr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Eo,onEntering:Eo,onEntered:Eo,onExit:Eo,onExiting:Eo,onExited:Eo};Qr.UNMOUNTED=Vu;Qr.EXITED=ls;Qr.ENTERING=ai;Qr.ENTERED=ms;Qr.EXITING=Jg;function R0(t,e){const n=bs(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function B$(t,e){const n=R0(t,"transitionDuration"),r=R0(t,"transitionDelay"),i=Tb(t,s=>{s.target===t&&(i(),e(s))},n+r)}function j$(t){t.offsetHeight}function z$(t){return t&&"setState"in t?Uo.findDOMNode(t):t??null}const $$=Sr.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:u,...c},d)=>{const h=D.useRef(null),p=vc(h,u),y=M=>{p(z$(M))},g=M=>S=>{M&&h.current&&M(h.current,S)},A=D.useCallback(g(t),[t]),R=D.useCallback(g(e),[e]),I=D.useCallback(g(n),[n]),v=D.useCallback(g(r),[r]),w=D.useCallback(g(i),[i]),k=D.useCallback(g(s),[s]),V=D.useCallback(g(o),[o]);return Se.jsx(Qr,{ref:d,...c,onEnter:A,onEntered:I,onEntering:R,onExit:v,onExited:k,onExiting:w,addEndListener:V,nodeRef:h,children:typeof a=="function"?(M,S)=>a(M,{...S,ref:y}):Sr.cloneElement(a,{ref:y})})}),q$={[ai]:"show",[ms]:"show"},Kv=D.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=D.useCallback((d,h)=>{j$(d),r==null||r(d,h)},[r]),{major:u}=Rb(),c=u>=19?e.props.ref:e.ref;return Se.jsx($$,{ref:s,addEndListener:B$,...o,onEnter:a,childRef:c,children:(d,h)=>D.cloneElement(e,{...h,className:Tn("fade",t,e.props.className,q$[d],n[d])})})});Kv.displayName="Fade";const W$=["xxl","xl","lg","md","sm","xs"],K$="xs",xb=D.createContext({prefixes:{},breakpoints:W$,minBreakpoint:K$});function Xi(t,e){const{prefixes:n}=D.useContext(xb);return t||n[e]||e}function G$(){const{dir:t}=D.useContext(xb);return t==="rtl"}const Nb=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Xi(e,"modal-body"),Se.jsx(n,{ref:i,className:Tn(t,e),...r})));Nb.displayName="ModalBody";const Db=D.createContext({onHide(){}}),Gv=D.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...u},c)=>{t=Xi(t,"modal");const d=`${t}-dialog`,h=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return Se.jsx("div",{...u,ref:c,className:Tn(d,e,i&&`${t}-${i}`,r&&`${d}-centered`,a&&`${d}-scrollable`,s&&h),children:Se.jsx("div",{className:Tn(`${t}-content`,n),children:o})})});Gv.displayName="ModalDialog";const Ob=D.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Xi(e,"modal-footer"),Se.jsx(n,{ref:i,className:Tn(t,e),...r})));Ob.displayName="ModalFooter";const H$={"aria-label":hm.string,onClick:hm.func,variant:hm.oneOf(["white"])},Hv=D.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>Se.jsx("button",{ref:i,type:"button",className:Tn("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));Hv.displayName="CloseButton";Hv.propTypes=H$;const Q$=D.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=D.useContext(Db),u=or(()=>{a==null||a.onHide(),r==null||r()});return Se.jsxs("div",{ref:o,...s,children:[i,n&&Se.jsx(Hv,{"aria-label":t,variant:e,onClick:u})]})}),Vb=D.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=Xi(t,"modal-header"),Se.jsx(Q$,{ref:s,...i,className:Tn(e,t),closeLabel:n,closeButton:r})));Vb.displayName="ModalHeader";const Y$=t=>D.forwardRef((e,n)=>Se.jsx("div",{...e,ref:n,className:Tn(e.className,t)})),J$=Y$("h4"),Mb=D.forwardRef(({className:t,bsPrefix:e,as:n=J$,...r},i)=>(e=Xi(e,"modal-title"),Se.jsx(n,{ref:i,className:Tn(t,e),...r})));Mb.displayName="ModalTitle";function X$(t){return Se.jsx(Kv,{...t,timeout:null})}function Z$(t){return Se.jsx(Kv,{...t,timeout:null})}const Lb=D.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=Gv,"data-bs-theme":a,"aria-labelledby":u,"aria-describedby":c,"aria-label":d,show:h=!1,animation:p=!0,backdrop:y=!0,keyboard:g=!0,onEscapeKeyDown:A,onShow:R,onHide:I,container:v,autoFocus:w=!0,enforceFocus:k=!0,restoreFocus:V=!0,restoreFocusOptions:M,onEntered:S,onExit:_,onExiting:C,onEnter:b,onEntering:x,onExited:P,backdropClassName:T,manager:Q,...re},se)=>{const[ee,B]=D.useState({}),[W,J]=D.useState(!1),te=D.useRef(!1),ae=D.useRef(!1),oe=D.useRef(null),[Ee,he]=$z(),Ae=vc(se,he),De=or(I),Cn=G$();t=Xi(t,"modal");const jt=D.useMemo(()=>({onHide:De}),[De]);function at(){return Q||x$({isRTL:Cn})}function fn(ue){if(!$a)return;const Qe=at().getScrollbarWidth()>0,Zi=ue.scrollHeight>qf(ue).documentElement.clientHeight;B({paddingRight:Qe&&!Zi?y0():void 0,paddingLeft:!Qe&&Zi?y0():void 0})}const Oe=or(()=>{Ee&&fn(Ee.dialog)});Ib(()=>{Qg(window,"resize",Oe),oe.current==null||oe.current()});const _t=()=>{te.current=!0},bn=ue=>{te.current&&Ee&&ue.target===Ee.dialog&&(ae.current=!0),te.current=!1},ye=()=>{J(!0),oe.current=Tb(Ee.dialog,()=>{J(!1)})},Jn=ue=>{ue.target===ue.currentTarget&&ye()},Xn=ue=>{if(y==="static"){Jn(ue);return}if(ae.current||ue.target!==ue.currentTarget){ae.current=!1;return}I==null||I()},oo=ue=>{g?A==null||A(ue):(ue.preventDefault(),y==="static"&&ye())},Ic=(ue,Qe)=>{ue&&fn(ue),b==null||b(ue,Qe)},Ga=ue=>{oe.current==null||oe.current(),_==null||_(ue)},Tc=(ue,Qe)=>{x==null||x(ue,Qe),Eb(window,"resize",Oe)},tp=ue=>{ue&&(ue.style.display=""),P==null||P(ue),Qg(window,"resize",Oe)},Ha=D.useCallback(ue=>Se.jsx("div",{...ue,className:Tn(`${t}-backdrop`,T,!p&&"show")}),[p,T,t]),ao={...n,...ee};ao.display="block";const Sc=ue=>Se.jsx("div",{role:"dialog",...ue,style:ao,className:Tn(e,t,W&&`${t}-static`,!p&&"show"),onClick:y?Xn:void 0,onMouseUp:bn,"data-bs-theme":a,"aria-label":d,"aria-labelledby":u,"aria-describedby":c,children:Se.jsx(o,{...re,onMouseDown:_t,className:r,contentClassName:i,children:s})});return Se.jsx(Db.Provider,{value:jt,children:Se.jsx(R$,{show:h,ref:Ae,backdrop:y,container:v,keyboard:!0,autoFocus:w,enforceFocus:k,restoreFocus:V,restoreFocusOptions:M,onEscapeKeyDown:oo,onShow:R,onHide:I,onEnter:Ic,onEntering:Tc,onEntered:S,onExit:Ga,onExiting:C,onExited:tp,manager:at(),transition:p?X$:void 0,backdropTransition:p?Z$:void 0,renderBackdrop:Ha,renderDialog:Sc})})});Lb.displayName="Modal";const c5=Object.assign(Lb,{Body:Nb,Header:Vb,Title:Mb,Footer:Ob,Dialog:Gv,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var e3={},Qv={},Yv={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.Direction=void 0;var A0;(function(t){t.Right="to right",t.Left="to left",t.Down="to bottom",t.Up="to top"})(A0||(qa.Direction=A0={}));(function(t){var e=hn&&hn.__spreadArray||function(P,T,Q){if(Q||arguments.length===2)for(var re=0,se=T.length,ee;re<se;re++)(ee||!(re in T))&&(ee||(ee=Array.prototype.slice.call(T,0,re)),ee[re]=T[re]);return P.concat(ee||Array.prototype.slice.call(T))};Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.useThumbOverlap=t.assertUnreachable=t.voidFn=t.getTrackBackground=t.replaceAt=t.schd=t.translate=t.getClosestThumbIndex=t.translateThumbs=t.getPaddingAndBorder=t.getMargin=t.checkInitialOverlap=t.checkValuesAgainstBoundaries=t.checkBoundaries=t.isVertical=t.relativeValue=t.normalizeValue=t.isStepDivisible=t.isTouchEvent=t.getStepDecimals=void 0;var n=D,r=qa,i=function(P){var T=P.toString().split(".")[1];return T?T.length:0};t.getStepDecimals=i;function s(P){return P.touches&&P.touches.length||P.changedTouches&&P.changedTouches.length}t.isTouchEvent=s;function o(P,T,Q){var re=(T-P)/Q,se=8,ee=Number(re.toFixed(se));return parseInt(ee.toString(),10)===ee}t.isStepDivisible=o;function a(P,T,Q,re,se,ee,B){var W=1e11;if(P=Math.round(P*W)/W,!ee){var J=B[T-1],te=B[T+1];if(J&&J>P)return J;if(te&&te<P)return te}if(P>re)return re;if(P<Q)return Q;var ae=Math.floor(P*W-Q*W)%Math.floor(se*W),oe=Math.floor(P*W-Math.abs(ae)),Ee=ae===0?P:oe/W,he=Math.abs(ae/W)<se/2?Ee:Ee+se,Ae=(0,t.getStepDecimals)(se);return parseFloat(he.toFixed(Ae))}t.normalizeValue=a;function u(P,T,Q){return(P-T)/(Q-T)}t.relativeValue=u;function c(P){return P===r.Direction.Up||P===r.Direction.Down}t.isVertical=c;function d(P,T,Q){if(T>=Q)throw new RangeError("min (".concat(T,") is equal/bigger than max (").concat(Q,")"));if(P<T)throw new RangeError("value (".concat(P,") is smaller than min (").concat(T,")"));if(P>Q)throw new RangeError("value (".concat(P,") is bigger than max (").concat(Q,")"))}t.checkBoundaries=d;function h(P,T,Q){return P<T?T:P>Q?Q:P}t.checkValuesAgainstBoundaries=h;function p(P){if(!(P.length<2)&&!P.slice(1).every(function(T,Q){return P[Q]<=T}))throw new RangeError("values={[".concat(P,"]} needs to be sorted when allowOverlap={false}"))}t.checkInitialOverlap=p;function y(P){var T=window.getComputedStyle(P);return{top:parseInt(T["margin-top"],10),bottom:parseInt(T["margin-bottom"],10),left:parseInt(T["margin-left"],10),right:parseInt(T["margin-right"],10)}}t.getMargin=y;function g(P){var T=window.getComputedStyle(P);return{top:parseInt(T["padding-top"],10)+parseInt(T["border-top-width"],10),bottom:parseInt(T["padding-bottom"],10)+parseInt(T["border-bottom-width"],10),left:parseInt(T["padding-left"],10)+parseInt(T["border-left-width"],10),right:parseInt(T["padding-right"],10)+parseInt(T["border-right-width"],10)}}t.getPaddingAndBorder=g;function A(P,T,Q){var re=Q?-1:1;P.forEach(function(se,ee){return I(se,re*T[ee].x,T[ee].y)})}t.translateThumbs=A;function R(P,T,Q,re){for(var se=0,ee=b(P[0],T,Q,re),B=1;B<P.length;B++){var W=b(P[B],T,Q,re);W<ee&&(ee=W,se=B)}return se}t.getClosestThumbIndex=R;function I(P,T,Q){P.style.transform="translate(".concat(T,"px, ").concat(Q,"px)")}t.translate=I;var v=function(P){var T=[],Q=null,re=function(){for(var se=[],ee=0;ee<arguments.length;ee++)se[ee]=arguments[ee];T=se,!Q&&(Q=requestAnimationFrame(function(){Q=null,P.apply(void 0,T)}))};return re};t.schd=v;function w(P,T,Q){var re=P.slice(0);return re[T]=Q,re}t.replaceAt=w;function k(P){var T=P.values,Q=P.colors,re=P.min,se=P.max,ee=P.direction,B=ee===void 0?r.Direction.Right:ee,W=P.rtl,J=W===void 0?!1:W;J&&B===r.Direction.Right?B=r.Direction.Left:J&&r.Direction.Left&&(B=r.Direction.Right);var te=T.slice(0).sort(function(oe,Ee){return oe-Ee}).map(function(oe){return(oe-re)/(se-re)*100}),ae=te.reduce(function(oe,Ee,he){return"".concat(oe,", ").concat(Q[he]," ").concat(Ee,"%, ").concat(Q[he+1]," ").concat(Ee,"%")},"");return"linear-gradient(".concat(B,", ").concat(Q[0]," 0%").concat(ae,", ").concat(Q[Q.length-1]," 100%)")}t.getTrackBackground=k;function V(){}t.voidFn=V;function M(P){throw new Error("Didn't expect to get here")}t.assertUnreachable=M;var S=function(P,T,Q,re,se){se===void 0&&(se=function(B){return B});var ee=Math.ceil(e([P],Array.from(P.children),!0).reduce(function(B,W){var J=Math.ceil(W.getBoundingClientRect().width);if(W.innerText&&W.innerText.includes(Q)&&W.childElementCount===0){var te=W.cloneNode(!0);te.innerHTML=se(T.toFixed(re)),te.style.visibility="hidden",document.body.appendChild(te),J=Math.ceil(te.getBoundingClientRect().width),document.body.removeChild(te)}return J>B?J:B},P.getBoundingClientRect().width));return ee},_=function(P,T,Q,re,se,ee,B){B===void 0&&(B=function(te){return te});var W=[],J=function(te){var ae=S(Q[te],re[te],se,ee,B),oe=T[te].x;T.forEach(function(Ee,he){var Ae=Ee.x,De=S(Q[he],re[he],se,ee,B);te!==he&&(oe>=Ae&&oe<=Ae+De||oe+ae>=Ae&&oe+ae<=Ae+De)&&(W.includes(he)||(W.push(te),W.push(he),W=e(e([],W,!0),[te,he],!1),J(he)))})};return J(P),Array.from(new Set(W.sort()))},C=function(P,T,Q,re,se,ee){re===void 0&&(re=.1),se===void 0&&(se=" - "),ee===void 0&&(ee=function(he){return he});var B=(0,t.getStepDecimals)(re),W=(0,n.useState)({}),J=W[0],te=W[1],ae=(0,n.useState)(ee(T[Q].toFixed(B))),oe=ae[0],Ee=ae[1];return(0,n.useEffect)(function(){if(P){var he=P.getThumbs();if(he.length<1)return;var Ae={},De=P.getOffsets(),Cn=_(Q,De,he,T,se,B,ee),jt=ee(T[Q].toFixed(B));if(Cn.length){var at=Cn.reduce(function(ye,Jn,Xn,oo){return ye.length?e(e([],ye,!0),[De[oo[Xn]].x],!1):[De[oo[Xn]].x]},[]);if(Math.min.apply(Math,at)===De[Q].x){var fn=[];Cn.forEach(function(ye){fn.push(T[ye].toFixed(B))}),jt=Array.from(new Set(fn.sort(function(ye,Jn){return parseFloat(ye)-parseFloat(Jn)}))).map(ee).join(se);var Oe=Math.min.apply(Math,at),_t=Math.max.apply(Math,at),bn=he[Cn[at.indexOf(_t)]].getBoundingClientRect().width;Ae.left="".concat(Math.abs(Oe-(_t+bn))/2,"px"),Ae.transform="translate(-50%, 0)"}else Ae.visibility="hidden"}Ee(jt),te(Ae)}},[P,T]),[oe,J]};t.useThumbOverlap=C;function b(P,T,Q,re){var se=P.getBoundingClientRect(),ee=se.left,B=se.top,W=se.width,J=se.height;return c(re)?Math.abs(Q-(B+J/2)):Math.abs(T-(ee+W/2))}var x=function(){var P,T=((P=navigator.userAgentData)===null||P===void 0?void 0:P.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(T)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};t.isIOS=x})(Yv);var t3=hn&&hn.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n3=hn&&hn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),r3=hn&&hn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i3=hn&&hn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&n3(e,t,n);return r3(e,t),e},P0=hn&&hn.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Qv,"__esModule",{value:!0});var hd=i3(D),ve=Yv,ht=qa,s3=["ArrowRight","ArrowUp","k","PageUp"],o3=["ArrowLeft","ArrowDown","j","PageDown"],a3=function(t){t3(e,t);function e(n){var r=t.call(this,n)||this;if(r.trackRef=hd.createRef(),r.thumbRefs=[],r.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(r.props.values.length).fill(0).map(function(i,s){return s}),isChanged:!1,markOffsets:[]},r.getOffsets=function(){var i=r.props,s=i.direction,o=i.values,a=i.min,u=i.max,c=r.trackRef.current;if(!c)return console.warn("No track element found."),[];var d=c.getBoundingClientRect(),h=(0,ve.getPaddingAndBorder)(c);return r.getThumbs().map(function(p,y){var g={x:0,y:0},A=p.getBoundingClientRect(),R=(0,ve.getMargin)(p);switch(s){case ht.Direction.Right:return g.x=(R.left+h.left)*-1,g.y=((A.height-d.height)/2+h.top)*-1,g.x+=d.width*(0,ve.relativeValue)(o[y],a,u)-A.width/2,g;case ht.Direction.Left:return g.x=(R.right+h.right)*-1,g.y=((A.height-d.height)/2+h.top)*-1,g.x+=d.width-d.width*(0,ve.relativeValue)(o[y],a,u)-A.width/2,g;case ht.Direction.Up:return g.x=((A.width-d.width)/2+R.left+h.left)*-1,g.y=-h.left,g.y+=d.height-d.height*(0,ve.relativeValue)(o[y],a,u)-A.height/2,g;case ht.Direction.Down:return g.x=((A.width-d.width)/2+R.left+h.left)*-1,g.y=-h.left,g.y+=d.height*(0,ve.relativeValue)(o[y],a,u)-A.height/2,g;default:return(0,ve.assertUnreachable)(s)}})},r.getThumbs=function(){return r.trackRef&&r.trackRef.current?Array.from(r.trackRef.current.children).filter(function(i){return i.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},r.getTargetIndex=function(i){return r.getThumbs().findIndex(function(s){return s===i.target||s.contains(i.target)})},r.addTouchEvents=function(i){document.addEventListener("touchmove",r.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",r.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",r.schdOnEnd,{passive:!1})},r.addMouseEvents=function(i){document.addEventListener("mousemove",r.schdOnMouseMove),document.addEventListener("mouseup",r.schdOnEnd)},r.onMouseDownTrack=function(i){var s;if(!(i.button!==0||(0,ve.isIOS)()))if(i.persist(),i.preventDefault(),r.addMouseEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(a){var u;return(u=a.current)===null||u===void 0?void 0:u.contains(i.target)}))return;r.setState({draggedTrackPos:[i.clientX,i.clientY]},function(){return r.onMove(i.clientX,i.clientY)})}else{var o=(0,ve.getClosestThumbIndex)(r.thumbRefs.map(function(a){return a.current}),i.clientX,i.clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.clientX,i.clientY)})}},r.onResize=function(){(0,ve.translateThumbs)(r.getThumbs(),r.getOffsets(),r.props.rtl),r.calculateMarkOffsets()},r.onTouchStartTrack=function(i){var s;if(i.persist(),r.addTouchEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(a){var u;return(u=a.current)===null||u===void 0?void 0:u.contains(i.target)}))return;r.setState({draggedTrackPos:[i.touches[0].clientX,i.touches[0].clientY]},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}else{var o=(0,ve.getClosestThumbIndex)(r.thumbRefs.map(function(a){return a.current}),i.touches[0].clientX,i.touches[0].clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}},r.onMouseOrTouchStart=function(i){if(!r.props.disabled){var s=(0,ve.isTouchEvent)(i);if(!(!s&&i.button!==0)){var o=r.getTargetIndex(i);o!==-1&&(s?r.addTouchEvents(i):r.addMouseEvents(i),r.setState({draggedThumbIndex:o,thumbZIndexes:r.state.thumbZIndexes.map(function(a,u){return u===o?Math.max.apply(Math,r.state.thumbZIndexes):a<=r.state.thumbZIndexes[o]?a:a-1})}))}}},r.onMouseMove=function(i){i.preventDefault(),r.onMove(i.clientX,i.clientY)},r.onTouchMove=function(i){i.preventDefault(),r.onMove(i.touches[0].clientX,i.touches[0].clientY)},r.onKeyDown=function(i){var s=r.props,o=s.values,a=s.onChange,u=s.step,c=s.rtl,d=s.direction,h=r.state.isChanged,p=r.getTargetIndex(i.nativeEvent),y=c||d===ht.Direction.Left||d===ht.Direction.Down?-1:1;p!==-1&&(s3.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:p,isChanged:!0}),a((0,ve.replaceAt)(o,p,r.normalizeValue(o[p]+y*(i.key==="PageUp"?u*10:u),p)))):o3.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:p,isChanged:!0}),a((0,ve.replaceAt)(o,p,r.normalizeValue(o[p]-y*(i.key==="PageDown"?u*10:u),p)))):i.key==="Tab"?r.setState({draggedThumbIndex:-1},function(){h&&r.fireOnFinalChange()}):h&&r.fireOnFinalChange())},r.onKeyUp=function(i){var s=r.state.isChanged;r.setState({draggedThumbIndex:-1},function(){s&&r.fireOnFinalChange()})},r.onMove=function(i,s){var o=r.state,a=o.draggedThumbIndex,u=o.draggedTrackPos,c=r.props,d=c.direction,h=c.min,p=c.max,y=c.onChange,g=c.values,A=c.step,R=c.rtl;if(a===-1&&u[0]===-1&&u[1]===-1)return null;var I=r.trackRef.current;if(!I)return null;var v=I.getBoundingClientRect(),w=(0,ve.isVertical)(d)?v.height:v.width;if(u[0]!==-1&&u[1]!==-1){var k=i-u[0],V=s-u[1],M=0;switch(d){case ht.Direction.Right:case ht.Direction.Left:M=k/w*(p-h);break;case ht.Direction.Down:case ht.Direction.Up:M=V/w*(p-h);break;default:(0,ve.assertUnreachable)(d)}if(R&&(M*=-1),Math.abs(M)>=A/2){for(var S=0;S<r.thumbRefs.length;S++){if(g[S]===p&&Math.sign(M)===1||g[S]===h&&Math.sign(M)===-1)return;var _=g[S]+M;_>p?M=p-g[S]:_<h&&(M=h-g[S])}for(var C=g.slice(0),S=0;S<r.thumbRefs.length;S++)C=(0,ve.replaceAt)(C,S,r.normalizeValue(g[S]+M,S));r.setState({draggedTrackPos:[i,s]}),y(C)}}else{var b=0;switch(d){case ht.Direction.Right:b=(i-v.left)/w*(p-h)+h;break;case ht.Direction.Left:b=(w-(i-v.left))/w*(p-h)+h;break;case ht.Direction.Down:b=(s-v.top)/w*(p-h)+h;break;case ht.Direction.Up:b=(w-(s-v.top))/w*(p-h)+h;break;default:(0,ve.assertUnreachable)(d)}R&&(b=p+h-b),Math.abs(g[a]-b)>=A/2&&y((0,ve.replaceAt)(g,a,r.normalizeValue(b,a)))}},r.normalizeValue=function(i,s){var o=r.props,a=o.min,u=o.max,c=o.step,d=o.allowOverlap,h=o.values;return(0,ve.normalizeValue)(i,s,a,u,c,d,h)},r.onEnd=function(i){if(i.preventDefault(),document.removeEventListener("mousemove",r.schdOnMouseMove),document.removeEventListener("touchmove",r.schdOnTouchMove),document.removeEventListener("mouseup",r.schdOnEnd),document.removeEventListener("touchend",r.schdOnEnd),document.removeEventListener("touchcancel",r.schdOnEnd),r.state.draggedThumbIndex===-1&&r.state.draggedTrackPos[0]===-1&&r.state.draggedTrackPos[1]===-1)return null;r.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){r.fireOnFinalChange()})},r.fireOnFinalChange=function(){r.setState({isChanged:!1});var i=r.props,s=i.onFinalChange,o=i.values;s&&s(o)},r.updateMarkRefs=function(i){if(!i.renderMark){r.numOfMarks=void 0,r.markRefs=void 0;return}r.numOfMarks=(i.max-i.min)/r.props.step,r.markRefs=[];for(var s=0;s<r.numOfMarks+1;s++)r.markRefs[s]=hd.createRef()},r.calculateMarkOffsets=function(){if(!(!r.props.renderMark||!r.trackRef||!r.numOfMarks||!r.markRefs||r.trackRef.current===null)){for(var i=window.getComputedStyle(r.trackRef.current),s=parseInt(i.width,10),o=parseInt(i.height,10),a=parseInt(i.paddingLeft,10),u=parseInt(i.paddingTop,10),c=[],d=0;d<r.numOfMarks+1;d++){var h=9999,p=9999;if(r.markRefs[d].current){var y=r.markRefs[d].current.getBoundingClientRect();h=y.height,p=y.width}r.props.direction===ht.Direction.Left||r.props.direction===ht.Direction.Right?c.push([Math.round(s/r.numOfMarks*d+a-p/2),-Math.round((h-o)/2)]):c.push([Math.round(o/r.numOfMarks*d+u-h/2),-Math.round((p-s)/2)])}r.setState({markOffsets:c})}},n.step===0)throw new Error('"step" property should be a positive number');return r.schdOnMouseMove=(0,ve.schd)(r.onMouseMove),r.schdOnTouchMove=(0,ve.schd)(r.onTouchMove),r.schdOnEnd=(0,ve.schd)(r.onEnd),r.thumbRefs=n.values.map(function(){return hd.createRef()}),r.updateMarkRefs(n),r}return e.prototype.componentDidMount=function(){var n=this,r=this.props,i=r.values,s=r.min,o=r.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",n.onResize)},unobserve:function(){return window.removeEventListener("resize",n.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,ve.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(a){return(0,ve.checkBoundaries)(a,n.props.min,n.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,ve.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),i.forEach(function(a){(0,ve.isStepDivisible)(s,a,o)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(n,r){var i=this.props,s=i.max,o=i.min,a=i.step,u=i.values,c=i.rtl;(n.max!==s||n.min!==o||n.step!==a)&&this.updateMarkRefs(this.props),(0,ve.translateThumbs)(this.getThumbs(),this.getOffsets(),c),(n.max!==s||n.min!==o||n.step!==a||r.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),u.forEach(function(d){(0,ve.isStepDivisible)(o,d,a)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var n={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,n),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var n=this,r=this.props,i=r.label,s=r.labelledBy,o=r.renderTrack,a=r.renderThumb,u=r.renderMark,c=u===void 0?function(){return null}:u,d=r.values,h=r.min,p=r.max,y=r.allowOverlap,g=r.disabled,A=this.state,R=A.draggedThumbIndex,I=A.thumbZIndexes,v=A.markOffsets;return o({props:{style:{transform:"scale(1)",cursor:R>-1?"grabbing":this.props.draggableTrack?(0,ve.isVertical)(this.props.direction)?"ns-resize":"ew-resize":d.length===1&&!g?"pointer":"inherit"},onMouseDown:g?ve.voidFn:this.onMouseDownTrack,onTouchStart:g?ve.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:g,children:P0(P0([],v.map(function(w,k,V){return c({props:{style:n.props.direction===ht.Direction.Left||n.props.direction===ht.Direction.Right?{position:"absolute",left:"".concat(w[0],"px"),marginTop:"".concat(w[1],"px")}:{position:"absolute",top:"".concat(w[0],"px"),marginLeft:"".concat(w[1],"px")},key:"mark".concat(k),ref:n.markRefs[k]},index:k})}),!0),d.map(function(w,k){var V=n.state.draggedThumbIndex===k;return a({index:k,value:w,isDragged:V,props:{style:{position:"absolute",zIndex:I[k],cursor:g?"inherit":V?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:k,tabIndex:g?void 0:0,"aria-valuemax":y?p:d[k+1]||p,"aria-valuemin":y?h:d[k-1]||h,"aria-valuenow":w,draggable:!1,ref:n.thumbRefs[k],"aria-label":i,"aria-labelledby":s,role:"slider",onKeyDown:g?ve.voidFn:n.onKeyDown,onKeyUp:g?ve.voidFn:n.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:ht.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(hd.Component);Qv.default=a3;(function(t){var e=hn&&hn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesAgainstBoundaries=t.relativeValue=t.useThumbOverlap=t.Direction=t.getTrackBackground=t.Range=void 0;var n=e(Qv);t.Range=n.default;var r=Yv;Object.defineProperty(t,"getTrackBackground",{enumerable:!0,get:function(){return r.getTrackBackground}}),Object.defineProperty(t,"useThumbOverlap",{enumerable:!0,get:function(){return r.useThumbOverlap}}),Object.defineProperty(t,"relativeValue",{enumerable:!0,get:function(){return r.relativeValue}}),Object.defineProperty(t,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return r.checkValuesAgainstBoundaries}});var i=qa;Object.defineProperty(t,"Direction",{enumerable:!0,get:function(){return i.Direction}})})(e3);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=2e3;async function l3(t,e,n){var r;const{BuildInfo:i}=Ws();Qn(e.sessionId,"AuthEvent did not contain a session ID");const s=await p3(e.sessionId),o={};return Zl()?o.ibi=i.packageName:Xl()?o.apn=i.packageName:St(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ig(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function c3(t){const{BuildInfo:e}=Ws(),n={};Zl()?n.iosBundleId=e.packageName:Xl()?n.androidPackageName=e.packageName:St(t,"operation-not-supported-in-this-environment"),await BP(t,n)}function d3(t){const{cordova:e}=Ws();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,NM()?"_blank":"_system","location=yes"),n(i)})})}async function h3(t,e,n){const{cordova:r}=Ws();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function u(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(mt(t,"redirect-cancelled-by-user"))},u3))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),Xl()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function f3(t){var e,n,r,i,s,o,a,u,c,d;const h=Ws();q(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((u=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((d=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function p3(t){const e=m3(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function m3(t){if(Qn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=20;class y3 extends FP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function _3(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:E3(),postBody:null,tenantId:t.tenantId,error:mt(t,"no-auth-event")}}function v3(t,e){return Xg()._set(Zg(t),e)}async function C0(t){const e=await Xg()._get(Zg(t));return e&&await Xg()._remove(Zg(t)),e}function w3(t,e){var n,r;const i=T3(e);if(i.includes("/__/auth/callback")){const s=Fd(i),o=s.firebaseError?I3(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],u=a?mt(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function E3(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<g3;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Xg(){return _n(yf)}function Zg(t){return As("authEvent",t.config.apiKey,t.name)}function I3(t){try{return JSON.parse(t)}catch{return null}}function T3(t){const e=Fd(t),n=e.link?decodeURIComponent(e.link):void 0,r=Fd(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Fd(i).link||i||r||n||t}function Fd(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Bo(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=500;class R3{constructor(){this._redirectPersistence=Di,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ef,this._overrideRedirectResult=F_}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new y3(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){St(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){f3(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),UF(),await this._originValidation(e);const o=_3(e,r,i);await v3(e,o);const a=await l3(e,o,n),u=await d3(a);return h3(e,s,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c3(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Ws(),o=setTimeout(async()=>{await C0(e),n.onEvent(b0())},S3),a=async d=>{clearTimeout(o);const h=await C0(e);let p=null;h&&(d!=null&&d.url)&&(p=w3(h,d.url)),n.onEvent(p||b0())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;Ws().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof u=="function")try{u(d)}catch(h){console.error(h)}}}}const A3=R3;function b0(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t,e){Ze(t)._logFramework(e)}var C3="@firebase/auth-compat",b3="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=1e3;function el(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function x3(){return el()==="http:"||el()==="https:"}function Fb(t=He()){return!!((el()==="file:"||el()==="ionic:"||el()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function N3(){return g_()||m_()}function D3(){return LA()&&(document==null?void 0:document.documentMode)===11}function O3(t=He()){return/Edge\/\d+/.test(t)}function V3(t=He()){return D3()||O3(t)}function Ub(){try{const t=self.localStorage,e=nc();if(t)return t.setItem(e,"1"),t.removeItem(e),V3()?wl():!0}catch{return Jv()&&wl()}return!1}function Jv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fm(){return(x3()||MA()||Fb())&&!N3()&&Ub()&&!Jv()}function Bb(){return Fb()&&typeof document<"u"}async function M3(){return Bb()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},k3);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function L3(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn={LOCAL:"local",NONE:"none",SESSION:"session"},Iu=q,jb="persistence";function F3(t,e){if(Iu(Object.values(gn).includes(e),t,"invalid-persistence-type"),g_()){Iu(e!==gn.SESSION,t,"unsupported-persistence-type");return}if(m_()){Iu(e===gn.NONE,t,"unsupported-persistence-type");return}if(Jv()){Iu(e===gn.NONE||e===gn.LOCAL&&wl(),t,"unsupported-persistence-type");return}Iu(e===gn.NONE||Ub(),t,"unsupported-persistence-type")}async function ey(t){await t._initializationPromise;const e=zb(),n=As(jb,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function U3(t,e){const n=zb();if(!n)return[];const r=As(jb,t,e);switch(n.getItem(r)){case gn.NONE:return[ca];case gn.LOCAL:return[ha,Di];case gn.SESSION:return[Di];default:return[]}}function zb(){var t;try{return((t=L3())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=q;class gi{constructor(){this.browserResolver=_n(jP),this.cordovaResolver=_n(A3),this.underlyingResolver=null,this._redirectPersistence=Di,this._completeRedirectFn=Ef,this._overrideRedirectResult=F_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Bb()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return B3(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await M3();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){return t.unwrap()}function j3(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t){return qb(t)}function $3(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new q3(t,GL(t,e))}else if(r){const i=qb(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function qb(t){const{_tokenResponse:e}=t instanceof Gt?t.customData:t;if(!e)return null;if(!(t instanceof Gt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ms.credentialFromResult(t);const n=e.providerId;if(!n||n===gu.PASSWORD)return null;let r;switch(n){case gu.GOOGLE:r=rr;break;case gu.FACEBOOK:r=nr;break;case gu.GITHUB:r=ir;break;case gu.TWITTER:r=sr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:u}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?da._create(n,a):gr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Yo(n).credential({idToken:i,accessToken:s,rawNonce:u})}return t instanceof Gt?r.credentialFromError(t):r.credentialFromResult(t)}function en(t,e){return e.catch(n=>{throw n instanceof Gt&&$3(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:z3(n),additionalUserInfo:$L(n),user:kr.getOrCreate(i)}})}async function ty(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>en(t,n.confirm(r))}}class q3{constructor(e,n){this.resolver=n,this.auth=j3(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return en($b(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._delegate=e,this.multiFactor=JL(e)}static getOrCreate(e){return kr.USER_MAP.has(e)||kr.USER_MAP.set(e,new kr(e)),kr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return en(this.auth,IP(this._delegate,e))}async linkWithPhoneNumber(e,n){return ty(this.auth,AF(this._delegate,e,n))}async linkWithPopup(e){return en(this.auth,VF(this._delegate,e,gi))}async linkWithRedirect(e){return await ey(Ze(this.auth)),qF(this._delegate,e,gi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return en(this.auth,TP(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ty(this.auth,PF(this._delegate,e,n))}reauthenticateWithPopup(e){return en(this.auth,OF(this._delegate,e,gi))}async reauthenticateWithRedirect(e){return await ey(Ze(this.auth)),zF(this._delegate,e,gi)}sendEmailVerification(e){return NL(this._delegate,e)}async unlink(e){return await _L(this._delegate,e),this}updateEmail(e){return ML(this._delegate,e)}updatePassword(e){return LL(this._delegate,e)}updatePhoneNumber(e){return CF(this._delegate,e)}updateProfile(e){return VL(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return DL(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}kr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=q;class ny{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Tu(r,"invalid-api-key",{appName:e.name}),Tu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?gi:void 0;this._delegate=n.initialize({options:{persistence:W3(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(dM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?kr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){pP(this._delegate,e,n)}applyActionCode(e){return TL(this._delegate,e)}checkActionCode(e){return SP(this._delegate,e)}confirmPasswordReset(e,n){return IL(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return en(this._delegate,RL(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return xL(this._delegate,e)}isSignInWithEmailLink(e){return CL(this._delegate,e)}async getRedirectResult(){Tu(fm(),this._delegate,"operation-not-supported-in-this-environment");const e=await KF(this._delegate,gi);return e?en(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){P3(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=k0(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=k0(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return PL(this._delegate,e,n)}sendPasswordResetEmail(e,n){return EL(this._delegate,e,n||void 0)}async setPersistence(e){F3(this._delegate,e);let n;switch(e){case gn.SESSION:n=Di;break;case gn.LOCAL:n=await _n(ha)._isAvailable()?ha:yf;break;case gn.NONE:n=ca;break;default:return St("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return en(this._delegate,yL(this._delegate))}signInWithCredential(e){return en(this._delegate,mf(this._delegate,e))}signInWithCustomToken(e){return en(this._delegate,wL(this._delegate,e))}signInWithEmailAndPassword(e,n){return en(this._delegate,AL(this._delegate,e,n))}signInWithEmailLink(e,n){return en(this._delegate,bL(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ty(this._delegate,RF(this._delegate,e,n))}async signInWithPopup(e){return Tu(fm(),this._delegate,"operation-not-supported-in-this-environment"),en(this._delegate,DF(this._delegate,e,gi))}async signInWithRedirect(e){return Tu(fm(),this._delegate,"operation-not-supported-in-this-environment"),await ey(this._delegate),BF(this._delegate,e,gi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return SL(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}ny.Persistence=gn;function k0(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&kr.getOrCreate(o)),error:e,complete:n}}function W3(t,e){const n=U3(t,e);if(typeof self<"u"&&!n.includes(ha)&&n.push(ha),typeof window<"u")for(const r of[yf,Di])n.includes(r)||n.push(r);return n.includes(ca)||n.push(ca),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.providerId="phone",this._delegate=new Ms($b(yc.auth()))}static credential(e,n){return Ms.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Xv.PHONE_SIGN_IN_METHOD=Ms.PHONE_SIGN_IN_METHOD;Xv.PROVIDER_ID=Ms.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=q;class G3{constructor(e,n,r=yc.app()){var i;K3((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new TF(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="auth-compat";function Q3(t){t.INTERNAL.registerComponent(new mr(H3,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new ny(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:po.EMAIL_SIGNIN,PASSWORD_RESET:po.PASSWORD_RESET,RECOVER_EMAIL:po.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:po.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:po.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:po.VERIFY_EMAIL}},EmailAuthProvider:Gi,FacebookAuthProvider:nr,GithubAuthProvider:ir,GoogleAuthProvider:rr,OAuthProvider:Yo,SAMLAuthProvider:yh,PhoneAuthProvider:Xv,PhoneMultiFactorGenerator:zP,RecaptchaVerifier:G3,TwitterAuthProvider:sr,Auth:ny,AuthCredential:Da,Error:Gt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(C3,b3)}Q3(yc);const Y3="@firebase/firestore-compat",J3="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function N0(){if(!dU())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Wb=class ry{constructor(e){this._delegate=e}static fromBase64String(e){return N0(),new ry(vr.fromBase64String(e))}static fromUint8Array(e){return x0(),new ry(vr.fromUint8Array(e))}toBase64(){return N0(),this._delegate.toBase64()}toUint8Array(){return x0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t){return X3(t,["next","error","complete"])}function X3(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{enableIndexedDbPersistence(e,n){return $4(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return q4(e._delegate)}clearIndexedDbPersistence(e){return W4(e._delegate)}}class Kb{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&yr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){j1(this._delegate,e,n,r)}enableNetwork(){return G4(this._delegate)}disableNetwork(){return H4(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,U1("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return K4(this._delegate)}onSnapshotsInSync(e){return wj(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ra(this,W1(this._delegate,e))}catch(n){throw Wt(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,Nh(this._delegate,e))}catch(n){throw Wt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qt(this,B4(this._delegate,e))}catch(n){throw Wt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Sj(this._delegate,n=>e(new Gb(this,n)))}batch(){return Bt(this._delegate),new Hb(new Ij(this._delegate,e=>gc(this._delegate,e)))}loadBundle(e){return Q4(this._delegate,e)}namedQuery(e){return Y4(this._delegate,e).then(n=>n?new qt(this,n):null)}}class Wf extends Uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wb(new vr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}}function e9(t){x2(t)}class Gb{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Wf(e)}get(e){const n=Is(e);return this._delegate.get(n).then(r=>new Ul(this._firestore,new Br(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Is(e);return r?(Zv("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Is(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Is(e);return this._delegate.delete(n),this}}class Hb{constructor(e){this._delegate=e}set(e,n,r){const i=Is(e);return r?(Zv("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Is(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Is(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ks{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Zu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bl(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ks.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ks(e,new Wf(e),n),i.set(n,s)),s}}Ks.INSTANCES=new WeakMap;class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wf(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dn(n,new Ke(n._delegate,r,new G(e)))}static forKey(e,n,r){return new Dn(n,new Ke(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ra(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ra(this.firestore,W1(this._delegate,e))}catch(n){throw Wt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ie(e),e instanceof Ke?K1(this._delegate,e):!1}set(e,n){n=Zv("DocumentReference.set",n);try{return n?s0(this._delegate,e,n):s0(this._delegate,e)}catch(r){throw Wt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?o0(this._delegate,e):o0(this._delegate,e,n,...r)}catch(i){throw Wt(i,"updateDoc()","DocumentReference.update()")}}delete(){return _j(this._delegate)}onSnapshot(...e){const n=Qb(e),r=Yb(e,i=>new Ul(this.firestore,new Br(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ab(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=fj(this._delegate):(e==null?void 0:e.source)==="server"?n=pj(this._delegate):n=hj(this._delegate),n.then(r=>new Ul(this.firestore,new Br(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wt(t,e,n){return t.message=t.message.replace(e,n),t}function Qb(t){for(const e of t)if(typeof e=="object"&&!iy(e))return e;return{}}function Yb(t,e){var n,r;let i;return iy(t[0])?i=t[0]:iy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Ul{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return ob(this._delegate,e._delegate)}}class Bl extends Ul{data(e){const n=this._delegate.data(e);return this._delegate._converter||N2(n!==void 0),n}}class qt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wf(e)}where(e,n,r){try{return new qt(this.firestore,ri(this._delegate,nj(e,n,r)))}catch(i){throw Wt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qt(this.firestore,ri(this._delegate,rj(e,n)))}catch(r){throw Wt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qt(this.firestore,ri(this._delegate,ij(e)))}catch(n){throw Wt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qt(this.firestore,ri(this._delegate,sj(e)))}catch(n){throw Wt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qt(this.firestore,ri(this._delegate,oj(...e)))}catch(n){throw Wt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qt(this.firestore,ri(this._delegate,aj(...e)))}catch(n){throw Wt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qt(this.firestore,ri(this._delegate,uj(...e)))}catch(n){throw Wt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qt(this.firestore,ri(this._delegate,lj(...e)))}catch(n){throw Wt(n,"endAt()","Query.endAt()")}}isEqual(e){return G1(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=gj(this._delegate):(e==null?void 0:e.source)==="server"?n=yj(this._delegate):n=mj(this._delegate),n.then(r=>new sy(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Qb(e),r=Yb(e,i=>new sy(this.firestore,new ji(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ab(this._delegate,n,r)}withConverter(e){return new qt(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class t9{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Bl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sy{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new t9(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Bl(this._firestore,r))})}isEqual(e){return ob(this._delegate,e._delegate)}}class Ra extends qt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,Nh(this._delegate)):new Dn(this.firestore,Nh(this._delegate,e))}catch(n){throw Wt(n,"doc()","CollectionReference.doc()")}}add(e){return vj(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return K1(this._delegate,e._delegate)}withConverter(e){return new Ra(this.firestore,e?this._delegate.withConverter(Ks.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Is(t){return Re(t,Ke)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(...e){this._delegate=new Bi(...e)}static documentId(){return new ew(je.keyField().canonicalString())}isEqual(e){return e=ie(e),e instanceof Bi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._delegate=e}static serverTimestamp(){const e=Aj();return e._methodName="FieldValue.serverTimestamp",new gs(e)}static delete(){const e=Rj();return e._methodName="FieldValue.delete",new gs(e)}static arrayUnion(...e){const n=Pj(...e);return n._methodName="FieldValue.arrayUnion",new gs(n)}static arrayRemove(...e){const n=Cj(...e);return n._methodName="FieldValue.arrayRemove",new gs(n)}static increment(e){const n=bj(e);return n._methodName="FieldValue.increment",new gs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={Firestore:Kb,GeoPoint:Vf,Timestamp:$e,Blob:Wb,Transaction:Gb,WriteBatch:Hb,DocumentReference:Dn,DocumentSnapshot:Ul,Query:qt,QueryDocumentSnapshot:Bl,QuerySnapshot:sy,CollectionReference:Ra,FieldPath:ew,FieldValue:gs,setLogLevel:e9,CACHE_SIZE_UNLIMITED:z4};function r9(t,e){t.INTERNAL.registerComponent(new mr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},n9)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t){r9(t,(e,n)=>new Kb(e,n,new Z3)),t.registerVersion(Y3,J3)}i9(yc);function At(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var s9=typeof Symbol=="function"&&Symbol.observable||"@@observable",D0=s9,pm=()=>Math.random().toString(36).substring(7).split("").join("."),o9={INIT:`@@redux/INIT${pm()}`,REPLACE:`@@redux/REPLACE${pm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${pm()}`},Mh=o9;function tw(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Jb(t,e,n){if(typeof t!="function")throw new Error(At(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(At(1));return n(Jb)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,u=!1;function c(){o===s&&(o=new Map,s.forEach((R,I)=>{o.set(I,R)}))}function d(){if(u)throw new Error(At(3));return i}function h(R){if(typeof R!="function")throw new Error(At(4));if(u)throw new Error(At(5));let I=!0;c();const v=a++;return o.set(v,R),function(){if(I){if(u)throw new Error(At(6));I=!1,c(),o.delete(v),s=null}}}function p(R){if(!tw(R))throw new Error(At(7));if(typeof R.type>"u")throw new Error(At(8));if(typeof R.type!="string")throw new Error(At(17));if(u)throw new Error(At(9));try{u=!0,i=r(i,R)}finally{u=!1}return(s=o).forEach(v=>{v()}),R}function y(R){if(typeof R!="function")throw new Error(At(10));r=R,p({type:Mh.REPLACE})}function g(){const R=h;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(At(11));function v(){const k=I;k.next&&k.next(d())}return v(),{unsubscribe:R(v)}},[D0](){return this}}}return p({type:Mh.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:y,[D0]:g}}function a9(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Mh.INIT})>"u")throw new Error(At(12));if(typeof n(void 0,{type:Mh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function u9(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{a9(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const c={};for(let d=0;d<r.length;d++){const h=r[d],p=n[h],y=o[h],g=p(y,a);if(typeof g>"u")throw a&&a.type,new Error(At(14));c[h]=g,u=u||g!==y}return u=u||r.length!==Object.keys(o).length,u?c:o}}function Lh(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function l9(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(At(15))};const o={getState:i.getState,dispatch:(u,...c)=>s(u,...c)},a=t.map(u=>u(o));return s=Lh(...a)(i.dispatch),{...i,dispatch:s}}}function c9(t){return tw(t)&&"type"in t&&typeof t.type=="string"}var Xb=Symbol.for("immer-nothing"),O0=Symbol.for("immer-draftable"),Sn=Symbol.for("immer-state");function Wn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Aa=Object.getPrototypeOf;function Gs(t){return!!t&&!!t[Sn]}function zr(t){var e;return t?Zb(t)||Array.isArray(t)||!!t[O0]||!!((e=t.constructor)!=null&&e[O0])||Gf(t)||Hf(t):!1}var d9=Object.prototype.constructor.toString();function Zb(t){if(!t||typeof t!="object")return!1;const e=Aa(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===d9}function Fh(t,e){Kf(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Kf(t){const e=t[Sn];return e?e.type_:Array.isArray(t)?1:Gf(t)?2:Hf(t)?3:0}function oy(t,e){return Kf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ek(t,e,n){const r=Kf(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function h9(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gf(t){return t instanceof Map}function Hf(t){return t instanceof Set}function cs(t){return t.copy_||t.base_}function ay(t,e){if(Gf(t))return new Map(t);if(Hf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Zb(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Sn];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Aa(t),r)}else{const r=Aa(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function nw(t,e=!1){return Qf(t)||Gs(t)||!zr(t)||(Kf(t)>1&&(t.set=t.add=t.clear=t.delete=f9),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>nw(r,!0))),t}function f9(){Wn(2)}function Qf(t){return Object.isFrozen(t)}var p9={};function Hs(t){const e=p9[t];return e||Wn(0,t),e}var jl;function tk(){return jl}function m9(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function V0(t,e){e&&(Hs("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function uy(t){ly(t),t.drafts_.forEach(g9),t.drafts_=null}function ly(t){t===jl&&(jl=t.parent_)}function M0(t){return jl=m9(jl,t)}function g9(t){const e=t[Sn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function L0(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Sn].modified_&&(uy(e),Wn(4)),zr(t)&&(t=Uh(e,t),e.parent_||Bh(e,t)),e.patches_&&Hs("Patches").generateReplacementPatches_(n[Sn].base_,t,e.patches_,e.inversePatches_)):t=Uh(e,n,[]),uy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Xb?t:void 0}function Uh(t,e,n){if(Qf(e))return e;const r=e[Sn];if(!r)return Fh(e,(i,s)=>F0(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Bh(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Fh(s,(a,u)=>F0(t,r,i,a,u,n,o)),Bh(t,i,!1),n&&t.patches_&&Hs("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function F0(t,e,n,r,i,s,o){if(Gs(i)){const a=s&&e&&e.type_!==3&&!oy(e.assigned_,r)?s.concat(r):void 0,u=Uh(t,i,a);if(ek(n,r,u),Gs(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(zr(i)&&!Qf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Uh(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Bh(t,i)}}function Bh(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&nw(e,n)}function y9(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:tk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=rw;n&&(i=[r],s=zl);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var rw={get(t,e){if(e===Sn)return t;const n=cs(t);if(!oy(n,e))return _9(t,n,e);const r=n[e];return t.finalized_||!zr(r)?r:r===mm(t.base_,e)?(gm(t),t.copy_[e]=dy(r,t)):r},has(t,e){return e in cs(t)},ownKeys(t){return Reflect.ownKeys(cs(t))},set(t,e,n){const r=nk(cs(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=mm(cs(t),e),s=i==null?void 0:i[Sn];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(h9(n,i)&&(n!==void 0||oy(t.base_,e)))return!0;gm(t),cy(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return mm(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,gm(t),cy(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Wn(11)},getPrototypeOf(t){return Aa(t.base_)},setPrototypeOf(){Wn(12)}},zl={};Fh(rw,(t,e)=>{zl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});zl.deleteProperty=function(t,e){return zl.set.call(this,t,e,void 0)};zl.set=function(t,e,n){return rw.set.call(this,t[0],e,n,t[0])};function mm(t,e){const n=t[Sn];return(n?cs(n):t)[e]}function _9(t,e,n){var i;const r=nk(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function nk(t,e){if(!(e in t))return;let n=Aa(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Aa(n)}}function cy(t){t.modified_||(t.modified_=!0,t.parent_&&cy(t.parent_))}function gm(t){t.copy_||(t.copy_=ay(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var v9=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(u=s,...c){return o.produce(u,d=>n.call(this,d,...c))}}typeof n!="function"&&Wn(6),r!==void 0&&typeof r!="function"&&Wn(7);let i;if(zr(e)){const s=M0(this),o=dy(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?uy(s):ly(s)}return V0(s,r),L0(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Xb&&(i=void 0),this.autoFreeze_&&nw(i,!0),r){const s=[],o=[];Hs("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Wn(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,u=>e(u,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){zr(t)||Wn(8),Gs(t)&&(t=w9(t));const e=M0(this),n=dy(t,void 0);return n[Sn].isManual_=!0,ly(e),n}finishDraft(t,e){const n=t&&t[Sn];(!n||!n.isManual_)&&Wn(9);const{scope_:r}=n;return V0(r,e),L0(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Hs("Patches").applyPatches_;return Gs(t)?r(t,e):this.produce(t,i=>r(i,e))}};function dy(t,e){const n=Gf(t)?Hs("MapSet").proxyMap_(t,e):Hf(t)?Hs("MapSet").proxySet_(t,e):y9(t,e);return(e?e.scope_:tk()).drafts_.push(n),n}function w9(t){return Gs(t)||Wn(10,t),rk(t)}function rk(t){if(!zr(t)||Qf(t))return t;const e=t[Sn];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=ay(t,e.scope_.immer_.useStrictShallowCopy_)}else n=ay(t,!0);return Fh(n,(r,i)=>{ek(n,r,rk(i))}),e&&(e.finalized_=!1),n}var Rn=new v9,ik=Rn.produce;Rn.produceWithPatches.bind(Rn);Rn.setAutoFreeze.bind(Rn);Rn.setUseStrictShallowCopy.bind(Rn);Rn.applyPatches.bind(Rn);Rn.createDraft.bind(Rn);Rn.finishDraft.bind(Rn);function E9(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function I9(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function T9(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var U0=t=>Array.isArray(t)?t:[t];function S9(t){const e=Array.isArray(t[0])?t[0]:t;return T9(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function R9(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var A9=class{constructor(t){this.value=t}deref(){return this.value}},P9=typeof WeakRef<"u"?WeakRef:A9,C9=0,B0=1;function fd(){return{s:C9,v:void 0,o:null,p:null}}function sk(t,e={}){let n=fd();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var h;let a=n;const{length:u}=arguments;for(let p=0,y=u;p<y;p++){const g=arguments[p];if(typeof g=="function"||typeof g=="object"&&g!==null){let A=a.o;A===null&&(a.o=A=new WeakMap);const R=A.get(g);R===void 0?(a=fd(),A.set(g,a)):a=R}else{let A=a.p;A===null&&(a.p=A=new Map);const R=A.get(g);R===void 0?(a=fd(),A.set(g,a)):a=R}}const c=a;let d;if(a.s===B0)d=a.v;else if(d=t.apply(null,arguments),s++,r){const p=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;p!=null&&r(p,d)&&(d=p,s!==0&&s--),i=typeof d=="object"&&d!==null||typeof d=="function"?new P9(d):d}return c.s=B0,c.v=d,d}return o.clearCache=()=>{n=fd(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function b9(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,u={},c=i.pop();typeof c=="object"&&(u=c,c=i.pop()),E9(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...n,...u},{memoize:h,memoizeOptions:p=[],argsMemoize:y=sk,argsMemoizeOptions:g=[],devModeChecks:A={}}=d,R=U0(p),I=U0(g),v=S9(i),w=h(function(){return s++,c.apply(null,arguments)},...R),k=y(function(){o++;const M=R9(v,arguments);return a=w.apply(null,M),a},...I);return Object.assign(k,{resultFunc:c,memoizedResultFunc:w,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var k9=b9(sk),x9=Object.assign((t,e=k9)=>{I9(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>x9});function ok(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var N9=ok(),D9=ok,O9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Lh:Lh.apply(null,arguments)};function j0(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(pr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>c9(r)&&r.type===t,n}var ak=class Mu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Mu.prototype)}static get[Symbol.species](){return Mu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Mu(...e[0].concat(this)):new Mu(...e.concat(this))}};function z0(t){return zr(t)?ik(t,()=>{}):t}function $0(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(pr(10));const r=n.insert(e,t);return t.set(e,r),r}function V9(t){return typeof t=="boolean"}var M9=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new ak;return n&&(V9(n)?o.push(N9):o.push(D9(n.extraArgument))),o},L9="RTK_autoBatch",uk=t=>e=>{setTimeout(e,t)},F9=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uk(10),U9=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?F9:t.type==="callback"?t.queueNotification:uk(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(d=>d()))};return Object.assign({},r,{subscribe(d){const h=()=>i&&d(),p=r.subscribe(h);return a.add(d),()=>{p(),a.delete(d)}},dispatch(d){var h;try{return i=!((h=d==null?void 0:d.meta)!=null&&h[L9]),s=!i,s&&(o||(o=!0,u(c))),r.dispatch(d)}finally{i=!0}}})},B9=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ak(t);return r&&i.push(U9(typeof r=="object"?r:void 0)),i};function d5(t){const e=M9(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(tw(n))a=u9(n);else throw new Error(pr(1));let u;typeof r=="function"?u=r(e):u=e();let c=Lh;i&&(c=O9({trace:!1,...typeof i=="object"&&i}));const d=l9(...u),h=B9(d);let p=typeof o=="function"?o(h):h();const y=c(...p);return Jb(a,s,y)}function lk(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(pr(28));if(a in e)throw new Error(pr(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function j9(t){return typeof t=="function"}function z9(t,e){let[n,r,i]=lk(e),s;if(j9(t))s=()=>z0(t());else{const a=z0(t);s=()=>a}function o(a=s(),u){let c=[n[u.type],...r.filter(({matcher:d})=>d(u)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[i]),c.reduce((d,h)=>{if(h)if(Gs(d)){const y=h(d,u);return y===void 0?d:y}else{if(zr(d))return ik(d,p=>h(p,u));{const p=h(d,u);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},a)}return o.getInitialState=s,o}var $9=Symbol.for("rtk-slice-createasyncthunk");function q9(t,e){return`${t}/${e}`}function W9({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[$9];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(pr(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(G9()):i.reducers)||{},u=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,k){const V=typeof w=="string"?w:w.type;if(!V)throw new Error(pr(12));if(V in c.sliceCaseReducersByType)throw new Error(pr(13));return c.sliceCaseReducersByType[V]=k,d},addMatcher(w,k){return c.sliceMatchers.push({matcher:w,reducer:k}),d},exposeAction(w,k){return c.actionCreators[w]=k,d},exposeCaseReducer(w,k){return c.sliceCaseReducersByName[w]=k,d}};u.forEach(w=>{const k=a[w],V={reducerName:w,type:q9(s,w),createNotation:typeof i.reducers=="function"};Q9(k)?J9(V,k,d,e):H9(V,k,d)});function h(){const[w={},k=[],V=void 0]=typeof i.extraReducers=="function"?lk(i.extraReducers):[i.extraReducers],M={...w,...c.sliceCaseReducersByType};return z9(i.initialState,S=>{for(let _ in M)S.addCase(_,M[_]);for(let _ of c.sliceMatchers)S.addMatcher(_.matcher,_.reducer);for(let _ of k)S.addMatcher(_.matcher,_.reducer);V&&S.addDefaultCase(V)})}const p=w=>w,y=new Map;let g;function A(w,k){return g||(g=h()),g(w,k)}function R(){return g||(g=h()),g.getInitialState()}function I(w,k=!1){function V(S){let _=S[w];return typeof _>"u"&&k&&(_=R()),_}function M(S=p){const _=$0(y,k,{insert:()=>new WeakMap});return $0(_,S,{insert:()=>{const C={};for(const[b,x]of Object.entries(i.selectors??{}))C[b]=K9(x,S,R,k);return C}})}return{reducerPath:w,getSelectors:M,get selectors(){return M(V)},selectSlice:V}}const v={name:s,reducer:A,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:R,...I(o),injectInto(w,{reducerPath:k,...V}={}){const M=k??o;return w.inject({reducerPath:M,reducer:A},V),{...v,...I(M,!0)}}};return v}}function K9(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var h5=W9();function G9(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function H9({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Y9(r))throw new Error(pr(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?j0(t,o):j0(t))}function Q9(t){return t._reducerDefinitionType==="asyncThunk"}function Y9(t){return t._reducerDefinitionType==="reducerWithPrepare"}function J9({type:t,reducerName:e},n,r,i){if(!i)throw new Error(pr(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:c,options:d}=n,h=i(t,s,d);r.exposeAction(e,h),o&&r.addCase(h.fulfilled,o),a&&r.addCase(h.pending,a),u&&r.addCase(h.rejected,u),c&&r.addMatcher(h.settled,c),r.exposeCaseReducer(e,{fulfilled:o||pd,pending:a||pd,rejected:u||pd,settled:c||pd})}function pd(){}function pr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function ck(t,e){return function(){return t.apply(e,arguments)}}const{toString:X9}=Object.prototype,{getPrototypeOf:iw}=Object,Yf=(t=>e=>{const n=X9.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Yn=t=>(t=t.toLowerCase(),e=>Yf(e)===t),Jf=t=>e=>typeof e===t,{isArray:Wa}=Array,$l=Jf("undefined");function Z9(t){return t!==null&&!$l(t)&&t.constructor!==null&&!$l(t.constructor)&&wn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dk=Yn("ArrayBuffer");function eq(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dk(t.buffer),e}const tq=Jf("string"),wn=Jf("function"),hk=Jf("number"),Xf=t=>t!==null&&typeof t=="object",nq=t=>t===!0||t===!1,Ud=t=>{if(Yf(t)!=="object")return!1;const e=iw(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rq=Yn("Date"),iq=Yn("File"),sq=Yn("Blob"),oq=Yn("FileList"),aq=t=>Xf(t)&&wn(t.pipe),uq=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||wn(t.append)&&((e=Yf(t))==="formdata"||e==="object"&&wn(t.toString)&&t.toString()==="[object FormData]"))},lq=Yn("URLSearchParams"),[cq,dq,hq,fq]=["ReadableStream","Request","Response","Headers"].map(Yn),pq=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Wa(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function fk(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pk=t=>!$l(t)&&t!==Ts;function hy(){const{caseless:t}=pk(this)&&this||{},e={},n=(r,i)=>{const s=t&&fk(e,i)||i;Ud(e[s])&&Ud(r)?e[s]=hy(e[s],r):Ud(r)?e[s]=hy({},r):Wa(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wc(arguments[r],n);return e}const mq=(t,e,n,{allOwnKeys:r}={})=>(wc(e,(i,s)=>{n&&wn(i)?t[s]=ck(i,n):t[s]=i},{allOwnKeys:r}),t),gq=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),yq=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},_q=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&iw(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},vq=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},wq=t=>{if(!t)return null;if(Wa(t))return t;let e=t.length;if(!hk(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Eq=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&iw(Uint8Array)),Iq=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},Tq=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Sq=Yn("HTMLFormElement"),Rq=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),q0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Aq=Yn("RegExp"),mk=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};wc(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},Pq=t=>{mk(t,(e,n)=>{if(wn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(wn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Cq=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Wa(t)?r(t):r(String(t).split(e)),n},bq=()=>{},kq=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,ym="abcdefghijklmnopqrstuvwxyz",W0="0123456789",gk={DIGIT:W0,ALPHA:ym,ALPHA_DIGIT:ym+ym.toUpperCase()+W0},xq=(t=16,e=gk.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Nq(t){return!!(t&&wn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Dq=t=>{const e=new Array(10),n=(r,i)=>{if(Xf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Wa(r)?[]:{};return wc(r,(o,a)=>{const u=n(o,i+1);!$l(u)&&(s[a]=u)}),e[i]=void 0,s}}return r};return n(t,0)},Oq=Yn("AsyncFunction"),Vq=t=>t&&(Xf(t)||wn(t))&&wn(t.then)&&wn(t.catch),yk=((t,e)=>t?setImmediate:e?((n,r)=>(Ts.addEventListener("message",({source:i,data:s})=>{i===Ts&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Ts.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wn(Ts.postMessage)),Mq=typeof queueMicrotask<"u"?queueMicrotask.bind(Ts):typeof process<"u"&&process.nextTick||yk,U={isArray:Wa,isArrayBuffer:dk,isBuffer:Z9,isFormData:uq,isArrayBufferView:eq,isString:tq,isNumber:hk,isBoolean:nq,isObject:Xf,isPlainObject:Ud,isReadableStream:cq,isRequest:dq,isResponse:hq,isHeaders:fq,isUndefined:$l,isDate:rq,isFile:iq,isBlob:sq,isRegExp:Aq,isFunction:wn,isStream:aq,isURLSearchParams:lq,isTypedArray:Eq,isFileList:oq,forEach:wc,merge:hy,extend:mq,trim:pq,stripBOM:gq,inherits:yq,toFlatObject:_q,kindOf:Yf,kindOfTest:Yn,endsWith:vq,toArray:wq,forEachEntry:Iq,matchAll:Tq,isHTMLForm:Sq,hasOwnProperty:q0,hasOwnProp:q0,reduceDescriptors:mk,freezeMethods:Pq,toObjectSet:Cq,toCamelCase:Rq,noop:bq,toFiniteNumber:kq,findKey:fk,global:Ts,isContextDefined:pk,ALPHABET:gk,generateString:xq,isSpecCompliantForm:Nq,toJSONObject:Dq,isAsyncFn:Oq,isThenable:Vq,setImmediate:yk,asap:Mq};function ce(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}U.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}});const _k=ce.prototype,vk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vk[t]={value:t}});Object.defineProperties(ce,vk);Object.defineProperty(_k,"isAxiosError",{value:!0});ce.from=(t,e,n,r,i,s)=>{const o=Object.create(_k);return U.toFlatObject(t,o,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),ce.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const Lq=null;function fy(t){return U.isPlainObject(t)||U.isArray(t)}function wk(t){return U.endsWith(t,"[]")?t.slice(0,-2):t}function K0(t,e,n){return t?t.concat(e).map(function(i,s){return i=wk(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Fq(t){return U.isArray(t)&&!t.some(fy)}const Uq=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Zf(t,e,n){if(!U.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,R){return!U.isUndefined(R[A])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&U.isSpecCompliantForm(e);if(!U.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(U.isDate(g))return g.toISOString();if(!u&&U.isBlob(g))throw new ce("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(g)||U.isTypedArray(g)?u&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,A,R){let I=g;if(g&&!R&&typeof g=="object"){if(U.endsWith(A,"{}"))A=r?A:A.slice(0,-2),g=JSON.stringify(g);else if(U.isArray(g)&&Fq(g)||(U.isFileList(g)||U.endsWith(A,"[]"))&&(I=U.toArray(g)))return A=wk(A),I.forEach(function(w,k){!(U.isUndefined(w)||w===null)&&e.append(o===!0?K0([A],k,s):o===null?A:A+"[]",c(w))}),!1}return fy(g)?!0:(e.append(K0(R,A,s),c(g)),!1)}const h=[],p=Object.assign(Uq,{defaultVisitor:d,convertValue:c,isVisitable:fy});function y(g,A){if(!U.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+A.join("."));h.push(g),U.forEach(g,function(I,v){(!(U.isUndefined(I)||I===null)&&i.call(e,I,U.isString(v)?v.trim():v,A,p))===!0&&y(I,A?A.concat(v):[v])}),h.pop()}}if(!U.isObject(t))throw new TypeError("data must be an object");return y(t),e}function G0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function sw(t,e){this._pairs=[],t&&Zf(t,this,e)}const Ek=sw.prototype;Ek.append=function(e,n){this._pairs.push([e,n])};Ek.toString=function(e){const n=e?function(r){return e.call(this,r,G0)}:G0;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Bq(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ik(t,e,n){if(!e)return t;const r=n&&n.encode||Bq,i=n&&n.serialize;let s;if(i?s=i(e,n):s=U.isURLSearchParams(e)?e.toString():new sw(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class H0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Tk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jq=typeof URLSearchParams<"u"?URLSearchParams:sw,zq=typeof FormData<"u"?FormData:null,$q=typeof Blob<"u"?Blob:null,qq={isBrowser:!0,classes:{URLSearchParams:jq,FormData:zq,Blob:$q},protocols:["http","https","file","blob","url","data"]},ow=typeof window<"u"&&typeof document<"u",py=typeof navigator=="object"&&navigator||void 0,Wq=ow&&(!py||["ReactNative","NativeScript","NS"].indexOf(py.product)<0),Kq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gq=ow&&window.location.href||"http://localhost",Hq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ow,hasStandardBrowserEnv:Wq,hasStandardBrowserWebWorkerEnv:Kq,navigator:py,origin:Gq},Symbol.toStringTag,{value:"Module"})),cn={...Hq,...qq};function Qq(t,e){return Zf(t,new cn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return cn.isNode&&U.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function Yq(t){return U.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Jq(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Sk(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),u=s>=n.length;return o=!o&&U.isArray(i)?i.length:o,u?(U.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!U.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&U.isArray(i[o])&&(i[o]=Jq(i[o])),!a)}if(U.isFormData(t)&&U.isFunction(t.entries)){const n={};return U.forEachEntry(t,(r,i)=>{e(Yq(r),i,n,0)}),n}return null}function Xq(t,e,n){if(U.isString(t))try{return(e||JSON.parse)(t),U.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Ec={transitional:Tk,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=U.isObject(e);if(s&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return i?JSON.stringify(Sk(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Qq(e,this.formSerializer).toString();if((a=U.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Zf(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Xq(e)):e}],transformResponse:[function(e){const n=this.transitional||Ec.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ce.from(a,ce.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cn.classes.FormData,Blob:cn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};U.forEach(["delete","get","head","post","put","patch"],t=>{Ec.headers[t]={}});const Zq=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e6=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Zq[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Q0=Symbol("internals");function Su(t){return t&&String(t).trim().toLowerCase()}function Bd(t){return t===!1||t==null?t:U.isArray(t)?t.map(Bd):String(t)}function t6(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const n6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _m(t,e,n,r,i){if(U.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!U.isString(e)){if(U.isString(r))return e.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(e)}}function r6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function i6(t,e){const n=U.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class dn{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,u,c){const d=Su(u);if(!d)throw new Error("header name must be a non-empty string");const h=U.findKey(i,d);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||u]=Bd(a))}const o=(a,u)=>U.forEach(a,(c,d)=>s(c,d,u));if(U.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(U.isString(e)&&(e=e.trim())&&!n6(e))o(e6(e),n);else if(U.isHeaders(e))for(const[a,u]of e.entries())s(u,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Su(e),e){const r=U.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return t6(i);if(U.isFunction(n))return n.call(this,i,r);if(U.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Su(e),e){const r=U.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||_m(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Su(o),o){const a=U.findKey(r,o);a&&(!n||_m(r,r[a],a,n))&&(delete r[a],i=!0)}}return U.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||_m(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return U.forEach(this,(i,s)=>{const o=U.findKey(r,s);if(o){n[o]=Bd(i),delete n[s];return}const a=e?r6(s):String(s).trim();a!==s&&delete n[s],n[a]=Bd(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return U.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&U.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Q0]=this[Q0]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Su(o);r[a]||(i6(i,o),r[a]=!0)}return U.isArray(e)?e.forEach(s):s(e),this}}dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);U.reduceDescriptors(dn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});U.freezeMethods(dn);function vm(t,e){const n=this||Ec,r=e||n,i=dn.from(r.headers);let s=r.data;return U.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Rk(t){return!!(t&&t.__CANCEL__)}function Ka(t,e,n){ce.call(this,t??"canceled",ce.ERR_CANCELED,e,n),this.name="CanceledError"}U.inherits(Ka,ce,{__CANCEL__:!0});function Ak(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ce("Request failed with status code "+n.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function s6(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function o6(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),d=r[s];o||(o=c),n[i]=u,r[i]=c;let h=s,p=0;for(;h!==i;)p+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const y=d&&c-d;return y?Math.round(p*1e3/y):void 0}}function a6(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),h=d-n;h>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const jh=(t,e,n=3)=>{let r=0;const i=o6(50,250);return a6(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,u=o-r,c=i(u),d=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},Y0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},J0=t=>(...e)=>U.asap(()=>t(...e)),u6=cn.hasStandardBrowserEnv?function(){const e=cn.navigator&&/(msie|trident)/i.test(cn.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=U.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),l6=cn.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];U.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),U.isString(r)&&o.push("path="+r),U.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function c6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function d6(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Pk(t,e){return t&&!c6(e)?d6(t,e):e}const X0=t=>t instanceof dn?{...t}:t;function Qs(t,e){e=e||{};const n={};function r(c,d,h){return U.isPlainObject(c)&&U.isPlainObject(d)?U.merge.call({caseless:h},c,d):U.isPlainObject(d)?U.merge({},d):U.isArray(d)?d.slice():d}function i(c,d,h){if(U.isUndefined(d)){if(!U.isUndefined(c))return r(void 0,c,h)}else return r(c,d,h)}function s(c,d){if(!U.isUndefined(d))return r(void 0,d)}function o(c,d){if(U.isUndefined(d)){if(!U.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,h){if(h in e)return r(c,d);if(h in t)return r(void 0,c)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d)=>i(X0(c),X0(d),!0)};return U.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=u[d]||i,p=h(t[d],e[d],d);U.isUndefined(p)&&h!==a||(n[d]=p)}),n}const Ck=t=>{const e=Qs({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=dn.from(o),e.url=Ik(Pk(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(U.isFormData(n)){if(cn.hasStandardBrowserEnv||cn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[c,...d]=u?u.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(cn.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(e)),r||r!==!1&&u6(e.url))){const c=i&&s&&l6.read(s);c&&o.set(i,c)}return e},h6=typeof XMLHttpRequest<"u",f6=h6&&function(t){return new Promise(function(n,r){const i=Ck(t);let s=i.data;const o=dn.from(i.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:c}=i,d,h,p,y,g;function A(){y&&y(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let R=new XMLHttpRequest;R.open(i.method.toUpperCase(),i.url,!0),R.timeout=i.timeout;function I(){if(!R)return;const w=dn.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),V={data:!a||a==="text"||a==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:w,config:t,request:R};Ak(function(S){n(S),A()},function(S){r(S),A()},V),R=null}"onloadend"in R?R.onloadend=I:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(I)},R.onabort=function(){R&&(r(new ce("Request aborted",ce.ECONNABORTED,t,R)),R=null)},R.onerror=function(){r(new ce("Network Error",ce.ERR_NETWORK,t,R)),R=null},R.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const V=i.transitional||Tk;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),r(new ce(k,V.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,t,R)),R=null},s===void 0&&o.setContentType(null),"setRequestHeader"in R&&U.forEach(o.toJSON(),function(k,V){R.setRequestHeader(V,k)}),U.isUndefined(i.withCredentials)||(R.withCredentials=!!i.withCredentials),a&&a!=="json"&&(R.responseType=i.responseType),c&&([p,g]=jh(c,!0),R.addEventListener("progress",p)),u&&R.upload&&([h,y]=jh(u),R.upload.addEventListener("progress",h),R.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(d=w=>{R&&(r(!w||w.type?new Ka(null,t,R):w),R.abort(),R=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const v=s6(i.url);if(v&&cn.protocols.indexOf(v)===-1){r(new ce("Unsupported protocol "+v+":",ce.ERR_BAD_REQUEST,t));return}R.send(s||null)})},p6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ce?d:new Ka(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new ce(`timeout ${e} of ms exceeded`,ce.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:u}=r;return u.unsubscribe=()=>U.asap(a),u}},m6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},g6=async function*(t,e){for await(const n of y6(t))yield*m6(n,e)},y6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Z0=(t,e,n,r)=>{const i=g6(t,e);let s=0,o,a=u=>{o||(o=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:d}=await i.next();if(c){a(),u.close();return}let h=d.byteLength;if(n){let p=s+=h;n(p)}u.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(u){return a(u),i.return()}},{highWaterMark:2})},ep=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bk=ep&&typeof ReadableStream=="function",_6=ep&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),kk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},v6=bk&&kk(()=>{let t=!1;const e=new Request(cn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),eS=64*1024,my=bk&&kk(()=>U.isReadableStream(new Response("").body)),zh={stream:my&&(t=>t.body)};ep&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zh[e]&&(zh[e]=U.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ce(`Response type '${e}' is not supported`,ce.ERR_NOT_SUPPORT,r)})})})(new Response);const w6=async t=>{if(t==null)return 0;if(U.isBlob(t))return t.size;if(U.isSpecCompliantForm(t))return(await new Request(cn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(U.isArrayBufferView(t)||U.isArrayBuffer(t))return t.byteLength;if(U.isURLSearchParams(t)&&(t=t+""),U.isString(t))return(await _6(t)).byteLength},E6=async(t,e)=>{const n=U.toFiniteNumber(t.getContentLength());return n??w6(e)},I6=ep&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:u,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:p}=Ck(t);c=c?(c+"").toLowerCase():"text";let y=p6([i,s&&s.toAbortSignal()],o),g;const A=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let R;try{if(u&&v6&&n!=="get"&&n!=="head"&&(R=await E6(d,r))!==0){let V=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(U.isFormData(r)&&(M=V.headers.get("content-type"))&&d.setContentType(M),V.body){const[S,_]=Y0(R,jh(J0(u)));r=Z0(V.body,eS,S,_)}}U.isString(h)||(h=h?"include":"omit");const I="credentials"in Request.prototype;g=new Request(e,{...p,signal:y,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:I?h:void 0});let v=await fetch(g);const w=my&&(c==="stream"||c==="response");if(my&&(a||w&&A)){const V={};["status","statusText","headers"].forEach(C=>{V[C]=v[C]});const M=U.toFiniteNumber(v.headers.get("content-length")),[S,_]=a&&Y0(M,jh(J0(a),!0))||[];v=new Response(Z0(v.body,eS,S,()=>{_&&_(),A&&A()}),V)}c=c||"text";let k=await zh[U.findKey(zh,c)||"text"](v,t);return!w&&A&&A(),await new Promise((V,M)=>{Ak(V,M,{data:k,headers:dn.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:g})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/fetch/i.test(I.message)?Object.assign(new ce("Network Error",ce.ERR_NETWORK,t,g),{cause:I.cause||I}):ce.from(I,I&&I.code,t,g)}}),gy={http:Lq,xhr:f6,fetch:I6};U.forEach(gy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const tS=t=>`- ${t}`,T6=t=>U.isFunction(t)||t===null||t===!1,xk={getAdapter:t=>{t=U.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!T6(n)&&(r=gy[(o=String(n)).toLowerCase()],r===void 0))throw new ce(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(tS).join(`
`):" "+tS(s[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:gy};function wm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ka(null,t)}function nS(t){return wm(t),t.headers=dn.from(t.headers),t.data=vm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xk.getAdapter(t.adapter||Ec.adapter)(t).then(function(r){return wm(t),r.data=vm.call(t,t.transformResponse,r),r.headers=dn.from(r.headers),r},function(r){return Rk(r)||(wm(t),r&&r.response&&(r.response.data=vm.call(t,t.transformResponse,r.response),r.response.headers=dn.from(r.response.headers))),Promise.reject(r)})}const Nk="1.7.7",aw={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{aw[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const rS={};aw.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Nk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ce(i(o," has been removed"+(n?" in "+n:"")),ce.ERR_DEPRECATED);return n&&!rS[o]&&(rS[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function S6(t,e,n){if(typeof t!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new ce("option "+s+" must be "+u,ce.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ce("Unknown option "+s,ce.ERR_BAD_OPTION)}}const yy={assertOptions:S6,validators:aw},ii=yy.validators;class ks{constructor(e){this.defaults=e,this.interceptors={request:new H0,response:new H0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Qs(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&yy.assertOptions(r,{silentJSONParsing:ii.transitional(ii.boolean),forcedJSONParsing:ii.transitional(ii.boolean),clarifyTimeoutError:ii.transitional(ii.boolean)},!1),i!=null&&(U.isFunction(i)?n.paramsSerializer={serialize:i}:yy.assertOptions(i,{encode:ii.function,serialize:ii.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&U.merge(s.common,s[n.method]);s&&U.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=dn.concat(o,s);const a=[];let u=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(u=u&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});const c=[];this.interceptors.response.forEach(function(A){c.push(A.fulfilled,A.rejected)});let d,h=0,p;if(!u){const g=[nS.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),p=g.length,d=Promise.resolve(n);h<p;)d=d.then(g[h++],g[h++]);return d}p=a.length;let y=n;for(h=0;h<p;){const g=a[h++],A=a[h++];try{y=g(y)}catch(R){A.call(this,R);break}}try{d=nS.call(this,y)}catch(g){return Promise.reject(g)}for(h=0,p=c.length;h<p;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Qs(this.defaults,e);const n=Pk(e.baseURL,e.url);return Ik(n,e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],function(e){ks.prototype[e]=function(n,r){return this.request(Qs(r||{},{method:e,url:n,data:(r||{}).data}))}});U.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Qs(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ks.prototype[e]=n(),ks.prototype[e+"Form"]=n(!0)});class uw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Ka(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uw(function(i){e=i}),cancel:e}}}function R6(t){return function(n){return t.apply(null,n)}}function A6(t){return U.isObject(t)&&t.isAxiosError===!0}const _y={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_y).forEach(([t,e])=>{_y[e]=t});function Dk(t){const e=new ks(t),n=ck(ks.prototype.request,e);return U.extend(n,ks.prototype,e,{allOwnKeys:!0}),U.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Dk(Qs(t,i))},n}const gt=Dk(Ec);gt.Axios=ks;gt.CanceledError=Ka;gt.CancelToken=uw;gt.isCancel=Rk;gt.VERSION=Nk;gt.toFormData=Zf;gt.AxiosError=ce;gt.Cancel=gt.CanceledError;gt.all=function(e){return Promise.all(e)};gt.spread=R6;gt.isAxiosError=A6;gt.mergeConfig=Qs;gt.AxiosHeaders=dn;gt.formToJSON=t=>Sk(U.isHTMLForm(t)?new FormData(t):t);gt.getAdapter=xk.getAdapter;gt.HttpStatusCode=_y;gt.default=gt;const P6=["as","disabled"];function C6(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b6(t){return!t||t.trim()==="#"}function Ok({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:u}){t||(n!=null||r!=null||i!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:u||"button",disabled:e},c];const d=p=>{if((e||t==="a"&&b6(n))&&p.preventDefault(),e){p.stopPropagation();return}o==null||o(p)},h=p=>{p.key===" "&&(p.preventDefault(),d(p))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:d,onKeyDown:h},c]}const k6=D.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=C6(t,P6);const[s,{tagName:o}]=Ok(Object.assign({tagName:n,disabled:r},i));return Se.jsx(o,Object.assign({},i,s,{ref:e}))});k6.displayName="Button";const x6=D.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},u)=>{const c=Xi(e,"btn"),[d,{tagName:h}]=Ok({tagName:t,disabled:s,...a}),p=h;return Se.jsx(p,{...d,...a,ref:u,disabled:s,className:Tn(o,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,a.href&&s&&"disabled")})});x6.displayName="Button";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function N6(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,u)}c((r=r.apply(t,[])).next())})}function D6(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jo=function(){return jo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jo.apply(this,arguments)},Vk=function(t){return{loading:t==null,value:t}},O6=function(){return function(t,e){switch(e.type){case"error":return jo(jo({},t),{error:e.error,loading:!1,value:void 0});case"reset":return Vk(e.defaultValue);case"value":return jo(jo({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},V6=function(t){var e=t?t():void 0,n=D.useReducer(O6(),Vk(e)),r=n[0],i=n[1],s=D.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=D.useCallback(function(u){i({type:"error",error:u})},[]),a=D.useCallback(function(u){i({type:"value",value:u})},[]);return D.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},f5=function(t,e){var n=V6(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return D.useEffect(function(){var u=KL(t,function(c){return N6(void 0,void 0,void 0,function(){var d;return D6(this,function(h){switch(h.label){case 0:return[3,4];case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return h.sent(),[3,4];case 3:return d=h.sent(),s(d),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[a,i,r]};const M6=D.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:s,...o},a)=>{t=Xi(t,"spinner");const u=`${t}-${n}`;return Se.jsx(i,{ref:a,...o,className:Tn(s,u,r&&`${u}-${r}`,e&&`text-${e}`)})});M6.displayName="Spinner";export{B6 as A,x6 as B,U6 as C,IO as D,d5 as E,OD as F,rr as G,j6 as L,c5 as M,u5 as P,Sr as R,M6 as S,W6 as a,o5 as b,h5 as c,Nh as d,l5 as e,yc as f,J6 as g,uO as h,v_ as i,Se as j,a5 as k,gt as l,e3 as m,f5 as n,W1 as o,ik as p,ri as q,D as r,BF as s,mj as t,o0 as u,_j as v,nj as w,vj as x,ab as y,F6 as z};
