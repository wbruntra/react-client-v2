var Z4=Object.defineProperty;var e3=(t,e,n)=>e in t?Z4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sn=(t,e,n)=>e3(t,typeof e!="symbol"?e+"":e,n);function t3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gb={exports:{}},Py={},Kb={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of=Symbol.for("react.element"),n3=Symbol.for("react.portal"),r3=Symbol.for("react.fragment"),i3=Symbol.for("react.strict_mode"),s3=Symbol.for("react.profiler"),o3=Symbol.for("react.provider"),a3=Symbol.for("react.context"),u3=Symbol.for("react.forward_ref"),l3=Symbol.for("react.suspense"),c3=Symbol.for("react.memo"),d3=Symbol.for("react.lazy"),W1=Symbol.iterator;function h3(t){return t===null||typeof t!="object"?null:(t=W1&&t[W1]||t["@@iterator"],typeof t=="function"?t:null)}var Hb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qb=Object.assign,Yb={};function zc(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Hb}zc.prototype.isReactComponent={};zc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jb(){}Jb.prototype=zc.prototype;function rT(t,e,n){this.props=t,this.context=e,this.refs=Yb,this.updater=n||Hb}var iT=rT.prototype=new Jb;iT.constructor=rT;Qb(iT,zc.prototype);iT.isPureReactComponent=!0;var q1=Array.isArray,Xb=Object.prototype.hasOwnProperty,sT={current:null},Zb={key:!0,ref:!0,__self:!0,__source:!0};function ex(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xb.call(e,r)&&!Zb.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Of,type:t,key:s,ref:o,props:i,_owner:sT.current}}function f3(t,e){return{$$typeof:Of,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Of}function p3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G1=/\/+/g;function Xv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p3(""+t.key):e.toString(36)}function Xm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Of:case n3:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xv(o,0):r,q1(i)?(n="",t!=null&&(n=t.replace(G1,"$&/")+"/"),Xm(i,e,n,"",function(h){return h})):i!=null&&(oT(i)&&(i=f3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(G1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",q1(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+Xv(s,u);o+=Xm(s,e,n,c,i)}else if(c=h3(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+Xv(s,u++),o+=Xm(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sm(t,e,n){if(t==null)return t;var r=[],i=0;return Xm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function m3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},Zm={transition:null},g3={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Zm,ReactCurrentOwner:sT};function tx(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Sm,forEach:function(t,e,n){Sm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sm(t,function(){e++}),e},toArray:function(t){return Sm(t,function(e){return e})||[]},only:function(t){if(!oT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=zc;Qe.Fragment=r3;Qe.Profiler=s3;Qe.PureComponent=rT;Qe.StrictMode=i3;Qe.Suspense=l3;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g3;Qe.act=tx;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qb({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sT.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Xb.call(e,c)&&!Zb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Of,type:t.type,key:i,ref:s,props:r,_owner:o}};Qe.createContext=function(t){return t={$$typeof:a3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o3,_context:t},t.Consumer=t};Qe.createElement=ex;Qe.createFactory=function(t){var e=ex.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:u3,render:t}};Qe.isValidElement=oT;Qe.lazy=function(t){return{$$typeof:d3,_payload:{_status:-1,_result:t},_init:m3}};Qe.memo=function(t,e){return{$$typeof:c3,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=Zm.transition;Zm.transition={};try{t()}finally{Zm.transition=e}};Qe.unstable_act=tx;Qe.useCallback=function(t,e){return hr.current.useCallback(t,e)};Qe.useContext=function(t){return hr.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return hr.current.useEffect(t,e)};Qe.useId=function(){return hr.current.useId()};Qe.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return hr.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};Qe.useRef=function(t){return hr.current.useRef(t)};Qe.useState=function(t){return hr.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return hr.current.useTransition()};Qe.version="18.3.1";Kb.exports=Qe;var z=Kb.exports;const li=Nf(z),i0=t3({__proto__:null,default:li},[z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y3=z,_3=Symbol.for("react.element"),v3=Symbol.for("react.fragment"),w3=Object.prototype.hasOwnProperty,E3=y3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T3={key:!0,ref:!0,__self:!0,__source:!0};function nx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)w3.call(e,r)&&!T3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_3,type:t,key:s,ref:o,props:i,_owner:E3.current}}Py.Fragment=v3;Py.jsx=nx;Py.jsxs=nx;Gb.exports=Py;var w=Gb.exports,rx={exports:{}},Kr={},ix={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ue){var me=Q.length;Q.push(ue);e:for(;0<me;){var _e=me-1>>>1,Ce=Q[_e];if(0<i(Ce,ue))Q[_e]=ue,Q[me]=Ce,me=_e;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ue=Q[0],me=Q.pop();if(me!==ue){Q[0]=me;e:for(var _e=0,Ce=Q.length,Ae=Ce>>>1;_e<Ae;){var Ge=2*(_e+1)-1,Me=Q[Ge],Ye=Ge+1,mt=Q[Ye];if(0>i(Me,me))Ye<Ce&&0>i(mt,Me)?(Q[_e]=mt,Q[Ye]=me,_e=Ye):(Q[_e]=Me,Q[Ge]=me,_e=Ge);else if(Ye<Ce&&0>i(mt,me))Q[_e]=mt,Q[Ye]=me,_e=Ye;else break e}}return ue}function i(Q,ue){var me=Q.sortIndex-ue.sortIndex;return me!==0?me:Q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,_=3,I=!1,T=!1,D=!1,O=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Q){for(var ue=n(h);ue!==null;){if(ue.callback===null)r(h);else if(ue.startTime<=Q)r(h),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=n(h)}}function U(Q){if(D=!1,S(Q),!T)if(n(c)!==null)T=!0,ce(q);else{var ue=n(h);ue!==null&&de(U,ue.startTime-Q)}}function q(Q,ue){T=!1,D&&(D=!1,k(R),R=-1),I=!0;var me=_;try{for(S(ue),m=n(c);m!==null&&(!(m.expirationTime>ue)||Q&&!j());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,_=m.priorityLevel;var Ce=_e(m.expirationTime<=ue);ue=t.unstable_now(),typeof Ce=="function"?m.callback=Ce:m===n(c)&&r(c),S(ue)}else r(c);m=n(c)}if(m!==null)var Ae=!0;else{var Ge=n(h);Ge!==null&&de(U,Ge.startTime-ue),Ae=!1}return Ae}finally{m=null,_=me,I=!1}}var $=!1,C=null,R=-1,L=5,V=-1;function j(){return!(t.unstable_now()-V<L)}function M(){if(C!==null){var Q=t.unstable_now();V=Q;var ue=!0;try{ue=C(!0,Q)}finally{ue?N():($=!1,C=null)}}else $=!1}var N;if(typeof P=="function")N=function(){P(M)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,oe=fe.port2;fe.port1.onmessage=M,N=function(){oe.postMessage(null)}}else N=function(){O(M,0)};function ce(Q){C=Q,$||($=!0,N())}function de(Q,ue){R=O(function(){Q(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){T||I||(T=!0,ce(q))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Q){switch(_){case 1:case 2:case 3:var ue=3;break;default:ue=_}var me=_;_=ue;try{return Q()}finally{_=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=_;_=Q;try{return ue()}finally{_=me}},t.unstable_scheduleCallback=function(Q,ue,me){var _e=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?_e+me:_e):me=_e,Q){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=me+Ce,Q={id:p++,callback:ue,priorityLevel:Q,startTime:me,expirationTime:Ce,sortIndex:-1},me>_e?(Q.sortIndex=me,e(h,Q),n(c)===null&&Q===n(h)&&(D?(k(R),R=-1):D=!0,de(U,me-_e))):(Q.sortIndex=Ce,e(c,Q),T||I||(T=!0,ce(q))),Q},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(Q){var ue=_;return function(){var me=_;_=ue;try{return Q.apply(this,arguments)}finally{_=me}}}})(sx);ix.exports=sx;var I3=ix.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3=z,zr=I3;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ox=new Set,Uh={};function Bu(t,e){mc(t,e),mc(t+"Capture",e)}function mc(t,e){for(Uh[t]=e,t=0;t<e.length;t++)ox.add(e[t])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s0=Object.prototype.hasOwnProperty,R3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K1={},H1={};function A3(t){return s0.call(H1,t)?!0:s0.call(K1,t)?!1:R3.test(t)?H1[t]=!0:(K1[t]=!0,!1)}function P3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C3(t,e,n,r){if(e===null||typeof e>"u"||P3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new fr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new fr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new fr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new fr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new fr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new fr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new fr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new fr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new fr(t,5,!1,t.toLowerCase(),null,!1,!1)});var aT=/[\-:]([a-z])/g;function uT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aT,uT);jn[e]=new fr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aT,uT);jn[e]=new fr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aT,uT);jn[e]=new fr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new fr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new fr(t,1,!1,t.toLowerCase(),null,!0,!0)});function lT(t,e,n,r){var i=jn.hasOwnProperty(e)?jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C3(e,n,i,r)&&(n=null),r||i===null?A3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xs=S3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rm=Symbol.for("react.element"),Bl=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),cT=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),ax=Symbol.for("react.provider"),ux=Symbol.for("react.context"),dT=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),u0=Symbol.for("react.suspense_list"),hT=Symbol.for("react.memo"),Po=Symbol.for("react.lazy"),lx=Symbol.for("react.offscreen"),Q1=Symbol.iterator;function Gd(t){return t===null||typeof t!="object"?null:(t=Q1&&t[Q1]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,Zv;function lh(t){if(Zv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zv=e&&e[1]||""}return`
`+Zv+t}var ew=!1;function tw(t,e){if(!t||ew)return"";ew=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{ew=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lh(t):""}function b3(t){switch(t.tag){case 5:return lh(t.type);case 16:return lh("Lazy");case 13:return lh("Suspense");case 19:return lh("SuspenseList");case 0:case 2:case 15:return t=tw(t.type,!1),t;case 11:return t=tw(t.type.render,!1),t;case 1:return t=tw(t.type,!0),t;default:return""}}function l0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zl:return"Fragment";case Bl:return"Portal";case o0:return"Profiler";case cT:return"StrictMode";case a0:return"Suspense";case u0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ux:return(t.displayName||"Context")+".Consumer";case ax:return(t._context.displayName||"Context")+".Provider";case dT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hT:return e=t.displayName||null,e!==null?e:l0(t.type)||"Memo";case Po:e=t._payload,t=t._init;try{return l0(t(e))}catch{}}return null}function x3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l0(e);case 8:return e===cT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k3(t){var e=cx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Am(t){t._valueTracker||(t._valueTracker=k3(t))}function dx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function c0(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Y1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hx(t,e){e=e.checked,e!=null&&lT(t,"checked",e,!1)}function d0(t,e){hx(t,e);var n=Jo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?h0(t,e.type,n):e.hasOwnProperty("defaultValue")&&h0(t,e.type,Jo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function J1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function h0(t,e,n){(e!=="number"||Rg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ch=Array.isArray;function nc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function f0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(ch(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jo(n)}}function fx(t,e){var n=Jo(e.value),r=Jo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Z1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function px(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?px(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pm,mx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pm=Pm||document.createElement("div"),Pm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N3=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(t){N3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eh[e]=Eh[t]})});function gx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eh.hasOwnProperty(t)&&Eh[t]?(""+e).trim():e+"px"}function yx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var O3=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m0(t,e){if(e){if(O3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function g0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y0=null;function fT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _0=null,rc=null,ic=null;function eA(t){if(t=Mf(t)){if(typeof _0!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Ny(e),_0(t.stateNode,t.type,e))}}function _x(t){rc?ic?ic.push(t):ic=[t]:rc=t}function vx(){if(rc){var t=rc,e=ic;if(ic=rc=null,eA(t),e)for(t=0;t<e.length;t++)eA(e[t])}}function wx(t,e){return t(e)}function Ex(){}var nw=!1;function Tx(t,e,n){if(nw)return t(e,n);nw=!0;try{return wx(t,e,n)}finally{nw=!1,(rc!==null||ic!==null)&&(Ex(),vx())}}function Bh(t,e){var n=t.stateNode;if(n===null)return null;var r=Ny(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var v0=!1;if(zs)try{var Kd={};Object.defineProperty(Kd,"passive",{get:function(){v0=!0}}),window.addEventListener("test",Kd,Kd),window.removeEventListener("test",Kd,Kd)}catch{v0=!1}function D3(t,e,n,r,i,s,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Th=!1,Ag=null,Pg=!1,w0=null,L3={onError:function(t){Th=!0,Ag=t}};function M3(t,e,n,r,i,s,o,u,c){Th=!1,Ag=null,D3.apply(L3,arguments)}function V3(t,e,n,r,i,s,o,u,c){if(M3.apply(this,arguments),Th){if(Th){var h=Ag;Th=!1,Ag=null}else throw Error(ae(198));Pg||(Pg=!0,w0=h)}}function zu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ix(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tA(t){if(zu(t)!==t)throw Error(ae(188))}function F3(t){var e=t.alternate;if(!e){if(e=zu(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tA(i),t;if(s===r)return tA(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function Sx(t){return t=F3(t),t!==null?Rx(t):null}function Rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rx(t);if(e!==null)return e;t=t.sibling}return null}var Ax=zr.unstable_scheduleCallback,nA=zr.unstable_cancelCallback,U3=zr.unstable_shouldYield,j3=zr.unstable_requestPaint,en=zr.unstable_now,B3=zr.unstable_getCurrentPriorityLevel,pT=zr.unstable_ImmediatePriority,Px=zr.unstable_UserBlockingPriority,Cg=zr.unstable_NormalPriority,z3=zr.unstable_LowPriority,Cx=zr.unstable_IdlePriority,Cy=null,rs=null;function $3(t){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Cy,t,void 0,(t.current.flags&128)===128)}catch{}}var Oi=Math.clz32?Math.clz32:G3,W3=Math.log,q3=Math.LN2;function G3(t){return t>>>=0,t===0?32:31-(W3(t)/q3|0)|0}var Cm=64,bm=4194304;function dh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=dh(u):(s&=o,s!==0&&(r=dh(s)))}else o=n&~i,o!==0?r=dh(o):s!==0&&(r=dh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Oi(e),i=1<<n,r|=t[n],e&=~i;return r}function K3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Oi(s),u=1<<o,c=i[o];c===-1?(!(u&n)||u&r)&&(i[o]=K3(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function E0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bx(){var t=Cm;return Cm<<=1,!(Cm&4194240)&&(Cm=64),t}function rw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Df(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Oi(e),t[e]=n}function Q3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Oi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function mT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Oi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _t=0;function xx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var kx,gT,Nx,Ox,Dx,T0=!1,xm=[],jo=null,Bo=null,zo=null,zh=new Map,$h=new Map,xo=[],Y3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rA(t,e){switch(t){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(e.pointerId)}}function Hd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Mf(e),e!==null&&gT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function J3(t,e,n,r,i){switch(e){case"focusin":return jo=Hd(jo,t,e,n,r,i),!0;case"dragenter":return Bo=Hd(Bo,t,e,n,r,i),!0;case"mouseover":return zo=Hd(zo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zh.set(s,Hd(zh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$h.set(s,Hd($h.get(s)||null,t,e,n,r,i)),!0}return!1}function Lx(t){var e=su(t.target);if(e!==null){var n=zu(e);if(n!==null){if(e=n.tag,e===13){if(e=Ix(n),e!==null){t.blockedOn=e,Dx(t.priority,function(){Nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=I0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);y0=r,n.target.dispatchEvent(r),y0=null}else return e=Mf(n),e!==null&&gT(e),t.blockedOn=n,!1;e.shift()}return!0}function iA(t,e,n){eg(t)&&n.delete(e)}function X3(){T0=!1,jo!==null&&eg(jo)&&(jo=null),Bo!==null&&eg(Bo)&&(Bo=null),zo!==null&&eg(zo)&&(zo=null),zh.forEach(iA),$h.forEach(iA)}function Qd(t,e){t.blockedOn===e&&(t.blockedOn=null,T0||(T0=!0,zr.unstable_scheduleCallback(zr.unstable_NormalPriority,X3)))}function Wh(t){function e(i){return Qd(i,t)}if(0<xm.length){Qd(xm[0],t);for(var n=1;n<xm.length;n++){var r=xm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jo!==null&&Qd(jo,t),Bo!==null&&Qd(Bo,t),zo!==null&&Qd(zo,t),zh.forEach(e),$h.forEach(e),n=0;n<xo.length;n++)r=xo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xo.length&&(n=xo[0],n.blockedOn===null);)Lx(n),n.blockedOn===null&&xo.shift()}var sc=Xs.ReactCurrentBatchConfig,xg=!0;function Z3(t,e,n,r){var i=_t,s=sc.transition;sc.transition=null;try{_t=1,yT(t,e,n,r)}finally{_t=i,sc.transition=s}}function ez(t,e,n,r){var i=_t,s=sc.transition;sc.transition=null;try{_t=4,yT(t,e,n,r)}finally{_t=i,sc.transition=s}}function yT(t,e,n,r){if(xg){var i=I0(t,e,n,r);if(i===null)fw(t,e,r,kg,n),rA(t,r);else if(J3(i,t,e,n,r))r.stopPropagation();else if(rA(t,r),e&4&&-1<Y3.indexOf(t)){for(;i!==null;){var s=Mf(i);if(s!==null&&kx(s),s=I0(t,e,n,r),s===null&&fw(t,e,r,kg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fw(t,e,r,null,n)}}var kg=null;function I0(t,e,n,r){if(kg=null,t=fT(r),t=su(t),t!==null)if(e=zu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ix(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kg=t,null}function Mx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B3()){case pT:return 1;case Px:return 4;case Cg:case z3:return 16;case Cx:return 536870912;default:return 16}default:return 16}}var Do=null,_T=null,tg=null;function Vx(){if(tg)return tg;var t,e=_T,n=e.length,r,i="value"in Do?Do.value:Do.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return tg=i.slice(t,1<r?1-r:void 0)}function ng(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function km(){return!0}function sA(){return!1}function Hr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?km:sA,this.isPropagationStopped=sA,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),e}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vT=Hr($c),Lf=Bt({},$c,{view:0,detail:0}),tz=Hr(Lf),iw,sw,Yd,by=Bt({},Lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yd&&(Yd&&t.type==="mousemove"?(iw=t.screenX-Yd.screenX,sw=t.screenY-Yd.screenY):sw=iw=0,Yd=t),iw)},movementY:function(t){return"movementY"in t?t.movementY:sw}}),oA=Hr(by),nz=Bt({},by,{dataTransfer:0}),rz=Hr(nz),iz=Bt({},Lf,{relatedTarget:0}),ow=Hr(iz),sz=Bt({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),oz=Hr(sz),az=Bt({},$c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uz=Hr(az),lz=Bt({},$c,{data:0}),aA=Hr(lz),cz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hz[t])?!!e[t]:!1}function wT(){return fz}var pz=Bt({},Lf,{key:function(t){if(t.key){var e=cz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ng(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wT,charCode:function(t){return t.type==="keypress"?ng(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ng(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mz=Hr(pz),gz=Bt({},by,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uA=Hr(gz),yz=Bt({},Lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wT}),_z=Hr(yz),vz=Bt({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),wz=Hr(vz),Ez=Bt({},by,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tz=Hr(Ez),Iz=[9,13,27,32],ET=zs&&"CompositionEvent"in window,Ih=null;zs&&"documentMode"in document&&(Ih=document.documentMode);var Sz=zs&&"TextEvent"in window&&!Ih,Fx=zs&&(!ET||Ih&&8<Ih&&11>=Ih),lA=" ",cA=!1;function Ux(t,e){switch(t){case"keyup":return Iz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function Rz(t,e){switch(t){case"compositionend":return jx(e);case"keypress":return e.which!==32?null:(cA=!0,lA);case"textInput":return t=e.data,t===lA&&cA?null:t;default:return null}}function Az(t,e){if($l)return t==="compositionend"||!ET&&Ux(t,e)?(t=Vx(),tg=_T=Do=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fx&&e.locale!=="ko"?null:e.data;default:return null}}var Pz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pz[t.type]:e==="textarea"}function Bx(t,e,n,r){_x(r),e=Ng(e,"onChange"),0<e.length&&(n=new vT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sh=null,qh=null;function Cz(t){Xx(t,0)}function xy(t){var e=Gl(t);if(dx(e))return t}function bz(t,e){if(t==="change")return e}var zx=!1;if(zs){var aw;if(zs){var uw="oninput"in document;if(!uw){var hA=document.createElement("div");hA.setAttribute("oninput","return;"),uw=typeof hA.oninput=="function"}aw=uw}else aw=!1;zx=aw&&(!document.documentMode||9<document.documentMode)}function fA(){Sh&&(Sh.detachEvent("onpropertychange",$x),qh=Sh=null)}function $x(t){if(t.propertyName==="value"&&xy(qh)){var e=[];Bx(e,qh,t,fT(t)),Tx(Cz,e)}}function xz(t,e,n){t==="focusin"?(fA(),Sh=e,qh=n,Sh.attachEvent("onpropertychange",$x)):t==="focusout"&&fA()}function kz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xy(qh)}function Nz(t,e){if(t==="click")return xy(e)}function Oz(t,e){if(t==="input"||t==="change")return xy(e)}function Dz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Li=typeof Object.is=="function"?Object.is:Dz;function Gh(t,e){if(Li(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!s0.call(e,i)||!Li(t[i],e[i]))return!1}return!0}function pA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mA(t,e){var n=pA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pA(n)}}function Wx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qx(){for(var t=window,e=Rg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rg(t.document)}return e}function TT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lz(t){var e=qx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wx(n.ownerDocument.documentElement,n)){if(r!==null&&TT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mA(n,s);var o=mA(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mz=zs&&"documentMode"in document&&11>=document.documentMode,Wl=null,S0=null,Rh=null,R0=!1;function gA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;R0||Wl==null||Wl!==Rg(r)||(r=Wl,"selectionStart"in r&&TT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rh&&Gh(Rh,r)||(Rh=r,r=Ng(S0,"onSelect"),0<r.length&&(e=new vT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wl)))}function Nm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ql={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},lw={},Gx={};zs&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function ky(t){if(lw[t])return lw[t];if(!ql[t])return t;var e=ql[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Gx)return lw[t]=e[n];return t}var Kx=ky("animationend"),Hx=ky("animationiteration"),Qx=ky("animationstart"),Yx=ky("transitionend"),Jx=new Map,yA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ha(t,e){Jx.set(t,e),Bu(e,[t])}for(var cw=0;cw<yA.length;cw++){var dw=yA[cw],Vz=dw.toLowerCase(),Fz=dw[0].toUpperCase()+dw.slice(1);ha(Vz,"on"+Fz)}ha(Kx,"onAnimationEnd");ha(Hx,"onAnimationIteration");ha(Qx,"onAnimationStart");ha("dblclick","onDoubleClick");ha("focusin","onFocus");ha("focusout","onBlur");ha(Yx,"onTransitionEnd");mc("onMouseEnter",["mouseout","mouseover"]);mc("onMouseLeave",["mouseout","mouseover"]);mc("onPointerEnter",["pointerout","pointerover"]);mc("onPointerLeave",["pointerout","pointerover"]);Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uz=new Set("cancel close invalid load scroll toggle".split(" ").concat(hh));function _A(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,V3(r,e,void 0,t),t.currentTarget=null}function Xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;_A(i,u,h),s=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;_A(i,u,h),s=c}}}if(Pg)throw t=w0,Pg=!1,w0=null,t}function Pt(t,e){var n=e[x0];n===void 0&&(n=e[x0]=new Set);var r=t+"__bubble";n.has(r)||(Zx(e,t,2,!1),n.add(r))}function hw(t,e,n){var r=0;e&&(r|=4),Zx(n,t,r,e)}var Om="_reactListening"+Math.random().toString(36).slice(2);function Kh(t){if(!t[Om]){t[Om]=!0,ox.forEach(function(n){n!=="selectionchange"&&(Uz.has(n)||hw(n,!1,t),hw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Om]||(e[Om]=!0,hw("selectionchange",!1,e))}}function Zx(t,e,n,r){switch(Mx(e)){case 1:var i=Z3;break;case 4:i=ez;break;default:i=yT}n=i.bind(null,e,n,t),i=void 0,!v0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fw(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;u!==null;){if(o=su(u),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}u=u.parentNode}}r=r.return}Tx(function(){var h=s,p=fT(n),m=[];e:{var _=Jx.get(t);if(_!==void 0){var I=vT,T=t;switch(t){case"keypress":if(ng(n)===0)break e;case"keydown":case"keyup":I=mz;break;case"focusin":T="focus",I=ow;break;case"focusout":T="blur",I=ow;break;case"beforeblur":case"afterblur":I=ow;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=oA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=rz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=_z;break;case Kx:case Hx:case Qx:I=oz;break;case Yx:I=wz;break;case"scroll":I=tz;break;case"wheel":I=Tz;break;case"copy":case"cut":case"paste":I=uz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=uA}var D=(e&4)!==0,O=!D&&t==="scroll",k=D?_!==null?_+"Capture":null:_;D=[];for(var P=h,S;P!==null;){S=P;var U=S.stateNode;if(S.tag===5&&U!==null&&(S=U,k!==null&&(U=Bh(P,k),U!=null&&D.push(Hh(P,U,S)))),O)break;P=P.return}0<D.length&&(_=new I(_,T,null,n,p),m.push({event:_,listeners:D}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",_&&n!==y0&&(T=n.relatedTarget||n.fromElement)&&(su(T)||T[$s]))break e;if((I||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,I?(T=n.relatedTarget||n.toElement,I=h,T=T?su(T):null,T!==null&&(O=zu(T),T!==O||T.tag!==5&&T.tag!==6)&&(T=null)):(I=null,T=h),I!==T)){if(D=oA,U="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(D=uA,U="onPointerLeave",k="onPointerEnter",P="pointer"),O=I==null?_:Gl(I),S=T==null?_:Gl(T),_=new D(U,P+"leave",I,n,p),_.target=O,_.relatedTarget=S,U=null,su(p)===h&&(D=new D(k,P+"enter",T,n,p),D.target=S,D.relatedTarget=O,U=D),O=U,I&&T)t:{for(D=I,k=T,P=0,S=D;S;S=Pl(S))P++;for(S=0,U=k;U;U=Pl(U))S++;for(;0<P-S;)D=Pl(D),P--;for(;0<S-P;)k=Pl(k),S--;for(;P--;){if(D===k||k!==null&&D===k.alternate)break t;D=Pl(D),k=Pl(k)}D=null}else D=null;I!==null&&vA(m,_,I,D,!1),T!==null&&O!==null&&vA(m,O,T,D,!0)}}e:{if(_=h?Gl(h):window,I=_.nodeName&&_.nodeName.toLowerCase(),I==="select"||I==="input"&&_.type==="file")var q=bz;else if(dA(_))if(zx)q=Oz;else{q=kz;var $=xz}else(I=_.nodeName)&&I.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(q=Nz);if(q&&(q=q(t,h))){Bx(m,q,n,p);break e}$&&$(t,_,h),t==="focusout"&&($=_._wrapperState)&&$.controlled&&_.type==="number"&&h0(_,"number",_.value)}switch($=h?Gl(h):window,t){case"focusin":(dA($)||$.contentEditable==="true")&&(Wl=$,S0=h,Rh=null);break;case"focusout":Rh=S0=Wl=null;break;case"mousedown":R0=!0;break;case"contextmenu":case"mouseup":case"dragend":R0=!1,gA(m,n,p);break;case"selectionchange":if(Mz)break;case"keydown":case"keyup":gA(m,n,p)}var C;if(ET)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else $l?Ux(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Fx&&n.locale!=="ko"&&($l||R!=="onCompositionStart"?R==="onCompositionEnd"&&$l&&(C=Vx()):(Do=p,_T="value"in Do?Do.value:Do.textContent,$l=!0)),$=Ng(h,R),0<$.length&&(R=new aA(R,t,null,n,p),m.push({event:R,listeners:$}),C?R.data=C:(C=jx(n),C!==null&&(R.data=C)))),(C=Sz?Rz(t,n):Az(t,n))&&(h=Ng(h,"onBeforeInput"),0<h.length&&(p=new aA("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=C))}Xx(m,e)})}function Hh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ng(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bh(t,n),s!=null&&r.unshift(Hh(t,s,i)),s=Bh(t,e),s!=null&&r.push(Hh(t,s,i))),t=t.return}return r}function Pl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vA(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=Bh(n,s),c!=null&&o.unshift(Hh(n,c,u))):i||(c=Bh(n,s),c!=null&&o.push(Hh(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jz=/\r\n?/g,Bz=/\u0000|\uFFFD/g;function wA(t){return(typeof t=="string"?t:""+t).replace(jz,`
`).replace(Bz,"")}function Dm(t,e,n){if(e=wA(e),wA(t)!==e&&n)throw Error(ae(425))}function Og(){}var A0=null,P0=null;function C0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var b0=typeof setTimeout=="function"?setTimeout:void 0,zz=typeof clearTimeout=="function"?clearTimeout:void 0,EA=typeof Promise=="function"?Promise:void 0,$z=typeof queueMicrotask=="function"?queueMicrotask:typeof EA<"u"?function(t){return EA.resolve(null).then(t).catch(Wz)}:b0;function Wz(t){setTimeout(function(){throw t})}function pw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wh(e)}function $o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),Qi="__reactFiber$"+Wc,Qh="__reactProps$"+Wc,$s="__reactContainer$"+Wc,x0="__reactEvents$"+Wc,qz="__reactListeners$"+Wc,Gz="__reactHandles$"+Wc;function su(t){var e=t[Qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$s]||n[Qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TA(t);t!==null;){if(n=t[Qi])return n;t=TA(t)}return e}t=n,n=t.parentNode}return null}function Mf(t){return t=t[Qi]||t[$s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Ny(t){return t[Qh]||null}var k0=[],Kl=-1;function fa(t){return{current:t}}function xt(t){0>Kl||(t.current=k0[Kl],k0[Kl]=null,Kl--)}function St(t,e){Kl++,k0[Kl]=t.current,t.current=e}var Xo={},Jn=fa(Xo),Pr=fa(!1),Tu=Xo;function gc(t,e){var n=t.type.contextTypes;if(!n)return Xo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cr(t){return t=t.childContextTypes,t!=null}function Dg(){xt(Pr),xt(Jn)}function IA(t,e,n){if(Jn.current!==Xo)throw Error(ae(168));St(Jn,e),St(Pr,n)}function ek(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,x3(t)||"Unknown",i));return Bt({},n,r)}function Lg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xo,Tu=Jn.current,St(Jn,t),St(Pr,Pr.current),!0}function SA(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=ek(t,e,Tu),r.__reactInternalMemoizedMergedChildContext=t,xt(Pr),xt(Jn),St(Jn,t)):xt(Pr),St(Pr,n)}var Ns=null,Oy=!1,mw=!1;function tk(t){Ns===null?Ns=[t]:Ns.push(t)}function Kz(t){Oy=!0,tk(t)}function pa(){if(!mw&&Ns!==null){mw=!0;var t=0,e=_t;try{var n=Ns;for(_t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ns=null,Oy=!1}catch(i){throw Ns!==null&&(Ns=Ns.slice(t+1)),Ax(pT,pa),i}finally{_t=e,mw=!1}}return null}var Hl=[],Ql=0,Mg=null,Vg=0,oi=[],ai=0,Iu=null,Os=1,Ds="";function Ga(t,e){Hl[Ql++]=Vg,Hl[Ql++]=Mg,Mg=t,Vg=e}function nk(t,e,n){oi[ai++]=Os,oi[ai++]=Ds,oi[ai++]=Iu,Iu=t;var r=Os;t=Ds;var i=32-Oi(r)-1;r&=~(1<<i),n+=1;var s=32-Oi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Os=1<<32-Oi(e)+i|n<<i|r,Ds=s+t}else Os=1<<s|n<<i|r,Ds=t}function IT(t){t.return!==null&&(Ga(t,1),nk(t,1,0))}function ST(t){for(;t===Mg;)Mg=Hl[--Ql],Hl[Ql]=null,Vg=Hl[--Ql],Hl[Ql]=null;for(;t===Iu;)Iu=oi[--ai],oi[ai]=null,Ds=oi[--ai],oi[ai]=null,Os=oi[--ai],oi[ai]=null}var jr=null,Fr=null,Ot=!1,xi=null;function rk(t,e){var n=ci(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function RA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jr=t,Fr=$o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jr=t,Fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Iu!==null?{id:Os,overflow:Ds}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ci(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jr=t,Fr=null,!0):!1;default:return!1}}function N0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function O0(t){if(Ot){var e=Fr;if(e){var n=e;if(!RA(t,e)){if(N0(t))throw Error(ae(418));e=$o(n.nextSibling);var r=jr;e&&RA(t,e)?rk(r,n):(t.flags=t.flags&-4097|2,Ot=!1,jr=t)}}else{if(N0(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Ot=!1,jr=t}}}function AA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function Lm(t){if(t!==jr)return!1;if(!Ot)return AA(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!C0(t.type,t.memoizedProps)),e&&(e=Fr)){if(N0(t))throw ik(),Error(ae(418));for(;e;)rk(t,e),e=$o(e.nextSibling)}if(AA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fr=$o(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fr=null}}else Fr=jr?$o(t.stateNode.nextSibling):null;return!0}function ik(){for(var t=Fr;t;)t=$o(t.nextSibling)}function yc(){Fr=jr=null,Ot=!1}function RT(t){xi===null?xi=[t]:xi.push(t)}var Hz=Xs.ReactCurrentBatchConfig;function Jd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Mm(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PA(t){var e=t._init;return e(t._payload)}function sk(t){function e(k,P){if(t){var S=k.deletions;S===null?(k.deletions=[P],k.flags|=16):S.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function r(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function i(k,P){return k=Ko(k,P),k.index=0,k.sibling=null,k}function s(k,P,S){return k.index=S,t?(S=k.alternate,S!==null?(S=S.index,S<P?(k.flags|=2,P):S):(k.flags|=2,P)):(k.flags|=1048576,P)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function u(k,P,S,U){return P===null||P.tag!==6?(P=Tw(S,k.mode,U),P.return=k,P):(P=i(P,S),P.return=k,P)}function c(k,P,S,U){var q=S.type;return q===zl?p(k,P,S.props.children,U,S.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Po&&PA(q)===P.type)?(U=i(P,S.props),U.ref=Jd(k,P,S),U.return=k,U):(U=lg(S.type,S.key,S.props,null,k.mode,U),U.ref=Jd(k,P,S),U.return=k,U)}function h(k,P,S,U){return P===null||P.tag!==4||P.stateNode.containerInfo!==S.containerInfo||P.stateNode.implementation!==S.implementation?(P=Iw(S,k.mode,U),P.return=k,P):(P=i(P,S.children||[]),P.return=k,P)}function p(k,P,S,U,q){return P===null||P.tag!==7?(P=pu(S,k.mode,U,q),P.return=k,P):(P=i(P,S),P.return=k,P)}function m(k,P,S){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Tw(""+P,k.mode,S),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Rm:return S=lg(P.type,P.key,P.props,null,k.mode,S),S.ref=Jd(k,null,P),S.return=k,S;case Bl:return P=Iw(P,k.mode,S),P.return=k,P;case Po:var U=P._init;return m(k,U(P._payload),S)}if(ch(P)||Gd(P))return P=pu(P,k.mode,S,null),P.return=k,P;Mm(k,P)}return null}function _(k,P,S,U){var q=P!==null?P.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return q!==null?null:u(k,P,""+S,U);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rm:return S.key===q?c(k,P,S,U):null;case Bl:return S.key===q?h(k,P,S,U):null;case Po:return q=S._init,_(k,P,q(S._payload),U)}if(ch(S)||Gd(S))return q!==null?null:p(k,P,S,U,null);Mm(k,S)}return null}function I(k,P,S,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return k=k.get(S)||null,u(P,k,""+U,q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Rm:return k=k.get(U.key===null?S:U.key)||null,c(P,k,U,q);case Bl:return k=k.get(U.key===null?S:U.key)||null,h(P,k,U,q);case Po:var $=U._init;return I(k,P,S,$(U._payload),q)}if(ch(U)||Gd(U))return k=k.get(S)||null,p(P,k,U,q,null);Mm(P,U)}return null}function T(k,P,S,U){for(var q=null,$=null,C=P,R=P=0,L=null;C!==null&&R<S.length;R++){C.index>R?(L=C,C=null):L=C.sibling;var V=_(k,C,S[R],U);if(V===null){C===null&&(C=L);break}t&&C&&V.alternate===null&&e(k,C),P=s(V,P,R),$===null?q=V:$.sibling=V,$=V,C=L}if(R===S.length)return n(k,C),Ot&&Ga(k,R),q;if(C===null){for(;R<S.length;R++)C=m(k,S[R],U),C!==null&&(P=s(C,P,R),$===null?q=C:$.sibling=C,$=C);return Ot&&Ga(k,R),q}for(C=r(k,C);R<S.length;R++)L=I(C,k,R,S[R],U),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?R:L.key),P=s(L,P,R),$===null?q=L:$.sibling=L,$=L);return t&&C.forEach(function(j){return e(k,j)}),Ot&&Ga(k,R),q}function D(k,P,S,U){var q=Gd(S);if(typeof q!="function")throw Error(ae(150));if(S=q.call(S),S==null)throw Error(ae(151));for(var $=q=null,C=P,R=P=0,L=null,V=S.next();C!==null&&!V.done;R++,V=S.next()){C.index>R?(L=C,C=null):L=C.sibling;var j=_(k,C,V.value,U);if(j===null){C===null&&(C=L);break}t&&C&&j.alternate===null&&e(k,C),P=s(j,P,R),$===null?q=j:$.sibling=j,$=j,C=L}if(V.done)return n(k,C),Ot&&Ga(k,R),q;if(C===null){for(;!V.done;R++,V=S.next())V=m(k,V.value,U),V!==null&&(P=s(V,P,R),$===null?q=V:$.sibling=V,$=V);return Ot&&Ga(k,R),q}for(C=r(k,C);!V.done;R++,V=S.next())V=I(C,k,R,V.value,U),V!==null&&(t&&V.alternate!==null&&C.delete(V.key===null?R:V.key),P=s(V,P,R),$===null?q=V:$.sibling=V,$=V);return t&&C.forEach(function(M){return e(k,M)}),Ot&&Ga(k,R),q}function O(k,P,S,U){if(typeof S=="object"&&S!==null&&S.type===zl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rm:e:{for(var q=S.key,$=P;$!==null;){if($.key===q){if(q=S.type,q===zl){if($.tag===7){n(k,$.sibling),P=i($,S.props.children),P.return=k,k=P;break e}}else if($.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Po&&PA(q)===$.type){n(k,$.sibling),P=i($,S.props),P.ref=Jd(k,$,S),P.return=k,k=P;break e}n(k,$);break}else e(k,$);$=$.sibling}S.type===zl?(P=pu(S.props.children,k.mode,U,S.key),P.return=k,k=P):(U=lg(S.type,S.key,S.props,null,k.mode,U),U.ref=Jd(k,P,S),U.return=k,k=U)}return o(k);case Bl:e:{for($=S.key;P!==null;){if(P.key===$)if(P.tag===4&&P.stateNode.containerInfo===S.containerInfo&&P.stateNode.implementation===S.implementation){n(k,P.sibling),P=i(P,S.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=Iw(S,k.mode,U),P.return=k,k=P}return o(k);case Po:return $=S._init,O(k,P,$(S._payload),U)}if(ch(S))return T(k,P,S,U);if(Gd(S))return D(k,P,S,U);Mm(k,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,P!==null&&P.tag===6?(n(k,P.sibling),P=i(P,S),P.return=k,k=P):(n(k,P),P=Tw(S,k.mode,U),P.return=k,k=P),o(k)):n(k,P)}return O}var _c=sk(!0),ok=sk(!1),Fg=fa(null),Ug=null,Yl=null,AT=null;function PT(){AT=Yl=Ug=null}function CT(t){var e=Fg.current;xt(Fg),t._currentValue=e}function D0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oc(t,e){Ug=t,AT=Yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ir=!0),t.firstContext=null)}function mi(t){var e=t._currentValue;if(AT!==t)if(t={context:t,memoizedValue:e,next:null},Yl===null){if(Ug===null)throw Error(ae(308));Yl=t,Ug.dependencies={lanes:0,firstContext:t}}else Yl=Yl.next=t;return e}var ou=null;function bT(t){ou===null?ou=[t]:ou.push(t)}function ak(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ws(t,r)}function Ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Co=!1;function xT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function js(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ot&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ws(t,n)}return i=r.interleaved,i===null?(e.next=e,bT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ws(t,n)}function rg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mT(t,n)}}function CA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jg(t,e,n,r){var i=t.updateQueue;Co=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,u=s;do{var _=u.lane,I=u.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,D=u;switch(_=e,I=n,D.tag){case 1:if(T=D.payload,typeof T=="function"){m=T.call(I,m,_);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=D.payload,_=typeof T=="function"?T.call(I,m,_):T,_==null)break e;m=Bt({},m,_);break e;case 2:Co=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[u]:_.push(u))}else I={eventTime:I,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=I,c=m):p=p.next=I,o|=_;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;_=u,u=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ru|=o,t.lanes=o,t.memoizedState=m}}function bA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var Vf={},is=fa(Vf),Yh=fa(Vf),Jh=fa(Vf);function au(t){if(t===Vf)throw Error(ae(174));return t}function kT(t,e){switch(St(Jh,e),St(Yh,t),St(is,Vf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=p0(e,t)}xt(is),St(is,e)}function vc(){xt(is),xt(Yh),xt(Jh)}function lk(t){au(Jh.current);var e=au(is.current),n=p0(e,t.type);e!==n&&(St(Yh,t),St(is,n))}function NT(t){Yh.current===t&&(xt(is),xt(Yh))}var Ft=fa(0);function Bg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gw=[];function OT(){for(var t=0;t<gw.length;t++)gw[t]._workInProgressVersionPrimary=null;gw.length=0}var ig=Xs.ReactCurrentDispatcher,yw=Xs.ReactCurrentBatchConfig,Su=0,Ut=null,mn=null,An=null,zg=!1,Ah=!1,Xh=0,Qz=0;function Gn(){throw Error(ae(321))}function DT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Li(t[n],e[n]))return!1;return!0}function LT(t,e,n,r,i,s){if(Su=s,Ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ig.current=t===null||t.memoizedState===null?Zz:e$,t=n(r,i),Ah){s=0;do{if(Ah=!1,Xh=0,25<=s)throw Error(ae(301));s+=1,An=mn=null,e.updateQueue=null,ig.current=t$,t=n(r,i)}while(Ah)}if(ig.current=$g,e=mn!==null&&mn.next!==null,Su=0,An=mn=Ut=null,zg=!1,e)throw Error(ae(300));return t}function MT(){var t=Xh!==0;return Xh=0,t}function Hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Ut.memoizedState=An=t:An=An.next=t,An}function gi(){if(mn===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=mn.next;var e=An===null?Ut.memoizedState:An.next;if(e!==null)An=e,mn=t;else{if(t===null)throw Error(ae(310));mn=t,t={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},An===null?Ut.memoizedState=An=t:An=An.next=t}return An}function Zh(t,e){return typeof e=="function"?e(t):e}function _w(t){var e=gi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=mn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,c=null,h=s;do{var p=h.lane;if((Su&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Ut.lanes|=p,Ru|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=u,Li(r,e.memoizedState)||(Ir=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ut.lanes|=s,Ru|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vw(t){var e=gi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Li(s,e.memoizedState)||(Ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ck(){}function dk(t,e){var n=Ut,r=gi(),i=e(),s=!Li(r.memoizedState,i);if(s&&(r.memoizedState=i,Ir=!0),r=r.queue,VT(pk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||An!==null&&An.memoizedState.tag&1){if(n.flags|=2048,ef(9,fk.bind(null,n,r,i,e),void 0,null),Cn===null)throw Error(ae(349));Su&30||hk(n,e,i)}return i}function hk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fk(t,e,n,r){e.value=n,e.getSnapshot=r,mk(e)&&gk(t)}function pk(t,e,n){return n(function(){mk(e)&&gk(t)})}function mk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Li(t,n)}catch{return!0}}function gk(t){var e=Ws(t,1);e!==null&&Di(e,t,1,-1)}function xA(t){var e=Hi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:t},e.queue=t,t=t.dispatch=Xz.bind(null,Ut,t),[e.memoizedState,t]}function ef(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yk(){return gi().memoizedState}function sg(t,e,n,r){var i=Hi();Ut.flags|=t,i.memoizedState=ef(1|e,n,void 0,r===void 0?null:r)}function Dy(t,e,n,r){var i=gi();r=r===void 0?null:r;var s=void 0;if(mn!==null){var o=mn.memoizedState;if(s=o.destroy,r!==null&&DT(r,o.deps)){i.memoizedState=ef(e,n,s,r);return}}Ut.flags|=t,i.memoizedState=ef(1|e,n,s,r)}function kA(t,e){return sg(8390656,8,t,e)}function VT(t,e){return Dy(2048,8,t,e)}function _k(t,e){return Dy(4,2,t,e)}function vk(t,e){return Dy(4,4,t,e)}function wk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ek(t,e,n){return n=n!=null?n.concat([t]):null,Dy(4,4,wk.bind(null,e,t),n)}function FT(){}function Tk(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ik(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sk(t,e,n){return Su&21?(Li(n,e)||(n=bx(),Ut.lanes|=n,Ru|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ir=!0),t.memoizedState=n)}function Yz(t,e){var n=_t;_t=n!==0&&4>n?n:4,t(!0);var r=yw.transition;yw.transition={};try{t(!1),e()}finally{_t=n,yw.transition=r}}function Rk(){return gi().memoizedState}function Jz(t,e,n){var r=Go(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ak(t))Pk(e,n);else if(n=ak(t,e,n,r),n!==null){var i=ar();Di(n,t,r,i),Ck(n,e,r)}}function Xz(t,e,n){var r=Go(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ak(t))Pk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,Li(u,o)){var c=e.interleaved;c===null?(i.next=i,bT(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=ak(t,e,i,r),n!==null&&(i=ar(),Di(n,t,r,i),Ck(n,e,r))}}function Ak(t){var e=t.alternate;return t===Ut||e!==null&&e===Ut}function Pk(t,e){Ah=zg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ck(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mT(t,n)}}var $g={readContext:mi,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Zz={readContext:mi,useCallback:function(t,e){return Hi().memoizedState=[t,e===void 0?null:e],t},useContext:mi,useEffect:kA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sg(4194308,4,wk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sg(4194308,4,t,e)},useInsertionEffect:function(t,e){return sg(4,2,t,e)},useMemo:function(t,e){var n=Hi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Jz.bind(null,Ut,t),[r.memoizedState,t]},useRef:function(t){var e=Hi();return t={current:t},e.memoizedState=t},useState:xA,useDebugValue:FT,useDeferredValue:function(t){return Hi().memoizedState=t},useTransition:function(){var t=xA(!1),e=t[0];return t=Yz.bind(null,t[1]),Hi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ut,i=Hi();if(Ot){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Cn===null)throw Error(ae(349));Su&30||hk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,kA(pk.bind(null,r,s,t),[t]),r.flags|=2048,ef(9,fk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hi(),e=Cn.identifierPrefix;if(Ot){var n=Ds,r=Os;n=(r&~(1<<32-Oi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e$={readContext:mi,useCallback:Tk,useContext:mi,useEffect:VT,useImperativeHandle:Ek,useInsertionEffect:_k,useLayoutEffect:vk,useMemo:Ik,useReducer:_w,useRef:yk,useState:function(){return _w(Zh)},useDebugValue:FT,useDeferredValue:function(t){var e=gi();return Sk(e,mn.memoizedState,t)},useTransition:function(){var t=_w(Zh)[0],e=gi().memoizedState;return[t,e]},useMutableSource:ck,useSyncExternalStore:dk,useId:Rk,unstable_isNewReconciler:!1},t$={readContext:mi,useCallback:Tk,useContext:mi,useEffect:VT,useImperativeHandle:Ek,useInsertionEffect:_k,useLayoutEffect:vk,useMemo:Ik,useReducer:vw,useRef:yk,useState:function(){return vw(Zh)},useDebugValue:FT,useDeferredValue:function(t){var e=gi();return mn===null?e.memoizedState=t:Sk(e,mn.memoizedState,t)},useTransition:function(){var t=vw(Zh)[0],e=gi().memoizedState;return[t,e]},useMutableSource:ck,useSyncExternalStore:dk,useId:Rk,unstable_isNewReconciler:!1};function Ci(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function L0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ly={isMounted:function(t){return(t=t._reactInternals)?zu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ar(),i=Go(t),s=js(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wo(t,s,i),e!==null&&(Di(e,t,i,r),rg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ar(),i=Go(t),s=js(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wo(t,s,i),e!==null&&(Di(e,t,i,r),rg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ar(),r=Go(t),i=js(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wo(t,i,r),e!==null&&(Di(e,t,r,n),rg(e,t,r))}};function NA(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Gh(n,r)||!Gh(i,s):!0}function bk(t,e,n){var r=!1,i=Xo,s=e.contextType;return typeof s=="object"&&s!==null?s=mi(s):(i=Cr(e)?Tu:Jn.current,r=e.contextTypes,s=(r=r!=null)?gc(t,i):Xo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ly,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function OA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ly.enqueueReplaceState(e,e.state,null)}function M0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},xT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mi(s):(s=Cr(e)?Tu:Jn.current,i.context=gc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(L0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ly.enqueueReplaceState(i,i.state,null),jg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function wc(t,e){try{var n="",r=e;do n+=b3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ww(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function V0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var n$=typeof WeakMap=="function"?WeakMap:Map;function xk(t,e,n){n=js(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qg||(qg=!0,K0=r),V0(t,e)},n}function kk(t,e,n){n=js(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){V0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){V0(t,e),typeof r!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function DA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new n$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=g$.bind(null,t,e,n),e.then(t,t))}function LA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=js(-1,1),e.tag=2,Wo(n,e,1))),n.lanes|=1),t)}var r$=Xs.ReactCurrentOwner,Ir=!1;function ir(t,e,n,r){e.child=t===null?ok(e,null,n,r):_c(e,t.child,n,r)}function VA(t,e,n,r,i){n=n.render;var s=e.ref;return oc(e,i),r=LT(t,e,n,r,s,i),n=MT(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qs(t,e,i)):(Ot&&n&&IT(e),e.flags|=1,ir(t,e,r,i),e.child)}function FA(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!GT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Nk(t,e,s,r,i)):(t=lg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Gh,n(o,r)&&t.ref===e.ref)return qs(t,e,i)}return e.flags|=1,t=Ko(s,r),t.ref=e.ref,t.return=e,e.child=t}function Nk(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Gh(s,r)&&t.ref===e.ref)if(Ir=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ir=!0);else return e.lanes=t.lanes,qs(t,e,i)}return F0(t,e,n,r,i)}function Ok(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Xl,Mr),Mr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(Xl,Mr),Mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(Xl,Mr),Mr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,St(Xl,Mr),Mr|=r;return ir(t,e,i,n),e.child}function Dk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function F0(t,e,n,r,i){var s=Cr(n)?Tu:Jn.current;return s=gc(e,s),oc(e,i),n=LT(t,e,n,r,s,i),r=MT(),t!==null&&!Ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qs(t,e,i)):(Ot&&r&&IT(e),e.flags|=1,ir(t,e,n,i),e.child)}function UA(t,e,n,r,i){if(Cr(n)){var s=!0;Lg(e)}else s=!1;if(oc(e,i),e.stateNode===null)og(t,e),bk(e,n,r),M0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=mi(h):(h=Cr(n)?Tu:Jn.current,h=gc(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&OA(e,o,r,h),Co=!1;var _=e.memoizedState;o.state=_,jg(e,r,o,i),c=e.memoizedState,u!==r||_!==c||Pr.current||Co?(typeof p=="function"&&(L0(e,n,p,r),c=e.memoizedState),(u=Co||NA(e,n,u,r,_,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uk(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Ci(e.type,u),o.props=h,m=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mi(c):(c=Cr(n)?Tu:Jn.current,c=gc(e,c));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||_!==c)&&OA(e,o,r,c),Co=!1,_=e.memoizedState,o.state=_,jg(e,r,o,i);var T=e.memoizedState;u!==m||_!==T||Pr.current||Co?(typeof I=="function"&&(L0(e,n,I,r),T=e.memoizedState),(h=Co||NA(e,n,h,r,_,T,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return U0(t,e,n,r,s,i)}function U0(t,e,n,r,i,s){Dk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&SA(e,n,!1),qs(t,e,s);r=e.stateNode,r$.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=_c(e,t.child,null,s),e.child=_c(e,null,u,s)):ir(t,e,u,s),e.memoizedState=r.state,i&&SA(e,n,!0),e.child}function Lk(t){var e=t.stateNode;e.pendingContext?IA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IA(t,e.context,!1),kT(t,e.containerInfo)}function jA(t,e,n,r,i){return yc(),RT(i),e.flags|=256,ir(t,e,n,r),e.child}var j0={dehydrated:null,treeContext:null,retryLane:0};function B0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mk(t,e,n){var r=e.pendingProps,i=Ft.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Ft,i&1),t===null)return O0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fy(o,r,0,null),t=pu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=B0(n),e.memoizedState=j0,t):UT(e,o));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return i$(t,e,o,r,u,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ko(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Ko(u,s):(s=pu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?B0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=j0,r}return s=t.child,t=s.sibling,r=Ko(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function UT(t,e){return e=Fy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vm(t,e,n,r){return r!==null&&RT(r),_c(e,t.child,null,n),t=UT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i$(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ww(Error(ae(422))),Vm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fy({mode:"visible",children:r.children},i,0,null),s=pu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&_c(e,t.child,null,o),e.child.memoizedState=B0(o),e.memoizedState=j0,s);if(!(e.mode&1))return Vm(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ae(419)),r=ww(s,r,void 0),Vm(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ir||u){if(r=Cn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ws(t,i),Di(r,t,i,-1))}return qT(),r=ww(Error(ae(421))),Vm(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=y$.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fr=$o(i.nextSibling),jr=e,Ot=!0,xi=null,t!==null&&(oi[ai++]=Os,oi[ai++]=Ds,oi[ai++]=Iu,Os=t.id,Ds=t.overflow,Iu=e),e=UT(e,r.children),e.flags|=4096,e)}function BA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),D0(t.return,e,n)}function Ew(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vk(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ir(t,e,r.children,n),r=Ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&BA(t,n,e);else if(t.tag===19)BA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Bg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ew(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ew(e,!0,n,null,s);break;case"together":Ew(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function og(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ru|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ko(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ko(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function s$(t,e,n){switch(e.tag){case 3:Lk(e),yc();break;case 5:lk(e);break;case 1:Cr(e.type)&&Lg(e);break;case 4:kT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(Fg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ft,Ft.current&1),e.flags|=128,null):n&e.child.childLanes?Mk(t,e,n):(St(Ft,Ft.current&1),t=qs(t,e,n),t!==null?t.sibling:null);St(Ft,Ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,Ok(t,e,n)}return qs(t,e,n)}var Fk,z0,Uk,jk;Fk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};z0=function(){};Uk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,au(is.current);var s=null;switch(n){case"input":i=c0(t,i),r=c0(t,r),s=[];break;case"select":i=Bt({},i,{value:void 0}),r=Bt({},r,{value:void 0}),s=[];break;case"textarea":i=f0(t,i),r=f0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Og)}m0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Uh.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Uh.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Pt("scroll",t),s||u===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};jk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xd(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function o$(t,e,n){var r=e.pendingProps;switch(ST(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(e),null;case 1:return Cr(e.type)&&Dg(),Kn(e),null;case 3:return r=e.stateNode,vc(),xt(Pr),xt(Jn),OT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xi!==null&&(Y0(xi),xi=null))),z0(t,e),Kn(e),null;case 5:NT(e);var i=au(Jh.current);if(n=e.type,t!==null&&e.stateNode!=null)Uk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Kn(e),null}if(t=au(is.current),Lm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qi]=e,r[Qh]=s,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(i=0;i<hh.length;i++)Pt(hh[i],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":Y1(r,s),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",r);break;case"textarea":X1(r,s),Pt("invalid",r)}m0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Dm(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Dm(r.textContent,u,t),i=["children",""+u]):Uh.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Pt("scroll",r)}switch(n){case"input":Am(r),J1(r,s,!0);break;case"textarea":Am(r),Z1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Og)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=px(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qi]=e,t[Qh]=r,Fk(t,e,!1,!1),e.stateNode=t;e:{switch(o=g0(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),i=r;break;case"iframe":case"object":case"embed":Pt("load",t),i=r;break;case"video":case"audio":for(i=0;i<hh.length;i++)Pt(hh[i],t);i=r;break;case"source":Pt("error",t),i=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),i=r;break;case"details":Pt("toggle",t),i=r;break;case"input":Y1(t,r),i=c0(t,r),Pt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Bt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":X1(t,r),i=f0(t,r),Pt("invalid",t);break;default:i=r}m0(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?yx(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mx(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&jh(t,c):typeof c=="number"&&jh(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Pt("scroll",t):c!=null&&lT(t,s,c,o))}switch(n){case"input":Am(t),J1(t,r,!1);break;case"textarea":Am(t),Z1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?nc(t,!!r.multiple,s,!1):r.defaultValue!=null&&nc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Og)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kn(e),null;case 6:if(t&&e.stateNode!=null)jk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=au(Jh.current),au(is.current),Lm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qi]=e,(s=r.nodeValue!==n)&&(t=jr,t!==null))switch(t.tag){case 3:Dm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dm(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qi]=e,e.stateNode=r}return Kn(e),null;case 13:if(xt(Ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Fr!==null&&e.mode&1&&!(e.flags&128))ik(),yc(),e.flags|=98560,s=!1;else if(s=Lm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Qi]=e}else yc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kn(e),s=!1}else xi!==null&&(Y0(xi),xi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?yn===0&&(yn=3):qT())),e.updateQueue!==null&&(e.flags|=4),Kn(e),null);case 4:return vc(),z0(t,e),t===null&&Kh(e.stateNode.containerInfo),Kn(e),null;case 10:return CT(e.type._context),Kn(e),null;case 17:return Cr(e.type)&&Dg(),Kn(e),null;case 19:if(xt(Ft),s=e.memoizedState,s===null)return Kn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Xd(s,!1);else{if(yn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Bg(t),o!==null){for(e.flags|=128,Xd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Ft,Ft.current&1|2),e.child}t=t.sibling}s.tail!==null&&en()>Ec&&(e.flags|=128,r=!0,Xd(s,!1),e.lanes=4194304)}else{if(!r)if(t=Bg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ot)return Kn(e),null}else 2*en()-s.renderingStartTime>Ec&&n!==1073741824&&(e.flags|=128,r=!0,Xd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=en(),e.sibling=null,n=Ft.current,St(Ft,r?n&1|2:n&1),e):(Kn(e),null);case 22:case 23:return WT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(Kn(e),e.subtreeFlags&6&&(e.flags|=8192)):Kn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function a$(t,e){switch(ST(e),e.tag){case 1:return Cr(e.type)&&Dg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vc(),xt(Pr),xt(Jn),OT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NT(e),null;case 13:if(xt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));yc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Ft),null;case 4:return vc(),null;case 10:return CT(e.type._context),null;case 22:case 23:return WT(),null;case 24:return null;default:return null}}var Fm=!1,Qn=!1,u$=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Jl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qt(t,e,r)}else n.current=null}function $0(t,e,n){try{n()}catch(r){qt(t,e,r)}}var zA=!1;function l$(t,e){if(A0=xg,t=qx(),TT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,_=null;t:for(;;){for(var I;m!==n||i!==0&&m.nodeType!==3||(u=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)_=m,m=I;for(;;){if(m===t)break t;if(_===n&&++h===i&&(u=o),_===s&&++p===r&&(c=o),(I=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=I}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(P0={focusedElem:t,selectionRange:n},xg=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var D=T.memoizedProps,O=T.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?D:Ci(e.type,D),O);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(U){qt(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return T=zA,zA=!1,T}function Ph(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&$0(e,n,s)}i=i.next}while(i!==r)}}function My(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function W0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bk(t){var e=t.alternate;e!==null&&(t.alternate=null,Bk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qi],delete e[Qh],delete e[x0],delete e[qz],delete e[Gz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zk(t){return t.tag===5||t.tag===3||t.tag===4}function $A(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Og));else if(r!==4&&(t=t.child,t!==null))for(q0(t,e,n),t=t.sibling;t!==null;)q0(t,e,n),t=t.sibling}function G0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(G0(t,e,n),t=t.sibling;t!==null;)G0(t,e,n),t=t.sibling}var Ln=null,bi=!1;function To(t,e,n){for(n=n.child;n!==null;)$k(t,e,n),n=n.sibling}function $k(t,e,n){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Cy,n)}catch{}switch(n.tag){case 5:Qn||Jl(n,e);case 6:var r=Ln,i=bi;Ln=null,To(t,e,n),Ln=r,bi=i,Ln!==null&&(bi?(t=Ln,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ln.removeChild(n.stateNode));break;case 18:Ln!==null&&(bi?(t=Ln,n=n.stateNode,t.nodeType===8?pw(t.parentNode,n):t.nodeType===1&&pw(t,n),Wh(t)):pw(Ln,n.stateNode));break;case 4:r=Ln,i=bi,Ln=n.stateNode.containerInfo,bi=!0,To(t,e,n),Ln=r,bi=i;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$0(n,e,o),i=i.next}while(i!==r)}To(t,e,n);break;case 1:if(!Qn&&(Jl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){qt(n,e,u)}To(t,e,n);break;case 21:To(t,e,n);break;case 22:n.mode&1?(Qn=(r=Qn)||n.memoizedState!==null,To(t,e,n),Qn=r):To(t,e,n);break;default:To(t,e,n)}}function WA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new u$),e.forEach(function(r){var i=_$.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Ln=u.stateNode,bi=!1;break e;case 3:Ln=u.stateNode.containerInfo,bi=!0;break e;case 4:Ln=u.stateNode.containerInfo,bi=!0;break e}u=u.return}if(Ln===null)throw Error(ae(160));$k(s,o,i),Ln=null,bi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){qt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wk(e,t),e=e.sibling}function Wk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pi(e,t),Gi(t),r&4){try{Ph(3,t,t.return),My(3,t)}catch(D){qt(t,t.return,D)}try{Ph(5,t,t.return)}catch(D){qt(t,t.return,D)}}break;case 1:Pi(e,t),Gi(t),r&512&&n!==null&&Jl(n,n.return);break;case 5:if(Pi(e,t),Gi(t),r&512&&n!==null&&Jl(n,n.return),t.flags&32){var i=t.stateNode;try{jh(i,"")}catch(D){qt(t,t.return,D)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&hx(i,s),g0(u,o);var h=g0(u,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?yx(i,m):p==="dangerouslySetInnerHTML"?mx(i,m):p==="children"?jh(i,m):lT(i,p,m,h)}switch(u){case"input":d0(i,s);break;case"textarea":fx(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var I=s.value;I!=null?nc(i,!!s.multiple,I,!1):_!==!!s.multiple&&(s.defaultValue!=null?nc(i,!!s.multiple,s.defaultValue,!0):nc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qh]=s}catch(D){qt(t,t.return,D)}}break;case 6:if(Pi(e,t),Gi(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(D){qt(t,t.return,D)}}break;case 3:if(Pi(e,t),Gi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wh(e.containerInfo)}catch(D){qt(t,t.return,D)}break;case 4:Pi(e,t),Gi(t);break;case 13:Pi(e,t),Gi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zT=en())),r&4&&WA(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qn=(h=Qn)||p,Pi(e,t),Qn=h):Pi(e,t),Gi(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Te=t,p=t.child;p!==null;){for(m=Te=p;Te!==null;){switch(_=Te,I=_.child,_.tag){case 0:case 11:case 14:case 15:Ph(4,_,_.return);break;case 1:Jl(_,_.return);var T=_.stateNode;if(typeof T.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(D){qt(r,n,D)}}break;case 5:Jl(_,_.return);break;case 22:if(_.memoizedState!==null){GA(m);continue}}I!==null?(I.return=_,Te=I):GA(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=gx("display",o))}catch(D){qt(t,t.return,D)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(D){qt(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Pi(e,t),Gi(t),r&4&&WA(t);break;case 21:break;default:Pi(e,t),Gi(t)}}function Gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zk(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(jh(i,""),r.flags&=-33);var s=$A(t);G0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=$A(t);q0(t,u,o);break;default:throw Error(ae(161))}}catch(c){qt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function c$(t,e,n){Te=t,qk(t)}function qk(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var i=Te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fm;if(!o){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Qn;u=Fm;var h=Qn;if(Fm=o,(Qn=c)&&!h)for(Te=i;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?KA(i):c!==null?(c.return=o,Te=c):KA(i);for(;s!==null;)Te=s,qk(s),s=s.sibling;Te=i,Fm=u,Qn=h}qA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Te=s):qA(t)}}function qA(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||My(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ci(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bA(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Wh(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Qn||e.flags&512&&W0(e)}catch(_){qt(e,e.return,_)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function GA(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function KA(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{My(4,e)}catch(c){qt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){qt(e,i,c)}}var s=e.return;try{W0(e)}catch(c){qt(e,s,c)}break;case 5:var o=e.return;try{W0(e)}catch(c){qt(e,o,c)}}}catch(c){qt(e,e.return,c)}if(e===t){Te=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Te=u;break}Te=e.return}}var d$=Math.ceil,Wg=Xs.ReactCurrentDispatcher,jT=Xs.ReactCurrentOwner,hi=Xs.ReactCurrentBatchConfig,ot=0,Cn=null,ln=null,Fn=0,Mr=0,Xl=fa(0),yn=0,tf=null,Ru=0,Vy=0,BT=0,Ch=null,Tr=null,zT=0,Ec=1/0,ks=null,qg=!1,K0=null,qo=null,Um=!1,Lo=null,Gg=0,bh=0,H0=null,ag=-1,ug=0;function ar(){return ot&6?en():ag!==-1?ag:ag=en()}function Go(t){return t.mode&1?ot&2&&Fn!==0?Fn&-Fn:Hz.transition!==null?(ug===0&&(ug=bx()),ug):(t=_t,t!==0||(t=window.event,t=t===void 0?16:Mx(t.type)),t):1}function Di(t,e,n,r){if(50<bh)throw bh=0,H0=null,Error(ae(185));Df(t,n,r),(!(ot&2)||t!==Cn)&&(t===Cn&&(!(ot&2)&&(Vy|=n),yn===4&&ko(t,Fn)),br(t,r),n===1&&ot===0&&!(e.mode&1)&&(Ec=en()+500,Oy&&pa()))}function br(t,e){var n=t.callbackNode;H3(t,e);var r=bg(t,t===Cn?Fn:0);if(r===0)n!==null&&nA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nA(n),e===1)t.tag===0?Kz(HA.bind(null,t)):tk(HA.bind(null,t)),$z(function(){!(ot&6)&&pa()}),n=null;else{switch(xx(r)){case 1:n=pT;break;case 4:n=Px;break;case 16:n=Cg;break;case 536870912:n=Cx;break;default:n=Cg}n=Zk(n,Gk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gk(t,e){if(ag=-1,ug=0,ot&6)throw Error(ae(327));var n=t.callbackNode;if(ac()&&t.callbackNode!==n)return null;var r=bg(t,t===Cn?Fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kg(t,r);else{e=r;var i=ot;ot|=2;var s=Hk();(Cn!==t||Fn!==e)&&(ks=null,Ec=en()+500,fu(t,e));do try{p$();break}catch(u){Kk(t,u)}while(!0);PT(),Wg.current=s,ot=i,ln!==null?e=0:(Cn=null,Fn=0,e=yn)}if(e!==0){if(e===2&&(i=E0(t),i!==0&&(r=i,e=Q0(t,i))),e===1)throw n=tf,fu(t,0),ko(t,r),br(t,en()),n;if(e===6)ko(t,r);else{if(i=t.current.alternate,!(r&30)&&!h$(i)&&(e=Kg(t,r),e===2&&(s=E0(t),s!==0&&(r=s,e=Q0(t,s))),e===1))throw n=tf,fu(t,0),ko(t,r),br(t,en()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Ka(t,Tr,ks);break;case 3:if(ko(t,r),(r&130023424)===r&&(e=zT+500-en(),10<e)){if(bg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ar(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=b0(Ka.bind(null,t,Tr,ks),e);break}Ka(t,Tr,ks);break;case 4:if(ko(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Oi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=en()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d$(r/1960))-r,10<r){t.timeoutHandle=b0(Ka.bind(null,t,Tr,ks),r);break}Ka(t,Tr,ks);break;case 5:Ka(t,Tr,ks);break;default:throw Error(ae(329))}}}return br(t,en()),t.callbackNode===n?Gk.bind(null,t):null}function Q0(t,e){var n=Ch;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),t=Kg(t,e),t!==2&&(e=Tr,Tr=n,e!==null&&Y0(e)),t}function Y0(t){Tr===null?Tr=t:Tr.push.apply(Tr,t)}function h$(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Li(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ko(t,e){for(e&=~BT,e&=~Vy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Oi(e),r=1<<n;t[n]=-1,e&=~r}}function HA(t){if(ot&6)throw Error(ae(327));ac();var e=bg(t,0);if(!(e&1))return br(t,en()),null;var n=Kg(t,e);if(t.tag!==0&&n===2){var r=E0(t);r!==0&&(e=r,n=Q0(t,r))}if(n===1)throw n=tf,fu(t,0),ko(t,e),br(t,en()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ka(t,Tr,ks),br(t,en()),null}function $T(t,e){var n=ot;ot|=1;try{return t(e)}finally{ot=n,ot===0&&(Ec=en()+500,Oy&&pa())}}function Au(t){Lo!==null&&Lo.tag===0&&!(ot&6)&&ac();var e=ot;ot|=1;var n=hi.transition,r=_t;try{if(hi.transition=null,_t=1,t)return t()}finally{_t=r,hi.transition=n,ot=e,!(ot&6)&&pa()}}function WT(){Mr=Xl.current,xt(Xl)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zz(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(ST(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dg();break;case 3:vc(),xt(Pr),xt(Jn),OT();break;case 5:NT(r);break;case 4:vc();break;case 13:xt(Ft);break;case 19:xt(Ft);break;case 10:CT(r.type._context);break;case 22:case 23:WT()}n=n.return}if(Cn=t,ln=t=Ko(t.current,null),Fn=Mr=e,yn=0,tf=null,BT=Vy=Ru=0,Tr=Ch=null,ou!==null){for(e=0;e<ou.length;e++)if(n=ou[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ou=null}return t}function Kk(t,e){do{var n=ln;try{if(PT(),ig.current=$g,zg){for(var r=Ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zg=!1}if(Su=0,An=mn=Ut=null,Ah=!1,Xh=0,jT.current=null,n===null||n.return===null){yn=1,tf=e,ln=null;break}e:{var s=t,o=n.return,u=n,c=e;if(e=Fn,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=LA(o);if(I!==null){I.flags&=-257,MA(I,o,u,s,e),I.mode&1&&DA(s,h,e),e=I,c=h;var T=e.updateQueue;if(T===null){var D=new Set;D.add(c),e.updateQueue=D}else T.add(c);break e}else{if(!(e&1)){DA(s,h,e),qT();break e}c=Error(ae(426))}}else if(Ot&&u.mode&1){var O=LA(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),MA(O,o,u,s,e),RT(wc(c,u));break e}}s=c=wc(c,u),yn!==4&&(yn=2),Ch===null?Ch=[s]:Ch.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=xk(s,c,e);CA(s,k);break e;case 1:u=c;var P=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof P.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(qo===null||!qo.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var U=kk(s,u,e);CA(s,U);break e}}s=s.return}while(s!==null)}Yk(n)}catch(q){e=q,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function Hk(){var t=Wg.current;return Wg.current=$g,t===null?$g:t}function qT(){(yn===0||yn===3||yn===2)&&(yn=4),Cn===null||!(Ru&268435455)&&!(Vy&268435455)||ko(Cn,Fn)}function Kg(t,e){var n=ot;ot|=2;var r=Hk();(Cn!==t||Fn!==e)&&(ks=null,fu(t,e));do try{f$();break}catch(i){Kk(t,i)}while(!0);if(PT(),ot=n,Wg.current=r,ln!==null)throw Error(ae(261));return Cn=null,Fn=0,yn}function f$(){for(;ln!==null;)Qk(ln)}function p$(){for(;ln!==null&&!U3();)Qk(ln)}function Qk(t){var e=Xk(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?Yk(t):ln=e,jT.current=null}function Yk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a$(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yn=6,ln=null;return}}else if(n=o$(n,e,Mr),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);yn===0&&(yn=5)}function Ka(t,e,n){var r=_t,i=hi.transition;try{hi.transition=null,_t=1,m$(t,e,n,r)}finally{hi.transition=i,_t=r}return null}function m$(t,e,n,r){do ac();while(Lo!==null);if(ot&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Q3(t,s),t===Cn&&(ln=Cn=null,Fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Um||(Um=!0,Zk(Cg,function(){return ac(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=_t;_t=1;var u=ot;ot|=4,jT.current=null,l$(t,n),Wk(n,t),Lz(P0),xg=!!A0,P0=A0=null,t.current=n,c$(n),j3(),ot=u,_t=o,hi.transition=s}else t.current=n;if(Um&&(Um=!1,Lo=t,Gg=i),s=t.pendingLanes,s===0&&(qo=null),$3(n.stateNode),br(t,en()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qg)throw qg=!1,t=K0,K0=null,t;return Gg&1&&t.tag!==0&&ac(),s=t.pendingLanes,s&1?t===H0?bh++:(bh=0,H0=t):bh=0,pa(),null}function ac(){if(Lo!==null){var t=xx(Gg),e=hi.transition,n=_t;try{if(hi.transition=null,_t=16>t?16:t,Lo===null)var r=!1;else{if(t=Lo,Lo=null,Gg=0,ot&6)throw Error(ae(331));var i=ot;for(ot|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Te=h;Te!==null;){var p=Te;switch(p.tag){case 0:case 11:case 15:Ph(8,p,s)}var m=p.child;if(m!==null)m.return=p,Te=m;else for(;Te!==null;){p=Te;var _=p.sibling,I=p.return;if(Bk(p),p===h){Te=null;break}if(_!==null){_.return=I,Te=_;break}Te=I}}}var T=s.alternate;if(T!==null){var D=T.child;if(D!==null){T.child=null;do{var O=D.sibling;D.sibling=null,D=O}while(D!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ph(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,Te=k;break e}Te=s.return}}var P=t.current;for(Te=P;Te!==null;){o=Te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Te=S;else e:for(o=P;Te!==null;){if(u=Te,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:My(9,u)}}catch(q){qt(u,u.return,q)}if(u===o){Te=null;break e}var U=u.sibling;if(U!==null){U.return=u.return,Te=U;break e}Te=u.return}}if(ot=i,pa(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Cy,t)}catch{}r=!0}return r}finally{_t=n,hi.transition=e}}return!1}function QA(t,e,n){e=wc(n,e),e=xk(t,e,1),t=Wo(t,e,1),e=ar(),t!==null&&(Df(t,1,e),br(t,e))}function qt(t,e,n){if(t.tag===3)QA(t,t,n);else for(;e!==null;){if(e.tag===3){QA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qo===null||!qo.has(r))){t=wc(n,t),t=kk(e,t,1),e=Wo(e,t,1),t=ar(),e!==null&&(Df(e,1,t),br(e,t));break}}e=e.return}}function g$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ar(),t.pingedLanes|=t.suspendedLanes&n,Cn===t&&(Fn&n)===n&&(yn===4||yn===3&&(Fn&130023424)===Fn&&500>en()-zT?fu(t,0):BT|=n),br(t,e)}function Jk(t,e){e===0&&(t.mode&1?(e=bm,bm<<=1,!(bm&130023424)&&(bm=4194304)):e=1);var n=ar();t=Ws(t,e),t!==null&&(Df(t,e,n),br(t,n))}function y$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jk(t,n)}function _$(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),Jk(t,n)}var Xk;Xk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pr.current)Ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ir=!1,s$(t,e,n);Ir=!!(t.flags&131072)}else Ir=!1,Ot&&e.flags&1048576&&nk(e,Vg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;og(t,e),t=e.pendingProps;var i=gc(e,Jn.current);oc(e,n),i=LT(null,e,r,t,i,n);var s=MT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cr(r)?(s=!0,Lg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xT(e),i.updater=Ly,e.stateNode=i,i._reactInternals=e,M0(e,r,t,n),e=U0(null,e,r,!0,s,n)):(e.tag=0,Ot&&s&&IT(e),ir(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(og(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=w$(r),t=Ci(r,t),i){case 0:e=F0(null,e,r,t,n);break e;case 1:e=UA(null,e,r,t,n);break e;case 11:e=VA(null,e,r,t,n);break e;case 14:e=FA(null,e,r,Ci(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),F0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),UA(t,e,r,i,n);case 3:e:{if(Lk(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uk(t,e),jg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=wc(Error(ae(423)),e),e=jA(t,e,r,n,i);break e}else if(r!==i){i=wc(Error(ae(424)),e),e=jA(t,e,r,n,i);break e}else for(Fr=$o(e.stateNode.containerInfo.firstChild),jr=e,Ot=!0,xi=null,n=ok(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yc(),r===i){e=qs(t,e,n);break e}ir(t,e,r,n)}e=e.child}return e;case 5:return lk(e),t===null&&O0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,C0(r,i)?o=null:s!==null&&C0(r,s)&&(e.flags|=32),Dk(t,e),ir(t,e,o,n),e.child;case 6:return t===null&&O0(e),null;case 13:return Mk(t,e,n);case 4:return kT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_c(e,null,r,n):ir(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),VA(t,e,r,i,n);case 7:return ir(t,e,e.pendingProps,n),e.child;case 8:return ir(t,e,e.pendingProps.children,n),e.child;case 12:return ir(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,St(Fg,r._currentValue),r._currentValue=o,s!==null)if(Li(s.value,o)){if(s.children===i.children&&!Pr.current){e=qs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=js(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),D0(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),D0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ir(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oc(e,n),i=mi(i),r=r(i),e.flags|=1,ir(t,e,r,n),e.child;case 14:return r=e.type,i=Ci(r,e.pendingProps),i=Ci(r.type,i),FA(t,e,r,i,n);case 15:return Nk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ci(r,i),og(t,e),e.tag=1,Cr(r)?(t=!0,Lg(e)):t=!1,oc(e,n),bk(e,r,i),M0(e,r,i,n),U0(null,e,r,!0,t,n);case 19:return Vk(t,e,n);case 22:return Ok(t,e,n)}throw Error(ae(156,e.tag))};function Zk(t,e){return Ax(t,e)}function v$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(t,e,n,r){return new v$(t,e,n,r)}function GT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w$(t){if(typeof t=="function")return GT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dT)return 11;if(t===hT)return 14}return 2}function Ko(t,e){var n=t.alternate;return n===null?(n=ci(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")GT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zl:return pu(n.children,i,s,e);case cT:o=8,i|=8;break;case o0:return t=ci(12,n,e,i|2),t.elementType=o0,t.lanes=s,t;case a0:return t=ci(13,n,e,i),t.elementType=a0,t.lanes=s,t;case u0:return t=ci(19,n,e,i),t.elementType=u0,t.lanes=s,t;case lx:return Fy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ax:o=10;break e;case ux:o=9;break e;case dT:o=11;break e;case hT:o=14;break e;case Po:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=ci(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pu(t,e,n,r){return t=ci(7,t,r,e),t.lanes=n,t}function Fy(t,e,n,r){return t=ci(22,t,r,e),t.elementType=lx,t.lanes=n,t.stateNode={isHidden:!1},t}function Tw(t,e,n){return t=ci(6,t,null,e),t.lanes=n,t}function Iw(t,e,n){return e=ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function E$(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rw(0),this.expirationTimes=rw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KT(t,e,n,r,i,s,o,u,c){return t=new E$(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ci(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xT(s),t}function T$(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eN(t){if(!t)return Xo;t=t._reactInternals;e:{if(zu(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Cr(n))return ek(t,n,e)}return e}function tN(t,e,n,r,i,s,o,u,c){return t=KT(n,r,!0,t,i,s,o,u,c),t.context=eN(null),n=t.current,r=ar(),i=Go(n),s=js(r,i),s.callback=e??null,Wo(n,s,i),t.current.lanes=i,Df(t,i,r),br(t,r),t}function Uy(t,e,n,r){var i=e.current,s=ar(),o=Go(i);return n=eN(n),e.context===null?e.context=n:e.pendingContext=n,e=js(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wo(i,e,o),t!==null&&(Di(t,i,o,s),rg(t,i,o)),o}function Hg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function HT(t,e){YA(t,e),(t=t.alternate)&&YA(t,e)}function I$(){return null}var nN=typeof reportError=="function"?reportError:function(t){console.error(t)};function QT(t){this._internalRoot=t}jy.prototype.render=QT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Uy(t,e,null,null)};jy.prototype.unmount=QT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Au(function(){Uy(null,t,null,null)}),e[$s]=null}};function jy(t){this._internalRoot=t}jy.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ox();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xo.length&&e!==0&&e<xo[n].priority;n++);xo.splice(n,0,t),n===0&&Lx(t)}};function YT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function By(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JA(){}function S$(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Hg(o);s.call(h)}}var o=tN(e,r,t,0,null,!1,!1,"",JA);return t._reactRootContainer=o,t[$s]=o.current,Kh(t.nodeType===8?t.parentNode:t),Au(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=Hg(c);u.call(h)}}var c=KT(t,0,!1,null,null,!1,!1,"",JA);return t._reactRootContainer=c,t[$s]=c.current,Kh(t.nodeType===8?t.parentNode:t),Au(function(){Uy(e,c,n,r)}),c}function zy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var c=Hg(o);u.call(c)}}Uy(e,o,t,i)}else o=S$(n,e,t,i,r);return Hg(o)}kx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dh(e.pendingLanes);n!==0&&(mT(e,n|1),br(e,en()),!(ot&6)&&(Ec=en()+500,pa()))}break;case 13:Au(function(){var r=Ws(t,1);if(r!==null){var i=ar();Di(r,t,1,i)}}),HT(t,1)}};gT=function(t){if(t.tag===13){var e=Ws(t,134217728);if(e!==null){var n=ar();Di(e,t,134217728,n)}HT(t,134217728)}};Nx=function(t){if(t.tag===13){var e=Go(t),n=Ws(t,e);if(n!==null){var r=ar();Di(n,t,e,r)}HT(t,e)}};Ox=function(){return _t};Dx=function(t,e){var n=_t;try{return _t=t,e()}finally{_t=n}};_0=function(t,e,n){switch(e){case"input":if(d0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ny(r);if(!i)throw Error(ae(90));dx(r),d0(r,i)}}}break;case"textarea":fx(t,n);break;case"select":e=n.value,e!=null&&nc(t,!!n.multiple,e,!1)}};wx=$T;Ex=Au;var R$={usingClientEntryPoint:!1,Events:[Mf,Gl,Ny,_x,vx,$T]},Zd={findFiberByHostInstance:su,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A$={bundleType:Zd.bundleType,version:Zd.version,rendererPackageName:Zd.rendererPackageName,rendererConfig:Zd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sx(t),t===null?null:t.stateNode},findFiberByHostInstance:Zd.findFiberByHostInstance||I$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{Cy=jm.inject(A$),rs=jm}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R$;Kr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YT(e))throw Error(ae(200));return T$(t,e,null,n)};Kr.createRoot=function(t,e){if(!YT(t))throw Error(ae(299));var n=!1,r="",i=nN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=KT(t,1,!1,null,null,n,!1,r,i),t[$s]=e.current,Kh(t.nodeType===8?t.parentNode:t),new QT(e)};Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=Sx(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t){return Au(t)};Kr.hydrate=function(t,e,n){if(!By(e))throw Error(ae(200));return zy(null,t,e,!0,n)};Kr.hydrateRoot=function(t,e,n){if(!YT(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tN(e,null,t,1,n??null,i,!1,s,o),t[$s]=e.current,Kh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new jy(e)};Kr.render=function(t,e,n){if(!By(e))throw Error(ae(200));return zy(null,t,e,!1,n)};Kr.unmountComponentAtNode=function(t){if(!By(t))throw Error(ae(40));return t._reactRootContainer?(Au(function(){zy(null,null,t,!1,function(){t._reactRootContainer=null,t[$s]=null})}),!0):!1};Kr.unstable_batchedUpdates=$T;Kr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!By(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return zy(t,e,n,!1,r)};Kr.version="18.3.1-next-f1338f8080-20240426";function rN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rN)}catch(t){console.error(t)}}rN(),rx.exports=Kr;var iN=rx.exports;const Zl=Nf(iN);var sN,XA=iN;sN=XA.createRoot,XA.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nf.apply(this,arguments)}var Mo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mo||(Mo={}));const ZA="popstate";function P$(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:u}=r.location;return J0("",{pathname:s,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qg(i)}return b$(e,n,null,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function C$(){return Math.random().toString(36).substr(2,8)}function eP(t,e){return{usr:t.state,key:t.key,idx:e}}function J0(t,e,n,r){return n===void 0&&(n=null),nf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qc(e):e,{state:n,key:e&&e.key||r||C$()})}function Qg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function b$(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,u=Mo.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(nf({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){u=Mo.Pop;let O=p(),k=O==null?null:O-h;h=O,c&&c({action:u,location:D.location,delta:k})}function _(O,k){u=Mo.Push;let P=J0(D.location,O,k);h=p()+1;let S=eP(P,h),U=D.createHref(P);try{o.pushState(S,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(U)}s&&c&&c({action:u,location:D.location,delta:1})}function I(O,k){u=Mo.Replace;let P=J0(D.location,O,k);h=p();let S=eP(P,h),U=D.createHref(P);o.replaceState(S,"",U),s&&c&&c({action:u,location:D.location,delta:0})}function T(O){let k=i.location.origin!=="null"?i.location.origin:i.location.href,P=typeof O=="string"?O:Qg(O);return P=P.replace(/ $/,"%20"),cn(k,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,k)}let D={get action(){return u},get location(){return t(i,o)},listen(O){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ZA,m),c=O,()=>{i.removeEventListener(ZA,m),c=null}},createHref(O){return e(i,O)},createURL:T,encodeLocation(O){let k=T(O);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:I,go(O){return o.go(O)}};return D}var tP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tP||(tP={}));function x$(t,e,n){return n===void 0&&(n="/"),k$(t,e,n,!1)}function k$(t,e,n,r){let i=typeof e=="string"?qc(e):e,s=JT(i.pathname||"/",n);if(s==null)return null;let o=aN(t);N$(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let h=$$(s);u=B$(o[c],h,r)}return u}function aN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(cn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=Ho([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(cn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),aN(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:U$(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,o);else for(let c of uN(s.path))i(s,o,c)}),e}function uN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uN(r.join("/")),u=[];return u.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function N$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const O$=/^:[\w-]+$/,D$=3,L$=2,M$=1,V$=10,F$=-2,nP=t=>t==="*";function U$(t,e){let n=t.split("/"),r=n.length;return n.some(nP)&&(r+=F$),e&&(r+=L$),n.filter(i=>!nP(i)).reduce((i,s)=>i+(O$.test(s)?D$:s===""?M$:V$),r)}function j$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function B$(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=rP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),_=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=rP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ho([s,m.pathname]),pathnameBase:K$(Ho([s,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(s=Ho([s,m.pathnameBase]))}return o}function rP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=z$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:_,isOptional:I}=p;if(_==="*"){let D=u[m]||"";o=s.slice(0,s.length-D.length).replace(/(.)\/+$/,"$1")}const T=u[m];return I&&!T?h[_]=void 0:h[_]=(T||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function z$(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),oN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function JT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function W$(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?qc(t):t;return{pathname:n?n.startsWith("/")?n:q$(n,e):e,search:H$(r),hash:Q$(i)}}function q$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lN(t,e){let n=G$(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=qc(t):(i=nf({},t),cn(!i.pathname||!i.pathname.includes("?"),Sw("?","pathname","search",i)),cn(!i.pathname||!i.pathname.includes("#"),Sw("#","pathname","hash",i)),cn(!i.search||!i.search.includes("#"),Sw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,u;if(o==null)u=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),m-=1;i.pathname=_.join("/")}u=m>=0?e[m]:"/"}let c=W$(i,u),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const Ho=t=>t.join("/").replace(/\/\/+/g,"/"),K$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Q$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Y$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const dN=["post","put","patch","delete"];new Set(dN);const J$=["get",...dN];new Set(J$);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(this,arguments)}const XT=z.createContext(null),X$=z.createContext(null),$u=z.createContext(null),$y=z.createContext(null),ma=z.createContext({outlet:null,matches:[],isDataRoute:!1}),hN=z.createContext(null);function Z$(t,e){let{relative:n}=e===void 0?{}:e;Ff()||cn(!1);let{basename:r,navigator:i}=z.useContext($u),{hash:s,pathname:o,search:u}=mN(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ho([r,o])),i.createHref({pathname:c,search:u,hash:s})}function Ff(){return z.useContext($y)!=null}function Wy(){return Ff()||cn(!1),z.useContext($y).location}function fN(t){z.useContext($u).static||z.useLayoutEffect(t)}function pN(){let{isDataRoute:t}=z.useContext(ma);return t?f9():e9()}function e9(){Ff()||cn(!1);let t=z.useContext(XT),{basename:e,future:n,navigator:r}=z.useContext($u),{matches:i}=z.useContext(ma),{pathname:s}=Wy(),o=JSON.stringify(lN(i,n.v7_relativeSplatPath)),u=z.useRef(!1);return fN(()=>{u.current=!0}),z.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let m=cN(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ho([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function t9(){let{matches:t}=z.useContext(ma),e=t[t.length-1];return e?e.params:{}}function mN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=z.useContext($u),{matches:i}=z.useContext(ma),{pathname:s}=Wy(),o=JSON.stringify(lN(i,r.v7_relativeSplatPath));return z.useMemo(()=>cN(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function n9(t,e){return r9(t,e)}function r9(t,e,n,r){Ff()||cn(!1);let{navigator:i}=z.useContext($u),{matches:s}=z.useContext(ma),o=s[s.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Wy(),p;if(e){var m;let O=typeof e=="string"?qc(e):e;c==="/"||(m=O.pathname)!=null&&m.startsWith(c)||cn(!1),p=O}else p=h;let _=p.pathname||"/",I=_;if(c!=="/"){let O=c.replace(/^\//,"").split("/");I="/"+_.replace(/^\//,"").split("/").slice(O.length).join("/")}let T=x$(t,{pathname:I}),D=u9(T&&T.map(O=>Object.assign({},O,{params:Object.assign({},u,O.params),pathname:Ho([c,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?c:Ho([c,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),s,n,r);return e&&D?z.createElement($y.Provider,{value:{location:rf({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Mo.Pop}},D):D}function i9(){let t=h9(),e=Y$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:i},n):null,null)}const s9=z.createElement(i9,null);class o9 extends z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?z.createElement(ma.Provider,{value:this.props.routeContext},z.createElement(hN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a9(t){let{routeContext:e,match:n,children:r}=t,i=z.useContext(XT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement(ma.Provider,{value:e},r)}function u9(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=o.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);p>=0||cn(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:_,errors:I}=n,T=m.route.loader&&_[m.route.id]===void 0&&(!I||I[m.route.id]===void 0);if(m.route.lazy||T){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,_)=>{let I,T=!1,D=null,O=null;n&&(I=u&&m.route.id?u[m.route.id]:void 0,D=m.route.errorElement||s9,c&&(h<0&&_===0?(T=!0,O=null):h===_&&(T=!0,O=m.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,_+1)),P=()=>{let S;return I?S=D:T?S=O:m.route.Component?S=z.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,z.createElement(a9,{match:m,routeContext:{outlet:p,matches:k,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?z.createElement(o9,{location:n.location,revalidation:n.revalidation,component:D,error:I,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}var gN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gN||{}),Yg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yg||{});function l9(t){let e=z.useContext(XT);return e||cn(!1),e}function c9(t){let e=z.useContext(X$);return e||cn(!1),e}function d9(t){let e=z.useContext(ma);return e||cn(!1),e}function yN(t){let e=d9(),n=e.matches[e.matches.length-1];return n.route.id||cn(!1),n.route.id}function h9(){var t;let e=z.useContext(hN),n=c9(Yg.UseRouteError),r=yN(Yg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function f9(){let{router:t}=l9(gN.UseNavigateStable),e=yN(Yg.UseNavigateStable),n=z.useRef(!1);return fN(()=>{n.current=!0}),z.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,rf({fromRouteId:e},s)))},[t,e])}function Ki(t){cn(!1)}function p9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Mo.Pop,navigator:s,static:o=!1,future:u}=t;Ff()&&cn(!1);let c=e.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:c,navigator:s,static:o,future:rf({v7_relativeSplatPath:!1},u)}),[c,u,s,o]);typeof r=="string"&&(r=qc(r));let{pathname:p="/",search:m="",hash:_="",state:I=null,key:T="default"}=r,D=z.useMemo(()=>{let O=JT(p,c);return O==null?null:{location:{pathname:O,search:m,hash:_,state:I,key:T},navigationType:i}},[c,p,m,_,I,T,i]);return D==null?null:z.createElement($u.Provider,{value:h},z.createElement($y.Provider,{children:n,value:D}))}function m9(t){let{children:e,location:n}=t;return n9(X0(e),n)}new Promise(()=>{});function X0(t,e){e===void 0&&(e=[]);let n=[];return z.Children.forEach(t,(r,i)=>{if(!z.isValidElement(r))return;let s=[...e,i];if(r.type===z.Fragment){n.push.apply(n,X0(r.props.children,s));return}r.type!==Ki&&cn(!1),!r.props.index||!r.props.children||cn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=X0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z0.apply(this,arguments)}function g9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function y9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _9(t,e){return t.button===0&&(!e||e==="_self")&&!y9(t)}const v9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],w9="6";try{window.__reactRouterVersion=w9}catch{}const E9="startTransition",iP=i0[E9];function T9(t){let{basename:e,children:n,future:r,window:i}=t,s=z.useRef();s.current==null&&(s.current=P$({window:i,v5Compat:!0}));let o=s.current,[u,c]=z.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=z.useCallback(m=>{h&&iP?iP(()=>c(m)):c(m)},[c,h]);return z.useLayoutEffect(()=>o.listen(p),[o,p]),z.createElement(p9,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const I9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=z.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:u,target:c,to:h,preventScrollReset:p,viewTransition:m}=e,_=g9(e,v9),{basename:I}=z.useContext($u),T,D=!1;if(typeof h=="string"&&S9.test(h)&&(T=h,I9))try{let S=new URL(window.location.href),U=h.startsWith("//")?new URL(S.protocol+h):new URL(h),q=JT(U.pathname,I);U.origin===S.origin&&q!=null?h=q+U.search+U.hash:D=!0}catch{}let O=Z$(h,{relative:i}),k=R9(h,{replace:o,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:m});function P(S){r&&r(S),S.defaultPrevented||k(S)}return z.createElement("a",Z0({},_,{href:T||O,onClick:D||s?r:P,ref:n,target:c}))});var sP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sP||(sP={}));var oP;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oP||(oP={}));function R9(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:u}=e===void 0?{}:e,c=pN(),h=Wy(),p=mN(t,{relative:o});return z.useCallback(m=>{if(_9(m,n)){m.preventDefault();let _=r!==void 0?r:Qg(h)===Qg(p);c(t,{replace:_,state:i,preventScrollReset:s,relative:o,viewTransition:u})}},[h,c,p,r,i,n,t,s,o,u])}var Jg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Jg.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",m=1,_=2,I=4,T=1,D=2,O=1,k=2,P=4,S=8,U=16,q=32,$=64,C=128,R=256,L=512,V=30,j="...",M=800,N=16,fe=1,oe=2,ce=3,de=1/0,Q=9007199254740991,ue=17976931348623157e292,me=NaN,_e=4294967295,Ce=_e-1,Ae=_e>>>1,Ge=[["ary",C],["bind",O],["bindKey",k],["curry",S],["curryRight",U],["flip",L],["partial",q],["partialRight",$],["rearg",R]],Me="[object Arguments]",Ye="[object Array]",mt="[object AsyncFunction]",Jt="[object Boolean]",ve="[object Date]",be="[object DOMException]",xe="[object Error]",ke="[object Function]",nt="[object GeneratorFunction]",lt="[object Map]",Ve="[object Number]",En="[object Null]",At="[object Object]",vi="[object Promise]",Ju="[object Proxy]",wi="[object RegExp]",Bn="[object Set]",fs="[object String]",Fi="[object Symbol]",so="[object Undefined]",Ui="[object WeakMap]",Le="[object WeakSet]",vt="[object ArrayBuffer]",pr="[object DataView]",Xu="[object Float32Array]",Zu="[object Float64Array]",ud="[object Int8Array]",ps="[object Int16Array]",el="[object Int32Array]",tl="[object Uint8Array]",Ia="[object Uint8ClampedArray]",ld="[object Uint16Array]",cd="[object Uint32Array]",dd=/\b__p \+= '';/g,dp=/\b(__p \+=) '' \+/g,hp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oo=/&(?:amp|lt|gt|quot|#39);/g,nl=/[&<>"']/g,hd=RegExp(oo.source),ms=RegExp(nl.source),fp=/<%-([\s\S]+?)%>/g,rl=/<%([\s\S]+?)%>/g,fd=/<%=([\s\S]+?)%>/g,Sa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pp=/^\w*$/,kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,il=/[\\^$.*+?()[\]{}|]/g,Ra=RegExp(il.source),gs=/^\s+/,$_=/\s/,W_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ao=/\{\n\/\* \[wrapped with (.+)\] \*/,q_=/,? & /,G_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sl=/[()=,{}\[\]\/\s]/,mp=/\\(\\)?/g,pd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Aa=/\w*$/,ji=/^[-+]0x[0-9a-f]+$/i,gp=/^0b[01]+$/i,yp=/^\[object .+?Constructor\]$/,md=/^0o[0-7]+$/i,gd=/^(?:0|[1-9]\d*)$/,_p=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pa=/($^)/,K_=/['\n\r\u2028\u2029\\]/g,ys="\\ud800-\\udfff",vp="\\u0300-\\u036f",yd="\\ufe20-\\ufe2f",Ca="\\u20d0-\\u20ff",Bi=vp+yd+Ca,ol="\\u2700-\\u27bf",wp="a-z\\xdf-\\xf6\\xf8-\\xff",Ep="\\xac\\xb1\\xd7\\xf7",Tp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ip="\\u2000-\\u206f",_d=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",al="A-Z\\xc0-\\xd6\\xd8-\\xde",vd="\\ufe0e\\ufe0f",wd=Ep+Tp+Ip+_d,Ed="[']",H_="["+ys+"]",Td="["+wd+"]",ba="["+Bi+"]",Sp="\\d+",_s="["+ol+"]",Qr="["+wp+"]",xa="[^"+ys+wd+Sp+ol+wp+al+"]",uo="\\ud83c[\\udffb-\\udfff]",Rp="(?:"+ba+"|"+uo+")",wt="[^"+ys+"]",lo="(?:\\ud83c[\\udde6-\\uddff]){2}",vs="[\\ud800-\\udbff][\\udc00-\\udfff]",Yr="["+al+"]",Ap="\\u200d",Id="(?:"+Qr+"|"+xa+")",Q_="(?:"+Yr+"|"+xa+")",Pp="(?:"+Ed+"(?:d|ll|m|re|s|t|ve))?",Cp="(?:"+Ed+"(?:D|LL|M|RE|S|T|VE))?",bp=Rp+"?",co="["+vd+"]?",zi="(?:"+Ap+"(?:"+[wt,lo,vs].join("|")+")"+co+bp+")*",xp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sd=co+bp+zi,ho="(?:"+[_s,lo,vs].join("|")+")"+Sd,Y_="(?:"+[wt+ba+"?",ba,lo,vs,H_].join("|")+")",J_=RegExp(Ed,"g"),X_=RegExp(ba,"g"),Jr=RegExp(uo+"(?="+uo+")|"+Y_+Sd,"g"),Z_=RegExp([Yr+"?"+Qr+"+"+Pp+"(?="+[Td,Yr,"$"].join("|")+")",Q_+"+"+Cp+"(?="+[Td,Yr+Id,"$"].join("|")+")",Yr+"?"+Id+"+"+Pp,Yr+"+"+Cp,kp,xp,Sp,ho].join("|"),"g"),ev=RegExp("["+Ap+ys+Bi+vd+"]"),ul=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ll=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Np=-1,ct={};ct[Xu]=ct[Zu]=ct[ud]=ct[ps]=ct[el]=ct[tl]=ct[Ia]=ct[ld]=ct[cd]=!0,ct[Me]=ct[Ye]=ct[vt]=ct[Jt]=ct[pr]=ct[ve]=ct[xe]=ct[ke]=ct[lt]=ct[Ve]=ct[At]=ct[wi]=ct[Bn]=ct[fs]=ct[Ui]=!1;var at={};at[Me]=at[Ye]=at[vt]=at[pr]=at[Jt]=at[ve]=at[Xu]=at[Zu]=at[ud]=at[ps]=at[el]=at[lt]=at[Ve]=at[At]=at[wi]=at[Bn]=at[fs]=at[Fi]=at[tl]=at[Ia]=at[ld]=at[cd]=!0,at[xe]=at[ke]=at[Ui]=!1;var Op={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Rd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nv=parseFloat,Dp=parseInt,Ad=typeof gn=="object"&&gn&&gn.Object===Object&&gn,Lp=typeof self=="object"&&self&&self.Object===Object&&self,$t=Ad||Lp||Function("return this")(),cl=e&&!e.nodeType&&e,Nn=cl&&!0&&t&&!t.nodeType&&t,Pd=Nn&&Nn.exports===cl,Cd=Pd&&Ad.process,Tn=function(){try{var W=Nn&&Nn.require&&Nn.require("util").types;return W||Cd&&Cd.binding&&Cd.binding("util")}catch{}}(),bd=Tn&&Tn.isArrayBuffer,dl=Tn&&Tn.isDate,ka=Tn&&Tn.isMap,xd=Tn&&Tn.isRegExp,Na=Tn&&Tn.isSet,Mp=Tn&&Tn.isTypedArray;function zn(W,ee,Y){switch(Y.length){case 0:return W.call(ee);case 1:return W.call(ee,Y[0]);case 2:return W.call(ee,Y[0],Y[1]);case 3:return W.call(ee,Y[0],Y[1],Y[2])}return W.apply(ee,Y)}function Oa(W,ee,Y,Ee){for(var Fe=-1,ht=W==null?0:W.length;++Fe<ht;){var hn=W[Fe];ee(Ee,hn,Y(hn),W)}return Ee}function Zn(W,ee){for(var Y=-1,Ee=W==null?0:W.length;++Y<Ee&&ee(W[Y],Y,W)!==!1;);return W}function Vp(W,ee){for(var Y=W==null?0:W.length;Y--&&ee(W[Y],Y,W)!==!1;);return W}function hl(W,ee){for(var Y=-1,Ee=W==null?0:W.length;++Y<Ee;)if(!ee(W[Y],Y,W))return!1;return!0}function Xr(W,ee){for(var Y=-1,Ee=W==null?0:W.length,Fe=0,ht=[];++Y<Ee;){var hn=W[Y];ee(hn,Y,W)&&(ht[Fe++]=hn)}return ht}function Da(W,ee){var Y=W==null?0:W.length;return!!Y&&ws(W,ee,0)>-1}function fo(W,ee,Y){for(var Ee=-1,Fe=W==null?0:W.length;++Ee<Fe;)if(Y(ee,W[Ee]))return!0;return!1}function Tt(W,ee){for(var Y=-1,Ee=W==null?0:W.length,Fe=Array(Ee);++Y<Ee;)Fe[Y]=ee(W[Y],Y,W);return Fe}function Ei(W,ee){for(var Y=-1,Ee=ee.length,Fe=W.length;++Y<Ee;)W[Fe+Y]=ee[Y];return W}function Ti(W,ee,Y,Ee){var Fe=-1,ht=W==null?0:W.length;for(Ee&&ht&&(Y=W[++Fe]);++Fe<ht;)Y=ee(Y,W[Fe],Fe,W);return Y}function Fp(W,ee,Y,Ee){var Fe=W==null?0:W.length;for(Ee&&Fe&&(Y=W[--Fe]);Fe--;)Y=ee(Y,W[Fe],Fe,W);return Y}function fl(W,ee){for(var Y=-1,Ee=W==null?0:W.length;++Y<Ee;)if(ee(W[Y],Y,W))return!0;return!1}var Up=v("length");function jp(W){return W.split("")}function pl(W){return W.match(G_)||[]}function $n(W,ee,Y){var Ee;return Y(W,function(Fe,ht,hn){if(ee(Fe,ht,hn))return Ee=ht,!1}),Ee}function La(W,ee,Y,Ee){for(var Fe=W.length,ht=Y+(Ee?1:-1);Ee?ht--:++ht<Fe;)if(ee(W[ht],ht,W))return ht;return-1}function ws(W,ee,Y){return ee===ee?UV(W,ee,Y):La(W,d,Y)}function po(W,ee,Y,Ee){for(var Fe=Y-1,ht=W.length;++Fe<ht;)if(Ee(W[Fe],ee))return Fe;return-1}function d(W){return W!==W}function g(W,ee){var Y=W==null?0:W.length;return Y?he(W,ee)/Y:me}function v(W){return function(ee){return ee==null?n:ee[W]}}function b(W){return function(ee){return W==null?n:W[ee]}}function K(W,ee,Y,Ee,Fe){return Fe(W,function(ht,hn,It){Y=Ee?(Ee=!1,ht):ee(Y,ht,hn,It)}),Y}function X(W,ee){var Y=W.length;for(W.sort(ee);Y--;)W[Y]=W[Y].value;return W}function he(W,ee){for(var Y,Ee=-1,Fe=W.length;++Ee<Fe;){var ht=ee(W[Ee]);ht!==n&&(Y=Y===n?ht:Y+ht)}return Y}function dt(W,ee){for(var Y=-1,Ee=Array(W);++Y<W;)Ee[Y]=ee(Y);return Ee}function dn(W,ee){return Tt(ee,function(Y){return[Y,W[Y]]})}function et(W){return W&&W.slice(0,eR(W)+1).replace(gs,"")}function ft(W){return function(ee){return W(ee)}}function on(W,ee){return Tt(ee,function(Y){return W[Y]})}function Zr(W,ee){return W.has(ee)}function mr(W,ee){for(var Y=-1,Ee=W.length;++Y<Ee&&ws(ee,W[Y],0)>-1;);return Y}function Ma(W,ee){for(var Y=W.length;Y--&&ws(ee,W[Y],0)>-1;);return Y}function kd(W,ee){for(var Y=W.length,Ee=0;Y--;)W[Y]===ee&&++Ee;return Ee}var NV=b(Op),OV=b(Rd);function DV(W){return"\\"+tv[W]}function LV(W,ee){return W==null?n:W[ee]}function ml(W){return ev.test(W)}function MV(W){return ul.test(W)}function VV(W){for(var ee,Y=[];!(ee=W.next()).done;)Y.push(ee.value);return Y}function rv(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Ee,Fe){Y[++ee]=[Fe,Ee]}),Y}function ZS(W,ee){return function(Y){return W(ee(Y))}}function mo(W,ee){for(var Y=-1,Ee=W.length,Fe=0,ht=[];++Y<Ee;){var hn=W[Y];(hn===ee||hn===p)&&(W[Y]=p,ht[Fe++]=Y)}return ht}function Bp(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Ee){Y[++ee]=Ee}),Y}function FV(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Ee){Y[++ee]=[Ee,Ee]}),Y}function UV(W,ee,Y){for(var Ee=Y-1,Fe=W.length;++Ee<Fe;)if(W[Ee]===ee)return Ee;return-1}function jV(W,ee,Y){for(var Ee=Y+1;Ee--;)if(W[Ee]===ee)return Ee;return Ee}function gl(W){return ml(W)?zV(W):Up(W)}function Ii(W){return ml(W)?$V(W):jp(W)}function eR(W){for(var ee=W.length;ee--&&$_.test(W.charAt(ee)););return ee}var BV=b(kt);function zV(W){for(var ee=Jr.lastIndex=0;Jr.test(W);)++ee;return ee}function $V(W){return W.match(Jr)||[]}function WV(W){return W.match(Z_)||[]}var qV=function W(ee){ee=ee==null?$t:yl.defaults($t.Object(),ee,yl.pick($t,ll));var Y=ee.Array,Ee=ee.Date,Fe=ee.Error,ht=ee.Function,hn=ee.Math,It=ee.Object,iv=ee.RegExp,GV=ee.String,ei=ee.TypeError,zp=Y.prototype,KV=ht.prototype,_l=It.prototype,$p=ee["__core-js_shared__"],Wp=KV.toString,gt=_l.hasOwnProperty,HV=0,tR=function(){var a=/[^.]+$/.exec($p&&$p.keys&&$p.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),qp=_l.toString,QV=Wp.call(It),YV=$t._,JV=iv("^"+Wp.call(gt).replace(il,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gp=Pd?ee.Buffer:n,go=ee.Symbol,Kp=ee.Uint8Array,nR=Gp?Gp.allocUnsafe:n,Hp=ZS(It.getPrototypeOf,It),rR=It.create,iR=_l.propertyIsEnumerable,Qp=zp.splice,sR=go?go.isConcatSpreadable:n,Nd=go?go.iterator:n,Va=go?go.toStringTag:n,Yp=function(){try{var a=za(It,"defineProperty");return a({},"",{}),a}catch{}}(),XV=ee.clearTimeout!==$t.clearTimeout&&ee.clearTimeout,ZV=Ee&&Ee.now!==$t.Date.now&&Ee.now,eF=ee.setTimeout!==$t.setTimeout&&ee.setTimeout,Jp=hn.ceil,Xp=hn.floor,sv=It.getOwnPropertySymbols,tF=Gp?Gp.isBuffer:n,oR=ee.isFinite,nF=zp.join,rF=ZS(It.keys,It),fn=hn.max,Wn=hn.min,iF=Ee.now,sF=ee.parseInt,aR=hn.random,oF=zp.reverse,ov=za(ee,"DataView"),Od=za(ee,"Map"),av=za(ee,"Promise"),vl=za(ee,"Set"),Dd=za(ee,"WeakMap"),Ld=za(It,"create"),Zp=Dd&&new Dd,wl={},aF=$a(ov),uF=$a(Od),lF=$a(av),cF=$a(vl),dF=$a(Dd),em=go?go.prototype:n,Md=em?em.valueOf:n,uR=em?em.toString:n;function A(a){if(Wt(a)&&!je(a)&&!(a instanceof Je)){if(a instanceof ti)return a;if(gt.call(a,"__wrapped__"))return l1(a)}return new ti(a)}var El=function(){function a(){}return function(l){if(!Vt(l))return{};if(rR)return rR(l);a.prototype=l;var f=new a;return a.prototype=n,f}}();function tm(){}function ti(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}A.templateSettings={escape:fp,evaluate:rl,interpolate:fd,variable:"",imports:{_:A}},A.prototype=tm.prototype,A.prototype.constructor=A,ti.prototype=El(tm.prototype),ti.prototype.constructor=ti;function Je(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function hF(){var a=new Je(this.__wrapped__);return a.__actions__=gr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=gr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=gr(this.__views__),a}function fF(){if(this.__filtered__){var a=new Je(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function pF(){var a=this.__wrapped__.value(),l=this.__dir__,f=je(a),y=l<0,E=f?a.length:0,x=A2(0,E,this.__views__),F=x.start,B=x.end,G=B-F,te=y?B:F-1,ne=this.__iteratees__,ie=ne.length,ye=0,Se=Wn(G,this.__takeCount__);if(!f||!y&&E==G&&Se==G)return NR(a,this.__actions__);var Oe=[];e:for(;G--&&ye<Se;){te+=l;for(var We=-1,De=a[te];++We<ie;){var Ke=ne[We],tt=Ke.iteratee,Dr=Ke.type,nr=tt(De);if(Dr==oe)De=nr;else if(!nr){if(Dr==fe)continue e;break e}}Oe[ye++]=De}return Oe}Je.prototype=El(tm.prototype),Je.prototype.constructor=Je;function Fa(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function mF(){this.__data__=Ld?Ld(null):{},this.size=0}function gF(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function yF(a){var l=this.__data__;if(Ld){var f=l[a];return f===c?n:f}return gt.call(l,a)?l[a]:n}function _F(a){var l=this.__data__;return Ld?l[a]!==n:gt.call(l,a)}function vF(a,l){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Ld&&l===n?c:l,this}Fa.prototype.clear=mF,Fa.prototype.delete=gF,Fa.prototype.get=yF,Fa.prototype.has=_F,Fa.prototype.set=vF;function Es(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function wF(){this.__data__=[],this.size=0}function EF(a){var l=this.__data__,f=nm(l,a);if(f<0)return!1;var y=l.length-1;return f==y?l.pop():Qp.call(l,f,1),--this.size,!0}function TF(a){var l=this.__data__,f=nm(l,a);return f<0?n:l[f][1]}function IF(a){return nm(this.__data__,a)>-1}function SF(a,l){var f=this.__data__,y=nm(f,a);return y<0?(++this.size,f.push([a,l])):f[y][1]=l,this}Es.prototype.clear=wF,Es.prototype.delete=EF,Es.prototype.get=TF,Es.prototype.has=IF,Es.prototype.set=SF;function Ts(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function RF(){this.size=0,this.__data__={hash:new Fa,map:new(Od||Es),string:new Fa}}function AF(a){var l=pm(this,a).delete(a);return this.size-=l?1:0,l}function PF(a){return pm(this,a).get(a)}function CF(a){return pm(this,a).has(a)}function bF(a,l){var f=pm(this,a),y=f.size;return f.set(a,l),this.size+=f.size==y?0:1,this}Ts.prototype.clear=RF,Ts.prototype.delete=AF,Ts.prototype.get=PF,Ts.prototype.has=CF,Ts.prototype.set=bF;function Ua(a){var l=-1,f=a==null?0:a.length;for(this.__data__=new Ts;++l<f;)this.add(a[l])}function xF(a){return this.__data__.set(a,c),this}function kF(a){return this.__data__.has(a)}Ua.prototype.add=Ua.prototype.push=xF,Ua.prototype.has=kF;function Si(a){var l=this.__data__=new Es(a);this.size=l.size}function NF(){this.__data__=new Es,this.size=0}function OF(a){var l=this.__data__,f=l.delete(a);return this.size=l.size,f}function DF(a){return this.__data__.get(a)}function LF(a){return this.__data__.has(a)}function MF(a,l){var f=this.__data__;if(f instanceof Es){var y=f.__data__;if(!Od||y.length<i-1)return y.push([a,l]),this.size=++f.size,this;f=this.__data__=new Ts(y)}return f.set(a,l),this.size=f.size,this}Si.prototype.clear=NF,Si.prototype.delete=OF,Si.prototype.get=DF,Si.prototype.has=LF,Si.prototype.set=MF;function lR(a,l){var f=je(a),y=!f&&Wa(a),E=!f&&!y&&Eo(a),x=!f&&!y&&!E&&Rl(a),F=f||y||E||x,B=F?dt(a.length,GV):[],G=B.length;for(var te in a)(l||gt.call(a,te))&&!(F&&(te=="length"||E&&(te=="offset"||te=="parent")||x&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||As(te,G)))&&B.push(te);return B}function cR(a){var l=a.length;return l?a[_v(0,l-1)]:n}function VF(a,l){return mm(gr(a),ja(l,0,a.length))}function FF(a){return mm(gr(a))}function uv(a,l,f){(f!==n&&!Ri(a[l],f)||f===n&&!(l in a))&&Is(a,l,f)}function Vd(a,l,f){var y=a[l];(!(gt.call(a,l)&&Ri(y,f))||f===n&&!(l in a))&&Is(a,l,f)}function nm(a,l){for(var f=a.length;f--;)if(Ri(a[f][0],l))return f;return-1}function UF(a,l,f,y){return yo(a,function(E,x,F){l(y,E,f(E),F)}),y}function dR(a,l){return a&&Wi(l,In(l),a)}function jF(a,l){return a&&Wi(l,_r(l),a)}function Is(a,l,f){l=="__proto__"&&Yp?Yp(a,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[l]=f}function lv(a,l){for(var f=-1,y=l.length,E=Y(y),x=a==null;++f<y;)E[f]=x?n:$v(a,l[f]);return E}function ja(a,l,f){return a===a&&(f!==n&&(a=a<=f?a:f),l!==n&&(a=a>=l?a:l)),a}function ni(a,l,f,y,E,x){var F,B=l&m,G=l&_,te=l&I;if(f&&(F=E?f(a,y,E,x):f(a)),F!==n)return F;if(!Vt(a))return a;var ne=je(a);if(ne){if(F=C2(a),!B)return gr(a,F)}else{var ie=qn(a),ye=ie==ke||ie==nt;if(Eo(a))return LR(a,B);if(ie==At||ie==Me||ye&&!E){if(F=G||ye?{}:e1(a),!B)return G?y2(a,jF(F,a)):g2(a,dR(F,a))}else{if(!at[ie])return E?a:{};F=b2(a,ie,B)}}x||(x=new Si);var Se=x.get(a);if(Se)return Se;x.set(a,F),b1(a)?a.forEach(function(De){F.add(ni(De,l,f,De,a,x))}):P1(a)&&a.forEach(function(De,Ke){F.set(Ke,ni(De,l,f,Ke,a,x))});var Oe=te?G?bv:Cv:G?_r:In,We=ne?n:Oe(a);return Zn(We||a,function(De,Ke){We&&(Ke=De,De=a[Ke]),Vd(F,Ke,ni(De,l,f,Ke,a,x))}),F}function BF(a){var l=In(a);return function(f){return hR(f,a,l)}}function hR(a,l,f){var y=f.length;if(a==null)return!y;for(a=It(a);y--;){var E=f[y],x=l[E],F=a[E];if(F===n&&!(E in a)||!x(F))return!1}return!0}function fR(a,l,f){if(typeof a!="function")throw new ei(o);return Wd(function(){a.apply(n,f)},l)}function Fd(a,l,f,y){var E=-1,x=Da,F=!0,B=a.length,G=[],te=l.length;if(!B)return G;f&&(l=Tt(l,ft(f))),y?(x=fo,F=!1):l.length>=i&&(x=Zr,F=!1,l=new Ua(l));e:for(;++E<B;){var ne=a[E],ie=f==null?ne:f(ne);if(ne=y||ne!==0?ne:0,F&&ie===ie){for(var ye=te;ye--;)if(l[ye]===ie)continue e;G.push(ne)}else x(l,ie,y)||G.push(ne)}return G}var yo=jR($i),pR=jR(dv,!0);function zF(a,l){var f=!0;return yo(a,function(y,E,x){return f=!!l(y,E,x),f}),f}function rm(a,l,f){for(var y=-1,E=a.length;++y<E;){var x=a[y],F=l(x);if(F!=null&&(B===n?F===F&&!Or(F):f(F,B)))var B=F,G=x}return G}function $F(a,l,f,y){var E=a.length;for(f=$e(f),f<0&&(f=-f>E?0:E+f),y=y===n||y>E?E:$e(y),y<0&&(y+=E),y=f>y?0:k1(y);f<y;)a[f++]=l;return a}function mR(a,l){var f=[];return yo(a,function(y,E,x){l(y,E,x)&&f.push(y)}),f}function On(a,l,f,y,E){var x=-1,F=a.length;for(f||(f=k2),E||(E=[]);++x<F;){var B=a[x];l>0&&f(B)?l>1?On(B,l-1,f,y,E):Ei(E,B):y||(E[E.length]=B)}return E}var cv=BR(),gR=BR(!0);function $i(a,l){return a&&cv(a,l,In)}function dv(a,l){return a&&gR(a,l,In)}function im(a,l){return Xr(l,function(f){return Ps(a[f])})}function Ba(a,l){l=vo(l,a);for(var f=0,y=l.length;a!=null&&f<y;)a=a[qi(l[f++])];return f&&f==y?a:n}function yR(a,l,f){var y=l(a);return je(a)?y:Ei(y,f(a))}function er(a){return a==null?a===n?so:En:Va&&Va in It(a)?R2(a):F2(a)}function hv(a,l){return a>l}function WF(a,l){return a!=null&&gt.call(a,l)}function qF(a,l){return a!=null&&l in It(a)}function GF(a,l,f){return a>=Wn(l,f)&&a<fn(l,f)}function fv(a,l,f){for(var y=f?fo:Da,E=a[0].length,x=a.length,F=x,B=Y(x),G=1/0,te=[];F--;){var ne=a[F];F&&l&&(ne=Tt(ne,ft(l))),G=Wn(ne.length,G),B[F]=!f&&(l||E>=120&&ne.length>=120)?new Ua(F&&ne):n}ne=a[0];var ie=-1,ye=B[0];e:for(;++ie<E&&te.length<G;){var Se=ne[ie],Oe=l?l(Se):Se;if(Se=f||Se!==0?Se:0,!(ye?Zr(ye,Oe):y(te,Oe,f))){for(F=x;--F;){var We=B[F];if(!(We?Zr(We,Oe):y(a[F],Oe,f)))continue e}ye&&ye.push(Oe),te.push(Se)}}return te}function KF(a,l,f,y){return $i(a,function(E,x,F){l(y,f(E),x,F)}),y}function Ud(a,l,f){l=vo(l,a),a=i1(a,l);var y=a==null?a:a[qi(ii(l))];return y==null?n:zn(y,a,f)}function _R(a){return Wt(a)&&er(a)==Me}function HF(a){return Wt(a)&&er(a)==vt}function QF(a){return Wt(a)&&er(a)==ve}function jd(a,l,f,y,E){return a===l?!0:a==null||l==null||!Wt(a)&&!Wt(l)?a!==a&&l!==l:YF(a,l,f,y,jd,E)}function YF(a,l,f,y,E,x){var F=je(a),B=je(l),G=F?Ye:qn(a),te=B?Ye:qn(l);G=G==Me?At:G,te=te==Me?At:te;var ne=G==At,ie=te==At,ye=G==te;if(ye&&Eo(a)){if(!Eo(l))return!1;F=!0,ne=!1}if(ye&&!ne)return x||(x=new Si),F||Rl(a)?JR(a,l,f,y,E,x):I2(a,l,G,f,y,E,x);if(!(f&T)){var Se=ne&&gt.call(a,"__wrapped__"),Oe=ie&&gt.call(l,"__wrapped__");if(Se||Oe){var We=Se?a.value():a,De=Oe?l.value():l;return x||(x=new Si),E(We,De,f,y,x)}}return ye?(x||(x=new Si),S2(a,l,f,y,E,x)):!1}function JF(a){return Wt(a)&&qn(a)==lt}function pv(a,l,f,y){var E=f.length,x=E,F=!y;if(a==null)return!x;for(a=It(a);E--;){var B=f[E];if(F&&B[2]?B[1]!==a[B[0]]:!(B[0]in a))return!1}for(;++E<x;){B=f[E];var G=B[0],te=a[G],ne=B[1];if(F&&B[2]){if(te===n&&!(G in a))return!1}else{var ie=new Si;if(y)var ye=y(te,ne,G,a,l,ie);if(!(ye===n?jd(ne,te,T|D,y,ie):ye))return!1}}return!0}function vR(a){if(!Vt(a)||O2(a))return!1;var l=Ps(a)?JV:yp;return l.test($a(a))}function XF(a){return Wt(a)&&er(a)==wi}function ZF(a){return Wt(a)&&qn(a)==Bn}function e2(a){return Wt(a)&&Em(a.length)&&!!ct[er(a)]}function wR(a){return typeof a=="function"?a:a==null?vr:typeof a=="object"?je(a)?IR(a[0],a[1]):TR(a):z1(a)}function mv(a){if(!$d(a))return rF(a);var l=[];for(var f in It(a))gt.call(a,f)&&f!="constructor"&&l.push(f);return l}function t2(a){if(!Vt(a))return V2(a);var l=$d(a),f=[];for(var y in a)y=="constructor"&&(l||!gt.call(a,y))||f.push(y);return f}function gv(a,l){return a<l}function ER(a,l){var f=-1,y=yr(a)?Y(a.length):[];return yo(a,function(E,x,F){y[++f]=l(E,x,F)}),y}function TR(a){var l=kv(a);return l.length==1&&l[0][2]?n1(l[0][0],l[0][1]):function(f){return f===a||pv(f,a,l)}}function IR(a,l){return Ov(a)&&t1(l)?n1(qi(a),l):function(f){var y=$v(f,a);return y===n&&y===l?Wv(f,a):jd(l,y,T|D)}}function sm(a,l,f,y,E){a!==l&&cv(l,function(x,F){if(E||(E=new Si),Vt(x))n2(a,l,F,f,sm,y,E);else{var B=y?y(Lv(a,F),x,F+"",a,l,E):n;B===n&&(B=x),uv(a,F,B)}},_r)}function n2(a,l,f,y,E,x,F){var B=Lv(a,f),G=Lv(l,f),te=F.get(G);if(te){uv(a,f,te);return}var ne=x?x(B,G,f+"",a,l,F):n,ie=ne===n;if(ie){var ye=je(G),Se=!ye&&Eo(G),Oe=!ye&&!Se&&Rl(G);ne=G,ye||Se||Oe?je(B)?ne=B:Xt(B)?ne=gr(B):Se?(ie=!1,ne=LR(G,!0)):Oe?(ie=!1,ne=MR(G,!0)):ne=[]:qd(G)||Wa(G)?(ne=B,Wa(B)?ne=N1(B):(!Vt(B)||Ps(B))&&(ne=e1(G))):ie=!1}ie&&(F.set(G,ne),E(ne,G,y,x,F),F.delete(G)),uv(a,f,ne)}function SR(a,l){var f=a.length;if(f)return l+=l<0?f:0,As(l,f)?a[l]:n}function RR(a,l,f){l.length?l=Tt(l,function(x){return je(x)?function(F){return Ba(F,x.length===1?x[0]:x)}:x}):l=[vr];var y=-1;l=Tt(l,ft(Ne()));var E=ER(a,function(x,F,B){var G=Tt(l,function(te){return te(x)});return{criteria:G,index:++y,value:x}});return X(E,function(x,F){return m2(x,F,f)})}function r2(a,l){return AR(a,l,function(f,y){return Wv(a,y)})}function AR(a,l,f){for(var y=-1,E=l.length,x={};++y<E;){var F=l[y],B=Ba(a,F);f(B,F)&&Bd(x,vo(F,a),B)}return x}function i2(a){return function(l){return Ba(l,a)}}function yv(a,l,f,y){var E=y?po:ws,x=-1,F=l.length,B=a;for(a===l&&(l=gr(l)),f&&(B=Tt(a,ft(f)));++x<F;)for(var G=0,te=l[x],ne=f?f(te):te;(G=E(B,ne,G,y))>-1;)B!==a&&Qp.call(B,G,1),Qp.call(a,G,1);return a}function PR(a,l){for(var f=a?l.length:0,y=f-1;f--;){var E=l[f];if(f==y||E!==x){var x=E;As(E)?Qp.call(a,E,1):Ev(a,E)}}return a}function _v(a,l){return a+Xp(aR()*(l-a+1))}function s2(a,l,f,y){for(var E=-1,x=fn(Jp((l-a)/(f||1)),0),F=Y(x);x--;)F[y?x:++E]=a,a+=f;return F}function vv(a,l){var f="";if(!a||l<1||l>Q)return f;do l%2&&(f+=a),l=Xp(l/2),l&&(a+=a);while(l);return f}function qe(a,l){return Mv(r1(a,l,vr),a+"")}function o2(a){return cR(Al(a))}function a2(a,l){var f=Al(a);return mm(f,ja(l,0,f.length))}function Bd(a,l,f,y){if(!Vt(a))return a;l=vo(l,a);for(var E=-1,x=l.length,F=x-1,B=a;B!=null&&++E<x;){var G=qi(l[E]),te=f;if(G==="__proto__"||G==="constructor"||G==="prototype")return a;if(E!=F){var ne=B[G];te=y?y(ne,G,B):n,te===n&&(te=Vt(ne)?ne:As(l[E+1])?[]:{})}Vd(B,G,te),B=B[G]}return a}var CR=Zp?function(a,l){return Zp.set(a,l),a}:vr,u2=Yp?function(a,l){return Yp(a,"toString",{configurable:!0,enumerable:!1,value:Gv(l),writable:!0})}:vr;function l2(a){return mm(Al(a))}function ri(a,l,f){var y=-1,E=a.length;l<0&&(l=-l>E?0:E+l),f=f>E?E:f,f<0&&(f+=E),E=l>f?0:f-l>>>0,l>>>=0;for(var x=Y(E);++y<E;)x[y]=a[y+l];return x}function c2(a,l){var f;return yo(a,function(y,E,x){return f=l(y,E,x),!f}),!!f}function om(a,l,f){var y=0,E=a==null?y:a.length;if(typeof l=="number"&&l===l&&E<=Ae){for(;y<E;){var x=y+E>>>1,F=a[x];F!==null&&!Or(F)&&(f?F<=l:F<l)?y=x+1:E=x}return E}return wv(a,l,vr,f)}function wv(a,l,f,y){var E=0,x=a==null?0:a.length;if(x===0)return 0;l=f(l);for(var F=l!==l,B=l===null,G=Or(l),te=l===n;E<x;){var ne=Xp((E+x)/2),ie=f(a[ne]),ye=ie!==n,Se=ie===null,Oe=ie===ie,We=Or(ie);if(F)var De=y||Oe;else te?De=Oe&&(y||ye):B?De=Oe&&ye&&(y||!Se):G?De=Oe&&ye&&!Se&&(y||!We):Se||We?De=!1:De=y?ie<=l:ie<l;De?E=ne+1:x=ne}return Wn(x,Ce)}function bR(a,l){for(var f=-1,y=a.length,E=0,x=[];++f<y;){var F=a[f],B=l?l(F):F;if(!f||!Ri(B,G)){var G=B;x[E++]=F===0?0:F}}return x}function xR(a){return typeof a=="number"?a:Or(a)?me:+a}function Nr(a){if(typeof a=="string")return a;if(je(a))return Tt(a,Nr)+"";if(Or(a))return uR?uR.call(a):"";var l=a+"";return l=="0"&&1/a==-de?"-0":l}function _o(a,l,f){var y=-1,E=Da,x=a.length,F=!0,B=[],G=B;if(f)F=!1,E=fo;else if(x>=i){var te=l?null:E2(a);if(te)return Bp(te);F=!1,E=Zr,G=new Ua}else G=l?[]:B;e:for(;++y<x;){var ne=a[y],ie=l?l(ne):ne;if(ne=f||ne!==0?ne:0,F&&ie===ie){for(var ye=G.length;ye--;)if(G[ye]===ie)continue e;l&&G.push(ie),B.push(ne)}else E(G,ie,f)||(G!==B&&G.push(ie),B.push(ne))}return B}function Ev(a,l){return l=vo(l,a),a=i1(a,l),a==null||delete a[qi(ii(l))]}function kR(a,l,f,y){return Bd(a,l,f(Ba(a,l)),y)}function am(a,l,f,y){for(var E=a.length,x=y?E:-1;(y?x--:++x<E)&&l(a[x],x,a););return f?ri(a,y?0:x,y?x+1:E):ri(a,y?x+1:0,y?E:x)}function NR(a,l){var f=a;return f instanceof Je&&(f=f.value()),Ti(l,function(y,E){return E.func.apply(E.thisArg,Ei([y],E.args))},f)}function Tv(a,l,f){var y=a.length;if(y<2)return y?_o(a[0]):[];for(var E=-1,x=Y(y);++E<y;)for(var F=a[E],B=-1;++B<y;)B!=E&&(x[E]=Fd(x[E]||F,a[B],l,f));return _o(On(x,1),l,f)}function OR(a,l,f){for(var y=-1,E=a.length,x=l.length,F={};++y<E;){var B=y<x?l[y]:n;f(F,a[y],B)}return F}function Iv(a){return Xt(a)?a:[]}function Sv(a){return typeof a=="function"?a:vr}function vo(a,l){return je(a)?a:Ov(a,l)?[a]:u1(pt(a))}var d2=qe;function wo(a,l,f){var y=a.length;return f=f===n?y:f,!l&&f>=y?a:ri(a,l,f)}var DR=XV||function(a){return $t.clearTimeout(a)};function LR(a,l){if(l)return a.slice();var f=a.length,y=nR?nR(f):new a.constructor(f);return a.copy(y),y}function Rv(a){var l=new a.constructor(a.byteLength);return new Kp(l).set(new Kp(a)),l}function h2(a,l){var f=l?Rv(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function f2(a){var l=new a.constructor(a.source,Aa.exec(a));return l.lastIndex=a.lastIndex,l}function p2(a){return Md?It(Md.call(a)):{}}function MR(a,l){var f=l?Rv(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function VR(a,l){if(a!==l){var f=a!==n,y=a===null,E=a===a,x=Or(a),F=l!==n,B=l===null,G=l===l,te=Or(l);if(!B&&!te&&!x&&a>l||x&&F&&G&&!B&&!te||y&&F&&G||!f&&G||!E)return 1;if(!y&&!x&&!te&&a<l||te&&f&&E&&!y&&!x||B&&f&&E||!F&&E||!G)return-1}return 0}function m2(a,l,f){for(var y=-1,E=a.criteria,x=l.criteria,F=E.length,B=f.length;++y<F;){var G=VR(E[y],x[y]);if(G){if(y>=B)return G;var te=f[y];return G*(te=="desc"?-1:1)}}return a.index-l.index}function FR(a,l,f,y){for(var E=-1,x=a.length,F=f.length,B=-1,G=l.length,te=fn(x-F,0),ne=Y(G+te),ie=!y;++B<G;)ne[B]=l[B];for(;++E<F;)(ie||E<x)&&(ne[f[E]]=a[E]);for(;te--;)ne[B++]=a[E++];return ne}function UR(a,l,f,y){for(var E=-1,x=a.length,F=-1,B=f.length,G=-1,te=l.length,ne=fn(x-B,0),ie=Y(ne+te),ye=!y;++E<ne;)ie[E]=a[E];for(var Se=E;++G<te;)ie[Se+G]=l[G];for(;++F<B;)(ye||E<x)&&(ie[Se+f[F]]=a[E++]);return ie}function gr(a,l){var f=-1,y=a.length;for(l||(l=Y(y));++f<y;)l[f]=a[f];return l}function Wi(a,l,f,y){var E=!f;f||(f={});for(var x=-1,F=l.length;++x<F;){var B=l[x],G=y?y(f[B],a[B],B,f,a):n;G===n&&(G=a[B]),E?Is(f,B,G):Vd(f,B,G)}return f}function g2(a,l){return Wi(a,Nv(a),l)}function y2(a,l){return Wi(a,XR(a),l)}function um(a,l){return function(f,y){var E=je(f)?Oa:UF,x=l?l():{};return E(f,a,Ne(y,2),x)}}function Tl(a){return qe(function(l,f){var y=-1,E=f.length,x=E>1?f[E-1]:n,F=E>2?f[2]:n;for(x=a.length>3&&typeof x=="function"?(E--,x):n,F&&tr(f[0],f[1],F)&&(x=E<3?n:x,E=1),l=It(l);++y<E;){var B=f[y];B&&a(l,B,y,x)}return l})}function jR(a,l){return function(f,y){if(f==null)return f;if(!yr(f))return a(f,y);for(var E=f.length,x=l?E:-1,F=It(f);(l?x--:++x<E)&&y(F[x],x,F)!==!1;);return f}}function BR(a){return function(l,f,y){for(var E=-1,x=It(l),F=y(l),B=F.length;B--;){var G=F[a?B:++E];if(f(x[G],G,x)===!1)break}return l}}function _2(a,l,f){var y=l&O,E=zd(a);function x(){var F=this&&this!==$t&&this instanceof x?E:a;return F.apply(y?f:this,arguments)}return x}function zR(a){return function(l){l=pt(l);var f=ml(l)?Ii(l):n,y=f?f[0]:l.charAt(0),E=f?wo(f,1).join(""):l.slice(1);return y[a]()+E}}function Il(a){return function(l){return Ti(j1(U1(l).replace(J_,"")),a,"")}}function zd(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=El(a.prototype),y=a.apply(f,l);return Vt(y)?y:f}}function v2(a,l,f){var y=zd(a);function E(){for(var x=arguments.length,F=Y(x),B=x,G=Sl(E);B--;)F[B]=arguments[B];var te=x<3&&F[0]!==G&&F[x-1]!==G?[]:mo(F,G);if(x-=te.length,x<f)return KR(a,l,lm,E.placeholder,n,F,te,n,n,f-x);var ne=this&&this!==$t&&this instanceof E?y:a;return zn(ne,this,F)}return E}function $R(a){return function(l,f,y){var E=It(l);if(!yr(l)){var x=Ne(f,3);l=In(l),f=function(B){return x(E[B],B,E)}}var F=a(l,f,y);return F>-1?E[x?l[F]:F]:n}}function WR(a){return Rs(function(l){var f=l.length,y=f,E=ti.prototype.thru;for(a&&l.reverse();y--;){var x=l[y];if(typeof x!="function")throw new ei(o);if(E&&!F&&fm(x)=="wrapper")var F=new ti([],!0)}for(y=F?y:f;++y<f;){x=l[y];var B=fm(x),G=B=="wrapper"?xv(x):n;G&&Dv(G[0])&&G[1]==(C|S|q|R)&&!G[4].length&&G[9]==1?F=F[fm(G[0])].apply(F,G[3]):F=x.length==1&&Dv(x)?F[B]():F.thru(x)}return function(){var te=arguments,ne=te[0];if(F&&te.length==1&&je(ne))return F.plant(ne).value();for(var ie=0,ye=f?l[ie].apply(this,te):ne;++ie<f;)ye=l[ie].call(this,ye);return ye}})}function lm(a,l,f,y,E,x,F,B,G,te){var ne=l&C,ie=l&O,ye=l&k,Se=l&(S|U),Oe=l&L,We=ye?n:zd(a);function De(){for(var Ke=arguments.length,tt=Y(Ke),Dr=Ke;Dr--;)tt[Dr]=arguments[Dr];if(Se)var nr=Sl(De),Lr=kd(tt,nr);if(y&&(tt=FR(tt,y,E,Se)),x&&(tt=UR(tt,x,F,Se)),Ke-=Lr,Se&&Ke<te){var Zt=mo(tt,nr);return KR(a,l,lm,De.placeholder,f,tt,Zt,B,G,te-Ke)}var Ai=ie?f:this,bs=ye?Ai[a]:a;return Ke=tt.length,B?tt=U2(tt,B):Oe&&Ke>1&&tt.reverse(),ne&&G<Ke&&(tt.length=G),this&&this!==$t&&this instanceof De&&(bs=We||zd(bs)),bs.apply(Ai,tt)}return De}function qR(a,l){return function(f,y){return KF(f,a,l(y),{})}}function cm(a,l){return function(f,y){var E;if(f===n&&y===n)return l;if(f!==n&&(E=f),y!==n){if(E===n)return y;typeof f=="string"||typeof y=="string"?(f=Nr(f),y=Nr(y)):(f=xR(f),y=xR(y)),E=a(f,y)}return E}}function Av(a){return Rs(function(l){return l=Tt(l,ft(Ne())),qe(function(f){var y=this;return a(l,function(E){return zn(E,y,f)})})})}function dm(a,l){l=l===n?" ":Nr(l);var f=l.length;if(f<2)return f?vv(l,a):l;var y=vv(l,Jp(a/gl(l)));return ml(l)?wo(Ii(y),0,a).join(""):y.slice(0,a)}function w2(a,l,f,y){var E=l&O,x=zd(a);function F(){for(var B=-1,G=arguments.length,te=-1,ne=y.length,ie=Y(ne+G),ye=this&&this!==$t&&this instanceof F?x:a;++te<ne;)ie[te]=y[te];for(;G--;)ie[te++]=arguments[++B];return zn(ye,E?f:this,ie)}return F}function GR(a){return function(l,f,y){return y&&typeof y!="number"&&tr(l,f,y)&&(f=y=n),l=Cs(l),f===n?(f=l,l=0):f=Cs(f),y=y===n?l<f?1:-1:Cs(y),s2(l,f,y,a)}}function hm(a){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=si(l),f=si(f)),a(l,f)}}function KR(a,l,f,y,E,x,F,B,G,te){var ne=l&S,ie=ne?F:n,ye=ne?n:F,Se=ne?x:n,Oe=ne?n:x;l|=ne?q:$,l&=~(ne?$:q),l&P||(l&=~(O|k));var We=[a,l,E,Se,ie,Oe,ye,B,G,te],De=f.apply(n,We);return Dv(a)&&s1(De,We),De.placeholder=y,o1(De,a,l)}function Pv(a){var l=hn[a];return function(f,y){if(f=si(f),y=y==null?0:Wn($e(y),292),y&&oR(f)){var E=(pt(f)+"e").split("e"),x=l(E[0]+"e"+(+E[1]+y));return E=(pt(x)+"e").split("e"),+(E[0]+"e"+(+E[1]-y))}return l(f)}}var E2=vl&&1/Bp(new vl([,-0]))[1]==de?function(a){return new vl(a)}:Qv;function HR(a){return function(l){var f=qn(l);return f==lt?rv(l):f==Bn?FV(l):dn(l,a(l))}}function Ss(a,l,f,y,E,x,F,B){var G=l&k;if(!G&&typeof a!="function")throw new ei(o);var te=y?y.length:0;if(te||(l&=~(q|$),y=E=n),F=F===n?F:fn($e(F),0),B=B===n?B:$e(B),te-=E?E.length:0,l&$){var ne=y,ie=E;y=E=n}var ye=G?n:xv(a),Se=[a,l,f,y,E,ne,ie,x,F,B];if(ye&&M2(Se,ye),a=Se[0],l=Se[1],f=Se[2],y=Se[3],E=Se[4],B=Se[9]=Se[9]===n?G?0:a.length:fn(Se[9]-te,0),!B&&l&(S|U)&&(l&=~(S|U)),!l||l==O)var Oe=_2(a,l,f);else l==S||l==U?Oe=v2(a,l,B):(l==q||l==(O|q))&&!E.length?Oe=w2(a,l,f,y):Oe=lm.apply(n,Se);var We=ye?CR:s1;return o1(We(Oe,Se),a,l)}function QR(a,l,f,y){return a===n||Ri(a,_l[f])&&!gt.call(y,f)?l:a}function YR(a,l,f,y,E,x){return Vt(a)&&Vt(l)&&(x.set(l,a),sm(a,l,n,YR,x),x.delete(l)),a}function T2(a){return qd(a)?n:a}function JR(a,l,f,y,E,x){var F=f&T,B=a.length,G=l.length;if(B!=G&&!(F&&G>B))return!1;var te=x.get(a),ne=x.get(l);if(te&&ne)return te==l&&ne==a;var ie=-1,ye=!0,Se=f&D?new Ua:n;for(x.set(a,l),x.set(l,a);++ie<B;){var Oe=a[ie],We=l[ie];if(y)var De=F?y(We,Oe,ie,l,a,x):y(Oe,We,ie,a,l,x);if(De!==n){if(De)continue;ye=!1;break}if(Se){if(!fl(l,function(Ke,tt){if(!Zr(Se,tt)&&(Oe===Ke||E(Oe,Ke,f,y,x)))return Se.push(tt)})){ye=!1;break}}else if(!(Oe===We||E(Oe,We,f,y,x))){ye=!1;break}}return x.delete(a),x.delete(l),ye}function I2(a,l,f,y,E,x,F){switch(f){case pr:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case vt:return!(a.byteLength!=l.byteLength||!x(new Kp(a),new Kp(l)));case Jt:case ve:case Ve:return Ri(+a,+l);case xe:return a.name==l.name&&a.message==l.message;case wi:case fs:return a==l+"";case lt:var B=rv;case Bn:var G=y&T;if(B||(B=Bp),a.size!=l.size&&!G)return!1;var te=F.get(a);if(te)return te==l;y|=D,F.set(a,l);var ne=JR(B(a),B(l),y,E,x,F);return F.delete(a),ne;case Fi:if(Md)return Md.call(a)==Md.call(l)}return!1}function S2(a,l,f,y,E,x){var F=f&T,B=Cv(a),G=B.length,te=Cv(l),ne=te.length;if(G!=ne&&!F)return!1;for(var ie=G;ie--;){var ye=B[ie];if(!(F?ye in l:gt.call(l,ye)))return!1}var Se=x.get(a),Oe=x.get(l);if(Se&&Oe)return Se==l&&Oe==a;var We=!0;x.set(a,l),x.set(l,a);for(var De=F;++ie<G;){ye=B[ie];var Ke=a[ye],tt=l[ye];if(y)var Dr=F?y(tt,Ke,ye,l,a,x):y(Ke,tt,ye,a,l,x);if(!(Dr===n?Ke===tt||E(Ke,tt,f,y,x):Dr)){We=!1;break}De||(De=ye=="constructor")}if(We&&!De){var nr=a.constructor,Lr=l.constructor;nr!=Lr&&"constructor"in a&&"constructor"in l&&!(typeof nr=="function"&&nr instanceof nr&&typeof Lr=="function"&&Lr instanceof Lr)&&(We=!1)}return x.delete(a),x.delete(l),We}function Rs(a){return Mv(r1(a,n,h1),a+"")}function Cv(a){return yR(a,In,Nv)}function bv(a){return yR(a,_r,XR)}var xv=Zp?function(a){return Zp.get(a)}:Qv;function fm(a){for(var l=a.name+"",f=wl[l],y=gt.call(wl,l)?f.length:0;y--;){var E=f[y],x=E.func;if(x==null||x==a)return E.name}return l}function Sl(a){var l=gt.call(A,"placeholder")?A:a;return l.placeholder}function Ne(){var a=A.iteratee||Kv;return a=a===Kv?wR:a,arguments.length?a(arguments[0],arguments[1]):a}function pm(a,l){var f=a.__data__;return N2(l)?f[typeof l=="string"?"string":"hash"]:f.map}function kv(a){for(var l=In(a),f=l.length;f--;){var y=l[f],E=a[y];l[f]=[y,E,t1(E)]}return l}function za(a,l){var f=LV(a,l);return vR(f)?f:n}function R2(a){var l=gt.call(a,Va),f=a[Va];try{a[Va]=n;var y=!0}catch{}var E=qp.call(a);return y&&(l?a[Va]=f:delete a[Va]),E}var Nv=sv?function(a){return a==null?[]:(a=It(a),Xr(sv(a),function(l){return iR.call(a,l)}))}:Yv,XR=sv?function(a){for(var l=[];a;)Ei(l,Nv(a)),a=Hp(a);return l}:Yv,qn=er;(ov&&qn(new ov(new ArrayBuffer(1)))!=pr||Od&&qn(new Od)!=lt||av&&qn(av.resolve())!=vi||vl&&qn(new vl)!=Bn||Dd&&qn(new Dd)!=Ui)&&(qn=function(a){var l=er(a),f=l==At?a.constructor:n,y=f?$a(f):"";if(y)switch(y){case aF:return pr;case uF:return lt;case lF:return vi;case cF:return Bn;case dF:return Ui}return l});function A2(a,l,f){for(var y=-1,E=f.length;++y<E;){var x=f[y],F=x.size;switch(x.type){case"drop":a+=F;break;case"dropRight":l-=F;break;case"take":l=Wn(l,a+F);break;case"takeRight":a=fn(a,l-F);break}}return{start:a,end:l}}function P2(a){var l=a.match(ao);return l?l[1].split(q_):[]}function ZR(a,l,f){l=vo(l,a);for(var y=-1,E=l.length,x=!1;++y<E;){var F=qi(l[y]);if(!(x=a!=null&&f(a,F)))break;a=a[F]}return x||++y!=E?x:(E=a==null?0:a.length,!!E&&Em(E)&&As(F,E)&&(je(a)||Wa(a)))}function C2(a){var l=a.length,f=new a.constructor(l);return l&&typeof a[0]=="string"&&gt.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function e1(a){return typeof a.constructor=="function"&&!$d(a)?El(Hp(a)):{}}function b2(a,l,f){var y=a.constructor;switch(l){case vt:return Rv(a);case Jt:case ve:return new y(+a);case pr:return h2(a,f);case Xu:case Zu:case ud:case ps:case el:case tl:case Ia:case ld:case cd:return MR(a,f);case lt:return new y;case Ve:case fs:return new y(a);case wi:return f2(a);case Bn:return new y;case Fi:return p2(a)}}function x2(a,l){var f=l.length;if(!f)return a;var y=f-1;return l[y]=(f>1?"& ":"")+l[y],l=l.join(f>2?", ":" "),a.replace(W_,`{
/* [wrapped with `+l+`] */
`)}function k2(a){return je(a)||Wa(a)||!!(sR&&a&&a[sR])}function As(a,l){var f=typeof a;return l=l??Q,!!l&&(f=="number"||f!="symbol"&&gd.test(a))&&a>-1&&a%1==0&&a<l}function tr(a,l,f){if(!Vt(f))return!1;var y=typeof l;return(y=="number"?yr(f)&&As(l,f.length):y=="string"&&l in f)?Ri(f[l],a):!1}function Ov(a,l){if(je(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Or(a)?!0:pp.test(a)||!Sa.test(a)||l!=null&&a in It(l)}function N2(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function Dv(a){var l=fm(a),f=A[l];if(typeof f!="function"||!(l in Je.prototype))return!1;if(a===f)return!0;var y=xv(f);return!!y&&a===y[0]}function O2(a){return!!tR&&tR in a}var D2=$p?Ps:Jv;function $d(a){var l=a&&a.constructor,f=typeof l=="function"&&l.prototype||_l;return a===f}function t1(a){return a===a&&!Vt(a)}function n1(a,l){return function(f){return f==null?!1:f[a]===l&&(l!==n||a in It(f))}}function L2(a){var l=vm(a,function(y){return f.size===h&&f.clear(),y}),f=l.cache;return l}function M2(a,l){var f=a[1],y=l[1],E=f|y,x=E<(O|k|C),F=y==C&&f==S||y==C&&f==R&&a[7].length<=l[8]||y==(C|R)&&l[7].length<=l[8]&&f==S;if(!(x||F))return a;y&O&&(a[2]=l[2],E|=f&O?0:P);var B=l[3];if(B){var G=a[3];a[3]=G?FR(G,B,l[4]):B,a[4]=G?mo(a[3],p):l[4]}return B=l[5],B&&(G=a[5],a[5]=G?UR(G,B,l[6]):B,a[6]=G?mo(a[5],p):l[6]),B=l[7],B&&(a[7]=B),y&C&&(a[8]=a[8]==null?l[8]:Wn(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=E,a}function V2(a){var l=[];if(a!=null)for(var f in It(a))l.push(f);return l}function F2(a){return qp.call(a)}function r1(a,l,f){return l=fn(l===n?a.length-1:l,0),function(){for(var y=arguments,E=-1,x=fn(y.length-l,0),F=Y(x);++E<x;)F[E]=y[l+E];E=-1;for(var B=Y(l+1);++E<l;)B[E]=y[E];return B[l]=f(F),zn(a,this,B)}}function i1(a,l){return l.length<2?a:Ba(a,ri(l,0,-1))}function U2(a,l){for(var f=a.length,y=Wn(l.length,f),E=gr(a);y--;){var x=l[y];a[y]=As(x,f)?E[x]:n}return a}function Lv(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var s1=a1(CR),Wd=eF||function(a,l){return $t.setTimeout(a,l)},Mv=a1(u2);function o1(a,l,f){var y=l+"";return Mv(a,x2(y,j2(P2(y),f)))}function a1(a){var l=0,f=0;return function(){var y=iF(),E=N-(y-f);if(f=y,E>0){if(++l>=M)return arguments[0]}else l=0;return a.apply(n,arguments)}}function mm(a,l){var f=-1,y=a.length,E=y-1;for(l=l===n?y:l;++f<l;){var x=_v(f,E),F=a[x];a[x]=a[f],a[f]=F}return a.length=l,a}var u1=L2(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(kn,function(f,y,E,x){l.push(E?x.replace(mp,"$1"):y||f)}),l});function qi(a){if(typeof a=="string"||Or(a))return a;var l=a+"";return l=="0"&&1/a==-de?"-0":l}function $a(a){if(a!=null){try{return Wp.call(a)}catch{}try{return a+""}catch{}}return""}function j2(a,l){return Zn(Ge,function(f){var y="_."+f[0];l&f[1]&&!Da(a,y)&&a.push(y)}),a.sort()}function l1(a){if(a instanceof Je)return a.clone();var l=new ti(a.__wrapped__,a.__chain__);return l.__actions__=gr(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function B2(a,l,f){(f?tr(a,l,f):l===n)?l=1:l=fn($e(l),0);var y=a==null?0:a.length;if(!y||l<1)return[];for(var E=0,x=0,F=Y(Jp(y/l));E<y;)F[x++]=ri(a,E,E+=l);return F}function z2(a){for(var l=-1,f=a==null?0:a.length,y=0,E=[];++l<f;){var x=a[l];x&&(E[y++]=x)}return E}function $2(){var a=arguments.length;if(!a)return[];for(var l=Y(a-1),f=arguments[0],y=a;y--;)l[y-1]=arguments[y];return Ei(je(f)?gr(f):[f],On(l,1))}var W2=qe(function(a,l){return Xt(a)?Fd(a,On(l,1,Xt,!0)):[]}),q2=qe(function(a,l){var f=ii(l);return Xt(f)&&(f=n),Xt(a)?Fd(a,On(l,1,Xt,!0),Ne(f,2)):[]}),G2=qe(function(a,l){var f=ii(l);return Xt(f)&&(f=n),Xt(a)?Fd(a,On(l,1,Xt,!0),n,f):[]});function K2(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:$e(l),ri(a,l<0?0:l,y)):[]}function H2(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:$e(l),l=y-l,ri(a,0,l<0?0:l)):[]}function Q2(a,l){return a&&a.length?am(a,Ne(l,3),!0,!0):[]}function Y2(a,l){return a&&a.length?am(a,Ne(l,3),!0):[]}function J2(a,l,f,y){var E=a==null?0:a.length;return E?(f&&typeof f!="number"&&tr(a,l,f)&&(f=0,y=E),$F(a,l,f,y)):[]}function c1(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=f==null?0:$e(f);return E<0&&(E=fn(y+E,0)),La(a,Ne(l,3),E)}function d1(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=y-1;return f!==n&&(E=$e(f),E=f<0?fn(y+E,0):Wn(E,y-1)),La(a,Ne(l,3),E,!0)}function h1(a){var l=a==null?0:a.length;return l?On(a,1):[]}function X2(a){var l=a==null?0:a.length;return l?On(a,de):[]}function Z2(a,l){var f=a==null?0:a.length;return f?(l=l===n?1:$e(l),On(a,l)):[]}function eU(a){for(var l=-1,f=a==null?0:a.length,y={};++l<f;){var E=a[l];y[E[0]]=E[1]}return y}function f1(a){return a&&a.length?a[0]:n}function tU(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=f==null?0:$e(f);return E<0&&(E=fn(y+E,0)),ws(a,l,E)}function nU(a){var l=a==null?0:a.length;return l?ri(a,0,-1):[]}var rU=qe(function(a){var l=Tt(a,Iv);return l.length&&l[0]===a[0]?fv(l):[]}),iU=qe(function(a){var l=ii(a),f=Tt(a,Iv);return l===ii(f)?l=n:f.pop(),f.length&&f[0]===a[0]?fv(f,Ne(l,2)):[]}),sU=qe(function(a){var l=ii(a),f=Tt(a,Iv);return l=typeof l=="function"?l:n,l&&f.pop(),f.length&&f[0]===a[0]?fv(f,n,l):[]});function oU(a,l){return a==null?"":nF.call(a,l)}function ii(a){var l=a==null?0:a.length;return l?a[l-1]:n}function aU(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=y;return f!==n&&(E=$e(f),E=E<0?fn(y+E,0):Wn(E,y-1)),l===l?jV(a,l,E):La(a,d,E,!0)}function uU(a,l){return a&&a.length?SR(a,$e(l)):n}var lU=qe(p1);function p1(a,l){return a&&a.length&&l&&l.length?yv(a,l):a}function cU(a,l,f){return a&&a.length&&l&&l.length?yv(a,l,Ne(f,2)):a}function dU(a,l,f){return a&&a.length&&l&&l.length?yv(a,l,n,f):a}var hU=Rs(function(a,l){var f=a==null?0:a.length,y=lv(a,l);return PR(a,Tt(l,function(E){return As(E,f)?+E:E}).sort(VR)),y});function fU(a,l){var f=[];if(!(a&&a.length))return f;var y=-1,E=[],x=a.length;for(l=Ne(l,3);++y<x;){var F=a[y];l(F,y,a)&&(f.push(F),E.push(y))}return PR(a,E),f}function Vv(a){return a==null?a:oF.call(a)}function pU(a,l,f){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&tr(a,l,f)?(l=0,f=y):(l=l==null?0:$e(l),f=f===n?y:$e(f)),ri(a,l,f)):[]}function mU(a,l){return om(a,l)}function gU(a,l,f){return wv(a,l,Ne(f,2))}function yU(a,l){var f=a==null?0:a.length;if(f){var y=om(a,l);if(y<f&&Ri(a[y],l))return y}return-1}function _U(a,l){return om(a,l,!0)}function vU(a,l,f){return wv(a,l,Ne(f,2),!0)}function wU(a,l){var f=a==null?0:a.length;if(f){var y=om(a,l,!0)-1;if(Ri(a[y],l))return y}return-1}function EU(a){return a&&a.length?bR(a):[]}function TU(a,l){return a&&a.length?bR(a,Ne(l,2)):[]}function IU(a){var l=a==null?0:a.length;return l?ri(a,1,l):[]}function SU(a,l,f){return a&&a.length?(l=f||l===n?1:$e(l),ri(a,0,l<0?0:l)):[]}function RU(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:$e(l),l=y-l,ri(a,l<0?0:l,y)):[]}function AU(a,l){return a&&a.length?am(a,Ne(l,3),!1,!0):[]}function PU(a,l){return a&&a.length?am(a,Ne(l,3)):[]}var CU=qe(function(a){return _o(On(a,1,Xt,!0))}),bU=qe(function(a){var l=ii(a);return Xt(l)&&(l=n),_o(On(a,1,Xt,!0),Ne(l,2))}),xU=qe(function(a){var l=ii(a);return l=typeof l=="function"?l:n,_o(On(a,1,Xt,!0),n,l)});function kU(a){return a&&a.length?_o(a):[]}function NU(a,l){return a&&a.length?_o(a,Ne(l,2)):[]}function OU(a,l){return l=typeof l=="function"?l:n,a&&a.length?_o(a,n,l):[]}function Fv(a){if(!(a&&a.length))return[];var l=0;return a=Xr(a,function(f){if(Xt(f))return l=fn(f.length,l),!0}),dt(l,function(f){return Tt(a,v(f))})}function m1(a,l){if(!(a&&a.length))return[];var f=Fv(a);return l==null?f:Tt(f,function(y){return zn(l,n,y)})}var DU=qe(function(a,l){return Xt(a)?Fd(a,l):[]}),LU=qe(function(a){return Tv(Xr(a,Xt))}),MU=qe(function(a){var l=ii(a);return Xt(l)&&(l=n),Tv(Xr(a,Xt),Ne(l,2))}),VU=qe(function(a){var l=ii(a);return l=typeof l=="function"?l:n,Tv(Xr(a,Xt),n,l)}),FU=qe(Fv);function UU(a,l){return OR(a||[],l||[],Vd)}function jU(a,l){return OR(a||[],l||[],Bd)}var BU=qe(function(a){var l=a.length,f=l>1?a[l-1]:n;return f=typeof f=="function"?(a.pop(),f):n,m1(a,f)});function g1(a){var l=A(a);return l.__chain__=!0,l}function zU(a,l){return l(a),a}function gm(a,l){return l(a)}var $U=Rs(function(a){var l=a.length,f=l?a[0]:0,y=this.__wrapped__,E=function(x){return lv(x,a)};return l>1||this.__actions__.length||!(y instanceof Je)||!As(f)?this.thru(E):(y=y.slice(f,+f+(l?1:0)),y.__actions__.push({func:gm,args:[E],thisArg:n}),new ti(y,this.__chain__).thru(function(x){return l&&!x.length&&x.push(n),x}))});function WU(){return g1(this)}function qU(){return new ti(this.value(),this.__chain__)}function GU(){this.__values__===n&&(this.__values__=x1(this.value()));var a=this.__index__>=this.__values__.length,l=a?n:this.__values__[this.__index__++];return{done:a,value:l}}function KU(){return this}function HU(a){for(var l,f=this;f instanceof tm;){var y=l1(f);y.__index__=0,y.__values__=n,l?E.__wrapped__=y:l=y;var E=y;f=f.__wrapped__}return E.__wrapped__=a,l}function QU(){var a=this.__wrapped__;if(a instanceof Je){var l=a;return this.__actions__.length&&(l=new Je(this)),l=l.reverse(),l.__actions__.push({func:gm,args:[Vv],thisArg:n}),new ti(l,this.__chain__)}return this.thru(Vv)}function YU(){return NR(this.__wrapped__,this.__actions__)}var JU=um(function(a,l,f){gt.call(a,f)?++a[f]:Is(a,f,1)});function XU(a,l,f){var y=je(a)?hl:zF;return f&&tr(a,l,f)&&(l=n),y(a,Ne(l,3))}function ZU(a,l){var f=je(a)?Xr:mR;return f(a,Ne(l,3))}var ej=$R(c1),tj=$R(d1);function nj(a,l){return On(ym(a,l),1)}function rj(a,l){return On(ym(a,l),de)}function ij(a,l,f){return f=f===n?1:$e(f),On(ym(a,l),f)}function y1(a,l){var f=je(a)?Zn:yo;return f(a,Ne(l,3))}function _1(a,l){var f=je(a)?Vp:pR;return f(a,Ne(l,3))}var sj=um(function(a,l,f){gt.call(a,f)?a[f].push(l):Is(a,f,[l])});function oj(a,l,f,y){a=yr(a)?a:Al(a),f=f&&!y?$e(f):0;var E=a.length;return f<0&&(f=fn(E+f,0)),Tm(a)?f<=E&&a.indexOf(l,f)>-1:!!E&&ws(a,l,f)>-1}var aj=qe(function(a,l,f){var y=-1,E=typeof l=="function",x=yr(a)?Y(a.length):[];return yo(a,function(F){x[++y]=E?zn(l,F,f):Ud(F,l,f)}),x}),uj=um(function(a,l,f){Is(a,f,l)});function ym(a,l){var f=je(a)?Tt:ER;return f(a,Ne(l,3))}function lj(a,l,f,y){return a==null?[]:(je(l)||(l=l==null?[]:[l]),f=y?n:f,je(f)||(f=f==null?[]:[f]),RR(a,l,f))}var cj=um(function(a,l,f){a[f?0:1].push(l)},function(){return[[],[]]});function dj(a,l,f){var y=je(a)?Ti:K,E=arguments.length<3;return y(a,Ne(l,4),f,E,yo)}function hj(a,l,f){var y=je(a)?Fp:K,E=arguments.length<3;return y(a,Ne(l,4),f,E,pR)}function fj(a,l){var f=je(a)?Xr:mR;return f(a,wm(Ne(l,3)))}function pj(a){var l=je(a)?cR:o2;return l(a)}function mj(a,l,f){(f?tr(a,l,f):l===n)?l=1:l=$e(l);var y=je(a)?VF:a2;return y(a,l)}function gj(a){var l=je(a)?FF:l2;return l(a)}function yj(a){if(a==null)return 0;if(yr(a))return Tm(a)?gl(a):a.length;var l=qn(a);return l==lt||l==Bn?a.size:mv(a).length}function _j(a,l,f){var y=je(a)?fl:c2;return f&&tr(a,l,f)&&(l=n),y(a,Ne(l,3))}var vj=qe(function(a,l){if(a==null)return[];var f=l.length;return f>1&&tr(a,l[0],l[1])?l=[]:f>2&&tr(l[0],l[1],l[2])&&(l=[l[0]]),RR(a,On(l,1),[])}),_m=ZV||function(){return $t.Date.now()};function wj(a,l){if(typeof l!="function")throw new ei(o);return a=$e(a),function(){if(--a<1)return l.apply(this,arguments)}}function v1(a,l,f){return l=f?n:l,l=a&&l==null?a.length:l,Ss(a,C,n,n,n,n,l)}function w1(a,l){var f;if(typeof l!="function")throw new ei(o);return a=$e(a),function(){return--a>0&&(f=l.apply(this,arguments)),a<=1&&(l=n),f}}var Uv=qe(function(a,l,f){var y=O;if(f.length){var E=mo(f,Sl(Uv));y|=q}return Ss(a,y,l,f,E)}),E1=qe(function(a,l,f){var y=O|k;if(f.length){var E=mo(f,Sl(E1));y|=q}return Ss(l,y,a,f,E)});function T1(a,l,f){l=f?n:l;var y=Ss(a,S,n,n,n,n,n,l);return y.placeholder=T1.placeholder,y}function I1(a,l,f){l=f?n:l;var y=Ss(a,U,n,n,n,n,n,l);return y.placeholder=I1.placeholder,y}function S1(a,l,f){var y,E,x,F,B,G,te=0,ne=!1,ie=!1,ye=!0;if(typeof a!="function")throw new ei(o);l=si(l)||0,Vt(f)&&(ne=!!f.leading,ie="maxWait"in f,x=ie?fn(si(f.maxWait)||0,l):x,ye="trailing"in f?!!f.trailing:ye);function Se(Zt){var Ai=y,bs=E;return y=E=n,te=Zt,F=a.apply(bs,Ai),F}function Oe(Zt){return te=Zt,B=Wd(Ke,l),ne?Se(Zt):F}function We(Zt){var Ai=Zt-G,bs=Zt-te,$1=l-Ai;return ie?Wn($1,x-bs):$1}function De(Zt){var Ai=Zt-G,bs=Zt-te;return G===n||Ai>=l||Ai<0||ie&&bs>=x}function Ke(){var Zt=_m();if(De(Zt))return tt(Zt);B=Wd(Ke,We(Zt))}function tt(Zt){return B=n,ye&&y?Se(Zt):(y=E=n,F)}function Dr(){B!==n&&DR(B),te=0,y=G=E=B=n}function nr(){return B===n?F:tt(_m())}function Lr(){var Zt=_m(),Ai=De(Zt);if(y=arguments,E=this,G=Zt,Ai){if(B===n)return Oe(G);if(ie)return DR(B),B=Wd(Ke,l),Se(G)}return B===n&&(B=Wd(Ke,l)),F}return Lr.cancel=Dr,Lr.flush=nr,Lr}var Ej=qe(function(a,l){return fR(a,1,l)}),Tj=qe(function(a,l,f){return fR(a,si(l)||0,f)});function Ij(a){return Ss(a,L)}function vm(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new ei(o);var f=function(){var y=arguments,E=l?l.apply(this,y):y[0],x=f.cache;if(x.has(E))return x.get(E);var F=a.apply(this,y);return f.cache=x.set(E,F)||x,F};return f.cache=new(vm.Cache||Ts),f}vm.Cache=Ts;function wm(a){if(typeof a!="function")throw new ei(o);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function Sj(a){return w1(2,a)}var Rj=d2(function(a,l){l=l.length==1&&je(l[0])?Tt(l[0],ft(Ne())):Tt(On(l,1),ft(Ne()));var f=l.length;return qe(function(y){for(var E=-1,x=Wn(y.length,f);++E<x;)y[E]=l[E].call(this,y[E]);return zn(a,this,y)})}),jv=qe(function(a,l){var f=mo(l,Sl(jv));return Ss(a,q,n,l,f)}),R1=qe(function(a,l){var f=mo(l,Sl(R1));return Ss(a,$,n,l,f)}),Aj=Rs(function(a,l){return Ss(a,R,n,n,n,l)});function Pj(a,l){if(typeof a!="function")throw new ei(o);return l=l===n?l:$e(l),qe(a,l)}function Cj(a,l){if(typeof a!="function")throw new ei(o);return l=l==null?0:fn($e(l),0),qe(function(f){var y=f[l],E=wo(f,0,l);return y&&Ei(E,y),zn(a,this,E)})}function bj(a,l,f){var y=!0,E=!0;if(typeof a!="function")throw new ei(o);return Vt(f)&&(y="leading"in f?!!f.leading:y,E="trailing"in f?!!f.trailing:E),S1(a,l,{leading:y,maxWait:l,trailing:E})}function xj(a){return v1(a,1)}function kj(a,l){return jv(Sv(l),a)}function Nj(){if(!arguments.length)return[];var a=arguments[0];return je(a)?a:[a]}function Oj(a){return ni(a,I)}function Dj(a,l){return l=typeof l=="function"?l:n,ni(a,I,l)}function Lj(a){return ni(a,m|I)}function Mj(a,l){return l=typeof l=="function"?l:n,ni(a,m|I,l)}function Vj(a,l){return l==null||hR(a,l,In(l))}function Ri(a,l){return a===l||a!==a&&l!==l}var Fj=hm(hv),Uj=hm(function(a,l){return a>=l}),Wa=_R(function(){return arguments}())?_R:function(a){return Wt(a)&&gt.call(a,"callee")&&!iR.call(a,"callee")},je=Y.isArray,jj=bd?ft(bd):HF;function yr(a){return a!=null&&Em(a.length)&&!Ps(a)}function Xt(a){return Wt(a)&&yr(a)}function Bj(a){return a===!0||a===!1||Wt(a)&&er(a)==Jt}var Eo=tF||Jv,zj=dl?ft(dl):QF;function $j(a){return Wt(a)&&a.nodeType===1&&!qd(a)}function Wj(a){if(a==null)return!0;if(yr(a)&&(je(a)||typeof a=="string"||typeof a.splice=="function"||Eo(a)||Rl(a)||Wa(a)))return!a.length;var l=qn(a);if(l==lt||l==Bn)return!a.size;if($d(a))return!mv(a).length;for(var f in a)if(gt.call(a,f))return!1;return!0}function qj(a,l){return jd(a,l)}function Gj(a,l,f){f=typeof f=="function"?f:n;var y=f?f(a,l):n;return y===n?jd(a,l,n,f):!!y}function Bv(a){if(!Wt(a))return!1;var l=er(a);return l==xe||l==be||typeof a.message=="string"&&typeof a.name=="string"&&!qd(a)}function Kj(a){return typeof a=="number"&&oR(a)}function Ps(a){if(!Vt(a))return!1;var l=er(a);return l==ke||l==nt||l==mt||l==Ju}function A1(a){return typeof a=="number"&&a==$e(a)}function Em(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function Vt(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function Wt(a){return a!=null&&typeof a=="object"}var P1=ka?ft(ka):JF;function Hj(a,l){return a===l||pv(a,l,kv(l))}function Qj(a,l,f){return f=typeof f=="function"?f:n,pv(a,l,kv(l),f)}function Yj(a){return C1(a)&&a!=+a}function Jj(a){if(D2(a))throw new Fe(s);return vR(a)}function Xj(a){return a===null}function Zj(a){return a==null}function C1(a){return typeof a=="number"||Wt(a)&&er(a)==Ve}function qd(a){if(!Wt(a)||er(a)!=At)return!1;var l=Hp(a);if(l===null)return!0;var f=gt.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&Wp.call(f)==QV}var zv=xd?ft(xd):XF;function eB(a){return A1(a)&&a>=-Q&&a<=Q}var b1=Na?ft(Na):ZF;function Tm(a){return typeof a=="string"||!je(a)&&Wt(a)&&er(a)==fs}function Or(a){return typeof a=="symbol"||Wt(a)&&er(a)==Fi}var Rl=Mp?ft(Mp):e2;function tB(a){return a===n}function nB(a){return Wt(a)&&qn(a)==Ui}function rB(a){return Wt(a)&&er(a)==Le}var iB=hm(gv),sB=hm(function(a,l){return a<=l});function x1(a){if(!a)return[];if(yr(a))return Tm(a)?Ii(a):gr(a);if(Nd&&a[Nd])return VV(a[Nd]());var l=qn(a),f=l==lt?rv:l==Bn?Bp:Al;return f(a)}function Cs(a){if(!a)return a===0?a:0;if(a=si(a),a===de||a===-de){var l=a<0?-1:1;return l*ue}return a===a?a:0}function $e(a){var l=Cs(a),f=l%1;return l===l?f?l-f:l:0}function k1(a){return a?ja($e(a),0,_e):0}function si(a){if(typeof a=="number")return a;if(Or(a))return me;if(Vt(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=Vt(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=et(a);var f=gp.test(a);return f||md.test(a)?Dp(a.slice(2),f?2:8):ji.test(a)?me:+a}function N1(a){return Wi(a,_r(a))}function oB(a){return a?ja($e(a),-Q,Q):a===0?a:0}function pt(a){return a==null?"":Nr(a)}var aB=Tl(function(a,l){if($d(l)||yr(l)){Wi(l,In(l),a);return}for(var f in l)gt.call(l,f)&&Vd(a,f,l[f])}),O1=Tl(function(a,l){Wi(l,_r(l),a)}),Im=Tl(function(a,l,f,y){Wi(l,_r(l),a,y)}),uB=Tl(function(a,l,f,y){Wi(l,In(l),a,y)}),lB=Rs(lv);function cB(a,l){var f=El(a);return l==null?f:dR(f,l)}var dB=qe(function(a,l){a=It(a);var f=-1,y=l.length,E=y>2?l[2]:n;for(E&&tr(l[0],l[1],E)&&(y=1);++f<y;)for(var x=l[f],F=_r(x),B=-1,G=F.length;++B<G;){var te=F[B],ne=a[te];(ne===n||Ri(ne,_l[te])&&!gt.call(a,te))&&(a[te]=x[te])}return a}),hB=qe(function(a){return a.push(n,YR),zn(D1,n,a)});function fB(a,l){return $n(a,Ne(l,3),$i)}function pB(a,l){return $n(a,Ne(l,3),dv)}function mB(a,l){return a==null?a:cv(a,Ne(l,3),_r)}function gB(a,l){return a==null?a:gR(a,Ne(l,3),_r)}function yB(a,l){return a&&$i(a,Ne(l,3))}function _B(a,l){return a&&dv(a,Ne(l,3))}function vB(a){return a==null?[]:im(a,In(a))}function wB(a){return a==null?[]:im(a,_r(a))}function $v(a,l,f){var y=a==null?n:Ba(a,l);return y===n?f:y}function EB(a,l){return a!=null&&ZR(a,l,WF)}function Wv(a,l){return a!=null&&ZR(a,l,qF)}var TB=qR(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=qp.call(l)),a[l]=f},Gv(vr)),IB=qR(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=qp.call(l)),gt.call(a,l)?a[l].push(f):a[l]=[f]},Ne),SB=qe(Ud);function In(a){return yr(a)?lR(a):mv(a)}function _r(a){return yr(a)?lR(a,!0):t2(a)}function RB(a,l){var f={};return l=Ne(l,3),$i(a,function(y,E,x){Is(f,l(y,E,x),y)}),f}function AB(a,l){var f={};return l=Ne(l,3),$i(a,function(y,E,x){Is(f,E,l(y,E,x))}),f}var PB=Tl(function(a,l,f){sm(a,l,f)}),D1=Tl(function(a,l,f,y){sm(a,l,f,y)}),CB=Rs(function(a,l){var f={};if(a==null)return f;var y=!1;l=Tt(l,function(x){return x=vo(x,a),y||(y=x.length>1),x}),Wi(a,bv(a),f),y&&(f=ni(f,m|_|I,T2));for(var E=l.length;E--;)Ev(f,l[E]);return f});function bB(a,l){return L1(a,wm(Ne(l)))}var xB=Rs(function(a,l){return a==null?{}:r2(a,l)});function L1(a,l){if(a==null)return{};var f=Tt(bv(a),function(y){return[y]});return l=Ne(l),AR(a,f,function(y,E){return l(y,E[0])})}function kB(a,l,f){l=vo(l,a);var y=-1,E=l.length;for(E||(E=1,a=n);++y<E;){var x=a==null?n:a[qi(l[y])];x===n&&(y=E,x=f),a=Ps(x)?x.call(a):x}return a}function NB(a,l,f){return a==null?a:Bd(a,l,f)}function OB(a,l,f,y){return y=typeof y=="function"?y:n,a==null?a:Bd(a,l,f,y)}var M1=HR(In),V1=HR(_r);function DB(a,l,f){var y=je(a),E=y||Eo(a)||Rl(a);if(l=Ne(l,4),f==null){var x=a&&a.constructor;E?f=y?new x:[]:Vt(a)?f=Ps(x)?El(Hp(a)):{}:f={}}return(E?Zn:$i)(a,function(F,B,G){return l(f,F,B,G)}),f}function LB(a,l){return a==null?!0:Ev(a,l)}function MB(a,l,f){return a==null?a:kR(a,l,Sv(f))}function VB(a,l,f,y){return y=typeof y=="function"?y:n,a==null?a:kR(a,l,Sv(f),y)}function Al(a){return a==null?[]:on(a,In(a))}function FB(a){return a==null?[]:on(a,_r(a))}function UB(a,l,f){return f===n&&(f=l,l=n),f!==n&&(f=si(f),f=f===f?f:0),l!==n&&(l=si(l),l=l===l?l:0),ja(si(a),l,f)}function jB(a,l,f){return l=Cs(l),f===n?(f=l,l=0):f=Cs(f),a=si(a),GF(a,l,f)}function BB(a,l,f){if(f&&typeof f!="boolean"&&tr(a,l,f)&&(l=f=n),f===n&&(typeof l=="boolean"?(f=l,l=n):typeof a=="boolean"&&(f=a,a=n)),a===n&&l===n?(a=0,l=1):(a=Cs(a),l===n?(l=a,a=0):l=Cs(l)),a>l){var y=a;a=l,l=y}if(f||a%1||l%1){var E=aR();return Wn(a+E*(l-a+nv("1e-"+((E+"").length-1))),l)}return _v(a,l)}var zB=Il(function(a,l,f){return l=l.toLowerCase(),a+(f?F1(l):l)});function F1(a){return qv(pt(a).toLowerCase())}function U1(a){return a=pt(a),a&&a.replace(_p,NV).replace(X_,"")}function $B(a,l,f){a=pt(a),l=Nr(l);var y=a.length;f=f===n?y:ja($e(f),0,y);var E=f;return f-=l.length,f>=0&&a.slice(f,E)==l}function WB(a){return a=pt(a),a&&ms.test(a)?a.replace(nl,OV):a}function qB(a){return a=pt(a),a&&Ra.test(a)?a.replace(il,"\\$&"):a}var GB=Il(function(a,l,f){return a+(f?"-":"")+l.toLowerCase()}),KB=Il(function(a,l,f){return a+(f?" ":"")+l.toLowerCase()}),HB=zR("toLowerCase");function QB(a,l,f){a=pt(a),l=$e(l);var y=l?gl(a):0;if(!l||y>=l)return a;var E=(l-y)/2;return dm(Xp(E),f)+a+dm(Jp(E),f)}function YB(a,l,f){a=pt(a),l=$e(l);var y=l?gl(a):0;return l&&y<l?a+dm(l-y,f):a}function JB(a,l,f){a=pt(a),l=$e(l);var y=l?gl(a):0;return l&&y<l?dm(l-y,f)+a:a}function XB(a,l,f){return f||l==null?l=0:l&&(l=+l),sF(pt(a).replace(gs,""),l||0)}function ZB(a,l,f){return(f?tr(a,l,f):l===n)?l=1:l=$e(l),vv(pt(a),l)}function e4(){var a=arguments,l=pt(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var t4=Il(function(a,l,f){return a+(f?"_":"")+l.toLowerCase()});function n4(a,l,f){return f&&typeof f!="number"&&tr(a,l,f)&&(l=f=n),f=f===n?_e:f>>>0,f?(a=pt(a),a&&(typeof l=="string"||l!=null&&!zv(l))&&(l=Nr(l),!l&&ml(a))?wo(Ii(a),0,f):a.split(l,f)):[]}var r4=Il(function(a,l,f){return a+(f?" ":"")+qv(l)});function i4(a,l,f){return a=pt(a),f=f==null?0:ja($e(f),0,a.length),l=Nr(l),a.slice(f,f+l.length)==l}function s4(a,l,f){var y=A.templateSettings;f&&tr(a,l,f)&&(l=n),a=pt(a),l=Im({},l,y,QR);var E=Im({},l.imports,y.imports,QR),x=In(E),F=on(E,x),B,G,te=0,ne=l.interpolate||Pa,ie="__p += '",ye=iv((l.escape||Pa).source+"|"+ne.source+"|"+(ne===fd?pd:Pa).source+"|"+(l.evaluate||Pa).source+"|$","g"),Se="//# sourceURL="+(gt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Np+"]")+`
`;a.replace(ye,function(De,Ke,tt,Dr,nr,Lr){return tt||(tt=Dr),ie+=a.slice(te,Lr).replace(K_,DV),Ke&&(B=!0,ie+=`' +
__e(`+Ke+`) +
'`),nr&&(G=!0,ie+=`';
`+nr+`;
__p += '`),tt&&(ie+=`' +
((__t = (`+tt+`)) == null ? '' : __t) +
'`),te=Lr+De.length,De}),ie+=`';
`;var Oe=gt.call(l,"variable")&&l.variable;if(!Oe)ie=`with (obj) {
`+ie+`
}
`;else if(sl.test(Oe))throw new Fe(u);ie=(G?ie.replace(dd,""):ie).replace(dp,"$1").replace(hp,"$1;"),ie="function("+(Oe||"obj")+`) {
`+(Oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var We=B1(function(){return ht(x,Se+"return "+ie).apply(n,F)});if(We.source=ie,Bv(We))throw We;return We}function o4(a){return pt(a).toLowerCase()}function a4(a){return pt(a).toUpperCase()}function u4(a,l,f){if(a=pt(a),a&&(f||l===n))return et(a);if(!a||!(l=Nr(l)))return a;var y=Ii(a),E=Ii(l),x=mr(y,E),F=Ma(y,E)+1;return wo(y,x,F).join("")}function l4(a,l,f){if(a=pt(a),a&&(f||l===n))return a.slice(0,eR(a)+1);if(!a||!(l=Nr(l)))return a;var y=Ii(a),E=Ma(y,Ii(l))+1;return wo(y,0,E).join("")}function c4(a,l,f){if(a=pt(a),a&&(f||l===n))return a.replace(gs,"");if(!a||!(l=Nr(l)))return a;var y=Ii(a),E=mr(y,Ii(l));return wo(y,E).join("")}function d4(a,l){var f=V,y=j;if(Vt(l)){var E="separator"in l?l.separator:E;f="length"in l?$e(l.length):f,y="omission"in l?Nr(l.omission):y}a=pt(a);var x=a.length;if(ml(a)){var F=Ii(a);x=F.length}if(f>=x)return a;var B=f-gl(y);if(B<1)return y;var G=F?wo(F,0,B).join(""):a.slice(0,B);if(E===n)return G+y;if(F&&(B+=G.length-B),zv(E)){if(a.slice(B).search(E)){var te,ne=G;for(E.global||(E=iv(E.source,pt(Aa.exec(E))+"g")),E.lastIndex=0;te=E.exec(ne);)var ie=te.index;G=G.slice(0,ie===n?B:ie)}}else if(a.indexOf(Nr(E),B)!=B){var ye=G.lastIndexOf(E);ye>-1&&(G=G.slice(0,ye))}return G+y}function h4(a){return a=pt(a),a&&hd.test(a)?a.replace(oo,BV):a}var f4=Il(function(a,l,f){return a+(f?" ":"")+l.toUpperCase()}),qv=zR("toUpperCase");function j1(a,l,f){return a=pt(a),l=f?n:l,l===n?MV(a)?WV(a):pl(a):a.match(l)||[]}var B1=qe(function(a,l){try{return zn(a,n,l)}catch(f){return Bv(f)?f:new Fe(f)}}),p4=Rs(function(a,l){return Zn(l,function(f){f=qi(f),Is(a,f,Uv(a[f],a))}),a});function m4(a){var l=a==null?0:a.length,f=Ne();return a=l?Tt(a,function(y){if(typeof y[1]!="function")throw new ei(o);return[f(y[0]),y[1]]}):[],qe(function(y){for(var E=-1;++E<l;){var x=a[E];if(zn(x[0],this,y))return zn(x[1],this,y)}})}function g4(a){return BF(ni(a,m))}function Gv(a){return function(){return a}}function y4(a,l){return a==null||a!==a?l:a}var _4=WR(),v4=WR(!0);function vr(a){return a}function Kv(a){return wR(typeof a=="function"?a:ni(a,m))}function w4(a){return TR(ni(a,m))}function E4(a,l){return IR(a,ni(l,m))}var T4=qe(function(a,l){return function(f){return Ud(f,a,l)}}),I4=qe(function(a,l){return function(f){return Ud(a,f,l)}});function Hv(a,l,f){var y=In(l),E=im(l,y);f==null&&!(Vt(l)&&(E.length||!y.length))&&(f=l,l=a,a=this,E=im(l,In(l)));var x=!(Vt(f)&&"chain"in f)||!!f.chain,F=Ps(a);return Zn(E,function(B){var G=l[B];a[B]=G,F&&(a.prototype[B]=function(){var te=this.__chain__;if(x||te){var ne=a(this.__wrapped__),ie=ne.__actions__=gr(this.__actions__);return ie.push({func:G,args:arguments,thisArg:a}),ne.__chain__=te,ne}return G.apply(a,Ei([this.value()],arguments))})}),a}function S4(){return $t._===this&&($t._=YV),this}function Qv(){}function R4(a){return a=$e(a),qe(function(l){return SR(l,a)})}var A4=Av(Tt),P4=Av(hl),C4=Av(fl);function z1(a){return Ov(a)?v(qi(a)):i2(a)}function b4(a){return function(l){return a==null?n:Ba(a,l)}}var x4=GR(),k4=GR(!0);function Yv(){return[]}function Jv(){return!1}function N4(){return{}}function O4(){return""}function D4(){return!0}function L4(a,l){if(a=$e(a),a<1||a>Q)return[];var f=_e,y=Wn(a,_e);l=Ne(l),a-=_e;for(var E=dt(y,l);++f<a;)l(f);return E}function M4(a){return je(a)?Tt(a,qi):Or(a)?[a]:gr(u1(pt(a)))}function V4(a){var l=++HV;return pt(a)+l}var F4=cm(function(a,l){return a+l},0),U4=Pv("ceil"),j4=cm(function(a,l){return a/l},1),B4=Pv("floor");function z4(a){return a&&a.length?rm(a,vr,hv):n}function $4(a,l){return a&&a.length?rm(a,Ne(l,2),hv):n}function W4(a){return g(a,vr)}function q4(a,l){return g(a,Ne(l,2))}function G4(a){return a&&a.length?rm(a,vr,gv):n}function K4(a,l){return a&&a.length?rm(a,Ne(l,2),gv):n}var H4=cm(function(a,l){return a*l},1),Q4=Pv("round"),Y4=cm(function(a,l){return a-l},0);function J4(a){return a&&a.length?he(a,vr):0}function X4(a,l){return a&&a.length?he(a,Ne(l,2)):0}return A.after=wj,A.ary=v1,A.assign=aB,A.assignIn=O1,A.assignInWith=Im,A.assignWith=uB,A.at=lB,A.before=w1,A.bind=Uv,A.bindAll=p4,A.bindKey=E1,A.castArray=Nj,A.chain=g1,A.chunk=B2,A.compact=z2,A.concat=$2,A.cond=m4,A.conforms=g4,A.constant=Gv,A.countBy=JU,A.create=cB,A.curry=T1,A.curryRight=I1,A.debounce=S1,A.defaults=dB,A.defaultsDeep=hB,A.defer=Ej,A.delay=Tj,A.difference=W2,A.differenceBy=q2,A.differenceWith=G2,A.drop=K2,A.dropRight=H2,A.dropRightWhile=Q2,A.dropWhile=Y2,A.fill=J2,A.filter=ZU,A.flatMap=nj,A.flatMapDeep=rj,A.flatMapDepth=ij,A.flatten=h1,A.flattenDeep=X2,A.flattenDepth=Z2,A.flip=Ij,A.flow=_4,A.flowRight=v4,A.fromPairs=eU,A.functions=vB,A.functionsIn=wB,A.groupBy=sj,A.initial=nU,A.intersection=rU,A.intersectionBy=iU,A.intersectionWith=sU,A.invert=TB,A.invertBy=IB,A.invokeMap=aj,A.iteratee=Kv,A.keyBy=uj,A.keys=In,A.keysIn=_r,A.map=ym,A.mapKeys=RB,A.mapValues=AB,A.matches=w4,A.matchesProperty=E4,A.memoize=vm,A.merge=PB,A.mergeWith=D1,A.method=T4,A.methodOf=I4,A.mixin=Hv,A.negate=wm,A.nthArg=R4,A.omit=CB,A.omitBy=bB,A.once=Sj,A.orderBy=lj,A.over=A4,A.overArgs=Rj,A.overEvery=P4,A.overSome=C4,A.partial=jv,A.partialRight=R1,A.partition=cj,A.pick=xB,A.pickBy=L1,A.property=z1,A.propertyOf=b4,A.pull=lU,A.pullAll=p1,A.pullAllBy=cU,A.pullAllWith=dU,A.pullAt=hU,A.range=x4,A.rangeRight=k4,A.rearg=Aj,A.reject=fj,A.remove=fU,A.rest=Pj,A.reverse=Vv,A.sampleSize=mj,A.set=NB,A.setWith=OB,A.shuffle=gj,A.slice=pU,A.sortBy=vj,A.sortedUniq=EU,A.sortedUniqBy=TU,A.split=n4,A.spread=Cj,A.tail=IU,A.take=SU,A.takeRight=RU,A.takeRightWhile=AU,A.takeWhile=PU,A.tap=zU,A.throttle=bj,A.thru=gm,A.toArray=x1,A.toPairs=M1,A.toPairsIn=V1,A.toPath=M4,A.toPlainObject=N1,A.transform=DB,A.unary=xj,A.union=CU,A.unionBy=bU,A.unionWith=xU,A.uniq=kU,A.uniqBy=NU,A.uniqWith=OU,A.unset=LB,A.unzip=Fv,A.unzipWith=m1,A.update=MB,A.updateWith=VB,A.values=Al,A.valuesIn=FB,A.without=DU,A.words=j1,A.wrap=kj,A.xor=LU,A.xorBy=MU,A.xorWith=VU,A.zip=FU,A.zipObject=UU,A.zipObjectDeep=jU,A.zipWith=BU,A.entries=M1,A.entriesIn=V1,A.extend=O1,A.extendWith=Im,Hv(A,A),A.add=F4,A.attempt=B1,A.camelCase=zB,A.capitalize=F1,A.ceil=U4,A.clamp=UB,A.clone=Oj,A.cloneDeep=Lj,A.cloneDeepWith=Mj,A.cloneWith=Dj,A.conformsTo=Vj,A.deburr=U1,A.defaultTo=y4,A.divide=j4,A.endsWith=$B,A.eq=Ri,A.escape=WB,A.escapeRegExp=qB,A.every=XU,A.find=ej,A.findIndex=c1,A.findKey=fB,A.findLast=tj,A.findLastIndex=d1,A.findLastKey=pB,A.floor=B4,A.forEach=y1,A.forEachRight=_1,A.forIn=mB,A.forInRight=gB,A.forOwn=yB,A.forOwnRight=_B,A.get=$v,A.gt=Fj,A.gte=Uj,A.has=EB,A.hasIn=Wv,A.head=f1,A.identity=vr,A.includes=oj,A.indexOf=tU,A.inRange=jB,A.invoke=SB,A.isArguments=Wa,A.isArray=je,A.isArrayBuffer=jj,A.isArrayLike=yr,A.isArrayLikeObject=Xt,A.isBoolean=Bj,A.isBuffer=Eo,A.isDate=zj,A.isElement=$j,A.isEmpty=Wj,A.isEqual=qj,A.isEqualWith=Gj,A.isError=Bv,A.isFinite=Kj,A.isFunction=Ps,A.isInteger=A1,A.isLength=Em,A.isMap=P1,A.isMatch=Hj,A.isMatchWith=Qj,A.isNaN=Yj,A.isNative=Jj,A.isNil=Zj,A.isNull=Xj,A.isNumber=C1,A.isObject=Vt,A.isObjectLike=Wt,A.isPlainObject=qd,A.isRegExp=zv,A.isSafeInteger=eB,A.isSet=b1,A.isString=Tm,A.isSymbol=Or,A.isTypedArray=Rl,A.isUndefined=tB,A.isWeakMap=nB,A.isWeakSet=rB,A.join=oU,A.kebabCase=GB,A.last=ii,A.lastIndexOf=aU,A.lowerCase=KB,A.lowerFirst=HB,A.lt=iB,A.lte=sB,A.max=z4,A.maxBy=$4,A.mean=W4,A.meanBy=q4,A.min=G4,A.minBy=K4,A.stubArray=Yv,A.stubFalse=Jv,A.stubObject=N4,A.stubString=O4,A.stubTrue=D4,A.multiply=H4,A.nth=uU,A.noConflict=S4,A.noop=Qv,A.now=_m,A.pad=QB,A.padEnd=YB,A.padStart=JB,A.parseInt=XB,A.random=BB,A.reduce=dj,A.reduceRight=hj,A.repeat=ZB,A.replace=e4,A.result=kB,A.round=Q4,A.runInContext=W,A.sample=pj,A.size=yj,A.snakeCase=t4,A.some=_j,A.sortedIndex=mU,A.sortedIndexBy=gU,A.sortedIndexOf=yU,A.sortedLastIndex=_U,A.sortedLastIndexBy=vU,A.sortedLastIndexOf=wU,A.startCase=r4,A.startsWith=i4,A.subtract=Y4,A.sum=J4,A.sumBy=X4,A.template=s4,A.times=L4,A.toFinite=Cs,A.toInteger=$e,A.toLength=k1,A.toLower=o4,A.toNumber=si,A.toSafeInteger=oB,A.toString=pt,A.toUpper=a4,A.trim=u4,A.trimEnd=l4,A.trimStart=c4,A.truncate=d4,A.unescape=h4,A.uniqueId=V4,A.upperCase=f4,A.upperFirst=qv,A.each=y1,A.eachRight=_1,A.first=f1,Hv(A,function(){var a={};return $i(A,function(l,f){gt.call(A.prototype,f)||(a[f]=l)}),a}(),{chain:!1}),A.VERSION=r,Zn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){A[a].placeholder=A}),Zn(["drop","take"],function(a,l){Je.prototype[a]=function(f){f=f===n?1:fn($e(f),0);var y=this.__filtered__&&!l?new Je(this):this.clone();return y.__filtered__?y.__takeCount__=Wn(f,y.__takeCount__):y.__views__.push({size:Wn(f,_e),type:a+(y.__dir__<0?"Right":"")}),y},Je.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),Zn(["filter","map","takeWhile"],function(a,l){var f=l+1,y=f==fe||f==ce;Je.prototype[a]=function(E){var x=this.clone();return x.__iteratees__.push({iteratee:Ne(E,3),type:f}),x.__filtered__=x.__filtered__||y,x}}),Zn(["head","last"],function(a,l){var f="take"+(l?"Right":"");Je.prototype[a]=function(){return this[f](1).value()[0]}}),Zn(["initial","tail"],function(a,l){var f="drop"+(l?"":"Right");Je.prototype[a]=function(){return this.__filtered__?new Je(this):this[f](1)}}),Je.prototype.compact=function(){return this.filter(vr)},Je.prototype.find=function(a){return this.filter(a).head()},Je.prototype.findLast=function(a){return this.reverse().find(a)},Je.prototype.invokeMap=qe(function(a,l){return typeof a=="function"?new Je(this):this.map(function(f){return Ud(f,a,l)})}),Je.prototype.reject=function(a){return this.filter(wm(Ne(a)))},Je.prototype.slice=function(a,l){a=$e(a);var f=this;return f.__filtered__&&(a>0||l<0)?new Je(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),l!==n&&(l=$e(l),f=l<0?f.dropRight(-l):f.take(l-a)),f)},Je.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Je.prototype.toArray=function(){return this.take(_e)},$i(Je.prototype,function(a,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),y=/^(?:head|last)$/.test(l),E=A[y?"take"+(l=="last"?"Right":""):l],x=y||/^find/.test(l);E&&(A.prototype[l]=function(){var F=this.__wrapped__,B=y?[1]:arguments,G=F instanceof Je,te=B[0],ne=G||je(F),ie=function(Ke){var tt=E.apply(A,Ei([Ke],B));return y&&ye?tt[0]:tt};ne&&f&&typeof te=="function"&&te.length!=1&&(G=ne=!1);var ye=this.__chain__,Se=!!this.__actions__.length,Oe=x&&!ye,We=G&&!Se;if(!x&&ne){F=We?F:new Je(this);var De=a.apply(F,B);return De.__actions__.push({func:gm,args:[ie],thisArg:n}),new ti(De,ye)}return Oe&&We?a.apply(this,B):(De=this.thru(ie),Oe?y?De.value()[0]:De.value():De)})}),Zn(["pop","push","shift","sort","splice","unshift"],function(a){var l=zp[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",y=/^(?:pop|shift)$/.test(a);A.prototype[a]=function(){var E=arguments;if(y&&!this.__chain__){var x=this.value();return l.apply(je(x)?x:[],E)}return this[f](function(F){return l.apply(je(F)?F:[],E)})}}),$i(Je.prototype,function(a,l){var f=A[l];if(f){var y=f.name+"";gt.call(wl,y)||(wl[y]=[]),wl[y].push({name:l,func:f})}}),wl[lm(n,k).name]=[{name:"wrapper",func:n}],Je.prototype.clone=hF,Je.prototype.reverse=fF,Je.prototype.value=pF,A.prototype.at=$U,A.prototype.chain=WU,A.prototype.commit=qU,A.prototype.next=GU,A.prototype.plant=HU,A.prototype.reverse=QU,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=YU,A.prototype.first=A.prototype.head,Nd&&(A.prototype[Nd]=KU),A},yl=qV();Nn?((Nn.exports=yl)._=yl,cl._=yl):$t._=yl}).call(gn)})(Jg,Jg.exports);var Ct=Jg.exports;const Vo=Nf(Ct);var aP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},A9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let _=(u&15)<<2|h>>6,I=h&63;c||(I=64,o||(_=64)),r.push(n[p],n[m],n[_],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_N(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):A9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||m==null)throw new P9;const _=s<<2|u>>4;if(r.push(_),h!==64){const I=u<<4&240|h>>2;if(r.push(I),m!==64){const T=h<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class P9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C9=function(t){const e=_N(t);return vN.encodeByteArray(e,!0)},Xg=function(t){return C9(t).replace(/\./g,"")},wN=function(t){try{return vN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Zg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!b9(n)||(t[n]=Zg(t[n],e[n]));return t}function b9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=()=>EN().__FIREBASE_DEFAULTS__,k9=()=>{if(typeof process>"u"||typeof aP>"u")return;const t=aP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},N9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wN(t[1]);return e&&JSON.parse(e)},qy=()=>{try{return x9()||k9()||N9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},TN=t=>{var e,n;return(n=(e=qy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},O9=t=>{const e=TN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IN=()=>{var t;return(t=qy())===null||t===void 0?void 0:t.config},SN=t=>{var e;return(e=qy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Xg(JSON.stringify(n)),Xg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function ZT(){var t;const e=(t=qy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V9(){return typeof window<"u"||RN()}function RN(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function F9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PN(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CN(){return!ZT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sf(){try{return typeof indexedDB=="object"}catch{return!1}}function U9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="FirebaseError";class ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j9,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wu.prototype.create)}}class Wu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?B9(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new ur(i,u,r)}}function B9(t,e){return t.replace(z9,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const z9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function $9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lP(s)&&lP(o)){if(!Tc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ec(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bN(t,e){const n=new W9(t,e);return n.subscribe.bind(n)}class W9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rw),i.error===void 0&&(i.error=Rw),i.complete===void 0&&(i.complete=Rw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class us{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G9=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new D9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H9(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function K9(t){return t===Ha?void 0:t}function H9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=[];var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const kN={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Q9=He.INFO,Y9={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},J9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Y9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gy{constructor(e){this.name=e,this._logLevel=Q9,this._logHandler=J9,this._userLogHandler=null,tI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}function X9(t){tI.forEach(e=>{e.setLogLevel(t)})}function Z9(t,e){for(const n of tI){let r=null;e&&e.level&&(r=kN[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const u=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:He[s].toLowerCase(),message:u,args:o,type:i.name})}}}const e6=(t,e)=>e.some(n=>t instanceof n);let cP,dP;function t6(){return cP||(cP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n6(){return dP||(dP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NN=new WeakMap,eE=new WeakMap,ON=new WeakMap,Aw=new WeakMap,nI=new WeakMap;function r6(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NN.set(n,t)}).catch(()=>{}),nI.set(e,t),e}function i6(t){if(eE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});eE.set(t,e)}let tE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return eE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ON.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s6(t){tE=t(tE)}function o6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pw(this),e,...n);return ON.set(r,e.sort?e.sort():[e]),Qo(r)}:n6().includes(t)?function(...e){return t.apply(Pw(this),e),Qo(NN.get(this))}:function(...e){return Qo(t.apply(Pw(this),e))}}function a6(t){return typeof t=="function"?o6(t):(t instanceof IDBTransaction&&i6(t),e6(t,t6())?new Proxy(t,tE):t)}function Qo(t){if(t instanceof IDBRequest)return r6(t);if(Aw.has(t))return Aw.get(t);const e=a6(t);return e!==t&&(Aw.set(t,e),nI.set(e,t)),e}const Pw=t=>nI.get(t);function u6(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=Qo(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Qo(o.result),c.oldVersion,c.newVersion,Qo(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const l6=["get","getKey","getAll","getAllKeys","count"],c6=["put","add","delete","clear"],Cw=new Map;function hP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cw.get(e))return Cw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=c6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||l6.includes(n)))return;const s=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&c.done]))[0]};return Cw.set(e,s),s}s6(t=>({...t,get:(e,n,r)=>hP(e,n)||t.get(e,n,r),has:(e,n)=>!!hP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ey="@firebase/app",nE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Gy("@firebase/app"),f6="@firebase/app-compat",p6="@firebase/analytics-compat",m6="@firebase/analytics",g6="@firebase/app-check-compat",y6="@firebase/app-check",_6="@firebase/auth",v6="@firebase/auth-compat",w6="@firebase/database",E6="@firebase/data-connect",T6="@firebase/database-compat",I6="@firebase/functions",S6="@firebase/functions-compat",R6="@firebase/installations",A6="@firebase/installations-compat",P6="@firebase/messaging",C6="@firebase/messaging-compat",b6="@firebase/performance",x6="@firebase/performance-compat",k6="@firebase/remote-config",N6="@firebase/remote-config-compat",O6="@firebase/storage",D6="@firebase/storage-compat",L6="@firebase/firestore",M6="@firebase/vertexai-preview",V6="@firebase/firestore-compat",F6="firebase",U6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]",j6={[ey]:"fire-core",[f6]:"fire-core-compat",[m6]:"fire-analytics",[p6]:"fire-analytics-compat",[y6]:"fire-app-check",[g6]:"fire-app-check-compat",[_6]:"fire-auth",[v6]:"fire-auth-compat",[w6]:"fire-rtdb",[E6]:"fire-data-connect",[T6]:"fire-rtdb-compat",[I6]:"fire-fn",[S6]:"fire-fn-compat",[R6]:"fire-iid",[A6]:"fire-iid-compat",[P6]:"fire-fcm",[C6]:"fire-fcm-compat",[b6]:"fire-perf",[x6]:"fire-perf-compat",[k6]:"fire-rc",[N6]:"fire-rc-compat",[O6]:"fire-gcs",[D6]:"fire-gcs-compat",[L6]:"fire-fst",[V6]:"fire-fst-compat",[M6]:"fire-vertex","fire-js":"fire-js",[F6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Map,Ic=new Map,Sc=new Map;function of(t,e){try{t.container.addComponent(e)}catch(n){Gs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function DN(t,e){t.container.addOrOverwriteComponent(e)}function ta(t){const e=t.name;if(Sc.has(e))return Gs.debug(`There were multiple attempts to register component ${e}.`),!1;Sc.set(e,t);for(const n of ea.values())of(n,t);for(const n of Ic.values())of(n,t);return!0}function Uf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function B6(t,e,n=Zo){Uf(t,e).clearInstance(n)}function LN(t){return t.options!==void 0}function Gt(t){return t.settings!==void 0}function z6(){Sc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Wu("app","Firebase",$6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MN=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6 extends MN{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const u=e;super(u.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,pi(ey,nE,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){iI(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw fi.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=U6;function Ky(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zo,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=IN()),!n)throw fi.create("no-options");const s=ea.get(i);if(s){if(Tc(n,s.options)&&Tc(r,s.config))return s;throw fi.create("duplicate-app",{appName:i})}const o=new xN(i);for(const c of Sc.values())o.addComponent(c);const u=new MN(n,r,o);return ea.set(i,u),u}function q6(t,e){if(V9()&&!RN())throw fi.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;LN(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((p,m)=>Math.imul(31,p)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw fi.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Ic.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const u=new xN(s);for(const h of Sc.values())u.addComponent(h);const c=new W6(n,e,s,u);return Ic.set(s,c),c}function rI(t=Zo){const e=ea.get(t);if(!e&&t===Zo&&IN())return Ky();if(!e)throw fi.create("no-app",{appName:t});return e}function G6(){return Array.from(ea.values())}async function iI(t){let e=!1;const n=t.name;ea.has(n)?(e=!0,ea.delete(n)):Ic.has(n)&&t.decRefCount()<=0&&(Ic.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function pi(t,e,n){var r;let i=(r=j6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gs.warn(u.join(" "));return}ta(new us(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function VN(t,e){if(t!==null&&typeof t!="function")throw fi.create("invalid-log-argument");Z9(t,e)}function FN(t){X9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6="firebase-heartbeat-database",H6=1,af="firebase-heartbeat-store";let bw=null;function UN(){return bw||(bw=u6(K6,H6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(af)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),bw}async function Q6(t){try{const n=(await UN()).transaction(af),r=await n.objectStore(af).get(jN(t));return await n.done,r}catch(e){if(e instanceof ur)Gs.warn(e.message);else{const n=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gs.warn(n.message)}}}async function fP(t,e){try{const r=(await UN()).transaction(af,"readwrite");await r.objectStore(af).put(e,jN(t)),await r.done}catch(n){if(n instanceof ur)Gs.warn(n.message);else{const r=fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gs.warn(r.message)}}}function jN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=1024,J6=30*24*60*60*1e3;class X6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=J6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pP(),{heartbeatsToSend:r,unsentEntries:i}=Z6(this._heartbeatsCache.heartbeats),s=Xg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Gs.warn(n),""}}}function pP(){return new Date().toISOString().substring(0,10)}function Z6(t,e=Y6){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mP(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sf()?U9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Q6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mP(t){return Xg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(t){ta(new us("platform-logger",e=>new d6(e),"PRIVATE")),ta(new us("heartbeat",e=>new X6(e),"PRIVATE")),pi(ey,nE,t),pi(ey,nE,"esm2017"),pi("fire-js","")}tW("");const nW=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ur,SDK_VERSION:ga,_DEFAULT_ENTRY_NAME:Zo,_addComponent:of,_addOrOverwriteComponent:DN,_apps:ea,_clearComponents:z6,_components:Sc,_getProvider:Uf,_isFirebaseApp:LN,_isFirebaseServerApp:Gt,_registerComponent:ta,_removeServiceInstance:B6,_serverApps:Ic,deleteApp:iI,getApp:rI,getApps:G6,initializeApp:Ky,initializeServerApp:q6,onLog:VN,registerVersion:pi,setLogLevel:FN},Symbol.toStringTag,{value:"Module"}));function sI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const eh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Cl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rW(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function BN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iW=rW,sW=BN,zN=new Wu("auth","Firebase",BN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Gy("@firebase/auth");function oW(t,...e){ty.logLevel<=He.WARN&&ty.warn(`Auth (${ga}): ${t}`,...e)}function cg(t,...e){ty.logLevel<=He.ERROR&&ty.error(`Auth (${ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw aI(t,...e)}function vn(t,...e){return aI(t,...e)}function oI(t,e,n){const r=Object.assign(Object.assign({},sW()),{[e]:n});return new Wu("auth","Firebase",r).create(e,{appName:t.name})}function bn(t){return oI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xn(t,"argument-error"),oI(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zN.create(t,...e)}function le(t,e,...n){if(!t)throw aI(e,...n)}function es(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cg(e),new Error(e)}function Mi(t,e){t||es(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uI(){return gP()==="http:"||gP()==="https:"}function gP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uI()||AN()||"connection"in navigator)?navigator.onLine:!0}function uW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=M9()||eI()}get(){return aW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;es("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;es("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;es("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=new jf(3e4,6e4);function Qt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yt(t,e,n,r,i={}){return WN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const u=Gc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return F9()||(h.referrerPolicy="no-referrer"),$N.fetch()(qN(t,t.config.apiHost,n,u),h)})}async function WN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lW),e);try{const i=new hW(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ph(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const u=s.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ph(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw oI(t,p,h);xn(t,p)}}catch(i){if(i instanceof ur)throw i;xn(t,"network-request-failed",{message:String(i)})}}async function Zs(t,e,n,r,i={}){const s=await Yt(t,e,n,r,i);return"mfaPendingCredential"in s&&xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lI(t.config,i):`${t.config.apiScheme}://${i}`}function dW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hW{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),cW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){return t!==void 0&&t.getResponse!==void 0}function _P(t){return t!==void 0&&t.enterprise!==void 0}class fW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pW(t){return(await Yt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function mW(t,e){return Yt(t,"GET","/v2/recaptchaConfig",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gW(t,e){return Yt(t,"POST","/v1/accounts:delete",e)}async function yW(t,e){return Yt(t,"POST","/v1/accounts:update",e)}async function GN(t,e){return Yt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _W(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=Hy(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xh(xw(i.auth_time)),issuedAtTime:xh(xw(i.iat)),expirationTime:xh(xw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xw(t){return Number(t)*1e3}function Hy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cg("JWT malformed, contained fewer than 3 sections"),null;try{const i=wN(n);return i?JSON.parse(i):(cg("Failed to decode base64 JWT payload"),null)}catch(i){return cg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vP(t){const e=Hy(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ur&&vW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xh(this.lastLoginAt),this.creationTime=xh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ks(t,GN(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?KN(s.providerUserInfo):[],u=TW(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new rE(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function EW(t){const e=Pe(t);await lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KN(t){return t.map(e=>{var{providerId:n}=e,r=sI(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t,e){const n=await WN(t,{},async()=>{const r=Gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qN(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",$N.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SW(t,e){return Yt(t,"POST","/v2/accounts:revokeToken",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=vP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IW(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new uc;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ls{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=sI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ks(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _W(this,e)}reload(){return EW(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(bn(this.auth));const e=await this.getIdToken();return await Ks(this,gW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(u=n.tenantId)!==null&&u!==void 0?u:void 0,O=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,k=(h=n.createdAt)!==null&&h!==void 0?h:void 0,P=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:U,isAnonymous:q,providerData:$,stsTokenManager:C}=n;le(S&&C,e,"internal-error");const R=uc.fromJSON(this.name,C);le(typeof S=="string",e,"internal-error"),Io(m,e.name),Io(_,e.name),le(typeof U=="boolean",e,"internal-error"),le(typeof q=="boolean",e,"internal-error"),Io(I,e.name),Io(T,e.name),Io(D,e.name),Io(O,e.name),Io(k,e.name),Io(P,e.name);const L=new Ls({uid:S,auth:e,email:_,emailVerified:U,displayName:m,isAnonymous:q,photoURL:T,phoneNumber:I,tenantId:D,stsTokenManager:R,createdAt:k,lastLoginAt:P});return $&&Array.isArray($)&&(L.providerData=$.map(V=>Object.assign({},V))),O&&(L._redirectEventId=O),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new uc;i.updateFromServerResponse(n);const s=new Ls({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?KN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new uc;u.updateFromIdToken(r);const c=new Ls({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new Map;function Ur(t){Mi(t instanceof Function,"Expected a class definition");let e=wP.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HN.type="NONE";const Rc=HN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e,n){return`firebase:${t}:${e}:${n}`}class lc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mu(this.userKey,i.apiKey,s),this.fullPersistenceKey=mu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ls._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lc(Ur(Rc),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ur(Rc);const o=mu(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Ls._fromJSON(e,p);h!==s&&(u=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new lc(s,e,r):(s=c[0],u&&await s._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new lc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZN(e))return"Blackberry";if(eO(e))return"Webos";if(YN(e))return"Safari";if((e.includes("chrome/")||JN(e))&&!e.includes("edge/"))return"Chrome";if(Bf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QN(t=zt()){return/firefox\//i.test(t)}function YN(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JN(t=zt()){return/crios\//i.test(t)}function XN(t=zt()){return/iemobile/i.test(t)}function Bf(t=zt()){return/android/i.test(t)}function ZN(t=zt()){return/blackberry/i.test(t)}function eO(t=zt()){return/webos/i.test(t)}function zf(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RW(t=zt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function AW(t=zt()){var e;return zf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PW(){return PN()&&document.documentMode===10}function tO(t=zt()){return zf(t)||Bf(t)||eO(t)||ZN(t)||/windows phone/i.test(t)||XN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t,e=[]){let n;switch(t){case"Browser":n=EP(zt());break;case"Worker":n=`${EP(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,u)=>{try{const c=e(s);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(t,e={}){return Yt(t,"GET","/v2/passwordPolicy",Qt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=6;class kW{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TP(this),this.idTokenSubscription=new TP(this),this.beforeStateQueue=new CW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GN(this,{idToken:e}),r=await Ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Gt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(bn(this));const n=e?Pe(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(bn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(bn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bW(this),n=new kW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await lc.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(u,this,"internal-error"),u.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oW(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kt(t){return Pe(t)}class TP{constructor(e){this.auth=e,this.observer=null,this.addObserver=bN(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OW(t){$f=t}function cI(t){return $f.loadJS(t)}function DW(){return $f.recaptchaV2Script}function LW(){return $f.recaptchaEnterpriseScript}function MW(){return $f.gapiScript}function rO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VW="recaptcha-enterprise",FW="NO_RECAPTCHA";class UW{constructor(e){this.type=VW,this.auth=Kt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,u)=>{mW(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new fW(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(c=>{u(c)})})}function i(s,o,u){const c=window.grecaptcha;_P(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(FW)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(u=>{if(!n&&_P(window.grecaptcha))i(u,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=LW();c.length!==0&&(c+=u),cI(c).then(()=>{i(u,s,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function IP(t,e,n,r=!1){const i=new UW(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await IP(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await IP(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jW(t,e){const n=Uf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Tc(s,e??{}))return i;xn(i,"already-initialized")}return n.initialize({options:e})}function BW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iO(t,e,n){const r=Kt(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=sO(e),{host:o,port:u}=zW(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||$W()}function sO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zW(t){const e=sO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:SP(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:SP(o)}}}function SP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $W(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return es("not implemented")}_getIdTokenResponse(e){return es("not implemented")}_linkToIdToken(e,n){return es("not implemented")}_getReauthenticationResolver(e){return es("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e){return Yt(t,"POST","/v1/accounts:resetPassword",Qt(t,e))}async function WW(t,e){return Yt(t,"POST","/v1/accounts:update",e)}async function qW(t,e){return Yt(t,"POST","/v1/accounts:signUp",e)}async function GW(t,e){return Yt(t,"POST","/v1/accounts:update",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KW(t,e){return Zs(t,"POST","/v1/accounts:signInWithPassword",Qt(t,e))}async function Qy(t,e){return Yt(t,"POST","/v1/accounts:sendOobCode",Qt(t,e))}async function HW(t,e){return Qy(t,e)}async function QW(t,e){return Qy(t,e)}async function YW(t,e){return Qy(t,e)}async function JW(t,e){return Qy(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XW(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}async function ZW(t,e){return Zs(t,"POST","/v1/accounts:signInWithEmailLink",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends Hc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new df(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new df(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,n,"signInWithPassword",KW);case"emailLink":return XW(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cf(e,r,"signUpPassword",qW);case"emailLink":return ZW(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return Zs(t,"POST","/v1/accounts:signInWithIdp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="http://localhost";class ls extends Hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=sI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ls(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:e5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e){return Yt(t,"POST","/v1/accounts:sendVerificationCode",Qt(t,e))}async function n5(t,e){return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e))}async function r5(t,e){const n=await Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,e));if(n.temporaryProof)throw ph(t,"account-exists-with-different-credential",n);return n}const i5={USER_NOT_FOUND:"user-not-found"};async function s5(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Zs(t,"POST","/v1/accounts:signInWithPhoneNumber",Qt(t,n),i5)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends Hc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new gu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new gu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return n5(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return r5(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return s5(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new gu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a5(t){const e=ec(fh(t)).link,n=e?ec(fh(e)).deep_link_id:null,r=ec(fh(t)).deep_link_id;return(r?ec(fh(r)).link:null)||r||n||e||t}class Yy{constructor(e){var n,r,i,s,o,u;const c=ec(fh(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=o5((i=c.mode)!==null&&i!==void 0?i:null);le(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=a5(e);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.providerId=ya.PROVIDER_ID}static credential(e,n){return df._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yy.parseLink(n);return le(r,"argument-error"),df._fromEmailAndCode(e,r.code,r.tenantId)}}ya.PROVIDER_ID="password";ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends eo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class cc extends Qc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return le("providerId"in n&&"signInMethod"in n,"argument-error"),ls._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return le(e.idToken||e.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:u}=e;if(!r&&!i&&!n&&!s||!u)return null;try{return new cc(u)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Qc{constructor(){super("facebook.com")}static credential(e){return ls._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ls._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ui.credential(n,r)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Qc{constructor(){super("github.com")}static credential(e){return ls._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5="http://localhost";class Ac extends Hc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ac(r,s)}static _create(e,n){return new Ac(e,n)}buildRequest(){return{requestUri:u5,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5="saml.";class ny extends eo{constructor(e){le(e.startsWith(l5),"argument-error"),super(e)}static credentialFromResult(e){return ny.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ny.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ac.fromJSON(e);return le(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ac._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Qc{constructor(){super("twitter.com")}static credential(e,n){return ls._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xi.credential(n,r)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(t,e){return Zs(t,"POST","/v1/accounts:signUp",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ls._fromIdTokenResponse(e,r,i),o=RP(r);return new yi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RP(r);return new yi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t){var e;if(Gt(t.app))return Promise.reject(bn(t));const n=Kt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new yi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await aO(n,{returnSecureToken:!0}),i=await yi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends ur{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ry.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ry(e,n,r,i)}}function uO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ry._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e){const n=Pe(t);await Jy(!0,n,e);const{providerUserInfo:r}=await yW(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=lO(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function dI(t,e,n=!1){const r=await Ks(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yi._forOperation(t,"link",r)}async function Jy(t,e,n){await lf(e);const r=lO(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";le(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(t,e,n=!1){const{auth:r}=t;if(Gt(r.app))return Promise.reject(bn(r));const i="reauthenticate";try{const s=await Ks(t,uO(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=Hy(s.idToken);le(o,r,"internal-error");const{sub:u}=o;return le(t.uid===u,r,"user-mismatch"),yi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e,n=!1){if(Gt(t.app))return Promise.reject(bn(t));const r="signIn",i=await uO(t,r,e),s=await yi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Xy(t,e){return dO(Kt(t),e)}async function hO(t,e){const n=Pe(t);return await Jy(!1,n,e.providerId),dI(n,e)}async function fO(t,e){return cO(Pe(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e){return Zs(t,"POST","/v1/accounts:signInWithCustomToken",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){if(Gt(t.app))return Promise.reject(bn(t));const n=Kt(t),r=await h5(n,{token:e,returnSecureToken:!0}),i=await yi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hI._fromServerResponse(e,n):"totpInfo"in n?fI._fromServerResponse(e,n):xn(e,"internal-error")}}class hI extends Wf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hI(n)}}class fI extends Wf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new fI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e,n){var r;le(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),le(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(le(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(le(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(t){const e=Kt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p5(t,e,n){const r=Kt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Zy(r,i,n),await cf(r,i,"getOobCode",QW)}async function m5(t,e,n){await oO(Pe(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pI(t),r})}async function g5(t,e){await GW(Pe(t),{oobCode:e})}async function pO(t,e){const n=Pe(t),r=await oO(n,{oobCode:e}),i=r.requestType;switch(le(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(r.mfaInfo,n,"internal-error");default:le(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Wf._fromServerResponse(Kt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function y5(t,e){const{data:n}=await pO(Pe(t),e);return n.email}async function _5(t,e,n){if(Gt(t.app))return Promise.reject(bn(t));const r=Kt(t),o=await cf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aO).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&pI(t),c}),u=await yi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function v5(t,e,n){return Gt(t.app)?Promise.reject(bn(t)):Xy(Pe(t),ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w5(t,e,n){const r=Kt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,u){le(u.handleCodeInApp,r,"argument-error"),u&&Zy(r,o,u)}s(i,n),await cf(r,i,"getOobCode",YW)}function E5(t,e){const n=Yy.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function T5(t,e,n){if(Gt(t.app))return Promise.reject(bn(t));const r=Pe(t),i=ya.credentialWithLink(e,n||uf());return le(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Xy(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t,e){return Yt(t,"POST","/v1/accounts:createAuthUri",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(t,e){const n=uI()?uf():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await I5(Pe(t),r);return i||[]}async function R5(t,e){const n=Pe(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Zy(n.auth,i,e);const{email:s}=await HW(n.auth,i);s!==t.email&&await t.reload()}async function A5(t,e,n){const r=Pe(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Zy(r.auth,s,n);const{email:o}=await JW(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){return Yt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Pe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ks(r,P5(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function b5(t,e){const n=Pe(t);return Gt(n.auth.app)?Promise.reject(bn(n.auth)):mO(n,e,null)}function x5(t,e){return mO(Pe(t),null,e)}async function mO(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Ks(t,WW(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Hy(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const u=o!=="anonymous"&&o!=="custom"?o:null;return new dc(s,u)}}if(!r)return null;switch(r){case"facebook.com":return new N5(s,i);case"github.com":return new O5(s,i);case"google.com":return new D5(s,i);case"twitter.com":return new L5(s,i,t.screenName||null);case"custom":case"anonymous":return new dc(s,null);default:return new dc(s,r,i)}}class dc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class gO extends dc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class N5 extends dc{constructor(e,n){super(e,"facebook.com",n)}}class O5 extends gO{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class D5 extends dc{constructor(e,n){super(e,"google.com",n)}}class L5 extends gO{constructor(e,n,r){super(e,"twitter.com",n,r)}}function M5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:k5(n)}function V5(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function F5(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function U5(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new uu("enroll",e,n)}static _fromMfaPendingCredential(e){return new uu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return uu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return uu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Kt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(u=>Wf._fromServerResponse(r,u));le(i.mfaPendingCredential,r,"internal-error");const o=uu._fromMfaPendingCredential(i.mfaPendingCredential);return new mI(o,s,async u=>{const c=await u._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const p=await yi._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return le(n.user,r,"internal-error"),yi._forOperation(n.user,n.operationType,h);default:xn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function j5(t,e){var n;const r=Pe(t),i=e;return le(e.customData.operationType,r,"argument-error"),le((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),mI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5(t,e){return Yt(t,"POST","/v2/accounts/mfaEnrollment:start",Qt(t,e))}function z5(t,e){return Yt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Qt(t,e))}function $5(t,e){return Yt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Qt(t,e))}class gI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Wf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new gI(e)}async getSession(){return uu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Ks(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ks(this.user,$5(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const kw=new WeakMap;function W5(t){const e=Pe(t);return kw.has(e)||kw.set(e,gI._fromUser(e)),kw.get(e)}const iy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iy,"1"),this.storage.removeItem(iy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=1e3,G5=10;class _O extends yO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);PW()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,G5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_O.type="LOCAL";const e_=_O;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO extends yO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vO.type="SESSION";const na=vO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new t_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(o).map(async h=>h(n.origin,s)),c=await K5(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((u,c)=>{const h=qf("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return window}function Q5(t){un().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return typeof un().WorkerGlobalScope<"u"&&typeof un().importScripts=="function"}async function Y5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function X5(){return yI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="firebaseLocalStorageDb",Z5=1,sy="firebaseLocalStorage",EO="fbase_key";class Gf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function n_(t,e){return t.transaction([sy],e?"readwrite":"readonly").objectStore(sy)}function eq(){const t=indexedDB.deleteDatabase(wO);return new Gf(t).toPromise()}function iE(){const t=indexedDB.open(wO,Z5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sy,{keyPath:EO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sy)?e(r):(r.close(),await eq(),e(await iE()))})})}async function AP(t,e,n){const r=n_(t,!0).put({[EO]:e,value:n});return new Gf(r).toPromise()}async function tq(t,e){const n=n_(t,!1).get(e),r=await new Gf(n).toPromise();return r===void 0?null:r.value}function PP(t,e){const n=n_(t,!0).delete(e);return new Gf(n).toPromise()}const nq=800,rq=3;class TO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t_._getInstance(X5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Y5(),!this.activeServiceWorker)return;this.sender=new H5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iE();return await AP(e,iy,"1"),await PP(e,iy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>AP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>PP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=n_(i,!1).getAll();return new Gf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TO.type="LOCAL";const Pc=TO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(t,e){return Yt(t,"POST","/v2/accounts/mfaSignIn:start",Qt(t,e))}function sq(t,e){return Yt(t,"POST","/v2/accounts/mfaSignIn:finalize",Qt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oq=500,aq=6e4,Bm=1e12;class uq{constructor(e){this.auth=e,this.counter=Bm,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new lq(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Bm;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Bm;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Bm;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class lq{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;le(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=cq(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},aq)},oq))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function cq(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=rO("rcb"),dq=new jf(3e4,6e4);class hq{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=un().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return le(fq(n),e,"argument-error"),this.shouldResolveImmediately(n)&&yP(un().grecaptcha)?Promise.resolve(un().grecaptcha):new Promise((r,i)=>{const s=un().setTimeout(()=>{i(vn(e,"network-request-failed"))},dq.get());un()[Nw]=()=>{un().clearTimeout(s),delete un()[Nw];const u=un().grecaptcha;if(!u||!yP(u)){i(vn(e,"internal-error"));return}const c=u.render;u.render=(h,p)=>{const m=c(h,p);return this.counter++,m},this.hostLanguage=n,r(u)};const o=`${DW()}?${Gc({onload:Nw,render:"explicit",hl:n})}`;cI(o).catch(()=>{clearTimeout(s),i(vn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=un().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function fq(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class pq{async load(e){return new uq(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="recaptcha",mq={theme:"light",type:"image"};let gq=class{constructor(e,n,r=Object.assign({},mq)){this.parameters=r,this.type=IO,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(e),this.isInvisible=this.parameters.size==="invisible",le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;le(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pq:new hq,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=un()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){le(uI()&&!yI(),this.auth,"internal-error"),await yq(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await pW(this.auth);le(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function yq(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=gu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function _q(t,e,n){if(Gt(t.app))return Promise.reject(bn(t));const r=Kt(t),i=await r_(r,e,Pe(n));return new _I(i,s=>Xy(r,s))}async function vq(t,e,n){const r=Pe(t);await Jy(!1,r,"phone");const i=await r_(r.auth,e,Pe(n));return new _I(i,s=>hO(r,s))}async function wq(t,e,n){const r=Pe(t);if(Gt(r.auth.app))return Promise.reject(bn(r.auth));const i=await r_(r.auth,e,Pe(n));return new _I(i,s=>fO(r,s))}async function r_(t,e,n){var r;const i=await n.verify();try{le(typeof i=="string",t,"argument-error"),le(n.type===IO,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return le(o.type==="enroll",t,"internal-error"),(await B5(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{le(o.type==="signin",t,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return le(u,t,"missing-multi-factor-info"),(await iq(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await t5(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Eq(t,e){const n=Pe(t);if(Gt(n.auth.app))return Promise.reject(bn(n.auth));await dI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=class dg{constructor(e){this.providerId=dg.PROVIDER_ID,this.auth=Kt(e)}verifyPhoneNumber(e,n){return r_(this.auth,e,Pe(n))}static credential(e,n){return gu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return dg.credentialFromTaggedObject(n)}static credentialFromError(e){return dg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?gu._fromTokenResponse(n,r):null}};Pu.PROVIDER_ID="phone";Pu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t,e){return e?Ur(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI extends Hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Tq(t){return dO(t.auth,new vI(t),t.bypassAuthState)}function Iq(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),cO(n,new vI(t),t.bypassAuthState)}async function Sq(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),dI(n,new vI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tq;case"linkViaPopup":case"linkViaRedirect":return Sq;case"reauthViaPopup":case"reauthViaRedirect":return Iq;default:xn(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rq=new jf(2e3,1e4);async function wI(t,e,n){if(Gt(t.app))return Promise.reject(vn(t,"operation-not-supported-in-this-environment"));const r=Kt(t);Kc(t,e,eo);const i=qu(r,n);return new Ms(r,"signInViaPopup",e,i).executeNotNull()}async function Aq(t,e,n){const r=Pe(t);if(Gt(r.auth.app))return Promise.reject(vn(r.auth,"operation-not-supported-in-this-environment"));Kc(r.auth,e,eo);const i=qu(r.auth,n);return new Ms(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Pq(t,e,n){const r=Pe(t);Kc(r.auth,e,eo);const i=qu(r.auth,n);return new Ms(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ms extends SO{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Rq.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq="pendingRedirect",kh=new Map;class bq extends SO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const r=await xq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xq(t,e){const n=AO(e),r=RO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function EI(t,e){return RO(t)._set(AO(e),"true")}function kq(){kh.clear()}function TI(t,e){kh.set(t._key(),e)}function RO(t){return Ur(t._redirectPersistence)}function AO(t){return mu(Cq,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(t,e,n){return Oq(t,e,n)}async function Oq(t,e,n){if(Gt(t.app))return Promise.reject(bn(t));const r=Kt(t);Kc(t,e,eo),await r._initializationPromise;const i=qu(r,n);return await EI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Dq(t,e,n){return Lq(t,e,n)}async function Lq(t,e,n){const r=Pe(t);if(Kc(r.auth,e,eo),Gt(r.auth.app))return Promise.reject(bn(r.auth));await r.auth._initializationPromise;const i=qu(r.auth,n);await EI(i,r.auth);const s=await PO(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Mq(t,e,n){return Vq(t,e,n)}async function Vq(t,e,n){const r=Pe(t);Kc(r.auth,e,eo),await r.auth._initializationPromise;const i=qu(r.auth,n);await Jy(!1,r,e.providerId),await EI(i,r.auth);const s=await PO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Fq(t,e){return await Kt(t)._initializationPromise,i_(t,e,!1)}async function i_(t,e,n=!1){if(Gt(t.app))return Promise.reject(bn(t));const r=Kt(t),i=qu(r,e),o=await new bq(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function PO(t){const e=qf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq=10*60*1e3;class CO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uq&&this.cachedEventUids.clear(),this.cachedEventUids.has(CP(e))}saveEventToCache(e){this.cachedEventUids.add(CP(e)),this.lastProcessedEventTime=Date.now()}}function CP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e={}){return Yt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zq=/^https?/;async function $q(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xO(t);for(const n of e)try{if(Wq(n))return}catch{}xn(t,"unauthorized-domain")}function Wq(t){const e=uf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!zq.test(n))return!1;if(Bq.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq=new jf(3e4,6e4);function bP(){const t=un().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Gq(t){return new Promise((e,n)=>{var r,i,s;function o(){bP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bP(),n(vn(t,"network-request-failed"))},timeout:qq.get()})}if(!((i=(r=un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=un().gapi)===null||s===void 0)&&s.load)o();else{const u=rO("iframefcb");return un()[u]=()=>{gapi.load?o():n(vn(t,"network-request-failed"))},cI(`${MW()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw hg=null,e})}let hg=null;function Kq(t){return hg=hg||Gq(t),hg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq=new jf(5e3,15e3),Qq="__/auth/iframe",Yq="emulator/auth/iframe",Jq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zq(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lI(e,Yq):`https://${t.config.authDomain}/${Qq}`,r={apiKey:e.apiKey,appName:t.name,v:ga},i=Xq.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gc(r).slice(1)}`}async function eG(t){const e=await Kq(t),n=un().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:Zq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=vn(t,"network-request-failed"),u=un().setTimeout(()=>{s(o)},Hq.get());function c(){un().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nG=500,rG=600,iG="_blank",sG="http://localhost";class xP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oG(t,e,n,r=nG,i=rG){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},tG),{width:r.toString(),height:i.toString(),top:s,left:o}),h=zt().toLowerCase();n&&(u=JN(h)?iG:n),QN(h)&&(e=e||sG,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[I,T])=>`${_}${I}=${T},`,"");if(AW(h)&&u!=="_self")return aG(e||"",u),new xP(null);const m=window.open(e||"",u,p);le(m,t,"popup-blocked");try{m.focus()}catch{}return new xP(m)}function aG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uG="__/auth/handler",lG="emulator/auth/handler",cG=encodeURIComponent("fac");async function sE(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ga,eventId:i};if(e instanceof eo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof Qc){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${cG}=${encodeURIComponent(c)}`:"";return`${dG(t)}?${Gc(u).slice(1)}${h}`}function dG({config:t}){return t.emulator?lI(t,lG):`https://${t.authDomain}/${uG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="webStorageSupport";class hG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=na,this._completeRedirectFn=i_,this._overrideRedirectResult=TI}async _openPopup(e,n,r,i){var s;Mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await sE(e,n,r,uf(),i);return oG(e,o,qf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await sE(e,n,r,uf(),i);return Q5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eG(e),r=new CO(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ow,{type:Ow},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ow];o!==void 0&&n(!!o),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$q(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tO()||YN()||zf()}}const kO=hG;class fG{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return es("unexpected MultiFactorSessionType")}}}class II extends fG{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new II(e)}_finalizeEnroll(e,n,r){return z5(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return sq(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class NO{constructor(){}static assertion(e){return II._fromCredential(e)}}NO.FACTOR_ID="phone";var kP="@firebase/auth",NP="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gG(t){ta(new us("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nO(t)},h=new NW(r,i,s,c);return BW(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ta(new us("auth-internal",e=>{const n=Kt(e.getProvider("auth").getImmediate());return(r=>new pG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(kP,NP,mG(t)),pi(kP,NP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=5*60,_G=SN("authIdTokenMaxAge")||yG;let OP=null;const vG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_G)return;const i=n==null?void 0:n.token;OP!==i&&(OP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function wG(t=rI()){const e=Uf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jW(t,{popupRedirectResolver:kO,persistence:[Pc,e_,na]}),r=SN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=vG(s.toString());F5(n,o,()=>o(n.currentUser)),V5(n,u=>o(u))}}const i=TN("auth");return i&&iO(n,`http://${i}`),n}function EG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=vn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",EG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gG("Browser");var TG="firebase",IG="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(TG,IG,"app");var DP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yu,OO;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function L(){}L.prototype=R.prototype,C.D=R.prototype,C.prototype=new L,C.prototype.constructor=C,C.C=function(V,j,M){for(var N=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)N[fe-2]=arguments[fe];return R.prototype[j].apply(V,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,R,L){L||(L=0);var V=Array(16);if(typeof R=="string")for(var j=0;16>j;++j)V[j]=R.charCodeAt(L++)|R.charCodeAt(L++)<<8|R.charCodeAt(L++)<<16|R.charCodeAt(L++)<<24;else for(j=0;16>j;++j)V[j]=R[L++]|R[L++]<<8|R[L++]<<16|R[L++]<<24;R=C.g[0],L=C.g[1],j=C.g[2];var M=C.g[3],N=R+(M^L&(j^M))+V[0]+3614090360&4294967295;R=L+(N<<7&4294967295|N>>>25),N=M+(j^R&(L^j))+V[1]+3905402710&4294967295,M=R+(N<<12&4294967295|N>>>20),N=j+(L^M&(R^L))+V[2]+606105819&4294967295,j=M+(N<<17&4294967295|N>>>15),N=L+(R^j&(M^R))+V[3]+3250441966&4294967295,L=j+(N<<22&4294967295|N>>>10),N=R+(M^L&(j^M))+V[4]+4118548399&4294967295,R=L+(N<<7&4294967295|N>>>25),N=M+(j^R&(L^j))+V[5]+1200080426&4294967295,M=R+(N<<12&4294967295|N>>>20),N=j+(L^M&(R^L))+V[6]+2821735955&4294967295,j=M+(N<<17&4294967295|N>>>15),N=L+(R^j&(M^R))+V[7]+4249261313&4294967295,L=j+(N<<22&4294967295|N>>>10),N=R+(M^L&(j^M))+V[8]+1770035416&4294967295,R=L+(N<<7&4294967295|N>>>25),N=M+(j^R&(L^j))+V[9]+2336552879&4294967295,M=R+(N<<12&4294967295|N>>>20),N=j+(L^M&(R^L))+V[10]+4294925233&4294967295,j=M+(N<<17&4294967295|N>>>15),N=L+(R^j&(M^R))+V[11]+2304563134&4294967295,L=j+(N<<22&4294967295|N>>>10),N=R+(M^L&(j^M))+V[12]+1804603682&4294967295,R=L+(N<<7&4294967295|N>>>25),N=M+(j^R&(L^j))+V[13]+4254626195&4294967295,M=R+(N<<12&4294967295|N>>>20),N=j+(L^M&(R^L))+V[14]+2792965006&4294967295,j=M+(N<<17&4294967295|N>>>15),N=L+(R^j&(M^R))+V[15]+1236535329&4294967295,L=j+(N<<22&4294967295|N>>>10),N=R+(j^M&(L^j))+V[1]+4129170786&4294967295,R=L+(N<<5&4294967295|N>>>27),N=M+(L^j&(R^L))+V[6]+3225465664&4294967295,M=R+(N<<9&4294967295|N>>>23),N=j+(R^L&(M^R))+V[11]+643717713&4294967295,j=M+(N<<14&4294967295|N>>>18),N=L+(M^R&(j^M))+V[0]+3921069994&4294967295,L=j+(N<<20&4294967295|N>>>12),N=R+(j^M&(L^j))+V[5]+3593408605&4294967295,R=L+(N<<5&4294967295|N>>>27),N=M+(L^j&(R^L))+V[10]+38016083&4294967295,M=R+(N<<9&4294967295|N>>>23),N=j+(R^L&(M^R))+V[15]+3634488961&4294967295,j=M+(N<<14&4294967295|N>>>18),N=L+(M^R&(j^M))+V[4]+3889429448&4294967295,L=j+(N<<20&4294967295|N>>>12),N=R+(j^M&(L^j))+V[9]+568446438&4294967295,R=L+(N<<5&4294967295|N>>>27),N=M+(L^j&(R^L))+V[14]+3275163606&4294967295,M=R+(N<<9&4294967295|N>>>23),N=j+(R^L&(M^R))+V[3]+4107603335&4294967295,j=M+(N<<14&4294967295|N>>>18),N=L+(M^R&(j^M))+V[8]+1163531501&4294967295,L=j+(N<<20&4294967295|N>>>12),N=R+(j^M&(L^j))+V[13]+2850285829&4294967295,R=L+(N<<5&4294967295|N>>>27),N=M+(L^j&(R^L))+V[2]+4243563512&4294967295,M=R+(N<<9&4294967295|N>>>23),N=j+(R^L&(M^R))+V[7]+1735328473&4294967295,j=M+(N<<14&4294967295|N>>>18),N=L+(M^R&(j^M))+V[12]+2368359562&4294967295,L=j+(N<<20&4294967295|N>>>12),N=R+(L^j^M)+V[5]+4294588738&4294967295,R=L+(N<<4&4294967295|N>>>28),N=M+(R^L^j)+V[8]+2272392833&4294967295,M=R+(N<<11&4294967295|N>>>21),N=j+(M^R^L)+V[11]+1839030562&4294967295,j=M+(N<<16&4294967295|N>>>16),N=L+(j^M^R)+V[14]+4259657740&4294967295,L=j+(N<<23&4294967295|N>>>9),N=R+(L^j^M)+V[1]+2763975236&4294967295,R=L+(N<<4&4294967295|N>>>28),N=M+(R^L^j)+V[4]+1272893353&4294967295,M=R+(N<<11&4294967295|N>>>21),N=j+(M^R^L)+V[7]+4139469664&4294967295,j=M+(N<<16&4294967295|N>>>16),N=L+(j^M^R)+V[10]+3200236656&4294967295,L=j+(N<<23&4294967295|N>>>9),N=R+(L^j^M)+V[13]+681279174&4294967295,R=L+(N<<4&4294967295|N>>>28),N=M+(R^L^j)+V[0]+3936430074&4294967295,M=R+(N<<11&4294967295|N>>>21),N=j+(M^R^L)+V[3]+3572445317&4294967295,j=M+(N<<16&4294967295|N>>>16),N=L+(j^M^R)+V[6]+76029189&4294967295,L=j+(N<<23&4294967295|N>>>9),N=R+(L^j^M)+V[9]+3654602809&4294967295,R=L+(N<<4&4294967295|N>>>28),N=M+(R^L^j)+V[12]+3873151461&4294967295,M=R+(N<<11&4294967295|N>>>21),N=j+(M^R^L)+V[15]+530742520&4294967295,j=M+(N<<16&4294967295|N>>>16),N=L+(j^M^R)+V[2]+3299628645&4294967295,L=j+(N<<23&4294967295|N>>>9),N=R+(j^(L|~M))+V[0]+4096336452&4294967295,R=L+(N<<6&4294967295|N>>>26),N=M+(L^(R|~j))+V[7]+1126891415&4294967295,M=R+(N<<10&4294967295|N>>>22),N=j+(R^(M|~L))+V[14]+2878612391&4294967295,j=M+(N<<15&4294967295|N>>>17),N=L+(M^(j|~R))+V[5]+4237533241&4294967295,L=j+(N<<21&4294967295|N>>>11),N=R+(j^(L|~M))+V[12]+1700485571&4294967295,R=L+(N<<6&4294967295|N>>>26),N=M+(L^(R|~j))+V[3]+2399980690&4294967295,M=R+(N<<10&4294967295|N>>>22),N=j+(R^(M|~L))+V[10]+4293915773&4294967295,j=M+(N<<15&4294967295|N>>>17),N=L+(M^(j|~R))+V[1]+2240044497&4294967295,L=j+(N<<21&4294967295|N>>>11),N=R+(j^(L|~M))+V[8]+1873313359&4294967295,R=L+(N<<6&4294967295|N>>>26),N=M+(L^(R|~j))+V[15]+4264355552&4294967295,M=R+(N<<10&4294967295|N>>>22),N=j+(R^(M|~L))+V[6]+2734768916&4294967295,j=M+(N<<15&4294967295|N>>>17),N=L+(M^(j|~R))+V[13]+1309151649&4294967295,L=j+(N<<21&4294967295|N>>>11),N=R+(j^(L|~M))+V[4]+4149444226&4294967295,R=L+(N<<6&4294967295|N>>>26),N=M+(L^(R|~j))+V[11]+3174756917&4294967295,M=R+(N<<10&4294967295|N>>>22),N=j+(R^(M|~L))+V[2]+718787259&4294967295,j=M+(N<<15&4294967295|N>>>17),N=L+(M^(j|~R))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var L=R-this.blockSize,V=this.B,j=this.h,M=0;M<R;){if(j==0)for(;M<=L;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<R;)if(V[j++]=C.charCodeAt(M++),j==this.blockSize){i(this,V),j=0;break}}else for(;M<R;)if(V[j++]=C[M++],j==this.blockSize){i(this,V),j=0;break}}this.h=j,this.o+=R},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var L=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=L&255,L/=256;for(this.u(C),C=Array(16),R=L=0;4>R;++R)for(var V=0;32>V;V+=8)C[L++]=this.g[R]>>>V&255;return C};function s(C,R){var L=u;return Object.prototype.hasOwnProperty.call(L,C)?L[C]:L[C]=R(C)}function o(C,R){this.h=R;for(var L=[],V=!0,j=C.length-1;0<=j;j--){var M=C[j]|0;V&&M==R||(L[j]=M,V=!1)}this.g=L}var u={};function c(C){return-128<=C&&128>C?s(C,function(R){return new o([R|0],0>R?-1:0)}):new o([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return m;if(0>C)return O(h(-C));for(var R=[],L=1,V=0;C>=L;V++)R[V]=C/L|0,L*=4294967296;return new o(R,0)}function p(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return O(p(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=h(Math.pow(R,8)),V=m,j=0;j<C.length;j+=8){var M=Math.min(8,C.length-j),N=parseInt(C.substring(j,j+M),R);8>M?(M=h(Math.pow(R,M)),V=V.j(M).add(h(N))):(V=V.j(L),V=V.add(h(N)))}return V}var m=c(0),_=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-O(this).m();for(var C=0,R=1,L=0;L<this.g.length;L++){var V=this.i(L);C+=(0<=V?V:4294967296+V)*R,R*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(D(this))return"-"+O(this).toString(C);for(var R=h(Math.pow(C,6)),L=this,V="";;){var j=U(L,R).g;L=k(L,j.j(R));var M=((0<L.g.length?L.g[0]:L.h)>>>0).toString(C);if(L=j,T(L))return M+V;for(;6>M.length;)M="0"+M;V=M+V}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function D(C){return C.h==-1}t.l=function(C){return C=k(this,C),D(C)?-1:T(C)?0:1};function O(C){for(var R=C.g.length,L=[],V=0;V<R;V++)L[V]=~C.g[V];return new o(L,~C.h).add(_)}t.abs=function(){return D(this)?O(this):this},t.add=function(C){for(var R=Math.max(this.g.length,C.g.length),L=[],V=0,j=0;j<=R;j++){var M=V+(this.i(j)&65535)+(C.i(j)&65535),N=(M>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);V=N>>>16,M&=65535,N&=65535,L[j]=N<<16|M}return new o(L,L[L.length-1]&-2147483648?-1:0)};function k(C,R){return C.add(O(R))}t.j=function(C){if(T(this)||T(C))return m;if(D(this))return D(C)?O(this).j(O(C)):O(O(this).j(C));if(D(C))return O(this.j(O(C)));if(0>this.l(I)&&0>C.l(I))return h(this.m()*C.m());for(var R=this.g.length+C.g.length,L=[],V=0;V<2*R;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(var j=0;j<C.g.length;j++){var M=this.i(V)>>>16,N=this.i(V)&65535,fe=C.i(j)>>>16,oe=C.i(j)&65535;L[2*V+2*j]+=N*oe,P(L,2*V+2*j),L[2*V+2*j+1]+=M*oe,P(L,2*V+2*j+1),L[2*V+2*j+1]+=N*fe,P(L,2*V+2*j+1),L[2*V+2*j+2]+=M*fe,P(L,2*V+2*j+2)}for(V=0;V<R;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=R;V<2*R;V++)L[V]=0;return new o(L,0)};function P(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function S(C,R){this.g=C,this.h=R}function U(C,R){if(T(R))throw Error("division by zero");if(T(C))return new S(m,m);if(D(C))return R=U(O(C),R),new S(O(R.g),O(R.h));if(D(R))return R=U(C,O(R)),new S(O(R.g),R.h);if(30<C.g.length){if(D(C)||D(R))throw Error("slowDivide_ only works with positive integers.");for(var L=_,V=R;0>=V.l(C);)L=q(L),V=q(V);var j=$(L,1),M=$(V,1);for(V=$(V,2),L=$(L,2);!T(V);){var N=M.add(V);0>=N.l(C)&&(j=j.add(L),M=N),V=$(V,1),L=$(L,1)}return R=k(C,j.j(R)),new S(j,R)}for(j=m;0<=C.l(R);){for(L=Math.max(1,Math.floor(C.m()/R.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),M=h(L),N=M.j(R);D(N)||0<N.l(C);)L-=V,M=h(L),N=M.j(R);T(M)&&(M=_),j=j.add(M),C=k(C,N)}return new S(j,C)}t.A=function(C){return U(this,C).h},t.and=function(C){for(var R=Math.max(this.g.length,C.g.length),L=[],V=0;V<R;V++)L[V]=this.i(V)&C.i(V);return new o(L,this.h&C.h)},t.or=function(C){for(var R=Math.max(this.g.length,C.g.length),L=[],V=0;V<R;V++)L[V]=this.i(V)|C.i(V);return new o(L,this.h|C.h)},t.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),L=[],V=0;V<R;V++)L[V]=this.i(V)^C.i(V);return new o(L,this.h^C.h)};function q(C){for(var R=C.g.length+1,L=[],V=0;V<R;V++)L[V]=C.i(V)<<1|C.i(V-1)>>>31;return new o(L,C.h)}function $(C,R){var L=R>>5;R%=32;for(var V=C.g.length-L,j=[],M=0;M<V;M++)j[M]=0<R?C.i(M+L)>>>R|C.i(M+L+1)<<32-R:C.i(M+L);return new o(j,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OO=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,yu=o}).apply(typeof DP<"u"?DP:typeof self<"u"?self:typeof window<"u"?window:{});var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DO,mh,LO,fg,oE,MO,VO,FO;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof zm=="object"&&zm];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var b=0;b<d.length-1;b++){var K=d[b];if(!(K in v))break e;v=v[K]}d=d[d.length-1],b=v[d],g=g(b),g!=b&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var v=0,b=!1,K={next:function(){if(!b&&v<d.length){var X=v++;return{value:g(X,d[X]),done:!1}}return b=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function h(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,v){return d.call.apply(d.bind,arguments)}function m(d,g,v){if(!d)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,b),d.apply(g,K)}}return function(){return d.apply(g,arguments)}}function _(d,g,v){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,_.apply(null,arguments)}function I(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),d.apply(this,b)}}function T(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(b,K,X){for(var he=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)he[dt-2]=arguments[dt];return g.prototype[K].apply(b,he)}}function D(d){const g=d.length;if(0<g){const v=Array(g);for(let b=0;b<g;b++)v[b]=d[b];return v}return[]}function O(d,g){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(c(b)){const K=d.length||0,X=b.length||0;d.length=K+X;for(let he=0;he<X;he++)d[K+he]=b[he]}else d.push(b)}}class k{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function U(d){return U[" "](d),d}U[" "]=function(){};var q=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function $(d,g,v){for(const b in d)g.call(v,d[b],b,d)}function C(d,g){for(const v in d)g.call(void 0,d[v],v,d)}function R(d){const g={};for(const v in d)g[v]=d[v];return g}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(d,g){let v,b;for(let K=1;K<arguments.length;K++){b=arguments[K];for(v in b)d[v]=b[v];for(let X=0;X<L.length;X++)v=L[X],Object.prototype.hasOwnProperty.call(b,v)&&(d[v]=b[v])}}function j(d){var g=1;d=d.split(":");const v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function M(d){u.setTimeout(()=>{throw d},0)}function N(){var d=ue;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class fe{constructor(){this.h=this.g=null}add(g,v){const b=oe.get();b.set(g,v),this.h?this.h.next=b:this.g=b,this.h=b}}var oe=new k(()=>new ce,d=>d.reset());class ce{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Q=!1,ue=new fe,me=()=>{const d=u.Promise.resolve(void 0);de=()=>{d.then(_e)}};var _e=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(v){M(v)}var g=oe;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Q=!1};function Ce(){this.s=this.s,this.C=this.C}Ce.prototype.s=!1,Ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};u.addEventListener("test",v,g),u.removeEventListener("test",v,g)}catch{}return d}();function Me(d,g){if(Ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,b=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(q){e:{try{U(g.nodeName);var K=!0;break e}catch{}K=!1}K||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ye[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Me.aa.h.call(this)}}T(Me,Ae);var Ye={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),Jt=0;function ve(d,g,v,b,K){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!b,this.ha=K,this.key=++Jt,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d){this.src=d,this.g={},this.h=0}xe.prototype.add=function(d,g,v,b,K){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var he=nt(d,g,b,K);return-1<he?(g=d[he],v||(g.fa=!1)):(g=new ve(g,this.src,X,!!b,K),g.fa=v,d.push(g)),g};function ke(d,g){var v=g.type;if(v in d.g){var b=d.g[v],K=Array.prototype.indexOf.call(b,g,void 0),X;(X=0<=K)&&Array.prototype.splice.call(b,K,1),X&&(be(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function nt(d,g,v,b){for(var K=0;K<d.length;++K){var X=d[K];if(!X.da&&X.listener==g&&X.capture==!!v&&X.ha==b)return K}return-1}var lt="closure_lm_"+(1e6*Math.random()|0),Ve={};function En(d,g,v,b,K){if(Array.isArray(g)){for(var X=0;X<g.length;X++)En(d,g[X],v,b,K);return null}return v=Ui(v),d&&d[mt]?d.K(g,v,h(b)?!!b.capture:!!b,K):At(d,g,v,!1,b,K)}function At(d,g,v,b,K,X){if(!g)throw Error("Invalid event type");var he=h(K)?!!K.capture:!!K,dt=Fi(d);if(dt||(d[lt]=dt=new xe(d)),v=dt.add(g,v,b,he,X),v.proxy)return v;if(b=vi(),v.proxy=b,b.src=d,b.listener=v,d.addEventListener)Ge||(K=he),K===void 0&&(K=!1),d.addEventListener(g.toString(),b,K);else if(d.attachEvent)d.attachEvent(Bn(g.toString()),b);else if(d.addListener&&d.removeListener)d.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function vi(){function d(v){return g.call(d.src,d.listener,v)}const g=fs;return d}function Ju(d,g,v,b,K){if(Array.isArray(g))for(var X=0;X<g.length;X++)Ju(d,g[X],v,b,K);else b=h(b)?!!b.capture:!!b,v=Ui(v),d&&d[mt]?(d=d.i,g=String(g).toString(),g in d.g&&(X=d.g[g],v=nt(X,v,b,K),-1<v&&(be(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete d.g[g],d.h--)))):d&&(d=Fi(d))&&(g=d.g[g.toString()],d=-1,g&&(d=nt(g,v,b,K)),(v=-1<d?g[d]:null)&&wi(v))}function wi(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[mt])ke(g.i,d);else{var v=d.type,b=d.proxy;g.removeEventListener?g.removeEventListener(v,b,d.capture):g.detachEvent?g.detachEvent(Bn(v),b):g.addListener&&g.removeListener&&g.removeListener(b),(v=Fi(g))?(ke(v,d),v.h==0&&(v.src=null,g[lt]=null)):be(d)}}}function Bn(d){return d in Ve?Ve[d]:Ve[d]="on"+d}function fs(d,g){if(d.da)d=!0;else{g=new Me(g,this);var v=d.listener,b=d.ha||d.src;d.fa&&wi(d),d=v.call(b,g)}return d}function Fi(d){return d=d[lt],d instanceof xe?d:null}var so="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ui(d){return typeof d=="function"?d:(d[so]||(d[so]=function(g){return d.handleEvent(g)}),d[so])}function Le(){Ce.call(this),this.i=new xe(this),this.M=this,this.F=null}T(Le,Ce),Le.prototype[mt]=!0,Le.prototype.removeEventListener=function(d,g,v,b){Ju(this,d,g,v,b)};function vt(d,g){var v,b=d.F;if(b)for(v=[];b;b=b.F)v.push(b);if(d=d.M,b=g.type||g,typeof g=="string")g=new Ae(g,d);else if(g instanceof Ae)g.target=g.target||d;else{var K=g;g=new Ae(b,d),V(g,K)}if(K=!0,v)for(var X=v.length-1;0<=X;X--){var he=g.g=v[X];K=pr(he,b,!0,g)&&K}if(he=g.g=d,K=pr(he,b,!0,g)&&K,K=pr(he,b,!1,g)&&K,v)for(X=0;X<v.length;X++)he=g.g=v[X],K=pr(he,b,!1,g)&&K}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],b=0;b<v.length;b++)be(v[b]);delete d.g[g],d.h--}}this.F=null},Le.prototype.K=function(d,g,v,b){return this.i.add(String(d),g,!1,v,b)},Le.prototype.L=function(d,g,v,b){return this.i.add(String(d),g,!0,v,b)};function pr(d,g,v,b){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var K=!0,X=0;X<g.length;++X){var he=g[X];if(he&&!he.da&&he.capture==v){var dt=he.listener,dn=he.ha||he.src;he.fa&&ke(d.i,he),K=dt.call(dn,b)!==!1&&K}}return K&&!b.defaultPrevented}function Xu(d,g,v){if(typeof d=="function")v&&(d=_(d,v));else if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:u.setTimeout(d,g||0)}function Zu(d){d.g=Xu(()=>{d.g=null,d.i&&(d.i=!1,Zu(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class ud extends Ce{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Zu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ps(d){Ce.call(this),this.h=d,this.g={}}T(ps,Ce);var el=[];function tl(d){$(d.g,function(g,v){this.g.hasOwnProperty(v)&&wi(g)},d),d.g={}}ps.prototype.N=function(){ps.aa.N.call(this),tl(this)},ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ia=u.JSON.stringify,ld=u.JSON.parse,cd=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function dd(){}dd.prototype.h=null;function dp(d){return d.h||(d.h=d.i())}function hp(){}var oo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nl(){Ae.call(this,"d")}T(nl,Ae);function hd(){Ae.call(this,"c")}T(hd,Ae);var ms={},fp=null;function rl(){return fp=fp||new Le}ms.La="serverreachability";function fd(d){Ae.call(this,ms.La,d)}T(fd,Ae);function Sa(d){const g=rl();vt(g,new fd(g))}ms.STAT_EVENT="statevent";function pp(d,g){Ae.call(this,ms.STAT_EVENT,d),this.stat=g}T(pp,Ae);function kn(d){const g=rl();vt(g,new pp(g,d))}ms.Ma="timingevent";function il(d,g){Ae.call(this,ms.Ma,d),this.size=g}T(il,Ae);function Ra(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},g)}function gs(){this.g=!0}gs.prototype.xa=function(){this.g=!1};function $_(d,g,v,b,K,X){d.info(function(){if(d.g)if(X)for(var he="",dt=X.split("&"),dn=0;dn<dt.length;dn++){var et=dt[dn].split("=");if(1<et.length){var ft=et[0];et=et[1];var on=ft.split("_");he=2<=on.length&&on[1]=="type"?he+(ft+"="+et+"&"):he+(ft+"=redacted&")}}else he=null;else he=X;return"XMLHTTP REQ ("+b+") [attempt "+K+"]: "+g+`
`+v+`
`+he})}function W_(d,g,v,b,K,X,he){d.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+K+"]: "+g+`
`+v+`
`+X+" "+he})}function ao(d,g,v,b){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+G_(d,v)+(b?" "+b:"")})}function q_(d,g){d.info(function(){return"TIMEOUT: "+g})}gs.prototype.info=function(){};function G_(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var b=v[d];if(!(2>b.length)){var K=b[1];if(Array.isArray(K)&&!(1>K.length)){var X=K[0];if(X!="noop"&&X!="stop"&&X!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return Ia(v)}catch{return g}}var sl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pd;function Aa(){}T(Aa,dd),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},pd=new Aa;function ji(d,g,v,b){this.j=d,this.i=g,this.l=v,this.R=b||1,this.U=new ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gp}function gp(){this.i=null,this.g="",this.h=!1}var yp={},md={};function gd(d,g,v){d.L=1,d.v=lo(Qr(g)),d.m=v,d.P=!0,_p(d,null)}function _p(d,g){d.F=Date.now(),ys(d),d.A=Qr(d.v);var v=d.A,b=d.R;Array.isArray(b)||(b=[String(b)]),Sd(v.i,"t",b),d.C=0,v=d.j.J,d.h=new gp,d.g=Up(d.j,v?g:null,!d.m),0<d.O&&(d.M=new ud(_(d.Y,d,d.g),d.O)),g=d.U,v=d.g,b=d.ca;var K="readystatechange";Array.isArray(K)||(K&&(el[0]=K.toString()),K=el);for(var X=0;X<K.length;X++){var he=En(v,K[X],b||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Sa(),$_(d.i,d.u,d.A,d.l,d.R,d.m)}ji.prototype.ca=function(d){d=d.target;const g=this.M;g&&Nn(d)==3?g.j():this.Y(d)},ji.prototype.Y=function(d){try{if(d==this.g)e:{const on=Nn(this.g);var g=this.g.Ba();const Zr=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Pd(this.g)))){this.J||on!=4||g==7||(g==8||0>=Zr?Sa(3):Sa(2)),yd(this);var v=this.g.Z();this.X=v;t:if(Pa(this)){var b=Pd(this.g);d="";var K=b.length,X=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bi(this),Ca(this);var he="";break t}this.h.i=new u.TextDecoder}for(g=0;g<K;g++)this.h.h=!0,d+=this.h.i.decode(b[g],{stream:!(X&&g==K-1)});b.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,W_(this.i,this.u,this.A,this.l,this.R,on,v),this.o){if(this.T&&!this.K){t:{if(this.g){var dt,dn=this.g;if((dt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(dt)){var et=dt;break t}}et=null}if(v=et)ao(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ol(this,v);else{this.o=!1,this.s=3,kn(12),Bi(this),Ca(this);break e}}if(this.P){v=!0;let mr;for(;!this.J&&this.C<he.length;)if(mr=K_(this,he),mr==md){on==4&&(this.s=4,kn(14),v=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==yp){this.s=4,kn(15),ao(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else ao(this.i,this.l,mr,null),ol(this,mr);if(Pa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||he.length!=0||this.h.h||(this.s=1,kn(16),v=!1),this.o=this.o&&v,!v)ao(this.i,this.l,he,"[Invalid Chunked Response]"),Bi(this),Ca(this);else if(0<he.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Xr(ft),ft.M=!0,kn(11))}}else ao(this.i,this.l,he,null),ol(this,he);on==4&&Bi(this),this.o&&!this.J&&(on==4?Tt(this.j,this):(this.o=!1,ys(this)))}else Cd(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,kn(12)):(this.s=0,kn(13)),Bi(this),Ca(this)}}}catch{}finally{}};function Pa(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function K_(d,g){var v=d.C,b=g.indexOf(`
`,v);return b==-1?md:(v=Number(g.substring(v,b)),isNaN(v)?yp:(b+=1,b+v>g.length?md:(g=g.slice(b,b+v),d.C=b+v,g)))}ji.prototype.cancel=function(){this.J=!0,Bi(this)};function ys(d){d.S=Date.now()+d.I,vp(d,d.I)}function vp(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ra(_(d.ba,d),g)}function yd(d){d.B&&(u.clearTimeout(d.B),d.B=null)}ji.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(q_(this.i,this.A),this.L!=2&&(Sa(),kn(17)),Bi(this),this.s=2,Ca(this)):vp(this,this.S-d)};function Ca(d){d.j.G==0||d.J||Tt(d.j,d)}function Bi(d){yd(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,tl(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function ol(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||_d(v.h,d))){if(!d.K&&_d(v.h,d)&&v.G==3){try{var b=v.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var K=b;if(K[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)fo(v),ka(v);else break e;hl(v),kn(18)}}else v.za=K[1],0<v.za-v.T&&37500>K[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ra(_(v.Za,v),6e3));if(1>=Ip(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ti(v,11)}else if((d.K||v.g==d)&&fo(v),!P(g))for(K=v.Da.g.parse(g),g=0;g<K.length;g++){let et=K[g];if(v.T=et[0],et=et[1],v.G==2)if(et[0]=="c"){v.K=et[1],v.ia=et[2];const ft=et[3];ft!=null&&(v.la=ft,v.j.info("VER="+v.la));const on=et[4];on!=null&&(v.Aa=on,v.j.info("SVER="+v.Aa));const Zr=et[5];Zr!=null&&typeof Zr=="number"&&0<Zr&&(b=1.5*Zr,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const mr=d.g;if(mr){const Ma=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var X=b.h;X.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(al(X,X.h),X.h=null))}if(b.D){const kd=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;kd&&(b.ya=kd,wt(b.I,b.D,kd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var he=d;if(b.qa=fl(b,b.J?b.ia:null,b.W),he.K){vd(b.h,he);var dt=he,dn=b.L;dn&&(dt.I=dn),dt.B&&(yd(dt),ys(dt)),b.g=he}else Vp(b);0<v.i.length&&Na(v)}else et[0]!="stop"&&et[0]!="close"||Ti(v,7);else v.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ti(v,7):dl(v):et[0]!="noop"&&v.l&&v.l.ta(et),v.v=0)}}Sa(4)}catch{}}var wp=class{constructor(d,g){this.g=d,this.map=g}};function Ep(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tp(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ip(d){return d.h?1:d.g?d.g.size:0}function _d(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function al(d,g){d.g?d.g.add(g):d.h=g}function vd(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Ep.prototype.cancel=function(){if(this.i=wd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function wd(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const v of d.g.values())g=g.concat(v.D);return g}return D(d.i)}function Ed(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,b=0;b<v;b++)g.push(d[b]);return g}g=[],v=0;for(b in d)g[v++]=d[b];return g}function H_(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(const b in d)g[v++]=b;return g}}}function Td(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=H_(d),b=Ed(d),K=b.length,X=0;X<K;X++)g.call(void 0,b[X],v&&v[X],d)}var ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sp(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var b=d[v].indexOf("="),K=null;if(0<=b){var X=d[v].substring(0,b);K=d[v].substring(b+1)}else X=d[v];g(X,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function _s(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof _s){this.h=d.h,xa(this,d.j),this.o=d.o,this.g=d.g,uo(this,d.s),this.l=d.l;var g=d.i,v=new co;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Rp(this,v),this.m=d.m}else d&&(g=String(d).match(ba))?(this.h=!1,xa(this,g[1]||"",!0),this.o=vs(g[2]||""),this.g=vs(g[3]||"",!0),uo(this,g[4]),this.l=vs(g[5]||"",!0),Rp(this,g[6]||"",!0),this.m=vs(g[7]||"")):(this.h=!1,this.i=new co(null,this.h))}_s.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Yr(g,Id,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Yr(g,Id,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(Yr(v,v.charAt(0)=="/"?Pp:Q_,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",Yr(v,bp)),d.join("")};function Qr(d){return new _s(d)}function xa(d,g,v){d.j=v?vs(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function uo(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Rp(d,g,v){g instanceof co?(d.i=g,Y_(d.i,d.h)):(v||(g=Yr(g,Cp)),d.i=new co(g,d.h))}function wt(d,g,v){d.i.set(g,v)}function lo(d){return wt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function vs(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yr(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,Ap),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ap(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Id=/[#\/\?@]/g,Q_=/[#\?:]/g,Pp=/[#\?]/g,Cp=/[#\?@]/g,bp=/#/g;function co(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function zi(d){d.g||(d.g=new Map,d.h=0,d.i&&Sp(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=co.prototype,t.add=function(d,g){zi(this),this.i=null,d=ho(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function xp(d,g){zi(d),g=ho(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function kp(d,g){return zi(d),g=ho(d,g),d.g.has(g)}t.forEach=function(d,g){zi(this),this.g.forEach(function(v,b){v.forEach(function(K){d.call(g,K,b,this)},this)},this)},t.na=function(){zi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let b=0;b<g.length;b++){const K=d[b];for(let X=0;X<K.length;X++)v.push(g[b])}return v},t.V=function(d){zi(this);let g=[];if(typeof d=="string")kp(this,d)&&(g=g.concat(this.g.get(ho(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},t.set=function(d,g){return zi(this),this.i=null,d=ho(this,d),kp(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Sd(d,g,v){xp(d,g),0<v.length&&(d.i=null,d.g.set(ho(d,g),D(v)),d.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var b=g[v];const X=encodeURIComponent(String(b)),he=this.V(b);for(b=0;b<he.length;b++){var K=X;he[b]!==""&&(K+="="+encodeURIComponent(String(he[b]))),d.push(K)}}return this.i=d.join("&")};function ho(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Y_(d,g){g&&!d.j&&(zi(d),d.i=null,d.g.forEach(function(v,b){var K=b.toLowerCase();b!=K&&(xp(this,b),Sd(this,K,v))},d)),d.j=g}function J_(d,g){const v=new gs;if(u.Image){const b=new Image;b.onload=I(Jr,v,"TestLoadImage: loaded",!0,g,b),b.onerror=I(Jr,v,"TestLoadImage: error",!1,g,b),b.onabort=I(Jr,v,"TestLoadImage: abort",!1,g,b),b.ontimeout=I(Jr,v,"TestLoadImage: timeout",!1,g,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=d}else g(!1)}function X_(d,g){const v=new gs,b=new AbortController,K=setTimeout(()=>{b.abort(),Jr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:b.signal}).then(X=>{clearTimeout(K),X.ok?Jr(v,"TestPingServer: ok",!0,g):Jr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),Jr(v,"TestPingServer: error",!1,g)})}function Jr(d,g,v,b,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),b(v)}catch{}}function Z_(){this.g=new cd}function ev(d,g,v){const b=v||"";try{Td(d,function(K,X){let he=K;h(K)&&(he=Ia(K)),g.push(b+X+"="+encodeURIComponent(he))})}catch(K){throw g.push(b+"type="+encodeURIComponent("_badmap")),K}}function ul(d){this.l=d.Ub||null,this.j=d.eb||!1}T(ul,dd),ul.prototype.g=function(){return new ll(this.l,this.j)},ul.prototype.i=function(d){return function(){return d}}({});function ll(d,g){Le.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ll,Le),t=ll.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,at(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||u).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ct(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,at(this)),this.g&&(this.readyState=3,at(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Np(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Np(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ct(this):at(this),this.readyState==3&&Np(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ct(this))},t.Qa=function(d){this.g&&(this.response=d,ct(this))},t.ga=function(){this.g&&ct(this)};function ct(d){d.readyState=4,d.l=null,d.j=null,d.v=null,at(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function at(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Op(d){let g="";return $(d,function(v,b){g+=b,g+=":",g+=v,g+=`\r
`}),g}function Rd(d,g,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Op(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):wt(d,g,v))}function kt(d){Le.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,Le);var tv=/^https?$/i,nv=["POST","PUT"];t=kt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pd.g(),this.v=this.o?dp(this.o):dp(pd),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(X){Dp(this,X);return}if(d=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var K in b)v.set(K,b[K]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())v.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),K=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(nv,g,void 0))||b||K||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,he]of v)this.g.setRequestHeader(X,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cl(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){Dp(this,X)}};function Dp(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Ad(d),$t(d)}function Ad(d){d.A||(d.A=!0,vt(d,"complete"),vt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,vt(this,"complete"),vt(this,"abort"),$t(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lp(this):this.bb())},t.bb=function(){Lp(this)};function Lp(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Nn(d)!=4||d.Z()!=2)){if(d.u&&Nn(d)==4)Xu(d.Ea,0,d);else if(vt(d,"readystatechange"),Nn(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var b;if(b=he===0){var K=String(d.D).match(ba)[1]||null;!K&&u.self&&u.self.location&&(K=u.self.location.protocol.slice(0,-1)),b=!tv.test(K?K.toLowerCase():"")}v=b}if(v)vt(d,"complete"),vt(d,"success");else{d.m=6;try{var X=2<Nn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Ad(d)}}finally{$t(d)}}}}function $t(d,g){if(d.g){cl(d);const v=d.g,b=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||vt(d,"ready");try{v.onreadystatechange=b}catch{}}}function cl(d){d.I&&(u.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Nn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),ld(g)}};function Pd(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Cd(d){const g={};d=(d.g&&2<=Nn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<d.length;b++){if(P(d[b]))continue;var v=j(d[b]);const K=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=g[K]||[];g[K]=X,X.push(v)}C(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tn(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function bd(d){this.Aa=0,this.i=[],this.j=new gs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tn("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tn("baseRetryDelayMs",5e3,d),this.cb=Tn("retryDelaySeedMs",1e4,d),this.Wa=Tn("forwardChannelMaxRetries",2,d),this.wa=Tn("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ep(d&&d.concurrentRequestLimit),this.Da=new Z_,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bd.prototype,t.la=8,t.G=1,t.connect=function(d,g,v,b){kn(0),this.W=d,this.H=g||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=fl(this,null,this.W),Na(this)};function dl(d){if(xd(d),d.G==3){var g=d.U++,v=Qr(d.I);if(wt(v,"SID",d.K),wt(v,"RID",g),wt(v,"TYPE","terminate"),Oa(d,v),g=new ji(d,d.j,g),g.L=2,g.v=lo(Qr(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=g.v,v=!0),v||(g.g=Up(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ys(g)}Fp(d)}function ka(d){d.g&&(Xr(d),d.g.cancel(),d.g=null)}function xd(d){ka(d),d.u&&(u.clearTimeout(d.u),d.u=null),fo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function Na(d){if(!Tp(d.h)&&!d.s){d.s=!0;var g=d.Ga;de||me(),Q||(de(),Q=!0),ue.add(g,d),d.B=0}}function Mp(d,g){return Ip(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ra(_(d.Ga,d,g),Ei(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const K=new ji(this,this.j,d);let X=this.o;if(this.S&&(X?(X=R(X),V(X,this.S)):X=this.S),this.m!==null||this.O||(K.H=X,X=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Zn(this,K,g),v=Qr(this.I),wt(v,"RID",d),wt(v,"CVER",22),this.D&&wt(v,"X-HTTP-Session-Id",this.D),Oa(this,v),X&&(this.O?g="headers="+encodeURIComponent(String(Op(X)))+"&"+g:this.m&&Rd(v,this.m,X)),al(this.h,K),this.Ua&&wt(v,"TYPE","init"),this.P?(wt(v,"$req",g),wt(v,"SID","null"),K.T=!0,gd(K,v,null)):gd(K,v,g),this.G=2}}else this.G==3&&(d?zn(this,d):this.i.length==0||Tp(this.h)||zn(this))};function zn(d,g){var v;g?v=g.l:v=d.U++;const b=Qr(d.I);wt(b,"SID",d.K),wt(b,"RID",v),wt(b,"AID",d.T),Oa(d,b),d.m&&d.o&&Rd(b,d.m,d.o),v=new ji(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Zn(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),al(d.h,v),gd(v,b,g)}function Oa(d,g){d.H&&$(d.H,function(v,b){wt(g,b,v)}),d.l&&Td({},function(v,b){wt(g,b,v)})}function Zn(d,g,v){v=Math.min(d.i.length,v);var b=d.l?_(d.l.Na,d.l,d):null;e:{var K=d.i;let X=-1;for(;;){const he=["count="+v];X==-1?0<v?(X=K[0].g,he.push("ofs="+X)):X=0:he.push("ofs="+X);let dt=!0;for(let dn=0;dn<v;dn++){let et=K[dn].g;const ft=K[dn].map;if(et-=X,0>et)X=Math.max(0,K[dn].g-100),dt=!1;else try{ev(ft,he,"req"+et+"_")}catch{b&&b(ft)}}if(dt){b=he.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,b}function Vp(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;de||me(),Q||(de(),Q=!0),ue.add(g,d),d.v=0}}function hl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ra(_(d.Fa,d),Ei(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Da(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ra(_(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,kn(10),ka(this),Da(this))};function Xr(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function Da(d){d.g=new ji(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Qr(d.qa);wt(g,"RID","rpc"),wt(g,"SID",d.K),wt(g,"AID",d.T),wt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&wt(g,"TO",d.ja),wt(g,"TYPE","xmlhttp"),Oa(d,g),d.m&&d.o&&Rd(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=lo(Qr(g)),v.m=null,v.P=!0,_p(v,d)}t.Za=function(){this.C!=null&&(this.C=null,ka(this),hl(this),kn(19))};function fo(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Tt(d,g){var v=null;if(d.g==g){fo(d),Xr(d),d.g=null;var b=2}else if(_d(d.h,g))v=g.D,vd(d.h,g),b=1;else return;if(d.G!=0){if(g.o)if(b==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var K=d.B;b=rl(),vt(b,new il(b,v)),Na(d)}else Vp(d);else if(K=g.s,K==3||K==0&&0<g.X||!(b==1&&Mp(d,g)||b==2&&hl(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),K){case 1:Ti(d,5);break;case 4:Ti(d,10);break;case 3:Ti(d,6);break;default:Ti(d,2)}}}function Ei(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function Ti(d,g){if(d.j.info("Error code "+g),g==2){var v=_(d.fb,d),b=d.Xa;const K=!b;b=new _s(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||xa(b,"https"),lo(b),K?J_(b.toString(),v):X_(b.toString(),v)}else kn(2);d.G=0,d.l&&d.l.sa(g),Fp(d),xd(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),kn(2)):(this.j.info("Failed to ping google.com"),kn(1))};function Fp(d){if(d.G=0,d.ka=[],d.l){const g=wd(d.h);(g.length!=0||d.i.length!=0)&&(O(d.ka,g),O(d.ka,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.ra()}}function fl(d,g,v){var b=v instanceof _s?Qr(v):new _s(v);if(b.g!="")g&&(b.g=g+"."+b.g),uo(b,b.s);else{var K=u.location;b=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;var X=new _s(null);b&&xa(X,b),g&&(X.g=g),K&&uo(X,K),v&&(X.l=v),b=X}return v=d.D,g=d.ya,v&&g&&wt(b,v,g),wt(b,"VER",d.la),Oa(d,b),b}function Up(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new kt(new ul({eb:v})):new kt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(d,g){return new $n(d,g)};function $n(d,g){Le.call(this),this.g=new bd(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!P(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new po(this)}T($n,Le),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){dl(this.g)},$n.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=Ia(d),d=v);g.i.push(new wp(g.Ya++,d)),g.G==3&&Na(g)},$n.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,$n.aa.N.call(this)};function La(d){nl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}T(La,nl);function ws(){hd.call(this),this.status=1}T(ws,hd);function po(d){this.g=d}T(po,jp),po.prototype.ua=function(){vt(this.g,"a")},po.prototype.ta=function(d){vt(this.g,new La(d))},po.prototype.sa=function(d){vt(this.g,new ws)},po.prototype.ra=function(){vt(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,FO=function(){return new pl},VO=function(){return rl()},MO=ms,oE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},sl.NO_ERROR=0,sl.TIMEOUT=8,sl.HTTP_ERROR=6,fg=sl,mp.COMPLETE="complete",LO=mp,hp.EventType=oo,oo.OPEN="a",oo.CLOSE="b",oo.ERROR="c",oo.MESSAGE="d",Le.prototype.listen=Le.prototype.K,mh=hp,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,DO=kt}).apply(typeof zm<"u"?zm:typeof self<"u"?self:typeof window<"u"?window:{});const LP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new Gy("@firebase/firestore");function Ml(){return ra.logLevel}function SG(t){ra.setLogLevel(t)}function se(t,...e){if(ra.logLevel<=He.DEBUG){const n=e.map(SI);ra.debug(`Firestore (${Yc}): ${t}`,...n)}}function tn(t,...e){if(ra.logLevel<=He.ERROR){const n=e.map(SI);ra.error(`Firestore (${Yc}): ${t}`,...n)}}function cs(t,...e){if(ra.logLevel<=He.WARN){const n=e.map(SI);ra.warn(`Firestore (${Yc}): ${t}`,...n)}}function SI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Yc}) INTERNAL ASSERTION FAILED: `+t;throw tn(e),new Error(e)}function Ie(t,e){t||we()}function RG(t,e){t||we()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pn.UNAUTHENTICATED))}shutdown(){}}class PG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CG{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Un,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Un)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new UO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Pn(e)}}class bG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NG{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new kG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=OG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ue(t,e){return t<e?-1:t>e?1:0}function Cc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function BO(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Mt(0,0))}static max(){return new Re(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Xe extends hf{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const DG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends hf{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return DG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new re(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new re(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Xe.fromString(e))}static fromName(e){return new pe(Xe.fromString(e).popFirst(5))}static empty(){return new pe(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function aE(t){return t.fields.find(e=>e.kind===2)}function Qa(t){return t.fields.filter(e=>e.kind!==2)}oy.UNKNOWN_ID=-1;class pg{constructor(e,n){this.fieldPath=e,this.kind=n}}class ff{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ff(0,$r.min())}}function zO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new $r(i,pe.empty(),e)}function $O(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new $r(Re.min(),pe.empty(),-1)}static max(){return new $r(Re.max(),pe.empty(),-1)}}function RI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==WO)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Un,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Nh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=AI(r.target.error);this.V.reject(new Nh(e,i))}}static open(e,n,r,i){try{return new s_(n,e.transaction(i,r))}catch(s){throw new Nh(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new MG(n)}}class ss{constructor(e,n,r){this.name=e,this.version=n,this.p=r,ss.S(zt())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),Xa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sf())return!1;if(ss.v())return!0;const e=zt(),n=ss.S(e),r=0<n&&n<10,i=GO(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Nh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new re(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Nh(e,o))},i.onupgradeneeded=s=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const u=s_.open(this.db,e,s?"readonly":"readwrite",r),c=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),H.reject(h))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,h=c.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function GO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class LG{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Xa(this.B.delete())}}class Nh extends re{constructor(e,n){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function va(t){return t.name==="IndexedDbTransactionError"}class MG{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xa(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),Xa(this.store.add(e))}get(e){return Xa(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),Xa(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),Xa(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new H((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(u,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new H((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,u)=>u.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new H((r,i)=>{n.onerror=s=>{const o=AI(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(u=>{u?o.continue():r()}):r()}})}W(e,n){const r=[];return new H((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void i();const c=new LG(u),h=n(u.primaryKey,u.value,c);if(h instanceof H){const p=h.catch(m=>(c.done(),H.reject(m)));r.push(p)}c.isDone?i():c.K===null?u.continue():u.continue(c.K)}}).next(()=>H.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Xa(t){return new H((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=AI(r.target.error);n(i)}})}let MP=!1;function AI(t){const e=ss.S(zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return MP||(MP=!0,setTimeout(()=>{throw r},0)),r}}return t}class VG{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){se("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{se("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){va(n)?se("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await _a(n)}await this.X(6e4)})}}class FG{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return H.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return se("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(u=>{i-=u,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(u=>(se("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=$O(s);RI(o,r)>0&&(r=o)}),new $r(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Sr.oe=-1;function Kf(t){return t==null}function pf(t){return t===0&&1/t==-1/0}function KO(t){return typeof t=="number"&&Number.isInteger(t)&&!pf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=VP(e)),e=UG(t.get(n),e);return VP(e)}function UG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function VP(t){return t+""}function ts(t){const e=t.length;if(Ie(e>=2),e===2)return Ie(t.charAt(0)===""&&t.charAt(1)===""),Xe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&we(),t.charAt(o+1)){case"":const u=t.substring(s,o);let c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:we()}s=o+2}return new Xe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t,e){return[t,lr(e)]}function HO(t,e,n){return[t,lr(e),n]}const jG={},BG=["prefixPath","collectionGroup","readTime","documentId"],zG=["prefixPath","collectionGroup","documentId"],$G=["collectionGroup","readTime","prefixPath","documentId"],WG=["canonicalId","targetId"],qG=["targetId","path"],GG=["path","targetId"],KG=["collectionId","parent"],HG=["indexId","uid"],QG=["uid","sequenceNumber"],YG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],JG=["indexId","uid","orderedDocumentKey"],XG=["userId","collectionPath","documentId"],ZG=["userId","collectionPath","largestBatchId"],eK=["userId","collectionGroup","largestBatchId"],QO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tK=[...QO,"documentOverlays"],YO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JO=YO,PI=[...JO,"indexConfiguration","indexState","indexEntries"],nK=PI,rK=[...PI,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends qO{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function wn(t,e){const n=ge(t);return ss.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||Mn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $m(this.root,e,this.comparator,!1)}getReverseIterator(){return new $m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $m(this.root,e,this.comparator,!0)}}class $m{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Mn.RED,this.left=i??Mn.EMPTY,this.right=s??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Mn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jP(this.data.getIterator())}getIteratorFrom(e){return new jP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Et(this.comparator);return n.data=e,n}}class jP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new Et(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZO("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const sK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=sK.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ia(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function CI(t){const e=t.mapValue.fields.__previous_value__;return o_(e)?CI(e):e}function mf(t){const e=Hs(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,n,r,i,s,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gg={nullValue:"NULL_VALUE"};function Cu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?o_(t)?4:eD(t)?9007199254740991:a_(t)?10:11:we()}function ds(t,e){if(t===e)return!0;const n=Cu(t);if(n!==Cu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mf(t).isEqual(mf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Hs(i.timestampValue),u=Hs(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ia(i.bytesValue).isEqual(ia(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Nt(i.geoPointValue.latitude)===Nt(s.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Nt(i.integerValue)===Nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Nt(i.doubleValue),u=Nt(s.doubleValue);return o===u?pf(o)===pf(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Cc(t.arrayValue.values||[],e.arrayValue.values||[],ds);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(UP(o)!==UP(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!ds(o[c],u[c])))return!1;return!0}(t,e);default:return we()}}function gf(t,e){return(t.values||[]).find(n=>ds(n,e))!==void 0}function oa(t,e){if(t===e)return 0;const n=Cu(t),r=Cu(e);if(n!==r)return Ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){const u=Nt(s.integerValue||s.doubleValue),c=Nt(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return BP(t.timestampValue,e.timestampValue);case 4:return BP(mf(t),mf(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(s,o){const u=ia(s),c=ia(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const u=s.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=Ue(u[h],c[h]);if(p!==0)return p}return Ue(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const u=Ue(Nt(s.latitude),Nt(o.latitude));return u!==0?u:Ue(Nt(s.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zP(t.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,h,p;const m=s.fields||{},_=o.fields||{},I=(u=m.value)===null||u===void 0?void 0:u.arrayValue,T=(c=_.value)===null||c===void 0?void 0:c.arrayValue,D=Ue(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:zP(I,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Fo.mapValue&&o===Fo.mapValue)return 0;if(s===Fo.mapValue)return 1;if(o===Fo.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=Ue(c[m],p[m]);if(_!==0)return _;const I=oa(u[c[m]],h[p[m]]);if(I!==0)return I}return Ue(c.length,p.length)}(t.mapValue,e.mapValue);default:throw we()}}function BP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Hs(t),r=Hs(e),i=Ue(n.seconds,r.seconds);return i!==0?i:Ue(n.nanos,r.nanos)}function zP(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=oa(n[i],r[i]);if(s)return s}return Ue(n.length,r.length)}function bc(t){return lE(t)}function lE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ia(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=lE(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${lE(n.fields[o])}`;return i+"}"}(t.mapValue):we()}function bu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cE(t){return!!t&&"integerValue"in t}function yf(t){return!!t&&"arrayValue"in t}function $P(t){return!!t&&"nullValue"in t}function WP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yg(t){return!!t&&"mapValue"in t}function a_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Oh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const tD={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function aK(t){return"nullValue"in t?gg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bu(sa.empty(),pe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?a_(t)?tD:{mapValue:{}}:we()}function uK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bu(sa.empty(),pe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?tD:"mapValue"in t?a_(t)?{mapValue:{}}:Fo:we()}function qP(t,e){const n=oa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function GP(t,e){const n=oa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oh(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=Oh(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());yg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vn(Oh(this.value))}}function nD(t){const e=[];return Gu(t.fields,(n,r)=>{const i=new Dt([n]);if(yg(r)){const s=nD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,i,s,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new bt(e,0,Re.min(),Re.min(),Re.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new bt(e,1,n,Re.min(),r,i,0)}static newNoDocument(e,n){return new bt(e,2,n,Re.min(),Re.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Re.min(),Re.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.position=e,this.inclusive=n}}function KP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=oa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ds(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n="asc"){this.field=e,this.dir=n}}function lK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{}class Ze extends rD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cK(e,n,r):n==="array-contains"?new fK(e,r):n==="in"?new lD(e,r):n==="not-in"?new pK(e,r):n==="array-contains-any"?new mK(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dK(e,r):new hK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(oa(n,this.value)):n!==null&&Cu(this.value)===Cu(n)&&this.matchesComparison(oa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends rD{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yt(e,n)}matches(e){return xc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xc(t){return t.op==="and"}function dE(t){return t.op==="or"}function bI(t){return iD(t)&&xc(t)}function iD(t){for(const e of t.filters)if(e instanceof yt)return!1;return!0}function hE(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+bc(t.value);if(bI(t))return t.filters.map(e=>hE(e)).join(",");{const e=t.filters.map(n=>hE(n)).join(",");return`${t.op}(${e})`}}function sD(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&ds(r.value,i.value)}(t,e):t instanceof yt?function(r,i){return i instanceof yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&sD(o,i.filters[u]),!0):!1}(t,e):void we()}function oD(t,e){const n=t.filters.concat(e);return yt.create(n,t.op)}function aD(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${bc(n.value)}`}(t):t instanceof yt?function(n){return n.op.toString()+" {"+n.getFilters().map(aD).join(" ,")+"}"}(t):"Filter"}class cK extends Ze{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class dK extends Ze{constructor(e,n){super(e,"in",n),this.keys=uD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hK extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=uD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class fK extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yf(n)&&gf(n.arrayValue,this.value)}}class lD extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gf(this.value.arrayValue,n)}}class pK extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gf(this.value.arrayValue,n)}}class mK extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gK{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ue=null}}function fE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gK(t,e,n,r,i,s,o)}function xu(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bc(r)).join(",")),e.ue=n}return e.ue}function Hf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HP(t.startAt,e.startAt)&&HP(t.endAt,e.endAt)}function ay(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function uy(t,e){return t.filters.filter(n=>n instanceof Ze&&n.field.isEqual(e))}function QP(t,e,n){let r=gg,i=!0;for(const s of uy(t,e)){let o=gg,u=!0;switch(s.op){case"<":case"<=":o=aK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,u=!1;break;case"!=":case"not-in":o=gg}qP({value:r,inclusive:i},{value:o,inclusive:u})<0&&(r=o,i=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];qP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function YP(t,e,n){let r=Fo,i=!0;for(const s of uy(t,e)){let o=Fo,u=!0;switch(s.op){case">=":case">":o=uK(s.value),u=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,u=!1;break;case"!=":case"not-in":o=Fo}GP({value:r,inclusive:i},{value:o,inclusive:u})>0&&(r=o,i=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];GP({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cD(t,e,n,r,i,s,o,u){return new to(t,e,n,r,i,s,o,u)}function Jc(t){return new to(t)}function JP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xI(t){return t.collectionGroup!==null}function hc(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Et(Dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new _f(s,r))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new _f(Dt.keyField(),r))}return e.ce}function cr(t){const e=ge(t);return e.le||(e.le=yK(e,hc(t))),e.le}function yK(t,e){if(t.limitType==="F")return fE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new _f(i.field,s)});const n=t.endAt?new aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new aa(t.startAt.position,t.startAt.inclusive):null;return fE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pE(t,e){const n=t.filters.concat([e]);return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ly(t,e,n){return new to(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qf(t,e){return Hf(cr(t),cr(e))&&t.limitType===e.limitType}function dD(t){return`${xu(cr(t))}|lt:${t.limitType}`}function Vl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aD(i)).join(", ")}]`),Kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bc(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function Yf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){const h=KP(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,hc(r),i)||r.endAt&&!function(o,u,c){const h=KP(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,hc(r),i))}(t,e)}function hD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fD(t){return(e,n)=>{let r=!1;for(const i of hc(t)){const s=_K(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _K(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(s,o,u){const c=o.data.field(s),h=u.data.field(s);return c!==null&&h!==null?oa(c,h):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return XO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=new Rt(pe.comparator);function Ar(){return vK}const pD=new Rt(pe.comparator);function gh(...t){let e=pD;for(const n of t)e=e.insert(n.key,n);return e}function mD(t){let e=pD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return Dh()}function gD(){return Dh()}function Dh(){return new wa(t=>t.toString(),(t,e)=>t.isEqual(e))}const wK=new Rt(pe.comparator),EK=new Et(pe.comparator);function ze(...t){let e=EK;for(const n of t)e=e.add(n);return e}const TK=new Et(Ue);function kI(){return TK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function yD(t){return{integerValue:""+t}}function _D(t,e){return KO(e)?yD(e):NI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this._=void 0}}function IK(t,e,n){return t instanceof kc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&o_(s)&&(s=CI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ku?wD(t,e):t instanceof Nu?ED(t,e):function(i,s){const o=vD(i,s),u=XP(o)+XP(i.Pe);return cE(o)&&cE(i.Pe)?yD(u):NI(i.serializer,u)}(t,e)}function SK(t,e,n){return t instanceof ku?wD(t,e):t instanceof Nu?ED(t,e):n}function vD(t,e){return t instanceof Nc?function(r){return cE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class kc extends u_{}class ku extends u_{constructor(e){super(),this.elements=e}}function wD(t,e){const n=TD(e);for(const r of t.elements)n.some(i=>ds(i,r))||n.push(r);return{arrayValue:{values:n}}}class Nu extends u_{constructor(e){super(),this.elements=e}}function ED(t,e){let n=TD(e);for(const r of t.elements)n=n.filter(i=>!ds(i,r));return{arrayValue:{values:n}}}class Nc extends u_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function XP(t){return Nt(t.integerValue||t.doubleValue)}function TD(t){return yf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.field=e,this.transform=n}}function RK(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ku&&i instanceof ku||r instanceof Nu&&i instanceof Nu?Cc(r.elements,i.elements,ds):r instanceof Nc&&i instanceof Nc?ds(r.Pe,i.Pe):r instanceof kc&&i instanceof kc}(t.transform,e.transform)}class AK{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _g(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class l_{}function ID(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zc(t.key,Lt.none()):new Xc(t.key,t.data,Lt.none());{const n=t.data,r=Vn.empty();let i=new Et(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new no(t.key,r,new Rr(i.toArray()),Lt.none())}}function PK(t,e,n){t instanceof Xc?function(i,s,o){const u=i.value.clone(),c=eC(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof no?function(i,s,o){if(!_g(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=eC(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(SD(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lh(t,e,n,r){return t instanceof Xc?function(s,o,u,c){if(!_g(s.precondition,o))return u;const h=s.value.clone(),p=tC(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof no?function(s,o,u,c){if(!_g(s.precondition,o))return u;const h=tC(s.fieldTransforms,c,o),p=o.data;return p.setAll(SD(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,u){return _g(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function CK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=vD(r.transform,i||null);s!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,s))}return n||null}function ZP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cc(r,i,(s,o)=>RK(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends l_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class no extends l_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function eC(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,SK(o,u,n[i]))}return r}function tC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,IK(s,o,e))}return r}class Zc extends l_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OI extends l_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&PK(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gD();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=ID(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Cc(this.mutations,e.mutations,(n,r)=>ZP(n,r))&&Cc(this.baseMutations,e.baseMutations,(n,r)=>ZP(n,r))}}class LI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return wK}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new LI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,rt;function RD(t){switch(t){default:return we();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function AD(t){if(t===void 0)return tn("GRPC error has no .code"),J.UNKNOWN;switch(t){case an.OK:return J.OK;case an.CANCELLED:return J.CANCELLED;case an.UNKNOWN:return J.UNKNOWN;case an.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case an.INTERNAL:return J.INTERNAL;case an.UNAVAILABLE:return J.UNAVAILABLE;case an.UNAUTHENTICATED:return J.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case an.NOT_FOUND:return J.NOT_FOUND;case an.ALREADY_EXISTS:return J.ALREADY_EXISTS;case an.PERMISSION_DENIED:return J.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case an.ABORTED:return J.ABORTED;case an.OUT_OF_RANGE:return J.OUT_OF_RANGE;case an.UNIMPLEMENTED:return J.UNIMPLEMENTED;case an.DATA_LOSS:return J.DATA_LOSS;default:return we()}}(rt=an||(an={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=new yu([4294967295,4294967295],0);function nC(t){const e=PD().encode(t),n=new OO;return n.update(e),new Uint8Array(n.digest())}function rC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yu([n,r],0),new yu([i,s],0)]}class VI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yh(`Invalid padding: ${n}`);if(r<0)throw new yh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yu.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yu.fromNumber(r)));return i.compare(xK)===1&&(i=new yu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nC(e),[r,i]=rC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new VI(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=nC(e),[r,i]=rC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Zf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xf(Re.min(),i,new Rt(Ue),Ar(),ze())}}class Zf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zf(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class CD{constructor(e,n){this.targetId=e,this.me=n}}class bD{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class iC{constructor(){this.fe=0,this.ge=oC(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),n=ze(),r=ze();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we()}}),new Zf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=oC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kK{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ar(),this.qe=sC(),this.Qe=new Rt(Ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(ay(s))if(r===0){const o=new pe(s.path);this.Ue(n,o,bt.newNoDocument(o,Re.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=ia(r).toUint8Array()}catch(c){if(c instanceof ZO)return cs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new VI(o,i,s)}catch(c){return cs(c instanceof yh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const u=this.Je(o);if(u){if(s.current&&ay(u.target)){const c=new pe(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bt.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ze();this.qe.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Xf(e,n,this.Qe,this.ke,r);return this.ke=Ar(),this.qe=sC(),this.Qe=new Rt(Ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Et(Ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function sC(){return new Rt(pe.comparator)}function oC(){return new Rt(pe.comparator)}const NK={asc:"ASCENDING",desc:"DESCENDING"},OK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DK={and:"AND",or:"OR"};class LK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mE(t,e){return t.useProto3Json||Kf(e)?e:{value:e}}function Oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MK(t,e){return Oc(t,e.toTimestamp())}function nn(t){return Ie(!!t),Re.fromTimestamp(function(n){const r=Hs(n);return new Mt(r.seconds,r.nanos)}(t))}function FI(t,e){return gE(t,e).canonicalString()}function gE(t,e){const n=function(i){return new Xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kD(t){const e=Xe.fromString(t);return Ie(BD(e)),e}function vf(t,e){return FI(t.databaseId,e.path)}function os(t,e){const n=kD(e);if(n.get(1)!==t.databaseId.projectId)throw new re(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(DD(n))}function ND(t,e){return FI(t.databaseId,e)}function OD(t){const e=kD(t);return e.length===4?Xe.emptyPath():DD(e)}function yE(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DD(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aC(t,e,n){return{name:vf(t,e),fields:n.value.mapValue.fields}}function LD(t,e,n){const r=os(t,e.name),i=nn(e.updateTime),s=e.createTime?nn(e.createTime):Re.min(),o=new Vn({mapValue:{fields:e.fields}}),u=bt.newFoundDocument(r,i,s,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function VK(t,e){return"found"in e?function(r,i){Ie(!!i.found),i.found.name,i.found.updateTime;const s=os(r,i.found.name),o=nn(i.found.updateTime),u=i.found.createTime?nn(i.found.createTime):Re.min(),c=new Vn({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(s,o,u,c)}(t,e):"missing"in e?function(r,i){Ie(!!i.missing),Ie(!!i.readTime);const s=os(r,i.missing),o=nn(i.readTime);return bt.newNoDocument(s,o)}(t,e):we()}function FK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Ie(p===void 0||typeof p=="string"),Ht.fromBase64String(p||"")):(Ie(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ht.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?J.UNKNOWN:AD(h.code);return new re(p,h.message||"")}(o);n=new bD(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=os(t,r.document.name),s=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):Re.min(),u=new Vn({mapValue:{fields:r.document.fields}}),c=bt.newFoundDocument(i,s,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new vg(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=os(t,r.document),s=r.readTime?nn(r.readTime):Re.min(),o=bt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new vg([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=os(t,r.document),s=r.removedTargetIds||[];n=new vg([],s,i,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bK(i,s),u=r.targetId;n=new CD(u,o)}}return n}function wf(t,e){let n;if(e instanceof Xc)n={update:aC(t,e.key,e.value)};else if(e instanceof Zc)n={delete:vf(t,e.key)};else if(e instanceof no)n={update:aC(t,e.key,e.data),updateMask:WK(e.fieldMask)};else{if(!(e instanceof OI))return we();n={verify:vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nc)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:MK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we()}(t,e.precondition)),n}function _E(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Lt.updateTime(nn(s.updateTime)):s.exists!==void 0?Lt.exists(s.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let c=null;if("setToServerValue"in u)Ie(u.setToServerValue==="REQUEST_TIME"),c=new kc;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];c=new ku(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];c=new Nu(p)}else"increment"in u?c=new Nc(o,u.increment):we();const h=Dt.fromServerFormat(u.fieldPath);return new Jf(h,c)}(t,i)):[];if(e.update){e.update.name;const i=os(t,e.update.name),s=new Vn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const h=c.fieldPaths||[];return new Rr(h.map(p=>Dt.fromServerFormat(p)))}(e.updateMask);return new no(i,s,o,n,r)}return new Xc(i,s,n,r)}if(e.delete){const i=os(t,e.delete);return new Zc(i,n)}if(e.verify){const i=os(t,e.verify);return new OI(i,n)}return we()}function UK(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?nn(i.updateTime):nn(s);return o.isEqual(Re.min())&&(o=nn(s)),new AK(o,i.transformResults||[])}(n,e))):[]}function MD(t,e){return{documents:[ND(t,e.path)]}}function VD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ND(t,i);const s=function(h){if(h.length!==0)return jD(yt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Fl(_.field),direction:BK(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=mE(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function FD(t){let e=OD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const _=UD(m);return _ instanceof yt&&bI(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(T){return new _f(Ul(T.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(m){let _;return _=typeof m=="object"?m.value:m,Kf(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,I=m.values||[];return new aa(I,_)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const _=!m.before,I=m.values||[];return new aa(I,_)}(n.endAt)),cD(e,i,o,s,u,"F",c,h)}function jK(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ul(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ul(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ul(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ul(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Ul(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yt.create(n.compositeFilter.filters.map(r=>UD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function BK(t){return NK[t]}function zK(t){return OK[t]}function $K(t){return DK[t]}function Fl(t){return{fieldPath:t.canonicalString()}}function Ul(t){return Dt.fromServerFormat(t.fieldPath)}function jD(t){return t instanceof Ze?function(n){if(n.op==="=="){if(WP(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NAN"}};if($P(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WP(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NOT_NAN"}};if($P(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(n.field),op:zK(n.op),value:n.value}}}(t):t instanceof yt?function(n){const r=n.getFilters().map(i=>jD(i));return r.length===1?r[0]:{compositeFilter:{op:$K(n.op),filters:r}}}(t):we()}function WK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n,r,i,s=Re.min(),o=Re.min(),u=Ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.ct=e}}function qK(t,e){let n;if(e.document)n=LD(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),i=Du(e.noDocument.readTime);n=bt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return we();{const r=pe.fromSegments(e.unknownDocument.path),i=Du(e.unknownDocument.version);n=bt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Mt(i[0],i[1]);return Re.fromTimestamp(s)}(e.readTime)),n}function uC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:vf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Oc(s,o.version.toTimestamp()),createTime:Oc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ou(e.version)};else{if(!e.isUnknownDocument())return we();r.unknownDocument={path:n.path.toArray(),version:Ou(e.version)}}return r}function cy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ou(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Du(t){const e=new Mt(t.seconds,t.nanoseconds);return Re.fromTimestamp(e)}function Za(t,e){const n=(e.baseMutations||[]).map(s=>_E(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];o.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>_E(t.ct,s)),i=Mt.fromMillis(e.localWriteTimeMs);return new DI(e.batchId,i,n,r)}function _h(t){const e=Du(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Du(t.lastLimboFreeSnapshotVersion):Re.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Ie(s.documents.length===1),cr(Jc(OD(s.documents[0])))}(t.query):function(s){return cr(FD(s))}(t.query),new Vs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ht.fromBase64String(t.resumeToken))}function $D(t,e){const n=Ou(e.snapshotVersion),r=Ou(e.lastLimboFreeSnapshotVersion);let i;i=ay(e.target)?MD(t.ct,e.target):VD(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UI(t){const e=FD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ly(e,e.limit,"L"):e}function Dw(t,e){return new MI(e.largestBatchId,_E(t.ct,e.overlayMutation))}function lC(t,e){const n=e.path.lastSegment();return[t,lr(e.path.popLast()),n]}function cC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ou(r.readTime),documentKey:lr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{getBundleMetadata(e,n){return dC(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Du(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return dC(e).put(function(i){return{bundleId:i.id,createTime:Ou(nn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return hC(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:UI(s.bundledQuery),readTime:Du(s.readTime)}}(r)})}saveNamedQuery(e,n){return hC(e).put(function(i){return{name:i.name,readTime:Ou(nn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function dC(t){return wn(t,"bundles")}function hC(t){return wn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new c_(e,r)}getOverlay(e,n){return th(e).get(lC(this.userId,n)).next(r=>r?Dw(this.serializer,r):null)}getOverlays(e,n){const r=ns();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const u=new MI(n,o);i.push(this.ht(e,u))}),H.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(lr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(th(e).j("collectionPathOverlayIndex",u))}),H.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ns(),s=lr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return th(e).U("collectionPathOverlayIndex",o).next(u=>{for(const c of u){const h=Dw(this.serializer,c);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ns();let o;const u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return th(e).J({index:"collectionGroupOverlayIndex",range:u},(c,h,p)=>{const m=Dw(this.serializer,h);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):p.done()}).next(()=>s)}ht(e,n){return th(e).put(function(i,s,o){const[u,c,h]=lC(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wf(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function th(t){return wn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{Pt(e){return wn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),pf(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Hs(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ia(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?eD(e)?this.dt(n,Number.MAX_SAFE_INTEGER):a_(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):we()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",u=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Nt(u)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),pe.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}eu.vt=new eu;function HK(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fC(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=HK(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class QK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=fC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=fC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class YK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class JK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class nh{constructor(){this.jt=new QK,this.Ht=new YK(this.jt),this.Jt=new JK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tu(this.indexId,this.documentKey,this.arrayValue,r)}}function So(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=pC(t.arrayValue,e.arrayValue),n!==0?n:(n=pC(t.directionalValue,e.directionalValue),n!==0?n:pe.comparator(t.documentKey,e.documentKey)))}function pC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.Xt=new Et((n,r)=>Dt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ie(e.collectionGroup===this.collectionId),this.nn)return!1;const n=aE(e);if(n!==void 0&&!this.sn(n))return!1;const r=Qa(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const u=this.Xt.getIterator().getNext();if(!i.has(u.field.canonicalString())){const c=r[s];if(!this.on(u,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){const u=r[s];if(o>=this.en.length||!this._n(this.en[o++],u))return!1}return!0}an(){if(this.nn)return null;let e=new Et(Dt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new pg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new pg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new pg(r.field,r.dir==="asc"?0:1)));return new oy(oy.UNKNOWN_ID,this.collectionId,n,ff.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){var e,n;if(Ie(t instanceof Ze||t instanceof yt),t instanceof Ze){if(t instanceof lD){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ze.create(t.field,"==",s)))||[];return yt.create(i,"or")}return t}const r=t.filters.map(i=>WD(i));return yt.create(r,t.op)}function XK(t){if(t.getFilters().length===0)return[];const e=EE(WD(t));return Ie(qD(e)),vE(e)||wE(e)?[e]:e.getFilters()}function vE(t){return t instanceof Ze}function wE(t){return t instanceof yt&&bI(t)}function qD(t){return vE(t)||wE(t)||function(n){if(n instanceof yt&&dE(n)){for(const r of n.getFilters())if(!vE(r)&&!wE(r))return!1;return!0}return!1}(t)}function EE(t){if(Ie(t instanceof Ze||t instanceof yt),t instanceof Ze)return t;if(t.filters.length===1)return EE(t.filters[0]);const e=t.filters.map(r=>EE(r));let n=yt.create(e,t.op);return n=dy(n),qD(n)?n:(Ie(n instanceof yt),Ie(xc(n)),Ie(n.filters.length>1),n.filters.reduce((r,i)=>jI(r,i)))}function jI(t,e){let n;return Ie(t instanceof Ze||t instanceof yt),Ie(e instanceof Ze||e instanceof yt),n=t instanceof Ze?e instanceof Ze?function(i,s){return yt.create([i,s],"and")}(t,e):gC(t,e):e instanceof Ze?gC(e,t):function(i,s){if(Ie(i.filters.length>0&&s.filters.length>0),xc(i)&&xc(s))return oD(i,s.getFilters());const o=dE(i)?i:s,u=dE(i)?s:i,c=o.filters.map(h=>jI(h,u));return yt.create(c,"or")}(t,e),dy(n)}function gC(t,e){if(xc(e))return oD(e,t.getFilters());{const n=e.filters.map(r=>jI(t,r));return yt.create(n,"or")}}function dy(t){if(Ie(t instanceof Ze||t instanceof yt),t instanceof Ze)return t;const e=t.getFilters();if(e.length===1)return dy(e[0]);if(iD(t))return t;const n=e.map(i=>dy(i)),r=[];return n.forEach(i=>{i instanceof Ze?r.push(i):i instanceof yt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:yt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(){this.un=new BI}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve($r.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et(Xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new Uint8Array(0);class eH{constructor(e,n){this.databaseId=n,this.cn=new BI,this.ln=new wa(r=>xu(r),(r,i)=>Hf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:lr(i)};return yC(e).put(s)}return H.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[BO(n),""],!1,!0);return yC(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(ts(o.parent))}return r})}addFieldIndex(e,n){const r=rh(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=kl(e);return s.next(u=>{o.put(cC(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=rh(e),i=kl(e),s=xl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=rh(e),r=xl(e),i=kl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return H.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new mC(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=xl(e);let i=!0;const s=new Map;return H.forEach(this.hn(n),o=>this.Pn(e,o).next(u=>{i&&(i=!!u),s.set(o,u)})).next(()=>{if(i){let o=ze();const u=[];return H.forEach(s,(c,h)=>{se("IndexedDbIndexManager",`Using index ${function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${xu(n)}`);const p=function(S,U){const q=aE(U);if(q===void 0)return null;for(const $ of uy(S,q.fieldPath))switch($.op){case"array-contains-any":return $.value.arrayValue.values||[];case"array-contains":return[$.value]}return null}(h,c),m=function(S,U){const q=new Map;for(const $ of Qa(U))for(const C of uy(S,$.fieldPath))switch(C.op){case"==":case"in":q.set($.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return q.set($.fieldPath.canonicalString(),C.value),Array.from(q.values())}return null}(h,c),_=function(S,U){const q=[];let $=!0;for(const C of Qa(U)){const R=C.kind===0?QP(S,C.fieldPath,S.startAt):YP(S,C.fieldPath,S.startAt);q.push(R.value),$&&($=R.inclusive)}return new aa(q,$)}(h,c),I=function(S,U){const q=[];let $=!0;for(const C of Qa(U)){const R=C.kind===0?YP(S,C.fieldPath,S.endAt):QP(S,C.fieldPath,S.endAt);q.push(R.value),$&&($=R.inclusive)}return new aa(q,$)}(h,c),T=this.In(c,h,_),D=this.In(c,h,I),O=this.Tn(c,h,m),k=this.En(c.indexId,p,T,_.inclusive,D,I.inclusive,O);return H.forEach(k,P=>r.G(P,n.limit).next(S=>{S.forEach(U=>{const q=pe.fromSegments(U.documentKey);o.has(q)||(o=o.add(q),u.push(q))})}))}).next(()=>u)}return H.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=XK(yt.create(e.filters,"and")).map(r=>fE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,u){const c=(n!=null?n.length:1)*Math.max(r.length,s.length),h=c/(n!=null?n.length:1),p=[];for(let m=0;m<c;++m){const _=n?this.dn(n[m/h]):Wm,I=this.An(e,_,r[m%h],i),T=this.Rn(e,_,s[m%h],o),D=u.map(O=>this.An(e,_,O,!0));p.push(...this.createRange(I,T,D))}return p}An(e,n,r,i){const s=new tu(e,pe.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new tu(e,pe.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new mC(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const u of s)r.rn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return H.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let h=new Et(Dt.comparator),p=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:h=h.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new nh;for(const i of Qa(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);eu.vt.It(s,o)}return r.zt()}dn(e){const n=new nh;return eu.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new nh;return eu.vt.It(bu(this.databaseId,n),r.Yt(function(s){const o=Qa(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new nh);let s=0;for(const o of Qa(e)){const u=r[s++];for(const c of i)if(this.fn(n,o.fieldPath)&&yf(u))i=this.gn(i,o,u);else{const h=c.Yt(o.kind);eu.vt.It(u,h)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const u of i){const c=new nh;c.seed(u.zt()),eu.vt.It(o,c.Yt(n.kind)),s.push(c)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Ze&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=rh(e),i=kl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return H.forEach(s,u=>i.get([u.indexId,this.uid]).next(c=>{o.push(function(p,m){const _=m?new ff(m.sequenceNumber,new $r(Du(m.readTime),new pe(ts(m.documentKey)),m.largestBatchId)):ff.empty(),I=p.fields.map(([T,D])=>new pg(Dt.fromServerFormat(T),D));return new oy(p.indexId,p.collectionGroup,I,_)}(u,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=rh(e),s=kl(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>H.forEach(u,c=>s.put(cC(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return H.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),H.forEach(u,c=>this.wn(e,i,c).next(h=>{const p=this.Sn(s,c);return h.isEqual(p)?H.resolve():this.bn(e,s,c,h,p)}))))})}Dn(e,n,r,i){return xl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return xl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=xl(e);let s=new Et(So);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,u)=>{s=s.add(new tu(r.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Et(So);const i=this.Vn(n,e);if(i==null)return r;const s=aE(n);if(s!=null){const o=e.data.field(s.fieldPath);if(yf(o))for(const u of o.arrayValue.values||[])r=r.add(new tu(n.indexId,e.key,this.dn(u),i))}else r=r.add(new tu(n.indexId,e.key,Wm,i));return r}bn(e,n,r,i,s){se("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,h,p,m,_){const I=c.getIterator(),T=h.getIterator();let D=bl(I),O=bl(T);for(;D||O;){let k=!1,P=!1;if(D&&O){const S=p(D,O);S<0?P=!0:S>0&&(k=!0)}else D!=null?P=!0:k=!0;k?(m(O),O=bl(T)):P?(_(D),D=bl(I)):(D=bl(I),O=bl(T))}}(i,s,So,u=>{o.push(this.Dn(e,n,r,u))},u=>{o.push(this.vn(e,n,r,u))}),H.waitFor(o)}yn(e){let n=1;return kl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,u)=>So(o,u)).filter((o,u,c)=>!u||So(o,c[u-1])!==0);const i=[];i.push(e);for(const o of r){const u=So(o,e),c=So(o,n);if(u===0)i[0]=e.Zt();else if(u>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const u=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Wm,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Wm,[]];s.push(IDBKeyRange.bound(u,c))}return s}Cn(e,n){return So(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_C)}getMinOffset(e,n){return H.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||we())).next(_C)}}function yC(t){return wn(t,"collectionParents")}function xl(t){return wn(t,"indexEntries")}function rh(t){return wn(t,"indexConfiguration")}function kl(t){return wn(t,"indexState")}function _C(t){Ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;RI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $r(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wr(e,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let u=0;const c=r.J({range:o},(p,m,_)=>(u++,_.delete()));s.push(c.next(()=>{Ie(u===1)}));const h=[];for(const p of n.mutations){const m=HO(e,p.key.path,n.batchId);s.push(i.delete(m)),h.push(p.key)}return H.waitFor(s).next(()=>h)}function hy(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw we();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(41943040,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);class d_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Ie(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new d_(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ro(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=jl(e),o=Ro(e);return o.add({}).next(u=>{Ie(typeof u=="number");const c=new DI(u,n,r,i),h=function(I,T,D){const O=D.baseMutations.map(P=>wf(I.ct,P)),k=D.mutations.map(P=>wf(I.ct,P));return{userId:T,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:O,mutations:k}}(this.serializer,this.userId,c),p=[];let m=new Et((_,I)=>Ue(_.canonicalString(),I.canonicalString()));for(const _ of i){const I=HO(this.userId,_.key.path,u);m=m.add(_.key.path.popLast()),p.push(o.put(h)),p.push(s.put(I,jG))}return m.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[u]=c.keys()}),H.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return Ro(e).get(n).next(r=>r?(Ie(r.userId===this.userId),Za(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?H.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ro(e).J({index:"userMutationsIndex",range:i},(o,u,c)=>{u.userId===this.userId&&(Ie(u.batchId>=r),s=Za(this.serializer,u)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ro(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ro(e).U("userMutationsIndex",n).next(r=>r.map(i=>Za(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=mg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return jl(e).J({range:i},(o,u,c)=>{const[h,p,m]=o,_=ts(p);if(h===this.userId&&n.path.isEqual(_))return Ro(e).get(m).next(I=>{if(!I)throw we();Ie(I.userId===this.userId),s.push(Za(this.serializer,I))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ue);const i=[];return n.forEach(s=>{const o=mg(this.userId,s.path),u=IDBKeyRange.lowerBound(o),c=jl(e).J({range:u},(h,p,m)=>{const[_,I,T]=h,D=ts(I);_===this.userId&&s.path.isEqual(D)?r=r.add(T):m.done()});i.push(c)}),H.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=mg(this.userId,r),o=IDBKeyRange.lowerBound(s);let u=new Et(Ue);return jl(e).J({range:o},(c,h,p)=>{const[m,_,I]=c,T=ts(_);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(u=u.add(I)):p.done()}).next(()=>this.xn(e,u))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ro(e).get(s).next(o=>{if(o===null)throw we();Ie(o.userId===this.userId),r.push(Za(this.serializer,o))}))}),H.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return GD(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),H.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return H.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return jl(e).J({range:r},(s,o,u)=>{if(s[0]===this.userId){const c=ts(s[1]);i.push(c)}else u.done()}).next(()=>{Ie(i.length===0)})})}containsKey(e,n){return KD(e,this.userId,n)}Nn(e){return HD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function KD(t,e,n){const r=mg(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return jl(t).J({range:s,H:!0},(u,c,h)=>{const[p,m,_]=u;p===e&&m===i&&(o=!0),h.done()}).next(()=>o)}function Ro(t){return wn(t,"mutations")}function jl(t){return wn(t,"documentMutations")}function HD(t){return wn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Lu(0)}static kn(){return new Lu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Lu(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Re.fromTimestamp(new Mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Nl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Nl(e).J((o,u)=>{const c=_h(u);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>H.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Nl(e).J((r,i)=>{const s=_h(i);n(s)})}qn(e){return wC(e).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Qn(e,n){return wC(e).put("targetGlobalKey",n)}Kn(e,n){return Nl(e).put($D(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=xu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Nl(e).J({range:i,index:"queryTargetsIndex"},(o,u,c)=>{const h=_h(u);Hf(n,h.target)&&(s=h,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=No(e);return n.forEach(o=>{const u=lr(o.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(i)}removeMatchingKeys(e,n,r){const i=No(e);return H.forEach(n,s=>{const o=lr(s.path);return H.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=No(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=No(e);let s=ze();return i.J({range:r,H:!0},(o,u,c)=>{const h=ts(o[1]),p=new pe(h);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=lr(n.path),i=IDBKeyRange.bound([r],[BO(r)],!1,!0);let s=0;return No(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,u],c,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ot(e,n){return Nl(e).get(n).next(r=>r?_h(r):null)}}function Nl(t){return wn(t,"targets")}function wC(t){return wn(t,"targetGlobal")}function No(t){return wn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC([t,e],[n,r]){const i=Ue(t,n);return i===0?Ue(e,r):i}class nH{constructor(e){this.Un=e,this.buffer=new Et(EC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();EC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){va(n)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await _a(n)}await this.Hn(3e5)})}}class iH{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(Sr.oe);const r=new nH(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(vC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,u=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Ml()<=He.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function sH(t,e){return new iH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n){this.db=e,this.garbageCollector=sH(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return qm(e,r)}removeReference(e,n,r){return qm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return qm(e,n)}nr(e,n){return function(i,s){let o=!1;return HD(i).Y(u=>KD(i,u,s).next(c=>(c&&(o=!0),H.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,u)=>{if(u<=n){const c=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Re.min()),No(e).delete(function(m){return[0,lr(m.path)]}(o))))});i.push(c)}}).next(()=>H.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return qm(e,n)}tr(e,n){const r=No(e);let i,s=Sr.oe;return r.J({index:"documentTargetsIndex"},([o,u],{path:c,sequenceNumber:h})=>{o===0?(s!==Sr.oe&&n(new pe(ts(i)),s),s=h,i=c):s=Sr.oe}).next(()=>{s!==Sr.oe&&n(new pe(ts(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qm(t,e){return No(t).put(function(r,i){return{targetId:0,path:lr(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.changes=new wa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return qa(e).put(r)}removeEntry(e,n,r){return qa(e).delete(function(s,o){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],cy(o),u[u.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=bt.newInvalidDocument(n);return qa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ih(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:bt.newInvalidDocument(n)};return qa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ih(n))},(i,s)=>{r={document:this.ir(n,s),size:hy(s)}}).next(()=>r)}getEntries(e,n){let r=Ar();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Ar(),i=new Rt(pe.comparator);return this._r(e,n,(s,o)=>{const u=this.ir(s,o);r=r.insert(s,u),i=i.insert(s,hy(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return H.resolve();let i=new Et(SC);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(ih(i.first()),ih(i.last())),o=i.getIterator();let u=o.getNext();return qa(e).J({index:"documentKeyIndex",range:s},(c,h,p)=>{const m=pe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&SC(u,m)<0;)r(u,null),u=o.getNext();u&&u.isEqual(m)&&(r(u,h),u=o.hasNext()?o.getNext():null),u?p.$(ih(u)):p.done()}).next(()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,u=[o.popLast().toArray(),o.lastSegment(),cy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qa(e).U(IDBKeyRange.bound(u,c,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let p=Ar();for(const m of h){const _=this.ir(pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Yf(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=Ar();const o=IC(n,r),u=IC(n,$r.max());return qa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(c,h,p)=>{const m=this.ir(pe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(m.key,m),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new uH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return TC(e).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}rr(e,n){return TC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=qK(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Re.min())))return r}return bt.newInvalidDocument(e)}}function YD(t){return new aH(t)}class uH extends QD{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new wa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Et((s,o)=>Ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const u=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,u.readTime)),o.isValidDocument()){const c=uC(this.cr.serializer,o);i=i.add(s.path.popLast());const h=hy(c);r+=h-u.size,n.push(this.cr.addEntry(e,s,c))}else if(r-=u.size,this.trackRemovals){const c=uC(this.cr.serializer,o.convertToNoDocument(Re.min()));n.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),H.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function TC(t){return wn(t,"remoteDocumentGlobal")}function qa(t){return wn(t,"remoteDocumentsV14")}function ih(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function IC(t,e){const n=e.documentKey.path.toArray();return[t,cy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SC(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ue(n[s],r[s]),i)return i;return i=Ue(n.length,r.length),i||(i=Ue(n[n.length-2],r[r.length-2]),i||Ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Lh(r.mutation,i,Rr.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const i=ns();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gh();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=Ar();const o=Dh(),u=function(){return Dh()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof no)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Lh(p.mutation,h,p.mutation.getFieldMask(),Mt.now())):o.set(h.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new lH(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Dh();let i=new Rt((o,u)=>o-u),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Rr.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(i.get(u.batchId)||ze()).add(c);i=i.insert(u.batchId,m)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=gD();p.forEach(_=>{if(!s.has(_)){const I=ID(n.get(_),r.get(_));I!==null&&m.set(_,I),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(ns());let u=-1,c=s;return o.next(h=>H.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?H.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ze())).next(p=>({batchId:u,changes:mD(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let i=gh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gh();return this.indexManager.getCollectionParents(e,s).next(u=>H.forEach(u,c=>{const h=function(m,_){return new to(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,bt.newInvalidDocument(p)))});let u=gh();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&Lh(p.mutation,h,Rr.empty(),Mt.now()),Yf(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:UI(i.bundledQuery),readTime:nn(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(){this.overlays=new Rt(pe.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=ns(),s=n.length+1,o=new pe(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Rt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ns(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=ns(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return H.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new MI(n,r));let s=this.Ir.get(n);s===void 0&&(s=ze(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.Tr=new Et(Rn.Er),this.dr=new Et(Rn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Rn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Rn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new pe(new Xe([])),r=new Rn(n,e),i=new Rn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new pe(new Xe([])),r=new Rn(n,e),i=new Rn(n,e+1);let s=ze();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Rn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return pe.comparator(e.key,n.key)||Ue(e.wr,n.wr)}static Ar(e,n){return Ue(e.wr,n.wr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Et(Rn.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DI(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.br=this.br.add(new Rn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rn(n,0),i=new Rn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const u=this.Dr(o.wr);s.push(u)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Ue);return n.forEach(i=>{const s=new Rn(i,0),o=new Rn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],u=>{r=r.add(u.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;pe.isDocumentKey(s)||(s=s.child(""));const o=new Rn(new pe(s),0);let u=new Et(Ue);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.wr)),!0)},o),H.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new Rn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Rn(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.Mr=e,this.docs=function(){return new Rt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,u=new pe(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||RI($O(p),r)<=0||(i.has(p.key)||Yf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){we()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mH(this)}getSize(e){return H.resolve(this.size)}}class mH extends QD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e){this.persistence=e,this.Nr=new wa(n=>xu(n),Hf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zI,this.targetCount=0,this.kr=Lu.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Lu(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Sr(0),this.Kr=!1,this.Kr=!0,this.$r=new hH,this.referenceDelegate=e(this),this.Ur=new gH(this),this.indexManager=new ZK,this.remoteDocumentCache=function(i){return new pH(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zD(n),this.Gr=new cH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fH(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new yH(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yH extends qO{constructor(e){super(),this.currentSequenceNumber=e}}class h_{constructor(e){this.persistence=e,this.Jr=new zI,this.Yr=null}static Zr(e){return new h_(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=pe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e){this.serializer=e}O(e,n,r,i){const s=new s_("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FP,{unique:!0}),c.createObjectStore("documentMutations")}(e),RC(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),RC(e)),o=o.next(()=>function(c){const h=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,h){return h.store("mutations").U().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FP,{unique:!0});const m=h.store("mutations"),_=p.map(I=>m.put(I));return H.waitFor(_)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){const h=c.createObjectStore("documentOverlays",{keyPath:XG});h.createIndex("collectionPathOverlayIndex",ZG,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",eK,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:BG});h.createIndex("documentKeyIndex",zG),h.createIndex("collectionGroupIndex",$G)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:HG}).createIndex("sequenceNumberIndex",QG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:YG}).createIndex("documentKeyIndex",JG,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=hy(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>H.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(u=>H.forEach(u,c=>{Ie(c.userId===s.userId);const h=Za(this.serializer,c);return GD(e,s.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,u)=>{const c=new Xe(o),h=function(m){return[0,lr(m)]}(c);s.push(n.get(h).next(p=>p?H.resolve():(m=>n.put({targetId:0,path:lr(m),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>H.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:KG});const r=n.store("collectionParents"),i=new BI,s=o=>{if(i.add(o)){const u=o.lastSegment(),c=o.popLast();return r.put({collectionId:u,parent:lr(c)})}};return n.store("remoteDocuments").J({H:!0},(o,u)=>{const c=new Xe(o);return s(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,u,c],h)=>{const p=ts(u);return s(p.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=_h(i),o=$D(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const u=n.store("remoteDocumentsV14"),c=function(m){return m.document?new pe(Xe.fromString(m.document.name).popFirst(5)):m.noDocument?pe.fromSegments(m.noDocument.path):m.unknownDocument?pe.fromSegments(m.unknownDocument.path):we()}(o).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(u.put(h))}).next(()=>H.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=YD(this.serializer),s=new XD(h_.Zr,this.serializer.ct);return r.U().next(o=>{const u=new Map;return o.forEach(c=>{var h;let p=(h=u.get(c.userId))!==null&&h!==void 0?h:ze();Za(this.serializer,c).keys().forEach(m=>p=p.add(m)),u.set(c.userId,p)}),H.forEach(u,(c,h)=>{const p=new Pn(h),m=c_.lt(this.serializer,p),_=s.getIndexManager(p),I=d_.lt(p,this.serializer,_,s.referenceDelegate);return new JD(i,I,m,_).recalculateAndSaveOverlaysForDocumentKeys(new uE(n,Sr.oe),c).next()})})}}function RC(t){t.createObjectStore("targetDocuments",{keyPath:qG}).createIndex("documentTargetsIndex",GG,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WG,{unique:!0}),t.createObjectStore("targetGlobal")}const Lw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $I{constructor(e,n,r,i,s,o,u,c,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=u,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!$I.D())throw new re(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oH(this,i),this.Ai=n+"main",this.serializer=new zD(c),this.Ri=new ss(this.Ai,this.hi,new _H(this.serializer)),this.$r=new KK,this.Ur=new tH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YD(this.serializer),this.Gr=new GK,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&tn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(J.FAILED_PRECONDITION,Lw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Sr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Gm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(va(e))return se("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return se("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return sh(e).get("owner").next(n=>H.resolve(this.vi(n)))}Ci(e){return Gm(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=wn(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(u=>s.indexOf(u)===-1);return H.forEach(o,u=>r.delete(u.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):sh(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new re(J.FAILED_PRECONDITION,Lw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gm(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||o&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&se("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new uE(e,Sr.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Gm(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return d_.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eH(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return c_.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===17?rK:c===16?nK:c===15?PI:c===14?JO:c===13?YO:c===12?tK:c===11?QO:void we()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,u=>(o=new uE(u,this.Qr?this.Qr.next():Sr.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new re(J.FAILED_PRECONDITION,WO);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e){return sh(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(J.FAILED_PRECONDITION,Lw)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sh(e).put("owner",n)}static D(){return ss.D()}bi(e){const n=sh(e);return n.get("owner").next(r=>this.vi(r)?(se("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):H.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;CN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return se("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sh(t){return wn(t,"owner")}function Gm(t){return wn(t,"clientMetadata")}function WI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return CN()?8:GO(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new vH;return this.Xi(e,n,o).next(u=>{if(s.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ml()<=He.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Ml()<=He.DEBUG&&se("QueryEngine","Query:",Vl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ml()<=He.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):H.resolve())}Yi(e,n){if(JP(n))return H.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ly(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ze(...s);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,ly(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return JP(n)||i.isEqual(Re.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(Ml()<=He.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vl(n)),this.rs(e,o,n,zO(i,-1)).next(u=>u))})}ts(e,n){let r=new Et(fD(e));return n.forEach((i,s)=>{Yf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ml()<=He.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Vl(n)),this.Ji.getDocumentsMatchingQuery(e,n,$r.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Rt(Ue),this._s=new wa(s=>xu(s),Hf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eL(t,e,n,r){return new wH(t,e,n,r)}async function tL(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=ze();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function EH(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,_=m.keys();let I=H.resolve();return _.forEach(T=>{I=I.next(()=>p.getEntry(c,T)).next(D=>{const O=h.docVersions.get(T);Ie(O!==null),D.version.compareTo(O)<0&&(m.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nL(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function TH(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const _=i.get(m);if(!_)return;u.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,m)));let I=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(Ht.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),i=i.insert(m,I),function(D,O,k){return D.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(_,I,p)&&u.push(n.Ur.updateTargetData(s,I))});let c=Ar(),h=ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(rL(s,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(Re.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return H.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.os=i,s))}function rL(t,e,n){let r=ze(),i=ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):se("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function IH(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dc(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Lc(t,e,n){const r=ge(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!va(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function fy(t,e,n){const r=ge(t);let i=Re.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=ge(c),_=m._s.get(p);return _!==void 0?H.resolve(m.os.get(_)):m.Ur.getTargetData(h,p)}(r,o,cr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Re.min(),n?s:ze())).next(u=>(oL(r,hD(e),u),{documents:u,Ts:s})))}function iL(t,e){const n=ge(t),r=ge(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function sL(t,e){const n=ge(t),r=n.us.get(e)||Re.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,zO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(oL(n,e,i),i))}function oL(t,e,n){let r=t.us.get(e)||Re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function SH(t,e,n,r){const i=ge(t);let s=ze(),o=Ar();for(const h of n){const p=e.Es(h.metadata.name);h.document&&(s=s.add(p));const m=e.ds(h);m.setReadTime(e.As(h.metadata.readTime)),o=o.insert(p,m)}const u=i.cs.newChangeBuffer({trackRemovals:!0}),c=await Dc(i,function(p){return cr(Jc(Xe.fromString(`__bundle__/docs/${p}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>rL(h,u,o).next(p=>(u.apply(h),p)).next(p=>i.Ur.removeMatchingKeysForTargetId(h,c.targetId).next(()=>i.Ur.addMatchingKeys(h,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,p.Ps,p.Is)).next(()=>p.Ps)))}async function RH(t,e,n=ze()){const r=await Dc(t,cr(UI(e.bundledQuery))),i=ge(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=nn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const u=r.withResumeToken(Ht.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(u.targetId,u),i.Ur.updateTargetData(s,u).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function AC(t,e){return`firestore_clients_${t}_${e}`}function PC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Mw(t,e){return`firestore_targets_${t}_${e}`}class py{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new re(i.error.code,i.error.message))),o?new py(e,n,i.state,s):(tn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new re(r.error.code,r.error.message))),s?new Mh(e,r.state,i):(tn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class my{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=kI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=KO(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new my(e,s):(tn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class GI{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new GI(n.clientId,n.onlineState):(tn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class TE{constructor(){this.activeTargetIds=kI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vw{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Rt(Ue),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=AC(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new TE),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(AC(this.persistenceKey,r));if(i){const s=my.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Mw(this.persistenceKey,e));if(i){const s=Mh.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return se("SharedClientState","READ",e,n),n}setItem(e,n){se("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){se("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(se("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=Sr.oe;if(s!=null)try{const u=JSON.parse(s);Ie(typeof u=="number"),o=u}catch(u){tn("SharedClientState","Failed to read sequence number from WebStorage",u)}return o}(n.newValue);r!==Sr.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new py(this.currentUser,e,n,r),s=PC(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=PC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Mw(this.persistenceKey,e),s=new Mh(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return my.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return py.Rs(new Pn(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Mh.Rs(i,n)}Ls(e){return GI.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);se("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],u=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||u.push(c)}),this.syncEngine.io(o,u).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=kI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class aL{constructor(){this.so=new TE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new TE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Km=null;function Fw(){return Km===null?Km=function(){return 268435456+Math.round(2147483648*Math.random())}():Km++,"0x"+Km.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="WebChannelConnection";class bH extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const u=Fw(),c=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(se("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw cs("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,u){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=PH[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Fw();return new Promise((o,u)=>{const c=new DO;c.setWithCredentials(!0),c.listenOnce(LO.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fg.NO_ERROR:const p=c.getResponseJson();se(Hn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case fg.TIMEOUT:se(Hn,`RPC '${e}' ${s} timed out`),u(new re(J.DEADLINE_EXCEEDED,"Request time out"));break;case fg.HTTP_ERROR:const m=c.getStatus();if(se(Hn,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const T=function(O){const k=O.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(k)>=0?k:J.UNKNOWN}(I.status);u(new re(T,I.message))}else u(new re(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new re(J.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{se(Hn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);se(Hn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Fw(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FO(),u=VO(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");se(Hn,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let _=!1,I=!1;const T=new CH({Io:O=>{I?se(Hn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(_||(se(Hn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),se(Hn,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),D=(O,k,P)=>{O.listen(k,S=>{try{P(S)}catch(U){setTimeout(()=>{throw U},0)}})};return D(m,mh.EventType.OPEN,()=>{I||(se(Hn,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),D(m,mh.EventType.CLOSE,()=>{I||(I=!0,se(Hn,`RPC '${e}' stream ${i} transport closed`),T.So())}),D(m,mh.EventType.ERROR,O=>{I||(I=!0,cs(Hn,`RPC '${e}' stream ${i} transport errored:`,O),T.So(new re(J.UNAVAILABLE,"The operation could not be completed")))}),D(m,mh.EventType.MESSAGE,O=>{var k;if(!I){const P=O.data[0];Ie(!!P);const S=P,U=S.error||((k=S[0])===null||k===void 0?void 0:k.error);if(U){se(Hn,`RPC '${e}' stream ${i} received error:`,U);const q=U.status;let $=function(L){const V=an[L];if(V!==void 0)return AD(V)}(q),C=U.message;$===void 0&&($=J.INTERNAL,C="Unknown error status: "+q+" with message "+U.message),I=!0,T.So(new re($,C)),m.close()}else se(Hn,`RPC '${e}' stream ${i} received:`,P),T.bo(P)}}),D(u,MO.STAT_EVENT,O=>{O.stat===oE.PROXY?se(Hn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===oE.NOPROXY&&se(Hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){return typeof window<"u"?window:null}function wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t){return new LK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i,s,o,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(tn(n.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xH extends lL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FK(this.serializer,e),r=function(s){if(!("targetChange"in s))return Re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?nn(o.readTime):Re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yE(this.serializer),n.addTarget=function(s,o){let u;const c=o.target;if(u=ay(c)?{documents:MD(s,c)}:{query:VD(s,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=xD(s,o.resumeToken);const h=mE(s,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(Re.min())>0){u.readTime=Oc(s,o.snapshotVersion.toTimestamp());const h=mE(s,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=jK(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yE(this.serializer),n.removeTarget=e,this.a_(n)}}class kH extends lL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UK(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yE(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wf(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,gE(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(J.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,gE(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tn(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ea(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=ge(c);h.L_.add(4),await ed(h),h.q_.set("Unknown"),h.L_.delete(4),await tp(h)}(this))})}),this.q_=new OH(r,i)}}async function tp(t){if(Ea(t))for(const e of t.B_)await e(!0)}async function ed(t){for(const e of t.B_)await e(!1)}function f_(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),YI(n)?QI(n):nd(n).r_()&&HI(n,e))}function Mc(t,e){const n=ge(t),r=nd(n);n.N_.delete(e),r.r_()&&cL(n,e),n.N_.size===0&&(r.r_()?r.o_():Ea(n)&&n.q_.set("Unknown"))}function HI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nd(t).A_(e)}function cL(t,e){t.Q_.xe(e),nd(t).R_(e)}function QI(t){t.Q_=new kK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nd(t).start(),t.q_.v_()}function YI(t){return Ea(t)&&!nd(t).n_()&&t.N_.size>0}function Ea(t){return ge(t).L_.size===0}function dL(t){t.Q_=void 0}async function LH(t){t.q_.set("Online")}async function MH(t){t.N_.forEach((e,n)=>{HI(t,e)})}async function VH(t,e){dL(t),YI(t)?(t.q_.M_(e),QI(t)):t.q_.set("Unknown")}async function FH(t,e,n){if(t.q_.set("Online"),e instanceof bD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gy(t,r)}else if(e instanceof vg?t.Q_.Ke(e):e instanceof CD?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Re.min()))try{const r=await nL(t.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=s.N_.get(c);if(!p)return;s.N_.set(c,p.withResumeToken(Ht.EMPTY_BYTE_STRING,p.snapshotVersion)),cL(s,c);const m=new Vs(p.target,c,h,p.sequenceNumber);HI(s,m)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await gy(t,r)}}async function gy(t,e,n){if(!va(e))throw e;t.L_.add(1),await ed(t),t.q_.set("Offline"),n||(n=()=>nL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await tp(t)})}function hL(t,e){return e().catch(n=>gy(t,n,e))}async function td(t){const e=ge(t),n=ua(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UH(e);)try{const i=await IH(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,jH(e,i)}catch(i){await gy(e,i)}fL(e)&&pL(e)}function UH(t){return Ea(t)&&t.O_.length<10}function jH(t,e){t.O_.push(e);const n=ua(t);n.r_()&&n.V_&&n.m_(e.mutations)}function fL(t){return Ea(t)&&!ua(t).n_()&&t.O_.length>0}function pL(t){ua(t).start()}async function BH(t){ua(t).p_()}async function zH(t){const e=ua(t);for(const n of t.O_)e.m_(n.mutations)}async function $H(t,e,n){const r=t.O_.shift(),i=LI.from(r,e,n);await hL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await td(t)}async function WH(t,e){e&&ua(t).V_&&await async function(r,i){if(function(o){return RD(o)&&o!==J.ABORTED}(i.code)){const s=r.O_.shift();ua(r).s_(),await hL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await td(r)}}(t,e),fL(t)&&pL(t)}async function bC(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Ea(n);n.L_.add(3),await ed(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await tp(n)}async function IE(t,e){const n=ge(t);e?(n.L_.delete(2),await tp(n)):e||(n.L_.add(2),await ed(n),n.q_.set("Unknown"))}function nd(t){return t.K_||(t.K_=function(n,r,i){const s=ge(n);return s.w_(),new xH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:LH.bind(null,t),Ro:MH.bind(null,t),mo:VH.bind(null,t),d_:FH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),YI(t)?QI(t):t.q_.set("Unknown")):(await t.K_.stop(),dL(t))})),t.K_}function ua(t){return t.U_||(t.U_=function(n,r,i){const s=ge(n);return s.w_(),new kH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:BH.bind(null,t),mo:WH.bind(null,t),f_:zH.bind(null,t),g_:$H.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await td(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new JI(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(t,e){if(tn("AsyncQueue",`${e}: ${t}`),va(t))return new re(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=gh(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new fc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.W_=new Rt(pe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Vc{constructor(e,n,r,i,s,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Vc(e,n,fc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class GH{constructor(){this.queries=kC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=kC(),s.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new re(J.ABORTED,"Firestore shutting down"))}}function kC(){return new wa(t=>dD(t),Qf)}async function XI(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new qH,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=rd(o,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&eS(n)}async function ZI(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KH(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.j_)u.X_(i)&&(r=!0);o.z_=i}}r&&eS(n)}function HH(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function eS(t){t.Y_.forEach(e=>{e.next()})}var SE,NC;(NC=SE||(SE={})).ea="default",NC.Cache="cache";class tS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Vc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==SE.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.serializer=e}Es(e){return os(this.serializer,e)}ds(e){return e.metadata.exists?LD(this.serializer,e.document,!1):bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return nn(e)}}class YH{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mL(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Xe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new OC(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const u=(n.get(o)||ze()).add(s);n.set(o,u)}}return n}async complete(){const e=await SH(this.localStore,new OC(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await RH(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function mL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.key=e}}class yL{constructor(e){this.key=e}}class _L{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ze(),this.mutatedKeys=ze(),this.Aa=fD(e),this.Ra=new fc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new xC,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const _=i.get(p),I=Yf(this.query,m)?m:null,T=!!_&&this.mutatedKeys.has(_.key),D=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;_&&I?_.data.isEqual(I.data)?T!==D&&(r.track({type:3,doc:I}),O=!0):this.ga(_,I)||(r.track({type:2,doc:I}),O=!0,(c&&this.Aa(I,c)>0||h&&this.Aa(I,h)<0)&&(u=!0)):!_&&I?(r.track({type:0,doc:I}),O=!0):_&&!I&&(r.track({type:1,doc:_}),O=!0,(c||h)&&(u=!0)),O&&(I?(o=o.add(I),s=D?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,T){const D=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return D(I)-D(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new Vc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ze(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new yL(r))}),this.da.forEach(r=>{e.has(r)||n.push(new gL(r))}),n}ba(e){this.Ta=e.Ts,this.da=ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Vc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XH{constructor(e){this.key=e,this.va=!1}}class ZH{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wa(u=>dD(u),Qf),this.Ma=new Map,this.xa=new Set,this.Oa=new Rt(pe.comparator),this.Na=new Map,this.La=new zI,this.Ba={},this.ka=new Map,this.qa=Lu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function e8(t,e,n=!0){const r=p_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await vL(r,e,n,!0),i}async function t8(t,e){const n=p_(t);await vL(n,e,!0,!1)}async function vL(t,e,n,r){const i=await Dc(t.localStore,cr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await nS(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&f_(t.remoteStore,i),u}async function nS(t,e,n,r,i){t.Ka=(m,_,I)=>async function(D,O,k,P){let S=O.view.ma(k);S.ns&&(S=await fy(D.localStore,O.query,!1).then(({documents:C})=>O.view.ma(C,S)));const U=P&&P.targetChanges.get(O.targetId),q=P&&P.targetMismatches.get(O.targetId)!=null,$=O.view.applyChanges(S,D.isPrimaryClient,U,q);return RE(D,O.targetId,$.wa),$.snapshot}(t,m,_,I);const s=await fy(t.localStore,e,!0),o=new _L(e,s.Ts),u=o.ma(s.documents),c=Zf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(u,t.isPrimaryClient,c);RE(t,n,h.wa);const p=new JH(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function n8(t,e,n){const r=ge(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Qf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mc(r.remoteStore,i.targetId),Fc(r,i.targetId)}).catch(_a)):(Fc(r,i.targetId),await Lc(r.localStore,i.targetId,!0))}async function r8(t,e){const n=ge(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mc(n.remoteStore,r.targetId))}async function i8(t,e,n){const r=oS(t);try{const i=await function(o,u){const c=ge(o),h=Mt.now(),p=u.reduce((I,T)=>I.add(T.key),ze());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let T=Ar(),D=ze();return c.cs.getEntries(I,p).next(O=>{T=O,T.forEach((k,P)=>{P.isValidDocument()||(D=D.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,T)).next(O=>{m=O;const k=[];for(const P of u){const S=CK(P,m.get(P.key).overlayedDocument);S!=null&&k.push(new no(P.key,S,nD(S.value.mapValue),Lt.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,k,u)}).next(O=>{_=O;const k=O.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(I,O.batchId,k)})}).then(()=>({batchId:_.batchId,changes:mD(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Rt(Ue)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await ro(r,i.changes),await td(r.remoteStore)}catch(i){const s=rd(i,"Failed to persist write");n.reject(s)}}async function wL(t,e){const n=ge(t);try{const r=await TH(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await ro(n,r,e)}catch(r){await _a(r)}}function DC(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const u=o.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=ge(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const _ of m.j_)_.Z_(u)&&(h=!0)}),h&&eS(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function s8(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Rt(pe.comparator);o=o.insert(s,bt.newNoDocument(s,Re.min()));const u=ze().add(s),c=new Xf(Re.min(),new Map,new Rt(Ue),o,u);await wL(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),sS(r)}else await Lc(r.localStore,e,!1).then(()=>Fc(r,e,n)).catch(_a)}async function o8(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await EH(n.localStore,e);iS(n,r,null),rS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ro(n,i)}catch(i){await _a(i)}}async function a8(t,e,n){const r=ge(t);try{const i=await function(o,u){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(Ie(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);iS(r,e,n),rS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ro(r,i)}catch(i){await _a(i)}}async function u8(t,e){const n=ge(t);Ea(n.remoteStore)||se("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const u=ge(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=rd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function rS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function iS(t,e,n){const r=ge(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Fc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EL(t,r)})}function EL(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Mc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sS(t))}function RE(t,e,n){for(const r of n)r instanceof gL?(t.La.addReference(r.key,e),l8(t,r)):r instanceof yL?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EL(t,r.key)):we()}function l8(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),sS(t))}function sS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new pe(Xe.fromString(e)),r=t.qa.next();t.Na.set(r,new XH(n)),t.Oa=t.Oa.insert(n,r),f_(t.remoteStore,new Vs(cr(Jc(n.path)),r,"TargetPurposeLimboResolution",Sr.oe))}}async function ro(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=qI.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=ge(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(h,_=>H.forEach(_.$i,I=>p.persistence.referenceDelegate.addReference(m,_.targetId,I)).next(()=>H.forEach(_.Ui,I=>p.persistence.referenceDelegate.removeReference(m,_.targetId,I)))))}catch(m){if(!va(m))throw m;se("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const I=p.os.get(_),T=I.snapshotVersion,D=I.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(_,D)}}}(r.localStore,s))}async function c8(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await tL(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(u=>{u.forEach(c=>{c.reject(new re(J.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ro(n,r.hs)}}function d8(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return ze().add(r.key);{let i=ze();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const u=n.Fa.get(o);i=i.unionWith(u.view.Va)}return i}}async function h8(t,e){const n=ge(t),r=await fy(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&RE(n,e.targetId,i.wa),i}async function f8(t,e){const n=ge(t);return sL(n.localStore,e).then(r=>ro(n,r))}async function p8(t,e,n,r){const i=ge(t),s=await function(u,c){const h=ge(u),p=ge(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",m=>p.Mn(m,c).next(_=>_?h.localDocuments.getDocuments(m,_):H.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await td(i.remoteStore):n==="acknowledged"||n==="rejected"?(iS(i,e,r||null),rS(i,e),function(u,c){ge(ge(u).mutationQueue).On(c)}(i.localStore,e)):we(),await ro(i,s)):se("SyncEngine","Cannot apply mutation batch with id: "+e)}async function m8(t,e){const n=ge(t);if(p_(n),oS(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await LC(n,r.toArray());n.Qa=!0,await IE(n.remoteStore,!0);for(const s of i)f_(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Fc(n,o),Lc(n.localStore,o,!0))),Mc(n.remoteStore,o)}),await i,await LC(n,r),function(o){const u=ge(o);u.Na.forEach((c,h)=>{Mc(u.remoteStore,h)}),u.La.pr(),u.Na=new Map,u.Oa=new Rt(pe.comparator)}(n),n.Qa=!1,await IE(n.remoteStore,!1)}}async function LC(t,e,n){const r=ge(t),i=[],s=[];for(const o of e){let u;const c=r.Ma.get(o);if(c&&c.length!==0){u=await Dc(r.localStore,cr(c[0]));for(const h of c){const p=r.Fa.get(h),m=await h8(r,p);m.snapshot&&s.push(m.snapshot)}}else{const h=await iL(r.localStore,o);u=await Dc(r.localStore,h),await nS(r,TL(h),o,!1,u.resumeToken)}i.push(u)}return r.Ca.d_(s),i}function TL(t){return cD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function g8(t){return function(n){return ge(ge(n).persistence).Qi()}(ge(t).localStore)}async function y8(t,e,n,r){const i=ge(t);if(i.Qa)return void se("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await sL(i.localStore,hD(s[0])),u=Xf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ht.EMPTY_BYTE_STRING);await ro(i,o,u);break}case"rejected":await Lc(i.localStore,e,!0),Fc(i,e,r);break;default:we()}}async function _8(t,e,n){const r=p_(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){se("SyncEngine","Adding an already active target "+i);continue}const s=await iL(r.localStore,i),o=await Dc(r.localStore,s);await nS(r,TL(s),o.targetId,!1,o.resumeToken),f_(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Lc(r.localStore,i,!1).then(()=>{Mc(r.remoteStore,i),Fc(r,i)}).catch(_a)}}function p_(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s8.bind(null,e),e.Ca.d_=KH.bind(null,e.eventManager),e.Ca.$a=HH.bind(null,e.eventManager),e}function oS(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a8.bind(null,e),e}function v8(t,e,n){const r=ge(t);(async function(s,o,u){try{const c=await o.getMetadata();if(await function(I,T){const D=ge(I),O=nn(T.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",k=>D.Gr.getBundleMetadata(k,T.id)).then(k=>!!k&&k.createTime.compareTo(O)>=0)}(s.localStore,c))return await o.close(),u._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(mL(c));const h=new YH(c,s.localStore,o.serializer);let p=await o.Ua();for(;p;){const _=await h.la(p);_&&u._updateProgress(_),p=await o.Ua()}const m=await h.complete();return await ro(s,m.Ia,void 0),await function(I,T){const D=ge(I);return D.persistence.runTransaction("Save bundle","readwrite",O=>D.Gr.saveBundleMetadata(O,T))}(s.localStore,c),u._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return cs("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ep(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eL(this.persistence,new ZD,e.initialUser,this.serializer)}Ga(e){return new XD(h_.Zr,this.serializer)}Wa(e){return new aL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class IL extends Ef{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await oS(this.Ja.syncEngine),await td(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return eL(this.persistence,new ZD,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new rH(r,e.asyncQueue,n)}Ha(e,n){const r=new FG(n,this.persistence);return new VG(e.asyncQueue,r)}Ga(e){const n=WI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new $I(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uL(),wg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new aL}}class w8 extends IL{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Vw&&(this.sharedClientState.syncEngine={no:p8.bind(null,n),ro:y8.bind(null,n),io:_8.bind(null,n),Qi:g8.bind(null,n),eo:f8.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await m8(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=uL();if(!Vw.D(n))throw new re(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=WI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Tf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=c8.bind(null,this.syncEngine),await IE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GH}()}createDatastore(e){const n=ep(e.databaseInfo.databaseId),r=function(s){return new bH(s)}(e.databaseInfo);return function(s,o,u,c){return new NH(s,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,u){return new DH(r,i,s,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>DC(this.syncEngine,n,0),function(){return CC.D()?new CC:new AH}())}createSyncEngine(e,n){return function(i,s,o,u,c,h,p){const m=new ZH(i,s,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ed(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tf.provider={build:()=>new Tf};function MC(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new Un,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new QH(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=ge(i),u={documents:s.map(m=>vf(o.serializer,m))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Xe.emptyPath(),u,s.length),h=new Map;c.forEach(m=>{const _=VK(o.serializer,m);h.set(_.key.toString(),_)});const p=[];return s.forEach(m=>{const _=h.get(m.toString());Ie(!!_),p.push(_)}),p}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=pe.fromPath(r);this.mutations.push(new OI(i,this.precondition(i)))}),await async function(r,i){const s=ge(r),o={writes:i.map(u=>wf(s.serializer,u))};await s.Mo("Commit",s.serializer.databaseId,Xe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw we();n=Re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new re(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Re.min())?Lt.exists(!1):Lt.updateTime(n):Lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Re.min()))throw new re(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(n)}return Lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new KI(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new T8(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Kf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!RD(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pn.UNAUTHENTICATED,this.clientId=jO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uw(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function VC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aS(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bC(e.remoteStore,i)),t._onlineComponents=e}async function aS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Uw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;cs("Error using user provided cache. Falling back to memory cache: "+n),await Uw(t,new Ef)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Uw(t,new Ef);return t._offlineComponents}async function g_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await VC(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await VC(t,new Tf))),t._onlineComponents}function SL(t){return aS(t).then(e=>e.persistence)}function uS(t){return aS(t).then(e=>e.localStore)}function RL(t){return g_(t).then(e=>e.remoteStore)}function lS(t){return g_(t).then(e=>e.syncEngine)}function R8(t){return g_(t).then(e=>e.datastore)}async function Uc(t){const e=await g_(t),n=e.eventManager;return n.onListen=e8.bind(null,e.syncEngine),n.onUnlisten=n8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=r8.bind(null,e.syncEngine),n}function A8(t){return t.asyncQueue.enqueue(async()=>{const e=await SL(t),n=await RL(t);return e.setNetworkEnabled(!0),function(i){const s=ge(i);return s.L_.delete(0),tp(s)}(n)})}function P8(t){return t.asyncQueue.enqueue(async()=>{const e=await SL(t),n=await RL(t);return e.setNetworkEnabled(!1),async function(i){const s=ge(i);s.L_.add(0),await ed(s),s.q_.set("Offline")}(n)})}function C8(t,e){const n=new Un;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const u=await function(h,p){const m=ge(h);return m.persistence.runTransaction("read document","readonly",_=>m.localDocuments.getDocument(_,p))}(i,s);u.isFoundDocument()?o.resolve(u):u.isNoDocument()?o.resolve(null):o.reject(new re(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=rd(u,`Failed to get document '${s} from cache`);o.reject(c)}}(await uS(t),e,n)),n.promise}function AL(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const p=new m_({next:_=>{p.Za(),o.enqueueAndForget(()=>ZI(s,m));const I=_.docs.has(u);!I&&_.fromCache?h.reject(new re(J.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&c&&c.source==="server"?h.reject(new re(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new tS(Jc(u.path),p,{includeMetadataChanges:!0,_a:!0});return XI(s,m)}(await Uc(t),t.asyncQueue,e,n,r)),r.promise}function b8(t,e){const n=new Un;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const u=await fy(i,s,!0),c=new _L(s,u.Ts),h=c.ma(u.documents),p=c.applyChanges(h,!1);o.resolve(p.snapshot)}catch(u){const c=rd(u,`Failed to execute query '${s} against cache`);o.reject(c)}}(await uS(t),e,n)),n.promise}function PL(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const p=new m_({next:_=>{p.Za(),o.enqueueAndForget(()=>ZI(s,m)),_.fromCache&&c.source==="server"?h.reject(new re(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new tS(u,p,{includeMetadataChanges:!0,_a:!0});return XI(s,m)}(await Uc(t),t.asyncQueue,e,n,r)),r.promise}function x8(t,e){const n=new m_(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){ge(i).Y_.add(s),s.next()}(await Uc(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){ge(i).Y_.delete(s)}(await Uc(t),n))}}function k8(t,e,n,r){const i=function(o,u){let c;return c=typeof o=="string"?PD().encode(o):o,function(p,m){return new E8(p,m)}(function(p,m){if(p instanceof Uint8Array)return MC(p,m);if(p instanceof ArrayBuffer)return MC(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,ep(e));t.asyncQueue.enqueueAndForget(async()=>{v8(await lS(t),i,r)})}function N8(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=ge(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await uS(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(t,e,n){if(!n)throw new re(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bL(t,e,n,r){if(e===!0&&r===!0)throw new re(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UC(t){if(!pe.isDocumentKey(t))throw new re(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jC(t){if(pe.isDocumentKey(t))throw new re(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function y_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y_(t);throw new re(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xL(t,e){if(e<=0)throw new re(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AG;switch(r.type){case"firstParty":return new xG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=FC.get(n);r&&(se("ComponentProvider","Removing Datastore"),FC.delete(n),r.terminate())}(this),Promise.resolve()}}function kL(t,e,n,r={}){var i;const s=(t=ut(t,np))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=Pn.MOCK_USER;else{u=L9(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new re(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Pn(h)}t._authCredentials=new PG(new UO(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr=class NL{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new NL(this.firestore,e,this._query)}},jt=class OL{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new OL(this.firestore,e,this._key)}},Yo=class DL extends dr{constructor(e,n,r){super(e,n,Jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new pe(e))}withConverter(e){return new DL(this.firestore,e,this._path)}};function _u(t,e,...n){if(t=Pe(t),cS("collection","path",e),t instanceof np){const r=Xe.fromString(e,...n);return jC(r),new Yo(t,null,r)}{if(!(t instanceof jt||t instanceof Yo))throw new re(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return jC(r),new Yo(t.firestore,null,r)}}function O8(t,e){if(t=ut(t,np),cS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dr(t,null,function(r){return new to(Xe.emptyPath(),r)}(e))}function la(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=jO.newId()),cS("doc","path",e),t instanceof np){const r=Xe.fromString(e,...n);return UC(r),new jt(t,null,new pe(r))}{if(!(t instanceof jt||t instanceof Yo))throw new re(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return UC(r),new jt(t.firestore,t instanceof Yo?t.converter:null,new pe(r))}}function LL(t,e){return t=Pe(t),e=Pe(e),(t instanceof jt||t instanceof Yo)&&(e instanceof jt||e instanceof Yo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ML(t,e){return t=Pe(t),e=Pe(e),t instanceof dr&&e instanceof dr&&t.firestore===e.firestore&&Qf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KI(this,"async_queue_retry"),this.Vu=()=>{const r=wg();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=wg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=wg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Un;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!va(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw tn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=JI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&we()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function AE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class D8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Un,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=-1;let rn=class extends np{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new zC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zC(e),this._firestoreClient=void 0,await e}}};function M8(t,e){const n=typeof t=="object"?t:rI(),r=typeof t=="string"?t:"(default)",i=Uf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=O9("firestore");s&&kL(i,...s)}return i}function Xn(t){if(t._terminated)throw new re(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||VL(t),t._firestoreClient}function VL(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,h,p){return new oK(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,CL(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new S8(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}function V8(t,e){cs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return FL(t,Tf.provider,{build:r=>new IL(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function F8(t){cs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();FL(t,Tf.provider,{build:n=>new w8(n,e.cacheSizeBytes)})}function FL(t,e,n){if((t=ut(t,rn))._firestoreClient||t._terminated)throw new re(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new re(J.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},VL(t)}function U8(t){if(t._initialized&&!t._terminated)throw new re(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Un;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ss.D())return Promise.resolve();const i=r+"main";await ss.delete(i)}(WI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function j8(t){return function(n){const r=new Un;return n.asyncQueue.enqueueAndForget(async()=>u8(await lS(n),r)),r.promise}(Xn(t=ut(t,rn)))}function B8(t){return A8(Xn(t=ut(t,rn)))}function z8(t){return P8(Xn(t=ut(t,rn)))}function $8(t,e){const n=Xn(t=ut(t,rn)),r=new D8;return k8(n,t._databaseId,e,r),r}function W8(t,e){return N8(Xn(t=ut(t,rn)),e).then(n=>n?new dr(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hs(Ht.fromBase64String(e))}catch(n){throw new re(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hs(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=/^__.*__$/;class G8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class UL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new no(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class v_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new v_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yy(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jL(this.Cu)&&q8.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class K8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ep(e)}Qu(e,n,r,i=!1){return new v_({Cu:e,methodName:n,qu:r,path:Dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(t){const e=t._freezeSettings(),n=ep(t._databaseId);return new K8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w_(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);_S("Data must be an object, but it was:",o,r);const u=$L(r,o);let c,h;if(s.merge)c=new Rr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const _=PE(e,m,n);if(!o.contains(_))throw new re(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);qL(p,_)||p.push(_)}c=new Rr(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new G8(new Vn(u),c,h)}class rp extends Ku{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rp}}function BL(t,e,n){return new v_({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hS extends Ku{_toFieldTransform(e){return new Jf(e.path,new kc)}isEqual(e){return e instanceof hS}}class fS extends Ku{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=BL(this,e,!0),r=this.Ku.map(s=>Qu(s,n)),i=new ku(r);return new Jf(e.path,i)}isEqual(e){return e instanceof fS&&Tc(this.Ku,e.Ku)}}class pS extends Ku{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=BL(this,e,!0),r=this.Ku.map(s=>Qu(s,n)),i=new Nu(r);return new Jf(e.path,i)}isEqual(e){return e instanceof pS&&Tc(this.Ku,e.Ku)}}class mS extends Ku{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Nc(e.serializer,_D(e.serializer,this.$u));return new Jf(e.path,n)}isEqual(e){return e instanceof mS&&this.$u===e.$u}}function gS(t,e,n,r){const i=t.Qu(1,e,n);_S("Data must be an object, but it was:",i,r);const s=[],o=Vn.empty();Gu(r,(c,h)=>{const p=vS(e,c,n);h=Pe(h);const m=i.Nu(p);if(h instanceof rp)s.push(p);else{const _=Qu(h,m);_!=null&&(s.push(p),o.set(p,_))}});const u=new Rr(s);return new UL(o,u,i.fieldTransforms)}function yS(t,e,n,r,i,s){const o=t.Qu(1,e,n),u=[PE(e,r,n)],c=[i];if(s.length%2!=0)throw new re(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(PE(e,s[_])),c.push(s[_+1]);const h=[],p=Vn.empty();for(let _=u.length-1;_>=0;--_)if(!qL(h,u[_])){const I=u[_];let T=c[_];T=Pe(T);const D=o.Nu(I);if(T instanceof rp)h.push(I);else{const O=Qu(T,D);O!=null&&(h.push(I),p.set(I,O))}}const m=new Rr(h);return new UL(p,m,o.fieldTransforms)}function zL(t,e,n,r=!1){return Qu(n,t.Qu(r?4:3,e))}function Qu(t,e){if(WL(t=Pe(t)))return _S("Unsupported field value:",e,t),$L(t,e);if(t instanceof Ku)return function(r,i){if(!jL(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let c=Qu(u,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _D(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mt.fromDate(r);return{timestampValue:Oc(i.serializer,s)}}if(r instanceof Mt){const s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oc(i.serializer,s)}}if(r instanceof __)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hs)return{bytesValue:xD(i.serializer,r._byteString)};if(r instanceof jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:FI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof dS)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return NI(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${y_(r)}`)}(t,e)}function $L(t,e){const n={};return XO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gu(t,(r,i)=>{const s=Qu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof __||t instanceof hs||t instanceof jt||t instanceof Ku||t instanceof dS)}function _S(t,e,n){if(!WL(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=y_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function PE(t,e,n){if((e=Pe(e))instanceof ca)return e._internalPath;if(typeof e=="string")return vS(t,e);throw yy("Field path arguments must be of type string or ",t,!1,void 0,n)}const H8=new RegExp("[~\\*/\\[\\]]");function vS(t,e,n){if(e.search(H8)>=0)throw yy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ca(...e.split("."))._internalPath}catch{throw yy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yy(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new re(J.INVALID_ARGUMENT,u+t+c)}function qL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(E_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q8 extends If{data(){return super.data()}}function E_(t,e){return typeof e=="string"?vS(t,e):e instanceof ca?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wS{}class ip extends wS{}function xs(t,e,...n){let r=[];e instanceof wS&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof ES).length,u=s.filter(c=>c instanceof T_).length;if(o>1||o>0&&u>0)throw new re(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class T_ extends ip{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new T_(e,n,r)}_apply(e){const n=this._parse(e);return QL(e._query,n),new dr(e.firestore,e.converter,pE(e._query,n))}_parse(e){const n=Hu(e.firestore);return function(s,o,u,c,h,p,m){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new re(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){WC(m,p);const I=[];for(const T of m)I.push($C(c,s,T));_={arrayValue:{values:I}}}else _=$C(c,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||WC(m,p),_=zL(u,o,m,p==="in"||p==="not-in");return Ze.create(h,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function KL(t,e,n){const r=e,i=E_("where",t);return T_._create(i,r,n)}class ES extends wS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ES(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const u=s.getFlattenedFilters();for(const c of u)QL(o,c),o=pE(o,c)}(e._query,n),new dr(e.firestore,e.converter,pE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TS extends ip{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new TS(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new re(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _f(s,o)}(e._query,this._field,this._direction);return new dr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new to(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Y8(t,e="asc"){const n=e,r=E_("orderBy",t);return TS._create(r,n)}class I_ extends ip{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new I_(e,n,r)}_apply(e){return new dr(e.firestore,e.converter,ly(e._query,this._limit,this._limitType))}}function J8(t){return xL("limit",t),I_._create("limit",t,"F")}function X8(t){return xL("limitToLast",t),I_._create("limitToLast",t,"L")}class S_ extends ip{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new S_(e,n,r)}_apply(e){const n=HL(e,this.type,this._docOrFields,this._inclusive);return new dr(e.firestore,e.converter,function(i,s){return new to(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Z8(...t){return S_._create("startAt",t,!0)}function e7(...t){return S_._create("startAfter",t,!1)}class R_ extends ip{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new R_(e,n,r)}_apply(e){const n=HL(e,this.type,this._docOrFields,this._inclusive);return new dr(e.firestore,e.converter,function(i,s){return new to(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function t7(...t){return R_._create("endBefore",t,!1)}function n7(...t){return R_._create("endAt",t,!0)}function HL(t,e,n,r){if(n[0]=Pe(n[0]),n[0]instanceof If)return function(s,o,u,c,h){if(!c)throw new re(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const p=[];for(const m of hc(s))if(m.field.isKeyField())p.push(bu(o,c.key));else{const _=c.data.field(m.field);if(o_(_))throw new re(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const I=m.field.canonicalString();throw new re(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}p.push(_)}return new aa(p,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Hu(t.firestore);return function(o,u,c,h,p,m){const _=o.explicitOrderBy;if(p.length>_.length)throw new re(J.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let T=0;T<p.length;T++){const D=p[T];if(_[T].field.isKeyField()){if(typeof D!="string")throw new re(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof D}`);if(!xI(o)&&D.indexOf("/")!==-1)throw new re(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${D}' contains a slash.`);const O=o.path.child(Xe.fromString(D));if(!pe.isDocumentKey(O))throw new re(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const k=new pe(O);I.push(bu(u,k))}else{const O=zL(c,h,D);I.push(O)}}return new aa(I,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function $C(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new re(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xI(e)&&n.indexOf("/")!==-1)throw new re(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xe.fromString(n));if(!pe.isDocumentKey(r))throw new re(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bu(t,new pe(r))}if(n instanceof jt)return bu(t,n._key);throw new re(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y_(n)}.`)}function WC(t,e){if(!Array.isArray(t)||t.length===0)throw new re(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QL(t,e){const n=function(i,s){for(const o of i)for(const u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IS{convertValue(e,n="none"){switch(Cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Nt(o.doubleValue));return new dS(s)}convertGeoPoint(e){return new __(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=CI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){const n=Hs(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);Ie(BD(r));const i=new sa(r.get(1),r.get(3)),s=new pe(r.popFirst(5));return i.isEqual(n)||tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class r7 extends IS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Qs=class extends If{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(E_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Vh=class extends Qs{data(e={}){return super.data(e)}},da=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new lu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vh(this._firestore,this._userDataWriter,r.key,r,new lu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const c=new Vh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new lu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Vh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new lu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:i7(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function i7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}function YL(t,e){return t instanceof Qs&&e instanceof Qs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof da&&e instanceof da&&t._firestore===e._firestore&&ML(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){t=ut(t,jt);const e=ut(t.firestore,rn);return AL(Xn(e),t._key).then(n=>RS(e,t,n))}class Yu extends IS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function o7(t){t=ut(t,jt);const e=ut(t.firestore,rn),n=Xn(e),r=new Yu(e);return C8(n,t._key).then(i=>new Qs(e,r,t._key,i,new lu(i!==null&&i.hasLocalMutations,!0),t.converter))}function a7(t){t=ut(t,jt);const e=ut(t.firestore,rn);return AL(Xn(e),t._key,{source:"server"}).then(n=>RS(e,t,n))}function JL(t){t=ut(t,dr);const e=ut(t.firestore,rn),n=Xn(e),r=new Yu(e);return GL(t._query),PL(n,t._query).then(i=>new da(e,r,t,i))}function u7(t){t=ut(t,dr);const e=ut(t.firestore,rn),n=Xn(e),r=new Yu(e);return b8(n,t._query).then(i=>new da(e,r,t,i))}function l7(t){t=ut(t,dr);const e=ut(t.firestore,rn),n=Xn(e),r=new Yu(e);return PL(n,t._query,{source:"server"}).then(i=>new da(e,r,t,i))}function qC(t,e,n){t=ut(t,jt);const r=ut(t.firestore,rn),i=A_(t.converter,e,n);return op(r,[w_(Hu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function CE(t,e,n,...r){t=ut(t,jt);const i=ut(t.firestore,rn),s=Hu(i);let o;return o=typeof(e=Pe(e))=="string"||e instanceof ca?yS(s,"updateDoc",t._key,e,n,r):gS(s,"updateDoc",t._key,e),op(i,[o.toMutation(t._key,Lt.exists(!0))])}function Eg(t){return op(ut(t.firestore,rn),[new Zc(t._key,Lt.none())])}function SS(t,e){const n=ut(t.firestore,rn),r=la(t),i=A_(t.converter,e);return op(n,[w_(Hu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function sp(t,...e){var n,r,i;t=Pe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||AE(e[o])||(s=e[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(AE(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,h,p;if(t instanceof jt)h=ut(t.firestore,rn),p=Jc(t._key.path),c={next:m=>{e[o]&&e[o](RS(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ut(t,dr);h=ut(m.firestore,rn),p=m._query;const _=new Yu(h);c={next:I=>{e[o]&&e[o](new da(h,_,m,I))},error:e[o+1],complete:e[o+2]},GL(t._query)}return function(_,I,T,D){const O=new m_(D),k=new tS(I,O,T);return _.asyncQueue.enqueueAndForget(async()=>XI(await Uc(_),k)),()=>{O.Za(),_.asyncQueue.enqueueAndForget(async()=>ZI(await Uc(_),k))}}(Xn(h),p,u,c)}function c7(t,e){return x8(Xn(t=ut(t,rn)),AE(e)?e:{next:e})}function op(t,e){return function(r,i){const s=new Un;return r.asyncQueue.enqueueAndForget(async()=>i8(await lS(r),i,s)),s.promise}(Xn(t),e)}function RS(t,e,n){const r=n.docs.get(e._key),i=new Yu(t);return new Qs(t,i,e._key,r,new lu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h7=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,n,r){this._verifyNotCommitted();const i=Oo(e,this._firestore),s=A_(i.converter,n,r),o=w_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Oo(e,this._firestore);let o;return o=typeof(n=Pe(n))=="string"||n instanceof ca?yS(this._dataReader,"WriteBatch.update",s._key,n,r,i):gS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oo(e,this._firestore);return this._mutations=this._mutations.concat(new Zc(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Oo(t,e){if((t=Pe(t)).firestore!==e)throw new re(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f7=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Hu(n)}get(n){const r=Oo(n,this._firestore),i=new r7(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return we();const o=s[0];if(o.isFoundDocument())return new If(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new If(this._firestore,i,r._key,null,r.converter);throw we()})}set(n,r,i){const s=Oo(n,this._firestore),o=A_(s.converter,r,i),u=w_(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,u),this}update(n,r,i,...s){const o=Oo(n,this._firestore);let u;return u=typeof(r=Pe(r))=="string"||r instanceof ca?yS(this._dataReader,"Transaction.update",o._key,r,i,s):gS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,u),this}delete(n){const r=Oo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Oo(e,this._firestore),r=new Yu(this._firestore);return super.get(e).then(i=>new Qs(this._firestore,r,n._key,i._document,new lu(!1,!1),n.converter))}};function p7(t,e,n){t=ut(t,rn);const r=Object.assign(Object.assign({},d7),n);return function(s){if(s.maxAttempts<1)throw new re(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,u){const c=new Un;return s.asyncQueue.enqueueAndForget(async()=>{const h=await R8(s);new I8(s.asyncQueue,h,u,o,c).au()}),c.promise}(Xn(t),i=>e(new f7(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(){return new rp("deleteField")}function g7(){return new hS("serverTimestamp")}function y7(...t){return new fS("arrayUnion",t)}function _7(...t){return new pS("arrayRemove",t)}function v7(t){return new mS("increment",t)}(function(e,n=!0){(function(i){Yc=i})(ga),ta(new us("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new rn(new CG(r.getProvider("auth-internal")),new NG(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new re(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),pi(LP,"4.7.3",e),pi(LP,"4.7.3","esm2017")})();const w7={apiKey:"AIzaSyCLA_RFXrPvBdN_vrApCUlj28a82ownuzg",authDomain:"fire-set.firebaseapp.com",databaseURL:"https://fire-set.firebaseio.com",projectId:"fire-set",storageBucket:"fire-set.appspot.com",messagingSenderId:"958559518798",appId:"1:958559518798:web:ec451bbfb4ac03f30ec31f",measurementId:"G-FCHHM3FEZE"},XL=Ky(w7),cu=M8(XL),vu=wG(XL);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e,n){this._delegate=e,this.firebase=n,of(e,new us("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),iI(this._delegate)))}_getService(e,n=Zo){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Zo){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){of(this._delegate,e)}_addOrOverwriteComponent(e){DN(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},GC=new Wu("app-compat","Firebase",T7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:pi,setLogLevel:FN,onLog:VN,apps:null,SDK_VERSION:ga,INTERNAL:{registerComponent:u,removeApp:r,useAsService:c,modularAPIs:nW}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(h){delete e[h]}function i(h){if(h=h||Zo,!uP(e,h))throw GC.create("no-app",{appName:h});return e[h]}i.App=t;function s(h,p={}){const m=Ky(h,p);if(uP(e,m.name))return e[m.name];const _=new t(m,n);return e[m.name]=_,_}function o(){return Object.keys(e).map(h=>e[h])}function u(h){const p=h.name,m=p.replace("-compat","");if(ta(h)&&h.type==="PUBLIC"){const _=(I=i())=>{if(typeof I[m]!="function")throw GC.create("invalid-app-argument",{appName:p});return I[m]()};h.serviceProps!==void 0&&Zg(_,h.serviceProps),n[m]=_,t.prototype[m]=function(...I){return this._getService.bind(this,p).apply(this,h.multipleInstances?I:[])}}return h.type==="PUBLIC"?n[m]:null}function c(h,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(){const t=I7(E7);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:ZL,extendNamespace:e,createSubscribe:bN,ErrorFactory:Wu,deepExtend:Zg});function e(n){Zg(t,n)}return t}const S7=ZL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new Gy("@firebase/app-compat"),R7="@firebase/app-compat",A7="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P7(t){pi(R7,A7,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=EN();if(t.firebase!==void 0){KC.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&KC.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const _i=S7;P7();var C7="firebase",b7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i.registerVersion(C7,b7,"app-compat");const Fs=t=>[...Array(t).keys()],x7=(t,e=3)=>{let n;e===4?n=Fs(3).map(r=>Fs(4).map(s=>t.includes(4*r+s)?"x":"o").join("")):n=Fs(4).map(r=>Fs(3).map(s=>t.includes(3*r+s)?"x":"o").join("")),console.log(n.join(`
`))},Sf=(t,{debug:e=!1,returnWhenFound:n=!1}={})=>{let r=0,i=[];for(let s=0;s<t.length-2;s++)for(let o=s+1;o<t.length-1;o++)for(let u=o+1;u<t.length;u++)if(i=[t[s],t[o],t[u]],Ni(i)&&(e&&x7([s,o,u]),r++,n))return r;return r},P_=()=>{let t=[];return Fs(3).forEach(e=>{Fs(3).forEach(n=>{Fs(3).forEach(r=>{Fs(3).forEach(i=>{const s=""+e+r+n+i;t.push(s)})})})}),t},Ni=t=>{if(t.length!==3)return!1;const[e,n,r]=t;for(let i=0;i<4;i++)if((Number(e[i])+Number(n[i])+Number(r[i]))%3!==0)return!1;return!0},AS=(t,e)=>{let n,r,i="";for(let s=0;s<4;s++)t[s]===e[s]?i=i+t[s]:(n=Number(t[s])+Number(e[s]),r=(3-n).toString(),i=i+r);return i.trim()},PS=(t,e)=>e.includes(t)?e.filter(n=>n!==t):[...e,t],Rf=({board:t=[],deck:e},n=12,r=1)=>{let i=Ct.shuffle([...t,...e]);for(;Sf(i.slice(0,n))<r&&Sf(i,{returnWhenFound:!0})>0;)i=Ct.shuffle(i);return{deck:i.slice(n),board:i.slice(0,n)}},k7=(t=null)=>{if(t===null){let s=[...Vo.shuffle(P_()).slice(0,2)];const o=AS(s[0],s[1]);return[s[0],s[1],o]}const e=["","",""];let n=[!1,!1,!1,!1];return Vo.sampleSize(Vo.range(4),t).forEach(i=>{n[i]=Math.floor(Math.random()*3).toString()}),n.forEach(i=>{const s=Vo.shuffle(["0","1","2"]);for(let o=0;o<3;o++)i===!1?e[o]=e[o]+s[o].toString():e[o]=e[o]+i}),e},N7=({startingSetCards:t=2,boardSize:e=12,commonTraits:n}={})=>{let r=Vo.shuffle(P_()),i=Vo.shuffle(k7(n)),s=i.slice(0,2);const o=i[2];r=r.filter(c=>!i.includes(c));let u=Vo.shuffle([o,...r.slice(0,e-3)]);return s=[...s,...u],r=r.slice(e-3),{board:s,deck:r}},eM=t=>{const{board:e,deck:n,selected:r}=t,i=n.slice(0,3);let s=[...e],o=n.slice(3);for(r.forEach((u,c)=>{let h=s.indexOf(u);s[h]=i[c]});Sf(s)===0;)({deck:o,board:s}=Rf({board:s,deck:o}));return{deck:o,board:s,selected:[]}},O7=()=>{const t=new ui;wI(vu,t)},tM=()=>{const t=new _i.auth.GoogleAuthProvider;_i.auth().signInWithPopup(t).then(e=>{var n=e.credential;n.accessToken,e.user}).catch(e=>{e.code,e.message,e.email,e.credential})},jw=async(t,e)=>{let n;typeof t=="string"?n=la(cu,"games",t):n=t;try{await CE(n,{...e,lastUpdate:_i.firestore.FieldValue.serverTimestamp()})}catch(r){console.error("Error updating document: ",r)}},pc={width:120,height:200,strokeWidth:4,padding:25},D7=({fill:t,color:e})=>{let{padding:n,height:r,width:i,strokeWidth:s}=pc;return w.jsxs("svg",{width:"120",height:"200",xmlns:"http://www.w3.org/2000/svg",children:[w.jsxs("g",{children:[w.jsx("rect",{fill:"#fff",id:"canvas_background",height:"202",width:"122",y:"-1",x:"-1"}),w.jsx("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:w.jsx("rect",{fill:"#fff",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),w.jsx("g",{children:w.jsx("path",{stroke:e,transform:`
          rotate(270,58.8,98)
          scale(0.8 1)
          translate(10 0)
          `,id:"svg_5",d:`
          m-17.49,66
          c50.83,-35.45 101.7,35.45
          152.5,0
          c30,-10 30,43.8
          0,63.8
          c-50.8,35.45 -101.6,-35.45
          -152.5,0
          c-30,15 -30,-45
          0,-63.59
          z
          `,fillOpacity:"null",strokeOpacity:"null",strokeWidth:s,fill:t})})]})},L7=({shape:t,fill:e,color:n,num:r})=>{let{padding:i,height:s,width:o,strokeWidth:u}=pc;return t==="0"?(i=i+1,w.jsx(D7,{fill:e,color:n})):t==="1"?w.jsx("g",{children:w.jsx("ellipse",{stroke:n,ry:(s-2*i)/2,rx:(o-2*i)/2,cy:s/2,cx:o/2,fillOpacity:"null",strokeOpacity:"null",strokeWidth:pc.strokeWidth,fill:e})}):t==="2"?w.jsx("g",{children:w.jsx("polygon",{points:`${i},${s/2}
          ${o/2},${i}
          ${o-i},${s/2}
          ${o/2},${s-i}`,style:{fill:e,stroke:n,strokeWidth:pc.strokeWidth}})}):null};class rr extends z.Component{constructor(){super(...arguments);Sn(this,"colors",{0:"#61d020",1:"#1b2f92",2:"#FF0000",white:"#fff"});Sn(this,"getFill",(n,r)=>r==="1"?`url(#card-${n}-${r})`:r==="2"?this.colors[n]:this.colors.white);Sn(this,"drawShape",()=>{const[n,r,i,s]=this.props.desc.split("");return w.jsxs(z.Fragment,{children:[w.jsxs("g",{children:[w.jsx("title",{children:"background"}),w.jsx("rect",{fill:this.colors.white,id:"canvas_background",y:"-1",x:"-1"}),w.jsx("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:w.jsx("rect",{strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),w.jsx(L7,{shape:i,num:n,fill:this.getFill(r,s),color:this.colors[r]})]})})}render(){const[n,r,,i]=this.props.desc.split("");return w.jsxs("div",{className:"game-card d-flex justify-content-center",children:[w.jsx("svg",{width:"0",height:"0",children:w.jsx("pattern",{id:`card-${r}-${i}`,width:120/12,height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse",children:w.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:this.colors[r],strokeWidth:"5"}})})}),Fs(Number(n)+1).map(s=>w.jsx("svg",{className:`shape ${n==="1"?"double":""}`,viewBox:`0 0 ${pc.width} ${pc.height}`,xmlns:"http://www.w3.org/2000/svg",children:this.drawShape()},s))]})}}function M7(t){const{url:e,cardName:n,description:r}=t;return w.jsxs("div",{className:"col-9 col-md-4",children:[w.jsx(_n,{to:e,children:w.jsx("div",{className:"card shadow-sm mb-3 mb-md-4",children:w.jsx(rr,{desc:n})})}),w.jsx("p",{className:"text-center",children:r})]})}function V7(){const t=[{url:"/solo",cardName:"0012",description:"Solo/Local"},{url:"/lobby",cardName:"1121",description:"Join Game"},{url:"/host",cardName:"2200",description:"Host Game"}];return w.jsxs("div",{className:"container mt-3 mt-md-5",children:[w.jsx("h1",{className:"d-none d-md-block text-center mb-3 mb-md-5",children:"Main Menu"}),w.jsx("div",{className:"row justify-content-center",children:t.map((e,n)=>w.jsx(M7,{...e},`card-${n}`))}),w.jsxs("div",{className:"d-none d-md-block",children:[w.jsx("hr",{}),w.jsx("p",{children:w.jsx(_n,{to:"/rules",children:"Rules"})}),w.jsx("p",{children:w.jsx(_n,{to:"/stats",children:"View Statistics"})}),w.jsx("p",{children:w.jsx(_n,{to:"/login",children:"Login"})})]})]})}function F7({desc:t}){return w.jsx("div",{className:"col-4 my-2",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:t})})})}function U7(){const t=["0000","1210","0022","2101","0120","2011"];return w.jsxs("div",{className:"rules container",children:[w.jsx("h2",{children:"Rules of the Game"}),w.jsx("p",{children:"The object of the same is to find sets of three cards that are either the same or different along each of four dimensions."}),w.jsx("p",{children:"If that makes perfect sense to you, then go ahead and start playing. Otherwise, I will explain a bit more."}),w.jsx("p",{children:"The game starts by laying out a board with twelve cards. Here are some example cards: "}),w.jsx("div",{className:"row",children:t.map((e,n)=>w.jsx(F7,{desc:e},n))}),w.jsx("p",{children:"You'll notice that every card has four different characteristics:"}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color"}),w.jsx("li",{children:"number"}),w.jsx("li",{children:"shape"}),w.jsx("li",{children:"fill"})]}),w.jsx("p",{children:"and each of those characteristics has three different possibilities."}),w.jsxs("p",{children:["Three cards form a set if, for each of those four characteristics, the three cards are either ",w.jsx("em",{children:"all the same"})," or ",w.jsx("em",{children:"all different."})]}),w.jsx("p",{children:"It is easier to understand with examples, so here is an example set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"0112"})})})," ",w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"1111"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"2110"})})})]}),w.jsx("p",{children:"Which you can describe as follows:"}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - SAME"}),w.jsx("li",{children:"shape - SAME"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - DIFFERENT"})]}),w.jsx("p",{children:"Therefore, the three cards form a set."}),w.jsx("p",{children:"Here is another set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"2022"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"1112"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"0202"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - SAME"})]}),w.jsx("p",{children:"This is not a set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"1220"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"1110"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"2000"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"fill - SAME"}),w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - NOT THE SAME OR DIFFERENT!"})]}),w.jsxs("p",{children:["Even though the cards have the same fill, different colors, and different shapes, the numbers are neither ",w.jsx("em",{children:"all the same"})," nor ",w.jsx("em",{children:"all different"}),", so it's not a set."]}),w.jsxs("p",{children:["It doesn't matter how many of the characteristics are the same, and how many are different, as long as for ",w.jsx("em",{children:"each"})," characteristic, the cards are all the same or all different. Here's one last example:"]}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"1122"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"0201"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(rr,{desc:"2010"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - DIFFERENT"})]}),w.jsx("p",{children:"Each characteristic is different for all three cards, so this is a set."}),w.jsx("p",{children:w.jsx(_n,{to:"/",children:"Back Home"})})]})}var nM={exports:{}},rM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap=z;function j7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var B7=typeof Object.is=="function"?Object.is:j7,z7=ap.useSyncExternalStore,$7=ap.useRef,W7=ap.useEffect,q7=ap.useMemo,G7=ap.useDebugValue;rM.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=$7(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=q7(function(){function c(I){if(!h){if(h=!0,p=I,I=r(I),i!==void 0&&o.hasValue){var T=o.value;if(i(T,I))return m=T}return m=I}if(T=m,B7(p,I))return T;var D=r(I);return i!==void 0&&i(T,D)?T:(p=I,m=D)}var h=!1,p,m,_=n===void 0?null:n;return[function(){return c(e())},_===null?void 0:function(){return c(_())}]},[e,n,r,i]);var u=z7(t,s[0],s[1]);return W7(function(){o.hasValue=!0,o.value=u},[u]),G7(u),u};nM.exports=rM;var K7=nM.exports,st="default"in i0?li:i0,HC=Symbol.for("react-redux-context"),QC=typeof globalThis<"u"?globalThis:{};function H7(){if(!st.createContext)return{};const t=QC[HC]??(QC[HC]=new Map);let e=t.get(st.createContext);return e||(e=st.createContext(null),t.set(st.createContext,e)),e}var Ys=H7(),iM=()=>{throw new Error("uSES not initialized!")};function CS(t=Ys){return function(){return st.useContext(t)}}var sM=CS(),oM=iM,Q7=t=>{oM=t},Y7=(t,e)=>t===e;function J7(t=Ys){const e=t===Ys?sM:CS(t),n=(r,i={})=>{const{equalityFn:s=Y7,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:c,getServerState:h,stabilityCheck:p,identityFunctionCheck:m}=e();st.useRef(!0);const _=st.useCallback({[r.name](T){return r(T)}}[r.name],[r,p,o.stabilityCheck]),I=oM(c.addNestedSub,u.getState,h||u.getState,_,s);return st.useDebugValue(I),I};return Object.assign(n,{withTypes:()=>n}),n}var Af=J7(),X7=Symbol.for("react.element"),Z7=Symbol.for("react.portal"),eQ=Symbol.for("react.fragment"),tQ=Symbol.for("react.strict_mode"),nQ=Symbol.for("react.profiler"),rQ=Symbol.for("react.provider"),iQ=Symbol.for("react.context"),sQ=Symbol.for("react.server_context"),aM=Symbol.for("react.forward_ref"),oQ=Symbol.for("react.suspense"),aQ=Symbol.for("react.suspense_list"),bS=Symbol.for("react.memo"),uQ=Symbol.for("react.lazy"),lQ=aM,cQ=bS;function dQ(t){if(typeof t=="object"&&t!==null){const e=t.$$typeof;switch(e){case X7:{const n=t.type;switch(n){case eQ:case nQ:case tQ:case oQ:case aQ:return n;default:{const r=n&&n.$$typeof;switch(r){case sQ:case iQ:case aM:case uQ:case bS:case rQ:return r;default:return e}}}}case Z7:return e}}}function hQ(t){return dQ(t)===bS}function fQ(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let u=!1,c,h,p,m,_;function I(P,S){return c=P,h=S,p=t(c,h),m=e(r,h),_=n(p,m,h),u=!0,_}function T(){return p=t(c,h),e.dependsOnOwnProps&&(m=e(r,h)),_=n(p,m,h),_}function D(){return t.dependsOnOwnProps&&(p=t(c,h)),e.dependsOnOwnProps&&(m=e(r,h)),_=n(p,m,h),_}function O(){const P=t(c,h),S=!o(P,p);return p=P,S&&(_=n(p,m,h)),_}function k(P,S){const U=!s(S,h),q=!i(P,c,S,h);return c=P,h=S,U&&q?T():U?D():q?O():_}return function(S,U){return u?k(S,U):I(S,U)}}function pQ(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=e(t,i),o=n(t,i),u=r(t,i);return fQ(s,o,u,t,i)}function mQ(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function bE(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function YC(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function uM(t,e){return function(r,{displayName:i}){const s=function(u,c){return s.dependsOnOwnProps?s.mapToProps(u,c):s.mapToProps(u,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(u,c){s.mapToProps=t,s.dependsOnOwnProps=YC(t);let h=s(u,c);return typeof h=="function"&&(s.mapToProps=h,s.dependsOnOwnProps=YC(h),h=s(u,c)),h},s}}function xS(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function gQ(t){return t&&typeof t=="object"?bE(e=>mQ(t,e)):t?typeof t=="function"?uM(t):xS(t,"mapDispatchToProps"):bE(e=>({dispatch:e}))}function yQ(t){return t?typeof t=="function"?uM(t):xS(t,"mapStateToProps"):bE(()=>({}))}function _Q(t,e,n){return{...n,...t,...e}}function vQ(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(c,h,p){const m=t(c,h,p);return s?i(m,o)||(o=m):(s=!0,o=m),o}}}function wQ(t){return t?typeof t=="function"?vQ(t):xS(t,"mergeProps"):()=>_Q}function EQ(t){t()}function TQ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){EQ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var JC={notify(){},get:()=>[]};function lM(t,e){let n,r=JC,i=0,s=!1;function o(D){p();const O=r.subscribe(D);let k=!1;return()=>{k||(k=!0,O(),m())}}function u(){r.notify()}function c(){T.onStateChange&&T.onStateChange()}function h(){return s}function p(){i++,n||(n=e?e.addNestedSub(c):t.subscribe(c),r=TQ())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=JC)}function _(){s||(s=!0,p())}function I(){s&&(s=!1,m())}const T={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:c,isSubscribed:h,trySubscribe:_,tryUnsubscribe:I,getListeners:()=>r};return T}var IQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SQ=typeof navigator<"u"&&navigator.product==="ReactNative",_y=IQ||SQ?st.useLayoutEffect:st.useEffect;function XC(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Bw(t,e){if(XC(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!XC(t[n[i]],e[n[i]]))return!1;return!0}var RQ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},AQ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},PQ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CQ={[lQ]:PQ,[cQ]:cM};function ZC(t){return hQ(t)?cM:CQ[t.$$typeof]||RQ}var bQ=Object.defineProperty,xQ=Object.getOwnPropertyNames,eb=Object.getOwnPropertySymbols,kQ=Object.getOwnPropertyDescriptor,NQ=Object.getPrototypeOf,tb=Object.prototype;function xE(t,e){if(typeof e!="string"){if(tb){const s=NQ(e);s&&s!==tb&&xE(t,s)}let n=xQ(e);eb&&(n=n.concat(eb(e)));const r=ZC(t),i=ZC(e);for(let s=0;s<n.length;++s){const o=n[s];if(!AQ[o]&&!(i&&i[o])&&!(r&&r[o])){const u=kQ(e,o);try{bQ(t,o,u)}catch{}}}}return t}var dM=iM,OQ=t=>{dM=t},DQ=[null,null];function LQ(t,e,n){_y(()=>t(...e),n)}function MQ(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function VQ(t,e,n,r,i,s,o,u,c,h,p){if(!t)return()=>{};let m=!1,_=null;const I=()=>{if(m||!u.current)return;const D=e.getState();let O,k;try{O=r(D,i.current)}catch(P){k=P,_=P}k||(_=null),O===s.current?o.current||h():(s.current=O,c.current=O,o.current=!0,p())};return n.onStateChange=I,n.trySubscribe(),I(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,_)throw _}}function FQ(t,e){return t===e}function UQ(t,e,n,{pure:r,areStatesEqual:i=FQ,areOwnPropsEqual:s=Bw,areStatePropsEqual:o=Bw,areMergedPropsEqual:u=Bw,forwardRef:c=!1,context:h=Ys}={}){const p=h,m=yQ(t),_=gQ(e),I=wQ(n),T=!!t;return O=>{const k=O.displayName||O.name||"Component",P=`Connect(${k})`,S={shouldHandleStateChanges:T,displayName:P,wrappedComponentName:k,WrappedComponent:O,initMapStateToProps:m,initMapDispatchToProps:_,initMergeProps:I,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:u};function U(C){const[R,L,V]=st.useMemo(()=>{const{reactReduxForwardedRef:ke,...nt}=C;return[C.context,ke,nt]},[C]),j=st.useMemo(()=>{let ke=p;return R!=null&&R.Consumer,ke},[R,p]),M=st.useContext(j),N=!!C.store&&!!C.store.getState&&!!C.store.dispatch,fe=!!M&&!!M.store,oe=N?C.store:M.store,ce=fe?M.getServerState:oe.getState,de=st.useMemo(()=>pQ(oe.dispatch,S),[oe]),[Q,ue]=st.useMemo(()=>{if(!T)return DQ;const ke=lM(oe,N?void 0:M.subscription),nt=ke.notifyNestedSubs.bind(ke);return[ke,nt]},[oe,N,M]),me=st.useMemo(()=>N?M:{...M,subscription:Q},[N,M,Q]),_e=st.useRef(void 0),Ce=st.useRef(V),Ae=st.useRef(void 0),Ge=st.useRef(!1),Me=st.useRef(!1),Ye=st.useRef(void 0);_y(()=>(Me.current=!0,()=>{Me.current=!1}),[]);const mt=st.useMemo(()=>()=>Ae.current&&V===Ce.current?Ae.current:de(oe.getState(),V),[oe,V]),Jt=st.useMemo(()=>nt=>Q?VQ(T,oe,Q,de,Ce,_e,Ge,Me,Ae,ue,nt):()=>{},[Q]);LQ(MQ,[Ce,_e,Ge,V,Ae,ue]);let ve;try{ve=dM(Jt,mt,ce?()=>de(ce(),V):mt)}catch(ke){throw Ye.current&&(ke.message+=`
The error may be correlated with this previous error:
${Ye.current.stack}

`),ke}_y(()=>{Ye.current=void 0,Ae.current=void 0,_e.current=ve});const be=st.useMemo(()=>st.createElement(O,{...ve,ref:L}),[L,O,ve]);return st.useMemo(()=>T?st.createElement(j.Provider,{value:me},be):be,[j,be,me])}const $=st.memo(U);if($.WrappedComponent=O,$.displayName=U.displayName=P,c){const R=st.forwardRef(function(V,j){return st.createElement($,{...V,reactReduxForwardedRef:j})});return R.displayName=P,R.WrappedComponent=O,xE(R,O)}return xE($,O)}}var jQ=UQ;function BQ({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=st.useMemo(()=>{const h=lM(t);return{store:t,subscription:h,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),u=st.useMemo(()=>t.getState(),[t]);_y(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==t.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,u]);const c=e||Ys;return st.createElement(c.Provider,{value:o},n)}var zQ=BQ;function hM(t=Ys){const e=t===Ys?sM:CS(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var $Q=hM();function WQ(t=Ys){const e=t===Ys?$Q:hM(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var C_=WQ();Q7(K7.useSyncExternalStoreWithSelector);OQ(z.useSyncExternalStore);function qQ(t){const{gameOver:e,myName:n,solo:r,finalScore:i,reset:s}=t,o=Af(c=>c.user),{user:u}=o;return w.jsx("div",{className:"game-over container mt-5",children:w.jsx("div",{className:"row justify-content-center",children:w.jsx("div",{className:"col col-md-6",children:w.jsxs("div",{className:"card shadow",children:[w.jsx("h3",{className:"text-center mt-3",children:"GAME OVER!"}),isNaN(i)?w.jsxs("p",{className:"text-center mb-4",children:["Winner: ",e," "]}):w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsxs("p",{className:"text-center my-2",children:["Final Score: ",i," "]}),w.jsx("div",{className:"d-flex flex-row justify-content-center",children:w.jsx("button",{className:"btn btn-primary my-2",onClick:()=>s(),children:"Reset"})})]}),w.jsxs("div",{className:"row justify-content-center",children:[w.jsx("div",{className:"col-4",children:w.jsx("p",{className:"text-center",children:w.jsx(_n,{to:"/",children:"Main"})})}),r&&u!==null&&w.jsx("div",{className:"col-4",children:w.jsx("p",{className:"text-center",children:w.jsx(_n,{to:"/stats",children:"Stats"})})})]})]})})})})}var fM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var u=arguments[o];u&&(s=i(s,r(u)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var u in s)e.call(s,u)&&s[u]&&(o=i(o,u));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(fM);var GQ=fM.exports;const Wr=Nf(GQ),id=!!(typeof window<"u"&&window.document&&window.document.createElement);var kE=!1,NE=!1;try{var zw={get passive(){return kE=!0},get once(){return NE=kE=!0}};id&&(window.addEventListener("test",zw,zw),window.removeEventListener("test",zw,!0))}catch{}function pM(t,e,n,r){if(r&&typeof r!="boolean"&&!NE){var i=r.once,s=r.capture,o=n;!NE&&i&&(o=n.__once||function u(c){this.removeEventListener(e,u,s),n.call(this,c)},n.__once=o),t.addEventListener(e,o,kE?r:s)}t.addEventListener(e,n,r)}function b_(t){return t&&t.ownerDocument||document}function OE(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}var Hm;function nb(t){if((!Hm&&Hm!==0||t)&&id){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Hm=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Hm}function KQ(){return z.useState(null)}function HQ(t){const e=z.useRef(t);return z.useEffect(()=>{e.current=t},[t]),e}function Zi(t){const e=HQ(t);return z.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const rb=t=>!t||typeof t=="function"?t:e=>{t.current=e};function QQ(t,e){const n=rb(t),r=rb(e);return i=>{n&&n(i),r&&r(i)}}function up(t,e){return z.useMemo(()=>QQ(t,e),[t,e])}function YQ(t){const e=z.useRef(t);return e.current=t,e}function mM(t){const e=YQ(t);z.useEffect(()=>()=>e.current(),[])}function JQ(t){var e=b_(t);return e&&e.defaultView||window}function XQ(t,e){return JQ(t).getComputedStyle(t,e)}var ZQ=/([A-Z])/g;function eY(t){return t.replace(ZQ,"-$1").toLowerCase()}var tY=/^ms-/;function Qm(t){return eY(t).replace(tY,"-ms-")}var nY=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function rY(t){return!!(t&&nY.test(t))}function wu(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Qm(e))||XQ(t).getPropertyValue(Qm(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(Qm(i)):rY(i)?r+=i+"("+s+") ":n+=Qm(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function vy(t,e,n,r){return pM(t,e,n,r),function(){OE(t,e,n,r)}}function iY(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function sY(t){var e=wu(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function oY(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||iY(t,"transitionend",!0)},e+n),s=vy(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function gM(t,e,n,r){n==null&&(n=sY(t)||0);var i=oY(t,n,r),s=vy(t,"transitionend",e);return function(){i(),s()}}function $w(t){t===void 0&&(t=b_());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function ib(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function aY(){const t=z.useRef(!0),e=z.useRef(()=>t.current);return z.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function uY(t){const e=z.useRef(null);return z.useEffect(()=>{e.current=t}),e.current}const lY="data-rr-ui-";function cY(t){return`${lY}${t}`}function dY(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const sb=cY("modal-open");class kS{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return dY(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(wu(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(sb,""),wu(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(sb),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const yM=z.createContext(id?window:void 0);yM.Provider;function NS(){return z.useContext(yM)}const Ww=(t,e)=>id?t==null?(e||b_()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function hY(t,e){const n=NS(),[r,i]=z.useState(()=>Ww(t,n==null?void 0:n.document));if(!r){const s=Ww(t);s&&i(s)}return z.useEffect(()=>{},[e,r]),z.useEffect(()=>{const s=Ww(t);s!==r&&i(s)},[t,r]),r}const fY=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",pY=typeof document<"u",ob=pY||fY?z.useLayoutEffect:z.useEffect;function mY({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=z.useRef(null),o=z.useRef(e),u=Zi(n);z.useEffect(()=>{e?o.current=!0:u(s.current)},[e,u]);const c=up(s,t.ref),h=z.cloneElement(t,{ref:c});return e?h:i||!o.current&&r?null:h}function gY(t){return t.code==="Escape"||t.keyCode===27}function _M(){const t=z.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const yY=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function _Y(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vY(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:o,addEndListener:u,children:c}=t,h=_Y(t,yY);const{major:p}=_M(),m=p>=19?c.props.ref:c.ref,_=z.useRef(null),I=up(_,typeof c=="function"?null:m),T=$=>C=>{$&&_.current&&$(_.current,C)},D=z.useCallback(T(e),[e]),O=z.useCallback(T(n),[n]),k=z.useCallback(T(r),[r]),P=z.useCallback(T(i),[i]),S=z.useCallback(T(s),[s]),U=z.useCallback(T(o),[o]),q=z.useCallback(T(u),[u]);return Object.assign({},h,{nodeRef:_},e&&{onEnter:D},n&&{onEntering:O},r&&{onEntered:k},i&&{onExit:P},s&&{onExiting:S},o&&{onExited:U},u&&{addEndListener:q},{children:typeof c=="function"?($,C)=>c($,Object.assign({},C,{ref:I})):z.cloneElement(c,{ref:I})})}const wY=["component"];function EY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const TY=z.forwardRef((t,e)=>{let{component:n}=t,r=EY(t,wY);const i=vY(r);return w.jsx(n,Object.assign({ref:e},i))});function IY({in:t,onTransition:e}){const n=z.useRef(null),r=z.useRef(!0),i=Zi(e);return ob(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),ob(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function SY({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=z.useState(!e);e&&s&&o(!1);const u=IY({in:!!e,onTransition:h=>{const p=()=>{h.isStale()||(h.in?r==null||r(h.element,h.initial):(o(!0),n==null||n(h.element)))};Promise.resolve(i(h)).then(p,m=>{throw h.in||o(!0),m})}}),c=up(u,t.ref);return s&&!e?null:z.cloneElement(t,{ref:c})}function ab(t,e,n){return t?w.jsx(TY,Object.assign({},n,{component:t})):e?w.jsx(SY,Object.assign({},n,{transition:e})):w.jsx(mY,Object.assign({},n))}const RY=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function AY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let qw;function PY(t){return qw||(qw=new kS({ownerDocument:t==null?void 0:t.document})),qw}function CY(t){const e=NS(),n=t||PY(e),r=z.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:z.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:z.useCallback(i=>{r.current.backdrop=i},[])})}const vM=z.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:u=!0,keyboard:c=!0,onBackdropClick:h,onEscapeKeyDown:p,transition:m,runTransition:_,backdropTransition:I,runBackdropTransition:T,autoFocus:D=!0,enforceFocus:O=!0,restoreFocus:k=!0,restoreFocusOptions:P,renderDialog:S,renderBackdrop:U=Ve=>w.jsx("div",Object.assign({},Ve)),manager:q,container:$,onShow:C,onHide:R=()=>{},onExit:L,onExited:V,onExiting:j,onEnter:M,onEntering:N,onEntered:fe}=t,oe=AY(t,RY);const ce=NS(),de=hY($),Q=CY(q),ue=aY(),me=uY(n),[_e,Ce]=z.useState(!n),Ae=z.useRef(null);z.useImperativeHandle(e,()=>Q,[Q]),id&&!me&&n&&(Ae.current=$w(ce==null?void 0:ce.document)),n&&_e&&Ce(!1);const Ge=Zi(()=>{if(Q.add(),be.current=vy(document,"keydown",Jt),ve.current=vy(document,"focus",()=>setTimeout(Ye),!0),C&&C(),D){var Ve,En;const At=$w((Ve=(En=Q.dialog)==null?void 0:En.ownerDocument)!=null?Ve:ce==null?void 0:ce.document);Q.dialog&&At&&!ib(Q.dialog,At)&&(Ae.current=At,Q.dialog.focus())}}),Me=Zi(()=>{if(Q.remove(),be.current==null||be.current(),ve.current==null||ve.current(),k){var Ve;(Ve=Ae.current)==null||Ve.focus==null||Ve.focus(P),Ae.current=null}});z.useEffect(()=>{!n||!de||Ge()},[n,de,Ge]),z.useEffect(()=>{_e&&Me()},[_e,Me]),mM(()=>{Me()});const Ye=Zi(()=>{if(!O||!ue()||!Q.isTopModal())return;const Ve=$w(ce==null?void 0:ce.document);Q.dialog&&Ve&&!ib(Q.dialog,Ve)&&Q.dialog.focus()}),mt=Zi(Ve=>{Ve.target===Ve.currentTarget&&(h==null||h(Ve),u===!0&&R())}),Jt=Zi(Ve=>{c&&gY(Ve)&&Q.isTopModal()&&(p==null||p(Ve),Ve.defaultPrevented||R())}),ve=z.useRef(),be=z.useRef(),xe=(...Ve)=>{Ce(!0),V==null||V(...Ve)};if(!de)return null;const ke=Object.assign({role:r,ref:Q.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},oe,{style:s,className:i,tabIndex:-1});let nt=S?S(ke):w.jsx("div",Object.assign({},ke,{children:z.cloneElement(o,{role:"document"})}));nt=ab(m,_,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:L,onExiting:j,onExited:xe,onEnter:M,onEntering:N,onEntered:fe,children:nt});let lt=null;return u&&(lt=U({ref:Q.setBackdropRef,onClick:mt}),lt=ab(I,T,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:lt})),w.jsx(w.Fragment,{children:Zl.createPortal(w.jsxs(w.Fragment,{children:[lt,nt]}),de)})});vM.displayName="Modal";const bY=Object.assign(vM,{Manager:kS});function xY(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function kY(t,e){t.classList?t.classList.add(e):xY(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var NY=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ol(t,e){return NY(t.querySelectorAll(e))}function ub(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function OY(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=ub(t.className,e):t.setAttribute("class",ub(t.className&&t.className.baseVal||"",e))}const Dl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class DY extends kS{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,wu(n,{[e]:`${parseFloat(wu(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],wu(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(kY(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ol(n,Dl.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Ol(n,Dl.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),Ol(n,Dl.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();OY(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Ol(n,Dl.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Ol(n,Dl.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Ol(n,Dl.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Gw;function LY(t){return Gw||(Gw=new DY(t)),Gw}function MY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function DE(t,e){return DE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},DE(t,e)}function VY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,DE(t,e)}var wM={exports:{}},FY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UY=FY,jY=UY;function EM(){}function TM(){}TM.resetWarningCache=EM;var BY=function(){function t(r,i,s,o,u,c){if(c!==jY){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:TM,resetWarningCache:EM};return n.PropTypes=n,n};wM.exports=BY();var zY=wM.exports;const Kw=Nf(zY),lb={disabled:!1},IM=li.createContext(null);var $Y=function(e){return e.scrollTop},vh="unmounted",Ya="exited",bo="entering",nu="entered",LE="exiting",io=function(t){VY(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,u=o&&!o.isMounting?r.enter:r.appear,c;return s.appearStatus=null,r.in?u?(c=Ya,s.appearStatus=bo):c=nu:r.unmountOnExit||r.mountOnEnter?c=vh:c=Ya,s.state={status:c},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===vh?{status:Ya}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==bo&&o!==nu&&(s=bo):(o===bo||o===nu)&&(s=LE)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,u;return s=o=u=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,u=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:u}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===bo){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Zl.findDOMNode(this);o&&$Y(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ya&&this.setState({status:vh})},n.performEnter=function(i){var s=this,o=this.props.enter,u=this.context?this.context.isMounting:i,c=this.props.nodeRef?[u]:[Zl.findDOMNode(this),u],h=c[0],p=c[1],m=this.getTimeouts(),_=u?m.appear:m.enter;if(!i&&!o||lb.disabled){this.safeSetState({status:nu},function(){s.props.onEntered(h)});return}this.props.onEnter(h,p),this.safeSetState({status:bo},function(){s.props.onEntering(h,p),s.onTransitionEnd(_,function(){s.safeSetState({status:nu},function(){s.props.onEntered(h,p)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),u=this.props.nodeRef?void 0:Zl.findDOMNode(this);if(!s||lb.disabled){this.safeSetState({status:Ya},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:LE},function(){i.props.onExiting(u),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Ya},function(){i.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(u){o&&(o=!1,s.nextCallback=null,i(u))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Zl.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],h=c[0],p=c[1];this.props.addEndListener(h,p)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===vh)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var u=MY(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return li.createElement(IM.Provider,{value:null},typeof o=="function"?o(i,u):li.cloneElement(li.Children.only(o),u))},e}(li.Component);io.contextType=IM;io.propTypes={};function Ll(){}io.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ll,onEntering:Ll,onEntered:Ll,onExit:Ll,onExiting:Ll,onExited:Ll};io.UNMOUNTED=vh;io.EXITED=Ya;io.ENTERING=bo;io.ENTERED=nu;io.EXITING=LE;function cb(t,e){const n=wu(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function WY(t,e){const n=cb(t,"transitionDuration"),r=cb(t,"transitionDelay"),i=gM(t,s=>{s.target===t&&(i(),e(s))},n+r)}function qY(t){t.offsetHeight}function GY(t){return t&&"setState"in t?Zl.findDOMNode(t):t??null}const KY=li.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:u,childRef:c,...h},p)=>{const m=z.useRef(null),_=up(m,c),I=$=>{_(GY($))},T=$=>C=>{$&&m.current&&$(m.current,C)},D=z.useCallback(T(t),[t]),O=z.useCallback(T(e),[e]),k=z.useCallback(T(n),[n]),P=z.useCallback(T(r),[r]),S=z.useCallback(T(i),[i]),U=z.useCallback(T(s),[s]),q=z.useCallback(T(o),[o]);return w.jsx(io,{ref:p,...h,onEnter:D,onEntered:k,onEntering:O,onExit:P,onExited:U,onExiting:S,addEndListener:q,nodeRef:m,children:typeof u=="function"?($,C)=>u($,{...C,ref:I}):li.cloneElement(u,{ref:I})})}),HY={[bo]:"show",[nu]:"show"},OS=z.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},u=z.useCallback((p,m)=>{qY(p),r==null||r(p,m)},[r]),{major:c}=_M(),h=c>=19?e.props.ref:e.ref;return w.jsx(KY,{ref:s,addEndListener:WY,...o,onEnter:u,childRef:h,children:(p,m)=>z.cloneElement(e,{...m,className:Wr("fade",t,e.props.className,HY[p],n[p])})})});OS.displayName="Fade";const QY=["xxl","xl","lg","md","sm","xs"],YY="xs",SM=z.createContext({prefixes:{},breakpoints:QY,minBreakpoint:YY});function Ta(t,e){const{prefixes:n}=z.useContext(SM);return t||n[e]||e}function JY(){const{dir:t}=z.useContext(SM);return t==="rtl"}const RM=z.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Ta(e,"modal-body"),w.jsx(n,{ref:i,className:Wr(t,e),...r})));RM.displayName="ModalBody";const AM=z.createContext({onHide(){}}),DS=z.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:u,...c},h)=>{t=Ta(t,"modal");const p=`${t}-dialog`,m=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return w.jsx("div",{...c,ref:h,className:Wr(p,e,i&&`${t}-${i}`,r&&`${p}-centered`,u&&`${p}-scrollable`,s&&m),children:w.jsx("div",{className:Wr(`${t}-content`,n),children:o})})});DS.displayName="ModalDialog";const PM=z.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Ta(e,"modal-footer"),w.jsx(n,{ref:i,className:Wr(t,e),...r})));PM.displayName="ModalFooter";const XY={"aria-label":Kw.string,onClick:Kw.func,variant:Kw.oneOf(["white"])},LS=z.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>w.jsx("button",{ref:i,type:"button",className:Wr("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));LS.displayName="CloseButton";LS.propTypes=XY;const ZY=z.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const u=z.useContext(AM),c=Zi(()=>{u==null||u.onHide(),r==null||r()});return w.jsxs("div",{ref:o,...s,children:[i,n&&w.jsx(LS,{"aria-label":t,variant:e,onClick:c})]})}),CM=z.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=Ta(t,"modal-header"),w.jsx(ZY,{ref:s,...i,className:Wr(e,t),closeLabel:n,closeButton:r})));CM.displayName="ModalHeader";const eJ=t=>z.forwardRef((e,n)=>w.jsx("div",{...e,ref:n,className:Wr(e.className,t)})),tJ=eJ("h4"),bM=z.forwardRef(({className:t,bsPrefix:e,as:n=tJ,...r},i)=>(e=Ta(e,"modal-title"),w.jsx(n,{ref:i,className:Wr(t,e),...r})));bM.displayName="ModalTitle";function nJ(t){return w.jsx(OS,{...t,timeout:null})}function rJ(t){return w.jsx(OS,{...t,timeout:null})}const xM=z.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=DS,"data-bs-theme":u,"aria-labelledby":c,"aria-describedby":h,"aria-label":p,show:m=!1,animation:_=!0,backdrop:I=!0,keyboard:T=!0,onEscapeKeyDown:D,onShow:O,onHide:k,container:P,autoFocus:S=!0,enforceFocus:U=!0,restoreFocus:q=!0,restoreFocusOptions:$,onEntered:C,onExit:R,onExiting:L,onEnter:V,onEntering:j,onExited:M,backdropClassName:N,manager:fe,...oe},ce)=>{const[de,Q]=z.useState({}),[ue,me]=z.useState(!1),_e=z.useRef(!1),Ce=z.useRef(!1),Ae=z.useRef(null),[Ge,Me]=KQ(),Ye=up(ce,Me),mt=Zi(k),Jt=JY();t=Ta(t,"modal");const ve=z.useMemo(()=>({onHide:mt}),[mt]);function be(){return fe||LY({isRTL:Jt})}function xe(Le){if(!id)return;const vt=be().getScrollbarWidth()>0,pr=Le.scrollHeight>b_(Le).documentElement.clientHeight;Q({paddingRight:vt&&!pr?nb():void 0,paddingLeft:!vt&&pr?nb():void 0})}const ke=Zi(()=>{Ge&&xe(Ge.dialog)});mM(()=>{OE(window,"resize",ke),Ae.current==null||Ae.current()});const nt=()=>{_e.current=!0},lt=Le=>{_e.current&&Ge&&Le.target===Ge.dialog&&(Ce.current=!0),_e.current=!1},Ve=()=>{me(!0),Ae.current=gM(Ge.dialog,()=>{me(!1)})},En=Le=>{Le.target===Le.currentTarget&&Ve()},At=Le=>{if(I==="static"){En(Le);return}if(Ce.current||Le.target!==Le.currentTarget){Ce.current=!1;return}k==null||k()},vi=Le=>{T?D==null||D(Le):(Le.preventDefault(),I==="static"&&Ve())},Ju=(Le,vt)=>{Le&&xe(Le),V==null||V(Le,vt)},wi=Le=>{Ae.current==null||Ae.current(),R==null||R(Le)},Bn=(Le,vt)=>{j==null||j(Le,vt),pM(window,"resize",ke)},fs=Le=>{Le&&(Le.style.display=""),M==null||M(Le),OE(window,"resize",ke)},Fi=z.useCallback(Le=>w.jsx("div",{...Le,className:Wr(`${t}-backdrop`,N,!_&&"show")}),[_,N,t]),so={...n,...de};so.display="block";const Ui=Le=>w.jsx("div",{role:"dialog",...Le,style:so,className:Wr(e,t,ue&&`${t}-static`,!_&&"show"),onClick:I?At:void 0,onMouseUp:lt,"data-bs-theme":u,"aria-label":p,"aria-labelledby":c,"aria-describedby":h,children:w.jsx(o,{...oe,onMouseDown:nt,className:r,contentClassName:i,children:s})});return w.jsx(AM.Provider,{value:ve,children:w.jsx(bY,{show:m,ref:Ye,backdrop:I,container:P,keyboard:!0,autoFocus:S,enforceFocus:U,restoreFocus:q,restoreFocusOptions:$,onEscapeKeyDown:vi,onShow:O,onHide:k,onEnter:Ju,onEntering:Bn,onEntered:C,onExit:wi,onExiting:L,onExited:fs,manager:be(),transition:_?nJ:void 0,backdropTransition:_?rJ:void 0,renderBackdrop:Fi,renderDialog:Ui})})});xM.displayName="Modal";const Yn=Object.assign(xM,{Body:RM,Header:CM,Title:bM,Footer:PM,Dialog:DS,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),MS=["light-blue","pink","amber","light-green","purple","orange","error-red"];function iJ(t,e){const n=z.useRef();z.useEffect(()=>{n.current=t},[t]),z.useEffect(()=>{function r(){n.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const db=t=>{const e=i=>{var s="00",o=(s+i).slice(-s.length);return o},n=Math.floor(t/60),r=t-60*n;return`${n}:${e(r)}`};function sJ({gameMode:t,deck:e,board:n,declarer:r,setsFound:i,players:s,elapsedTime:o,timeLeft:u}){const c=Sf(n);switch(t){case"shared-device":return null;case"versus":return w.jsx("div",{className:`topbar py-2 bg-${r?"light":"dark"}-orange`,children:w.jsx("nav",{className:"text-white",children:w.jsxs("div",{className:"d-flex justify-content-around text-center",children:[w.jsxs("div",{children:["Sets: ",c]}),w.jsx("div",{children:r&&w.jsxs(w.Fragment,{children:["SET! ",r]})})]})})});case"puzzle":return w.jsx("div",{className:"navbar-fixed",children:w.jsx("nav",{children:w.jsxs("div",{className:"nav-wrapper",style:{display:"flex",justifyContent:"space-between"},children:[w.jsxs("div",{children:["Total Sets: ",c]}),w.jsxs("div",{children:["Remaining: ",c-i.length]}),w.jsxs("div",{children:["Time: ",db(o)]})]})})});case"training":return w.jsx("div",{className:"topbar py-2 bg-dark-orange navbar-fixed",children:w.jsx("nav",{children:w.jsxs("div",{className:"nav-wrapper d-flex justify-content-around",children:[w.jsxs("div",{children:["Time: ",db(o)]}),w.jsxs("div",{children:["Score: ",s.you.score]}),w.jsxs("div",{children:["Remaining: ",u>0?u:"X"]})]})})});default:return null}}function hb({players:t,declarer:e,handlePlayerClick:n}){return w.jsx("div",{className:"row my-4 text-center justify-content-between",children:t.map(r=>w.jsx("div",{className:`col-2 bg-${r.color} ${r.name==e?"active-player":""}`,onClick:()=>{n(r.name)},children:w.jsx("p",{className:"my-2 align-middle",children:r.name==e?"SET!":r.score})},r.name))})}function x_(t){const[e,n]=z.useState(null),[r,i]=z.useState(window.innerHeight),{board:s,selected:o,deck:u,declarer:c,players:h,gameOver:p,myName:m,setFound:_,sharedDevice:I,solo:T,gameMode:D}=t;z.useEffect(()=>{const $=Ct.debounce(()=>{i(window.innerHeight)},150);return window.addEventListener("resize",$),function(){window.removeEventListener("resize",$)}},[]),z.useEffect(()=>{n(Sf(s,{debug:!1}))},[s]);const k=(({declarer:$,players:C})=>$?Ct.get(C,`${$}.color`,""):Ct.get(C,`${m}.color`,""))(t);if(!Ct.isEmpty(p))return w.jsx(qQ,{gameOver:p,myName:m,solo:T});let P=Ct.map(h,($,C)=>({name:C,...$}));P=Vo.orderBy(P,$=>$.position,"asc");const S=Math.ceil(P.length/2),U=P.slice(0,S),q=P.slice(S);return w.jsxs(z.Fragment,{children:[(Ct.isEmpty(h)||!Object.keys(h).includes(m))&&w.jsxs(Yn,{show:!0,children:[w.jsx(Yn.Header,{children:w.jsx(Yn.Title,{children:"Waiting to join..."})}),w.jsxs(Yn.Body,{children:[w.jsx("h4",{children:"Players:"}),w.jsx("ul",{className:"collection",children:Ct.map(h,($,C)=>w.jsx("li",{className:"collection-item",children:w.jsxs("span",{className:"player-name",children:[C," ",$.host&&"(host)"]})},C))})]})]}),w.jsx(sJ,{...t}),w.jsxs("div",{className:"container",children:[I&&w.jsx(hb,{players:U,declarer:c,handlePlayerClick:t.handlePlayerClick}),w.jsxs("div",{className:"board d-flex flex-column align-items-center",children:[w.jsx("div",{className:"board-main-container",children:s.map($=>w.jsx("div",{className:"card-wrapper",onClick:()=>{t.handleCardClick($)},children:w.jsx("div",{className:`card-holder ${o.includes($)?`bg-${k}`:""}`,children:w.jsx("div",{className:`card ${_&&o.length===3&&!o.includes($)?"blurry":""}`,children:w.jsx(rr,{desc:$})})})},$))}),!I&&!["puzzle","training"].includes(D)&&w.jsx("div",{className:"row my-1 text-center fixed-bottom",children:Ct.map(P,$=>{const{name:C}=$;return w.jsx("div",{className:"col s4 m3",children:w.jsxs("span",{className:`player-name bg-${$.color}`,children:[C,": ",$.score]})},C)})}),t.handleRedeal&&w.jsx("div",{className:"row mt-3",children:w.jsx("div",{className:"col mt-3 mt-md-4",children:w.jsx("button",{onClick:t.handleRedeal,className:"btn btn-primary",children:"Shuffle"})})})]}),I&&w.jsx(hb,{players:q,declarer:c,handlePlayerClick:t.handlePlayerClick})]})]})}var kM={},VS={},FS={},sd={};Object.defineProperty(sd,"__esModule",{value:!0});sd.Direction=void 0;var fb;(function(t){t.Right="to right",t.Left="to left",t.Down="to bottom",t.Up="to top"})(fb||(sd.Direction=fb={}));(function(t){var e=gn&&gn.__spreadArray||function(M,N,fe){if(fe||arguments.length===2)for(var oe=0,ce=N.length,de;oe<ce;oe++)(de||!(oe in N))&&(de||(de=Array.prototype.slice.call(N,0,oe)),de[oe]=N[oe]);return M.concat(de||Array.prototype.slice.call(N))};Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.useThumbOverlap=t.assertUnreachable=t.voidFn=t.getTrackBackground=t.replaceAt=t.schd=t.translate=t.getClosestThumbIndex=t.translateThumbs=t.getPaddingAndBorder=t.getMargin=t.checkInitialOverlap=t.checkValuesAgainstBoundaries=t.checkBoundaries=t.isVertical=t.relativeValue=t.normalizeValue=t.isStepDivisible=t.isTouchEvent=t.getStepDecimals=void 0;var n=z,r=sd,i=function(M){var N=M.toString().split(".")[1];return N?N.length:0};t.getStepDecimals=i;function s(M){return M.touches&&M.touches.length||M.changedTouches&&M.changedTouches.length}t.isTouchEvent=s;function o(M,N,fe){var oe=(N-M)/fe,ce=8,de=Number(oe.toFixed(ce));return parseInt(de.toString(),10)===de}t.isStepDivisible=o;function u(M,N,fe,oe,ce,de,Q){var ue=1e11;if(M=Math.round(M*ue)/ue,!de){var me=Q[N-1],_e=Q[N+1];if(me&&me>M)return me;if(_e&&_e<M)return _e}if(M>oe)return oe;if(M<fe)return fe;var Ce=Math.floor(M*ue-fe*ue)%Math.floor(ce*ue),Ae=Math.floor(M*ue-Math.abs(Ce)),Ge=Ce===0?M:Ae/ue,Me=Math.abs(Ce/ue)<ce/2?Ge:Ge+ce,Ye=(0,t.getStepDecimals)(ce);return parseFloat(Me.toFixed(Ye))}t.normalizeValue=u;function c(M,N,fe){return(M-N)/(fe-N)}t.relativeValue=c;function h(M){return M===r.Direction.Up||M===r.Direction.Down}t.isVertical=h;function p(M,N,fe){if(N>=fe)throw new RangeError("min (".concat(N,") is equal/bigger than max (").concat(fe,")"));if(M<N)throw new RangeError("value (".concat(M,") is smaller than min (").concat(N,")"));if(M>fe)throw new RangeError("value (".concat(M,") is bigger than max (").concat(fe,")"))}t.checkBoundaries=p;function m(M,N,fe){return M<N?N:M>fe?fe:M}t.checkValuesAgainstBoundaries=m;function _(M){if(!(M.length<2)&&!M.slice(1).every(function(N,fe){return M[fe]<=N}))throw new RangeError("values={[".concat(M,"]} needs to be sorted when allowOverlap={false}"))}t.checkInitialOverlap=_;function I(M){var N=window.getComputedStyle(M);return{top:parseInt(N["margin-top"],10),bottom:parseInt(N["margin-bottom"],10),left:parseInt(N["margin-left"],10),right:parseInt(N["margin-right"],10)}}t.getMargin=I;function T(M){var N=window.getComputedStyle(M);return{top:parseInt(N["padding-top"],10)+parseInt(N["border-top-width"],10),bottom:parseInt(N["padding-bottom"],10)+parseInt(N["border-bottom-width"],10),left:parseInt(N["padding-left"],10)+parseInt(N["border-left-width"],10),right:parseInt(N["padding-right"],10)+parseInt(N["border-right-width"],10)}}t.getPaddingAndBorder=T;function D(M,N,fe){var oe=fe?-1:1;M.forEach(function(ce,de){return k(ce,oe*N[de].x,N[de].y)})}t.translateThumbs=D;function O(M,N,fe,oe){for(var ce=0,de=V(M[0],N,fe,oe),Q=1;Q<M.length;Q++){var ue=V(M[Q],N,fe,oe);ue<de&&(de=ue,ce=Q)}return ce}t.getClosestThumbIndex=O;function k(M,N,fe){M.style.transform="translate(".concat(N,"px, ").concat(fe,"px)")}t.translate=k;var P=function(M){var N=[],fe=null,oe=function(){for(var ce=[],de=0;de<arguments.length;de++)ce[de]=arguments[de];N=ce,!fe&&(fe=requestAnimationFrame(function(){fe=null,M.apply(void 0,N)}))};return oe};t.schd=P;function S(M,N,fe){var oe=M.slice(0);return oe[N]=fe,oe}t.replaceAt=S;function U(M){var N=M.values,fe=M.colors,oe=M.min,ce=M.max,de=M.direction,Q=de===void 0?r.Direction.Right:de,ue=M.rtl,me=ue===void 0?!1:ue;me&&Q===r.Direction.Right?Q=r.Direction.Left:me&&r.Direction.Left&&(Q=r.Direction.Right);var _e=N.slice(0).sort(function(Ae,Ge){return Ae-Ge}).map(function(Ae){return(Ae-oe)/(ce-oe)*100}),Ce=_e.reduce(function(Ae,Ge,Me){return"".concat(Ae,", ").concat(fe[Me]," ").concat(Ge,"%, ").concat(fe[Me+1]," ").concat(Ge,"%")},"");return"linear-gradient(".concat(Q,", ").concat(fe[0]," 0%").concat(Ce,", ").concat(fe[fe.length-1]," 100%)")}t.getTrackBackground=U;function q(){}t.voidFn=q;function $(M){throw new Error("Didn't expect to get here")}t.assertUnreachable=$;var C=function(M,N,fe,oe,ce){ce===void 0&&(ce=function(Q){return Q});var de=Math.ceil(e([M],Array.from(M.children),!0).reduce(function(Q,ue){var me=Math.ceil(ue.getBoundingClientRect().width);if(ue.innerText&&ue.innerText.includes(fe)&&ue.childElementCount===0){var _e=ue.cloneNode(!0);_e.innerHTML=ce(N.toFixed(oe)),_e.style.visibility="hidden",document.body.appendChild(_e),me=Math.ceil(_e.getBoundingClientRect().width),document.body.removeChild(_e)}return me>Q?me:Q},M.getBoundingClientRect().width));return de},R=function(M,N,fe,oe,ce,de,Q){Q===void 0&&(Q=function(_e){return _e});var ue=[],me=function(_e){var Ce=C(fe[_e],oe[_e],ce,de,Q),Ae=N[_e].x;N.forEach(function(Ge,Me){var Ye=Ge.x,mt=C(fe[Me],oe[Me],ce,de,Q);_e!==Me&&(Ae>=Ye&&Ae<=Ye+mt||Ae+Ce>=Ye&&Ae+Ce<=Ye+mt)&&(ue.includes(Me)||(ue.push(_e),ue.push(Me),ue=e(e([],ue,!0),[_e,Me],!1),me(Me)))})};return me(M),Array.from(new Set(ue.sort()))},L=function(M,N,fe,oe,ce,de){oe===void 0&&(oe=.1),ce===void 0&&(ce=" - "),de===void 0&&(de=function(Me){return Me});var Q=(0,t.getStepDecimals)(oe),ue=(0,n.useState)({}),me=ue[0],_e=ue[1],Ce=(0,n.useState)(de(N[fe].toFixed(Q))),Ae=Ce[0],Ge=Ce[1];return(0,n.useEffect)(function(){if(M){var Me=M.getThumbs();if(Me.length<1)return;var Ye={},mt=M.getOffsets(),Jt=R(fe,mt,Me,N,ce,Q,de),ve=de(N[fe].toFixed(Q));if(Jt.length){var be=Jt.reduce(function(Ve,En,At,vi){return Ve.length?e(e([],Ve,!0),[mt[vi[At]].x],!1):[mt[vi[At]].x]},[]);if(Math.min.apply(Math,be)===mt[fe].x){var xe=[];Jt.forEach(function(Ve){xe.push(N[Ve].toFixed(Q))}),ve=Array.from(new Set(xe.sort(function(Ve,En){return parseFloat(Ve)-parseFloat(En)}))).map(de).join(ce);var ke=Math.min.apply(Math,be),nt=Math.max.apply(Math,be),lt=Me[Jt[be.indexOf(nt)]].getBoundingClientRect().width;Ye.left="".concat(Math.abs(ke-(nt+lt))/2,"px"),Ye.transform="translate(-50%, 0)"}else Ye.visibility="hidden"}Ge(ve),_e(Ye)}},[M,N]),[Ae,me]};t.useThumbOverlap=L;function V(M,N,fe,oe){var ce=M.getBoundingClientRect(),de=ce.left,Q=ce.top,ue=ce.width,me=ce.height;return h(oe)?Math.abs(fe-(Q+me/2)):Math.abs(N-(de+ue/2))}var j=function(){var M,N=((M=navigator.userAgentData)===null||M===void 0?void 0:M.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(N)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};t.isIOS=j})(FS);var oJ=gn&&gn.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aJ=gn&&gn.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),uJ=gn&&gn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lJ=gn&&gn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&aJ(e,t,n);return uJ(e,t),e},pb=gn&&gn.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(VS,"__esModule",{value:!0});var Ym=lJ(z),it=FS,pn=sd,cJ=["ArrowRight","ArrowUp","k","PageUp"],dJ=["ArrowLeft","ArrowDown","j","PageDown"],hJ=function(t){oJ(e,t);function e(n){var r=t.call(this,n)||this;if(r.trackRef=Ym.createRef(),r.thumbRefs=[],r.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(r.props.values.length).fill(0).map(function(i,s){return s}),isChanged:!1,markOffsets:[]},r.getOffsets=function(){var i=r.props,s=i.direction,o=i.values,u=i.min,c=i.max,h=r.trackRef.current;if(!h)return console.warn("No track element found."),[];var p=h.getBoundingClientRect(),m=(0,it.getPaddingAndBorder)(h);return r.getThumbs().map(function(_,I){var T={x:0,y:0},D=_.getBoundingClientRect(),O=(0,it.getMargin)(_);switch(s){case pn.Direction.Right:return T.x=(O.left+m.left)*-1,T.y=((D.height-p.height)/2+m.top)*-1,T.x+=p.width*(0,it.relativeValue)(o[I],u,c)-D.width/2,T;case pn.Direction.Left:return T.x=(O.right+m.right)*-1,T.y=((D.height-p.height)/2+m.top)*-1,T.x+=p.width-p.width*(0,it.relativeValue)(o[I],u,c)-D.width/2,T;case pn.Direction.Up:return T.x=((D.width-p.width)/2+O.left+m.left)*-1,T.y=-m.left,T.y+=p.height-p.height*(0,it.relativeValue)(o[I],u,c)-D.height/2,T;case pn.Direction.Down:return T.x=((D.width-p.width)/2+O.left+m.left)*-1,T.y=-m.left,T.y+=p.height*(0,it.relativeValue)(o[I],u,c)-D.height/2,T;default:return(0,it.assertUnreachable)(s)}})},r.getThumbs=function(){return r.trackRef&&r.trackRef.current?Array.from(r.trackRef.current.children).filter(function(i){return i.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},r.getTargetIndex=function(i){return r.getThumbs().findIndex(function(s){return s===i.target||s.contains(i.target)})},r.addTouchEvents=function(i){document.addEventListener("touchmove",r.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",r.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",r.schdOnEnd,{passive:!1})},r.addMouseEvents=function(i){document.addEventListener("mousemove",r.schdOnMouseMove),document.addEventListener("mouseup",r.schdOnEnd)},r.onMouseDownTrack=function(i){var s;if(!(i.button!==0||(0,it.isIOS)()))if(i.persist(),i.preventDefault(),r.addMouseEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(u){var c;return(c=u.current)===null||c===void 0?void 0:c.contains(i.target)}))return;r.setState({draggedTrackPos:[i.clientX,i.clientY]},function(){return r.onMove(i.clientX,i.clientY)})}else{var o=(0,it.getClosestThumbIndex)(r.thumbRefs.map(function(u){return u.current}),i.clientX,i.clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.clientX,i.clientY)})}},r.onResize=function(){(0,it.translateThumbs)(r.getThumbs(),r.getOffsets(),r.props.rtl),r.calculateMarkOffsets()},r.onTouchStartTrack=function(i){var s;if(i.persist(),r.addTouchEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(u){var c;return(c=u.current)===null||c===void 0?void 0:c.contains(i.target)}))return;r.setState({draggedTrackPos:[i.touches[0].clientX,i.touches[0].clientY]},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}else{var o=(0,it.getClosestThumbIndex)(r.thumbRefs.map(function(u){return u.current}),i.touches[0].clientX,i.touches[0].clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}},r.onMouseOrTouchStart=function(i){if(!r.props.disabled){var s=(0,it.isTouchEvent)(i);if(!(!s&&i.button!==0)){var o=r.getTargetIndex(i);o!==-1&&(s?r.addTouchEvents(i):r.addMouseEvents(i),r.setState({draggedThumbIndex:o,thumbZIndexes:r.state.thumbZIndexes.map(function(u,c){return c===o?Math.max.apply(Math,r.state.thumbZIndexes):u<=r.state.thumbZIndexes[o]?u:u-1})}))}}},r.onMouseMove=function(i){i.preventDefault(),r.onMove(i.clientX,i.clientY)},r.onTouchMove=function(i){i.preventDefault(),r.onMove(i.touches[0].clientX,i.touches[0].clientY)},r.onKeyDown=function(i){var s=r.props,o=s.values,u=s.onChange,c=s.step,h=s.rtl,p=s.direction,m=r.state.isChanged,_=r.getTargetIndex(i.nativeEvent),I=h||p===pn.Direction.Left||p===pn.Direction.Down?-1:1;_!==-1&&(cJ.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:_,isChanged:!0}),u((0,it.replaceAt)(o,_,r.normalizeValue(o[_]+I*(i.key==="PageUp"?c*10:c),_)))):dJ.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:_,isChanged:!0}),u((0,it.replaceAt)(o,_,r.normalizeValue(o[_]-I*(i.key==="PageDown"?c*10:c),_)))):i.key==="Tab"?r.setState({draggedThumbIndex:-1},function(){m&&r.fireOnFinalChange()}):m&&r.fireOnFinalChange())},r.onKeyUp=function(i){var s=r.state.isChanged;r.setState({draggedThumbIndex:-1},function(){s&&r.fireOnFinalChange()})},r.onMove=function(i,s){var o=r.state,u=o.draggedThumbIndex,c=o.draggedTrackPos,h=r.props,p=h.direction,m=h.min,_=h.max,I=h.onChange,T=h.values,D=h.step,O=h.rtl;if(u===-1&&c[0]===-1&&c[1]===-1)return null;var k=r.trackRef.current;if(!k)return null;var P=k.getBoundingClientRect(),S=(0,it.isVertical)(p)?P.height:P.width;if(c[0]!==-1&&c[1]!==-1){var U=i-c[0],q=s-c[1],$=0;switch(p){case pn.Direction.Right:case pn.Direction.Left:$=U/S*(_-m);break;case pn.Direction.Down:case pn.Direction.Up:$=q/S*(_-m);break;default:(0,it.assertUnreachable)(p)}if(O&&($*=-1),Math.abs($)>=D/2){for(var C=0;C<r.thumbRefs.length;C++){if(T[C]===_&&Math.sign($)===1||T[C]===m&&Math.sign($)===-1)return;var R=T[C]+$;R>_?$=_-T[C]:R<m&&($=m-T[C])}for(var L=T.slice(0),C=0;C<r.thumbRefs.length;C++)L=(0,it.replaceAt)(L,C,r.normalizeValue(T[C]+$,C));r.setState({draggedTrackPos:[i,s]}),I(L)}}else{var V=0;switch(p){case pn.Direction.Right:V=(i-P.left)/S*(_-m)+m;break;case pn.Direction.Left:V=(S-(i-P.left))/S*(_-m)+m;break;case pn.Direction.Down:V=(s-P.top)/S*(_-m)+m;break;case pn.Direction.Up:V=(S-(s-P.top))/S*(_-m)+m;break;default:(0,it.assertUnreachable)(p)}O&&(V=_+m-V),Math.abs(T[u]-V)>=D/2&&I((0,it.replaceAt)(T,u,r.normalizeValue(V,u)))}},r.normalizeValue=function(i,s){var o=r.props,u=o.min,c=o.max,h=o.step,p=o.allowOverlap,m=o.values;return(0,it.normalizeValue)(i,s,u,c,h,p,m)},r.onEnd=function(i){if(i.preventDefault(),document.removeEventListener("mousemove",r.schdOnMouseMove),document.removeEventListener("touchmove",r.schdOnTouchMove),document.removeEventListener("mouseup",r.schdOnEnd),document.removeEventListener("touchend",r.schdOnEnd),document.removeEventListener("touchcancel",r.schdOnEnd),r.state.draggedThumbIndex===-1&&r.state.draggedTrackPos[0]===-1&&r.state.draggedTrackPos[1]===-1)return null;r.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){r.fireOnFinalChange()})},r.fireOnFinalChange=function(){r.setState({isChanged:!1});var i=r.props,s=i.onFinalChange,o=i.values;s&&s(o)},r.updateMarkRefs=function(i){if(!i.renderMark){r.numOfMarks=void 0,r.markRefs=void 0;return}r.numOfMarks=(i.max-i.min)/r.props.step,r.markRefs=[];for(var s=0;s<r.numOfMarks+1;s++)r.markRefs[s]=Ym.createRef()},r.calculateMarkOffsets=function(){if(!(!r.props.renderMark||!r.trackRef||!r.numOfMarks||!r.markRefs||r.trackRef.current===null)){for(var i=window.getComputedStyle(r.trackRef.current),s=parseInt(i.width,10),o=parseInt(i.height,10),u=parseInt(i.paddingLeft,10),c=parseInt(i.paddingTop,10),h=[],p=0;p<r.numOfMarks+1;p++){var m=9999,_=9999;if(r.markRefs[p].current){var I=r.markRefs[p].current.getBoundingClientRect();m=I.height,_=I.width}r.props.direction===pn.Direction.Left||r.props.direction===pn.Direction.Right?h.push([Math.round(s/r.numOfMarks*p+u-_/2),-Math.round((m-o)/2)]):h.push([Math.round(o/r.numOfMarks*p+c-m/2),-Math.round((_-s)/2)])}r.setState({markOffsets:h})}},n.step===0)throw new Error('"step" property should be a positive number');return r.schdOnMouseMove=(0,it.schd)(r.onMouseMove),r.schdOnTouchMove=(0,it.schd)(r.onTouchMove),r.schdOnEnd=(0,it.schd)(r.onEnd),r.thumbRefs=n.values.map(function(){return Ym.createRef()}),r.updateMarkRefs(n),r}return e.prototype.componentDidMount=function(){var n=this,r=this.props,i=r.values,s=r.min,o=r.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",n.onResize)},unobserve:function(){return window.removeEventListener("resize",n.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,it.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(u){return(0,it.checkBoundaries)(u,n.props.min,n.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,it.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),i.forEach(function(u){(0,it.isStepDivisible)(s,u,o)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(n,r){var i=this.props,s=i.max,o=i.min,u=i.step,c=i.values,h=i.rtl;(n.max!==s||n.min!==o||n.step!==u)&&this.updateMarkRefs(this.props),(0,it.translateThumbs)(this.getThumbs(),this.getOffsets(),h),(n.max!==s||n.min!==o||n.step!==u||r.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),c.forEach(function(p){(0,it.isStepDivisible)(o,p,u)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var n={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,n),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var n=this,r=this.props,i=r.label,s=r.labelledBy,o=r.renderTrack,u=r.renderThumb,c=r.renderMark,h=c===void 0?function(){return null}:c,p=r.values,m=r.min,_=r.max,I=r.allowOverlap,T=r.disabled,D=this.state,O=D.draggedThumbIndex,k=D.thumbZIndexes,P=D.markOffsets;return o({props:{style:{transform:"scale(1)",cursor:O>-1?"grabbing":this.props.draggableTrack?(0,it.isVertical)(this.props.direction)?"ns-resize":"ew-resize":p.length===1&&!T?"pointer":"inherit"},onMouseDown:T?it.voidFn:this.onMouseDownTrack,onTouchStart:T?it.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:T,children:pb(pb([],P.map(function(S,U,q){return h({props:{style:n.props.direction===pn.Direction.Left||n.props.direction===pn.Direction.Right?{position:"absolute",left:"".concat(S[0],"px"),marginTop:"".concat(S[1],"px")}:{position:"absolute",top:"".concat(S[0],"px"),marginLeft:"".concat(S[1],"px")},key:"mark".concat(U),ref:n.markRefs[U]},index:U})}),!0),p.map(function(S,U){var q=n.state.draggedThumbIndex===U;return u({index:U,value:S,isDragged:q,props:{style:{position:"absolute",zIndex:k[U],cursor:T?"inherit":q?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:U,tabIndex:T?void 0:0,"aria-valuemax":I?_:p[U+1]||_,"aria-valuemin":I?m:p[U-1]||m,"aria-valuenow":S,draggable:!1,ref:n.thumbRefs[U],"aria-label":i,"aria-labelledby":s,role:"slider",onKeyDown:T?it.voidFn:n.onKeyDown,onKeyUp:T?it.voidFn:n.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:pn.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(Ym.Component);VS.default=hJ;(function(t){var e=gn&&gn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesAgainstBoundaries=t.relativeValue=t.useThumbOverlap=t.Direction=t.getTrackBackground=t.Range=void 0;var n=e(VS);t.Range=n.default;var r=FS;Object.defineProperty(t,"getTrackBackground",{enumerable:!0,get:function(){return r.getTrackBackground}}),Object.defineProperty(t,"useThumbOverlap",{enumerable:!0,get:function(){return r.useThumbOverlap}}),Object.defineProperty(t,"relativeValue",{enumerable:!0,get:function(){return r.relativeValue}}),Object.defineProperty(t,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return r.checkValuesAgainstBoundaries}});var i=sd;Object.defineProperty(t,"Direction",{enumerable:!0,get:function(){return i.Direction}})})(kM);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ=2e3;async function pJ(t,e,n){var r;const{BuildInfo:i}=Mu();Mi(e.sessionId,"AuthEvent did not contain a session ID");const s=await vJ(e.sessionId),o={};return zf()?o.ibi=i.packageName:Bf()?o.apn=i.packageName:xn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,sE(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function mJ(t){const{BuildInfo:e}=Mu(),n={};zf()?n.iosBundleId=e.packageName:Bf()?n.androidPackageName=e.packageName:xn(t,"operation-not-supported-in-this-environment"),await xO(t,n)}function gJ(t){const{cordova:e}=Mu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,RW()?"_blank":"_system","location=yes"),n(i)})})}async function yJ(t,e,n){const{cordova:r}=Mu();let i=()=>{};try{await new Promise((s,o)=>{let u=null;function c(){var m;s();const _=(m=r.plugins.browsertab)===null||m===void 0?void 0:m.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){u||(u=window.setTimeout(()=>{o(vn(t,"redirect-cancelled-by-user"))},fJ))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),Bf()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{i()}}function _J(t){var e,n,r,i,s,o,u,c,h,p;const m=Mu();le(typeof((e=m==null?void 0:m.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof((n=m==null?void 0:m.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le(typeof((s=(i=(r=m==null?void 0:m.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((c=(u=(o=m==null?void 0:m.cordova)===null||o===void 0?void 0:o.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((p=(h=m==null?void 0:m.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function vJ(t){const e=wJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function wJ(t){if(Mi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EJ=20;class TJ extends CO{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function IJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:AJ(),postBody:null,tenantId:t.tenantId,error:vn(t,"no-auth-event")}}function SJ(t,e){return ME()._set(VE(t),e)}async function mb(t){const e=await ME()._get(VE(t));return e&&await ME()._remove(VE(t)),e}function RJ(t,e){var n,r;const i=CJ(e);if(i.includes("/__/auth/callback")){const s=Tg(i),o=s.firebaseError?PJ(decodeURIComponent(s.firebaseError)):null,u=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],c=u?vn(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function AJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<EJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function ME(){return Ur(e_)}function VE(t){return mu("authEvent",t.config.apiKey,t.name)}function PJ(t){try{return JSON.parse(t)}catch{return null}}function CJ(t){const e=Tg(t),n=e.link?decodeURIComponent(e.link):void 0,r=Tg(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Tg(i).link||i||r||n||t}function Tg(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ec(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=500;class xJ{constructor(){this._redirectPersistence=na,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=i_,this._overrideRedirectResult=TI}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new TJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){xn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){_J(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),kq(),await this._originValidation(e);const o=IJ(e,r,i);await SJ(e,o);const u=await pJ(e,o,n),c=await gJ(u);return yJ(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Mu(),o=setTimeout(async()=>{await mb(e),n.onEvent(gb())},bJ),u=async p=>{clearTimeout(o);const m=await mb(e);let _=null;m&&(p!=null&&p.url)&&(_=RJ(m,p.url)),n.onEvent(_||gb())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,u);const c=i,h=`${s.packageName.toLowerCase()}://`;Mu().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(h)&&u({url:p}),typeof c=="function")try{c(p)}catch(m){console.error(m)}}}}const kJ=xJ;function gb(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(t,e){Kt(t)._logFramework(e)}var OJ="@firebase/auth-compat",DJ="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ=1e3;function Fh(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function MJ(){return Fh()==="http:"||Fh()==="https:"}function NM(t=zt()){return!!((Fh()==="file:"||Fh()==="ionic:"||Fh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function VJ(){return eI()||ZT()}function FJ(){return PN()&&(document==null?void 0:document.documentMode)===11}function UJ(t=zt()){return/Edge\/\d+/.test(t)}function jJ(t=zt()){return FJ()||UJ(t)}function OM(){try{const t=self.localStorage,e=qf();if(t)return t.setItem(e,"1"),t.removeItem(e),jJ()?sf():!0}catch{return US()&&sf()}return!1}function US(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hw(){return(MJ()||AN()||NM())&&!VJ()&&OM()&&!US()}function DM(){return NM()&&typeof document<"u"}async function BJ(){return DM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},LJ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function zJ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr={LOCAL:"local",NONE:"none",SESSION:"session"},oh=le,LM="persistence";function $J(t,e){if(oh(Object.values(Vr).includes(e),t,"invalid-persistence-type"),eI()){oh(e!==Vr.SESSION,t,"unsupported-persistence-type");return}if(ZT()){oh(e===Vr.NONE,t,"unsupported-persistence-type");return}if(US()){oh(e===Vr.NONE||e===Vr.LOCAL&&sf(),t,"unsupported-persistence-type");return}oh(e===Vr.NONE||OM(),t,"unsupported-persistence-type")}async function FE(t){await t._initializationPromise;const e=MM(),n=mu(LM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function WJ(t,e){const n=MM();if(!n)return[];const r=mu(LM,t,e);switch(n.getItem(r)){case Vr.NONE:return[Rc];case Vr.LOCAL:return[Pc,na];case Vr.SESSION:return[na];default:return[]}}function MM(){var t;try{return((t=zJ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=le;class Uo{constructor(){this.browserResolver=Ur(kO),this.cordovaResolver=Ur(kJ),this.underlyingResolver=null,this._redirectPersistence=na,this._completeRedirectFn=i_,this._overrideRedirectResult=TI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return DM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qJ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await BJ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){return t.unwrap()}function GJ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KJ(t){return FM(t)}function HJ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new QJ(t,j5(t,e))}else if(r){const i=FM(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function FM(t){const{_tokenResponse:e}=t instanceof ur?t.customData:t;if(!e)return null;if(!(t instanceof ur)&&"temporaryProof"in e&&"phoneNumber"in e)return Pu.credentialFromResult(t);const n=e.providerId;if(!n||n===eh.PASSWORD)return null;let r;switch(n){case eh.GOOGLE:r=ui;break;case eh.FACEBOOK:r=Yi;break;case eh.GITHUB:r=Ji;break;case eh.TWITTER:r=Xi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:u,nonce:c}=e;return!s&&!o&&!i&&!u?null:u?n.startsWith("saml.")?Ac._create(n,u):ls._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:i,accessToken:s}):new cc(n).credential({idToken:i,accessToken:s,rawNonce:c})}return t instanceof ur?r.credentialFromError(t):r.credentialFromResult(t)}function Er(t,e){return e.catch(n=>{throw n instanceof ur&&HJ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:KJ(n),additionalUserInfo:M5(n),user:Us.getOrCreate(i)}})}async function UE(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Er(t,n.confirm(r))}}class QJ{constructor(e,n){this.resolver=n,this.auth=GJ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Er(VM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this._delegate=e,this.multiFactor=W5(e)}static getOrCreate(e){return Us.USER_MAP.has(e)||Us.USER_MAP.set(e,new Us(e)),Us.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Er(this.auth,hO(this._delegate,e))}async linkWithPhoneNumber(e,n){return UE(this.auth,vq(this._delegate,e,n))}async linkWithPopup(e){return Er(this.auth,Pq(this._delegate,e,Uo))}async linkWithRedirect(e){return await FE(Kt(this.auth)),Mq(this._delegate,e,Uo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Er(this.auth,fO(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return UE(this.auth,wq(this._delegate,e,n))}reauthenticateWithPopup(e){return Er(this.auth,Aq(this._delegate,e,Uo))}async reauthenticateWithRedirect(e){return await FE(Kt(this.auth)),Dq(this._delegate,e,Uo)}sendEmailVerification(e){return R5(this._delegate,e)}async unlink(e){return await d5(this._delegate,e),this}updateEmail(e){return b5(this._delegate,e)}updatePassword(e){return x5(this._delegate,e)}updatePhoneNumber(e){return Eq(this._delegate,e)}updateProfile(e){return C5(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return A5(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Us.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=le;class jE{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ah(r,"invalid-api-key",{appName:e.name}),ah(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Uo:void 0;this._delegate=n.initialize({options:{persistence:YJ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(iW),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){iO(this._delegate,e,n)}applyActionCode(e){return g5(this._delegate,e)}checkActionCode(e){return pO(this._delegate,e)}confirmPasswordReset(e,n){return m5(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Er(this._delegate,_5(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return S5(this._delegate,e)}isSignInWithEmailLink(e){return E5(this._delegate,e)}async getRedirectResult(){ah(Hw(),this._delegate,"operation-not-supported-in-this-environment");const e=await Fq(this._delegate,Uo);return e?Er(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){NJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=yb(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=yb(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return w5(this._delegate,e,n)}sendPasswordResetEmail(e,n){return p5(this._delegate,e,n||void 0)}async setPersistence(e){$J(this._delegate,e);let n;switch(e){case Vr.SESSION:n=na;break;case Vr.LOCAL:n=await Ur(Pc)._isAvailable()?Pc:e_;break;case Vr.NONE:n=Rc;break;default:return xn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Er(this._delegate,c5(this._delegate))}signInWithCredential(e){return Er(this._delegate,Xy(this._delegate,e))}signInWithCustomToken(e){return Er(this._delegate,f5(this._delegate,e))}signInWithEmailAndPassword(e,n){return Er(this._delegate,v5(this._delegate,e,n))}signInWithEmailLink(e,n){return Er(this._delegate,T5(this._delegate,e,n))}signInWithPhoneNumber(e,n){return UE(this._delegate,_q(this._delegate,e,n))}async signInWithPopup(e){return ah(Hw(),this._delegate,"operation-not-supported-in-this-environment"),Er(this._delegate,wI(this._delegate,e,Uo))}async signInWithRedirect(e){return ah(Hw(),this._delegate,"operation-not-supported-in-this-environment"),await FE(this._delegate),Nq(this._delegate,e,Uo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return y5(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}jE.Persistence=Vr;function yb(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Us.getOrCreate(o)),error:e,complete:n}}function YJ(t,e){const n=WJ(t,e);if(typeof self<"u"&&!n.includes(Pc)&&n.push(Pc),typeof window<"u")for(const r of[e_,na])n.includes(r)||n.push(r);return n.includes(Rc)||n.push(Rc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.providerId="phone",this._delegate=new Pu(VM(_i.auth()))}static credential(e,n){return Pu.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}jS.PHONE_SIGN_IN_METHOD=Pu.PHONE_SIGN_IN_METHOD;jS.PROVIDER_ID=Pu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JJ=le;class XJ{constructor(e,n,r=_i.app()){var i;JJ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new gq(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ="auth-compat";function eX(t){t.INTERNAL.registerComponent(new us(ZJ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new jE(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Cl.EMAIL_SIGNIN,PASSWORD_RESET:Cl.PASSWORD_RESET,RECOVER_EMAIL:Cl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Cl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Cl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Cl.VERIFY_EMAIL}},EmailAuthProvider:ya,FacebookAuthProvider:Yi,GithubAuthProvider:Ji,GoogleAuthProvider:ui,OAuthProvider:cc,SAMLAuthProvider:ny,PhoneAuthProvider:jS,PhoneMultiFactorGenerator:NO,RecaptchaVerifier:XJ,TwitterAuthProvider:Xi,Auth:jE,AuthCredential:Hc,Error:ur}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(OJ,DJ)}eX(_i);const tX="@firebase/firestore-compat",nX="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function vb(){if(!iK())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let UM=class BE{constructor(e){this._delegate=e}static fromBase64String(e){return vb(),new BE(hs.fromBase64String(e))}static fromUint8Array(e){return _b(),new BE(hs.fromUint8Array(e))}toBase64(){return vb(),this._delegate.toBase64()}toUint8Array(){return _b(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){return rX(t,["next","error","complete"])}function rX(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iX{enableIndexedDbPersistence(e,n){return V8(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return F8(e._delegate)}clearIndexedDbPersistence(e){return U8(e._delegate)}}class jM{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){kL(this._delegate,e,n,r)}enableNetwork(){return B8(this._delegate)}disableNetwork(){return z8(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return j8(this._delegate)}onSnapshotsInSync(e){return c7(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jc(this,_u(this._delegate,e))}catch(n){throw or(n,"collection()","Firestore.collection()")}}doc(e){try{return new di(this,la(this._delegate,e))}catch(n){throw or(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sr(this,O8(this._delegate,e))}catch(n){throw or(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return p7(this._delegate,n=>e(new BM(this,n)))}batch(){return Xn(this._delegate),new zM(new h7(this._delegate,e=>op(this._delegate,e)))}loadBundle(e){return $8(this._delegate,e)}namedQuery(e){return W8(this._delegate,e).then(n=>n?new sr(this,n):null)}}class k_ extends IS{constructor(e){super(),this.firestore=e}convertBytes(e){return new UM(new hs(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return di.forKey(n,this.firestore,null)}}function sX(t){SG(t)}class BM{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new k_(e)}get(e){const n=du(e);return this._delegate.get(n).then(r=>new Pf(this._firestore,new Qs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=du(e);return r?(BS("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=du(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=du(e);return this._delegate.delete(n),this}}class zM{constructor(e){this._delegate=e}set(e,n,r){const i=du(e);return r?(BS("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=du(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=du(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Vu{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Vh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cf(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Vu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Vu(e,new k_(e),n),i.set(n,s)),s}}Vu.INSTANCES=new WeakMap;class di{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new k_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new di(n,new jt(n._delegate,r,new pe(e)))}static forKey(e,n,r){return new di(n,new jt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new jc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jc(this.firestore,_u(this._delegate,e))}catch(n){throw or(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof jt?LL(this._delegate,e):!1}set(e,n){n=BS("DocumentReference.set",n);try{return n?qC(this._delegate,e,n):qC(this._delegate,e)}catch(r){throw or(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?CE(this._delegate,e):CE(this._delegate,e,n,...r)}catch(i){throw or(i,"updateDoc()","DocumentReference.update()")}}delete(){return Eg(this._delegate)}onSnapshot(...e){const n=$M(e),r=WM(e,i=>new Pf(this.firestore,new Qs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sp(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=o7(this._delegate):(e==null?void 0:e.source)==="server"?n=a7(this._delegate):n=s7(this._delegate),n.then(r=>new Pf(this.firestore,new Qs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new di(this.firestore,e?this._delegate.withConverter(Vu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function or(t,e,n){return t.message=t.message.replace(e,n),t}function $M(t){for(const e of t)if(typeof e=="object"&&!zE(e))return e;return{}}function WM(t,e){var n,r;let i;return zE(t[0])?i=t[0]:zE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Pf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new di(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return YL(this._delegate,e._delegate)}}class Cf extends Pf{data(e){const n=this._delegate.data(e);return this._delegate._converter||RG(n!==void 0),n}}class sr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new k_(e)}where(e,n,r){try{return new sr(this.firestore,xs(this._delegate,KL(e,n,r)))}catch(i){throw or(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new sr(this.firestore,xs(this._delegate,Y8(e,n)))}catch(r){throw or(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sr(this.firestore,xs(this._delegate,J8(e)))}catch(n){throw or(n,"limit()","Query.limit()")}}limitToLast(e){try{return new sr(this.firestore,xs(this._delegate,X8(e)))}catch(n){throw or(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sr(this.firestore,xs(this._delegate,Z8(...e)))}catch(n){throw or(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sr(this.firestore,xs(this._delegate,e7(...e)))}catch(n){throw or(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sr(this.firestore,xs(this._delegate,t7(...e)))}catch(n){throw or(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sr(this.firestore,xs(this._delegate,n7(...e)))}catch(n){throw or(n,"endAt()","Query.endAt()")}}isEqual(e){return ML(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=u7(this._delegate):(e==null?void 0:e.source)==="server"?n=l7(this._delegate):n=JL(this._delegate),n.then(r=>new $E(this.firestore,new da(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=$M(e),r=WM(e,i=>new $E(this.firestore,new da(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sp(this._delegate,n,r)}withConverter(e){return new sr(this.firestore,e?this._delegate.withConverter(Vu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class oX{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Cf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $E{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new sr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new oX(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Cf(this._firestore,r))})}isEqual(e){return YL(this._delegate,e._delegate)}}class jc extends sr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new di(this.firestore,e):null}doc(e){try{return e===void 0?new di(this.firestore,la(this._delegate)):new di(this.firestore,la(this._delegate,e))}catch(n){throw or(n,"doc()","CollectionReference.doc()")}}add(e){return SS(this._delegate,e).then(n=>new di(this.firestore,n))}isEqual(e){return LL(this._delegate,e._delegate)}withConverter(e){return new jc(this.firestore,e?this._delegate.withConverter(Vu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function du(t){return ut(t,jt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(...e){this._delegate=new ca(...e)}static documentId(){return new zS(Dt.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof ca?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e){this._delegate=e}static serverTimestamp(){const e=g7();return e._methodName="FieldValue.serverTimestamp",new ru(e)}static delete(){const e=m7();return e._methodName="FieldValue.delete",new ru(e)}static arrayUnion(...e){const n=y7(...e);return n._methodName="FieldValue.arrayUnion",new ru(n)}static arrayRemove(...e){const n=_7(...e);return n._methodName="FieldValue.arrayRemove",new ru(n)}static increment(e){const n=v7(e);return n._methodName="FieldValue.increment",new ru(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX={Firestore:jM,GeoPoint:__,Timestamp:Mt,Blob:UM,Transaction:BM,WriteBatch:zM,DocumentReference:di,DocumentSnapshot:Pf,Query:sr,QueryDocumentSnapshot:Cf,QuerySnapshot:$E,CollectionReference:jc,FieldPath:zS,FieldValue:ru,setLogLevel:sX,CACHE_SIZE_UNLIMITED:L8};function uX(t,e){t.INTERNAL.registerComponent(new us("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},aX)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lX(t){uX(t,(e,n)=>new jM(e,n,new iX)),t.registerVersion(tX,nX)}lX(_i);function Dn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var cX=typeof Symbol=="function"&&Symbol.observable||"@@observable",wb=cX,Qw=()=>Math.random().toString(36).substring(7).split("").join("."),dX={INIT:`@@redux/INIT${Qw()}`,REPLACE:`@@redux/REPLACE${Qw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qw()}`},wy=dX;function $S(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function qM(t,e,n){if(typeof t!="function")throw new Error(Dn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Dn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Dn(1));return n(qM)(t,e)}let r=t,i=e,s=new Map,o=s,u=0,c=!1;function h(){o===s&&(o=new Map,s.forEach((O,k)=>{o.set(k,O)}))}function p(){if(c)throw new Error(Dn(3));return i}function m(O){if(typeof O!="function")throw new Error(Dn(4));if(c)throw new Error(Dn(5));let k=!0;h();const P=u++;return o.set(P,O),function(){if(k){if(c)throw new Error(Dn(6));k=!1,h(),o.delete(P),s=null}}}function _(O){if(!$S(O))throw new Error(Dn(7));if(typeof O.type>"u")throw new Error(Dn(8));if(typeof O.type!="string")throw new Error(Dn(17));if(c)throw new Error(Dn(9));try{c=!0,i=r(i,O)}finally{c=!1}return(s=o).forEach(P=>{P()}),O}function I(O){if(typeof O!="function")throw new Error(Dn(10));r=O,_({type:wy.REPLACE})}function T(){const O=m;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Dn(11));function P(){const U=k;U.next&&U.next(p())}return P(),{unsubscribe:O(P)}},[wb](){return this}}}return _({type:wy.INIT}),{dispatch:_,subscribe:m,getState:p,replaceReducer:I,[wb]:T}}function hX(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:wy.INIT})>"u")throw new Error(Dn(12));if(typeof n(void 0,{type:wy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Dn(13))})}function fX(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{hX(n)}catch(s){i=s}return function(o={},u){if(i)throw i;let c=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],_=n[m],I=o[m],T=_(I,u);if(typeof T>"u")throw u&&u.type,new Error(Dn(14));h[m]=T,c=c||T!==I}return c=c||r.length!==Object.keys(o).length,c?h:o}}function Ey(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function pX(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Dn(15))};const o={getState:i.getState,dispatch:(c,...h)=>s(c,...h)},u=t.map(c=>c(o));return s=Ey(...u)(i.dispatch),{...i,dispatch:s}}}function mX(t){return $S(t)&&"type"in t&&typeof t.type=="string"}var GM=Symbol.for("immer-nothing"),Eb=Symbol.for("immer-draftable"),qr=Symbol.for("immer-state");function ki(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bc=Object.getPrototypeOf;function Fu(t){return!!t&&!!t[qr]}function Js(t){var e;return t?KM(t)||Array.isArray(t)||!!t[Eb]||!!((e=t.constructor)!=null&&e[Eb])||O_(t)||D_(t):!1}var gX=Object.prototype.constructor.toString();function KM(t){if(!t||typeof t!="object")return!1;const e=Bc(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===gX}function Ty(t,e){N_(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function N_(t){const e=t[qr];return e?e.type_:Array.isArray(t)?1:O_(t)?2:D_(t)?3:0}function WE(t,e){return N_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function HM(t,e,n){const r=N_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function yX(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function O_(t){return t instanceof Map}function D_(t){return t instanceof Set}function Ja(t){return t.copy_||t.base_}function qE(t,e){if(O_(t))return new Map(t);if(D_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=KM(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[qr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],u=r[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[o]})}return Object.create(Bc(t),r)}else{const r=Bc(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function WS(t,e=!1){return L_(t)||Fu(t)||!Js(t)||(N_(t)>1&&(t.set=t.add=t.clear=t.delete=_X),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>WS(r,!0))),t}function _X(){ki(2)}function L_(t){return Object.isFrozen(t)}var vX={};function Uu(t){const e=vX[t];return e||ki(0,t),e}var bf;function QM(){return bf}function wX(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Tb(t,e){e&&(Uu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function GE(t){KE(t),t.drafts_.forEach(EX),t.drafts_=null}function KE(t){t===bf&&(bf=t.parent_)}function Ib(t){return bf=wX(bf,t)}function EX(t){const e=t[qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Sb(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[qr].modified_&&(GE(e),ki(4)),Js(t)&&(t=Iy(e,t),e.parent_||Sy(e,t)),e.patches_&&Uu("Patches").generateReplacementPatches_(n[qr].base_,t,e.patches_,e.inversePatches_)):t=Iy(e,n,[]),GE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==GM?t:void 0}function Iy(t,e,n){if(L_(e))return e;const r=e[qr];if(!r)return Ty(e,(i,s)=>Rb(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Sy(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Ty(s,(u,c)=>Rb(t,r,i,u,c,n,o)),Sy(t,i,!1),n&&t.patches_&&Uu("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Rb(t,e,n,r,i,s,o){if(Fu(i)){const u=s&&e&&e.type_!==3&&!WE(e.assigned_,r)?s.concat(r):void 0,c=Iy(t,i,u);if(HM(n,r,c),Fu(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Js(i)&&!L_(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Iy(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Sy(t,i)}}function Sy(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&WS(e,n)}function TX(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:QM(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=qS;n&&(i=[r],s=xf);const{revoke:o,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=o,u}var qS={get(t,e){if(e===qr)return t;const n=Ja(t);if(!WE(n,e))return IX(t,n,e);const r=n[e];return t.finalized_||!Js(r)?r:r===Yw(t.base_,e)?(Jw(t),t.copy_[e]=QE(r,t)):r},has(t,e){return e in Ja(t)},ownKeys(t){return Reflect.ownKeys(Ja(t))},set(t,e,n){const r=YM(Ja(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Yw(Ja(t),e),s=i==null?void 0:i[qr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(yX(n,i)&&(n!==void 0||WE(t.base_,e)))return!0;Jw(t),HE(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Yw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Jw(t),HE(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ja(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ki(11)},getPrototypeOf(t){return Bc(t.base_)},setPrototypeOf(){ki(12)}},xf={};Ty(qS,(t,e)=>{xf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});xf.deleteProperty=function(t,e){return xf.set.call(this,t,e,void 0)};xf.set=function(t,e,n){return qS.set.call(this,t[0],e,n,t[0])};function Yw(t,e){const n=t[qr];return(n?Ja(n):t)[e]}function IX(t,e,n){var i;const r=YM(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function YM(t,e){if(!(e in t))return;let n=Bc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Bc(n)}}function HE(t){t.modified_||(t.modified_=!0,t.parent_&&HE(t.parent_))}function Jw(t){t.copy_||(t.copy_=qE(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var SX=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(c=s,...h){return o.produce(c,p=>n.call(this,p,...h))}}typeof n!="function"&&ki(6),r!==void 0&&typeof r!="function"&&ki(7);let i;if(Js(e)){const s=Ib(this),o=QE(e,void 0);let u=!0;try{i=n(o),u=!1}finally{u?GE(s):KE(s)}return Tb(s,r),Sb(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===GM&&(i=void 0),this.autoFreeze_&&WS(i,!0),r){const s=[],o=[];Uu("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else ki(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...u)=>this.produceWithPatches(o,c=>e(c,...u));let r,i;return[this.produce(e,n,(o,u)=>{r=o,i=u}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Js(t)||ki(8),Fu(t)&&(t=RX(t));const e=Ib(this),n=QE(t,void 0);return n[qr].isManual_=!0,KE(e),n}finishDraft(t,e){const n=t&&t[qr];(!n||!n.isManual_)&&ki(9);const{scope_:r}=n;return Tb(r,e),Sb(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Uu("Patches").applyPatches_;return Fu(t)?r(t,e):this.produce(t,i=>r(i,e))}};function QE(t,e){const n=O_(t)?Uu("MapSet").proxyMap_(t,e):D_(t)?Uu("MapSet").proxySet_(t,e):TX(t,e);return(e?e.scope_:QM()).drafts_.push(n),n}function RX(t){return Fu(t)||ki(10,t),JM(t)}function JM(t){if(!Js(t)||L_(t))return t;const e=t[qr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=qE(t,e.scope_.immer_.useStrictShallowCopy_)}else n=qE(t,!0);return Ty(n,(r,i)=>{HM(n,r,JM(i))}),e&&(e.finalized_=!1),n}var Gr=new SX,M_=Gr.produce;Gr.produceWithPatches.bind(Gr);Gr.setAutoFreeze.bind(Gr);Gr.setUseStrictShallowCopy.bind(Gr);Gr.applyPatches.bind(Gr);Gr.createDraft.bind(Gr);Gr.finishDraft.bind(Gr);function XM(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var AX=XM(),PX=XM,CX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ey:Ey.apply(null,arguments)};function Ab(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(as(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>mX(r)&&r.type===t,n}var ZM=class wh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,wh.prototype)}static get[Symbol.species](){return wh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new wh(...e[0].concat(this)):new wh(...e.concat(this))}};function Pb(t){return Js(t)?M_(t,()=>{}):t}function Cb(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(as(10));const r=n.insert(e,t);return t.set(e,r),r}function bX(t){return typeof t=="boolean"}var xX=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new ZM;return n&&(bX(n)?o.push(AX):o.push(PX(n.extraArgument))),o},kX="RTK_autoBatch",eV=t=>e=>{setTimeout(e,t)},NX=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:eV(10),OX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const u=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?NX:t.type==="callback"?t.queueNotification:eV(t.timeout),h=()=>{o=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),_=r.subscribe(m);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){var m;try{return i=!((m=p==null?void 0:p.meta)!=null&&m[kX]),s=!i,s&&(o||(o=!0,c(h))),r.dispatch(p)}finally{i=!0}}})},DX=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ZM(t);return r&&i.push(OX(typeof r=="object"?r:void 0)),i};function LX(t){const e=xX(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let u;if(typeof n=="function")u=n;else if($S(n))u=fX(n);else throw new Error(as(1));let c;typeof r=="function"?c=r(e):c=e();let h=Ey;i&&(h=CX({trace:!1,...typeof i=="object"&&i}));const p=pX(...c),m=DX(p);let _=typeof o=="function"?o(m):m();const I=h(..._);return qM(u,s,I)}function tV(t){const e={},n=[];let r;const i={addCase(s,o){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(as(28));if(u in e)throw new Error(as(29));return e[u]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function MX(t){return typeof t=="function"}function VX(t,e){let[n,r,i]=tV(e),s;if(MX(t))s=()=>Pb(t());else{const u=Pb(t);s=()=>u}function o(u=s(),c){let h=[n[c.type],...r.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(Fu(p)){const I=m(p,c);return I===void 0?p:I}else{if(Js(p))return M_(p,_=>m(_,c));{const _=m(p,c);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return o.getInitialState=s,o}var FX=Symbol.for("rtk-slice-createasyncthunk");function UX(t,e){return`${t}/${e}`}function jX({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[FX];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(as(11));typeof process<"u";const u=(typeof i.reducers=="function"?i.reducers($X()):i.reducers)||{},c=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(S,U){const q=typeof S=="string"?S:S.type;if(!q)throw new Error(as(12));if(q in h.sliceCaseReducersByType)throw new Error(as(13));return h.sliceCaseReducersByType[q]=U,p},addMatcher(S,U){return h.sliceMatchers.push({matcher:S,reducer:U}),p},exposeAction(S,U){return h.actionCreators[S]=U,p},exposeCaseReducer(S,U){return h.sliceCaseReducersByName[S]=U,p}};c.forEach(S=>{const U=u[S],q={reducerName:S,type:UX(s,S),createNotation:typeof i.reducers=="function"};qX(U)?KX(q,U,p,e):WX(q,U,p)});function m(){const[S={},U=[],q=void 0]=typeof i.extraReducers=="function"?tV(i.extraReducers):[i.extraReducers],$={...S,...h.sliceCaseReducersByType};return VX(i.initialState,C=>{for(let R in $)C.addCase(R,$[R]);for(let R of h.sliceMatchers)C.addMatcher(R.matcher,R.reducer);for(let R of U)C.addMatcher(R.matcher,R.reducer);q&&C.addDefaultCase(q)})}const _=S=>S,I=new Map;let T;function D(S,U){return T||(T=m()),T(S,U)}function O(){return T||(T=m()),T.getInitialState()}function k(S,U=!1){function q(C){let R=C[S];return typeof R>"u"&&U&&(R=O()),R}function $(C=_){const R=Cb(I,U,{insert:()=>new WeakMap});return Cb(R,C,{insert:()=>{const L={};for(const[V,j]of Object.entries(i.selectors??{}))L[V]=BX(j,C,O,U);return L}})}return{reducerPath:S,getSelectors:$,get selectors(){return $(q)},selectSlice:q}}const P={name:s,reducer:D,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:O,...k(o),injectInto(S,{reducerPath:U,...q}={}){const $=U??o;return S.inject({reducerPath:$,reducer:D},q),{...P,...k($,!0)}}};return P}}function BX(t,e,n,r){function i(s,...o){let u=e(s);return typeof u>"u"&&r&&(u=n()),t(u,...o)}return i.unwrapped=t,i}var zX=jX();function $X(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function WX({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!GX(r))throw new Error(as(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Ab(t,o):Ab(t))}function qX(t){return t._reducerDefinitionType==="asyncThunk"}function GX(t){return t._reducerDefinitionType==="reducerWithPrepare"}function KX({type:t,reducerName:e},n,r,i){if(!i)throw new Error(as(18));const{payloadCreator:s,fulfilled:o,pending:u,rejected:c,settled:h,options:p}=n,m=i(t,s,p);r.exposeAction(e,m),o&&r.addCase(m.fulfilled,o),u&&r.addCase(m.pending,u),c&&r.addCase(m.rejected,c),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(e,{fulfilled:o||Jm,pending:u||Jm,rejected:c||Jm,settled:h||Jm})}function Jm(){}function as(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const HX={loading:!1,user:{signedIn:!1,nickname:localStorage.getItem("nickname")||""}},QX={...HX},nV=zX({name:"user",initialState:QX,reducers:{updateUser:(t,e)=>({...t,...e.payload}),updateNickname:(t,e)=>{t.user.nickname=e.payload},logOut:t=>({loading:!1,user:null})}}),{updateUser:dte,updateNickname:rV,logOut:YX}=nV.actions,JX=nV.reducer;function GS(){const t=C_(),e=pN(),n=()=>{_i.auth().signOut().then(()=>{t(YX()),console.log("Signed out."),e("/")})};return w.jsx("div",{className:"my-3",style:{cursor:"pointer"},children:w.jsx("p",{className:"text-right text-white",children:w.jsx("a",{className:"btn btn-danger",onClick:n,children:"Sign Out"})})})}function iV(t,e){return function(){return t.apply(e,arguments)}}const{toString:XX}=Object.prototype,{getPrototypeOf:KS}=Object,V_=(t=>e=>{const n=XX.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Vi=t=>(t=t.toLowerCase(),e=>V_(e)===t),F_=t=>e=>typeof e===t,{isArray:od}=Array,kf=F_("undefined");function ZX(t){return t!==null&&!kf(t)&&t.constructor!==null&&!kf(t.constructor)&&Br(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const sV=Vi("ArrayBuffer");function eZ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sV(t.buffer),e}const tZ=F_("string"),Br=F_("function"),oV=F_("number"),U_=t=>t!==null&&typeof t=="object",nZ=t=>t===!0||t===!1,Ig=t=>{if(V_(t)!=="object")return!1;const e=KS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rZ=Vi("Date"),iZ=Vi("File"),sZ=Vi("Blob"),oZ=Vi("FileList"),aZ=t=>U_(t)&&Br(t.pipe),uZ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Br(t.append)&&((e=V_(t))==="formdata"||e==="object"&&Br(t.toString)&&t.toString()==="[object FormData]"))},lZ=Vi("URLSearchParams"),[cZ,dZ,hZ,fZ]=["ReadableStream","Request","Response","Headers"].map(Vi),pZ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lp(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),od(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let u;for(r=0;r<o;r++)u=s[r],e.call(null,t[u],u,t)}}function aV(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const hu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uV=t=>!kf(t)&&t!==hu;function YE(){const{caseless:t}=uV(this)&&this||{},e={},n=(r,i)=>{const s=t&&aV(e,i)||i;Ig(e[s])&&Ig(r)?e[s]=YE(e[s],r):Ig(r)?e[s]=YE({},r):od(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&lp(arguments[r],n);return e}const mZ=(t,e,n,{allOwnKeys:r}={})=>(lp(e,(i,s)=>{n&&Br(i)?t[s]=iV(i,n):t[s]=i},{allOwnKeys:r}),t),gZ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),yZ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},_Z=(t,e,n,r)=>{let i,s,o;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!u[o]&&(e[o]=t[o],u[o]=!0);t=n!==!1&&KS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},vZ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},wZ=t=>{if(!t)return null;if(od(t))return t;let e=t.length;if(!oV(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},EZ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&KS(Uint8Array)),TZ=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},IZ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},SZ=Vi("HTMLFormElement"),RZ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),bb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),AZ=Vi("RegExp"),lV=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};lp(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},PZ=t=>{lV(t,(e,n)=>{if(Br(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Br(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},CZ=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return od(t)?r(t):r(String(t).split(e)),n},bZ=()=>{},xZ=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Xw="abcdefghijklmnopqrstuvwxyz",xb="0123456789",cV={DIGIT:xb,ALPHA:Xw,ALPHA_DIGIT:Xw+Xw.toUpperCase()+xb},kZ=(t=16,e=cV.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function NZ(t){return!!(t&&Br(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const OZ=t=>{const e=new Array(10),n=(r,i)=>{if(U_(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=od(r)?[]:{};return lp(r,(o,u)=>{const c=n(o,i+1);!kf(c)&&(s[u]=c)}),e[i]=void 0,s}}return r};return n(t,0)},DZ=Vi("AsyncFunction"),LZ=t=>t&&(U_(t)||Br(t))&&Br(t.then)&&Br(t.catch),dV=((t,e)=>t?setImmediate:e?((n,r)=>(hu.addEventListener("message",({source:i,data:s})=>{i===hu&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),hu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Br(hu.postMessage)),MZ=typeof queueMicrotask<"u"?queueMicrotask.bind(hu):typeof process<"u"&&process.nextTick||dV,Z={isArray:od,isArrayBuffer:sV,isBuffer:ZX,isFormData:uZ,isArrayBufferView:eZ,isString:tZ,isNumber:oV,isBoolean:nZ,isObject:U_,isPlainObject:Ig,isReadableStream:cZ,isRequest:dZ,isResponse:hZ,isHeaders:fZ,isUndefined:kf,isDate:rZ,isFile:iZ,isBlob:sZ,isRegExp:AZ,isFunction:Br,isStream:aZ,isURLSearchParams:lZ,isTypedArray:EZ,isFileList:oZ,forEach:lp,merge:YE,extend:mZ,trim:pZ,stripBOM:gZ,inherits:yZ,toFlatObject:_Z,kindOf:V_,kindOfTest:Vi,endsWith:vZ,toArray:wZ,forEachEntry:TZ,matchAll:IZ,isHTMLForm:SZ,hasOwnProperty:bb,hasOwnProp:bb,reduceDescriptors:lV,freezeMethods:PZ,toObjectSet:CZ,toCamelCase:RZ,noop:bZ,toFiniteNumber:xZ,findKey:aV,global:hu,isContextDefined:uV,ALPHABET:cV,generateString:kZ,isSpecCompliantForm:NZ,toJSONObject:OZ,isAsyncFn:DZ,isThenable:LZ,setImmediate:dV,asap:MZ};function Be(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Z.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const hV=Be.prototype,fV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fV[t]={value:t}});Object.defineProperties(Be,fV);Object.defineProperty(hV,"isAxiosError",{value:!0});Be.from=(t,e,n,r,i,s)=>{const o=Object.create(hV);return Z.toFlatObject(t,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Be.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const VZ=null;function JE(t){return Z.isPlainObject(t)||Z.isArray(t)}function pV(t){return Z.endsWith(t,"[]")?t.slice(0,-2):t}function kb(t,e,n){return t?t.concat(e).map(function(i,s){return i=pV(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function FZ(t){return Z.isArray(t)&&!t.some(JE)}const UZ=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function j_(t,e,n){if(!Z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,O){return!Z.isUndefined(O[D])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(i))throw new TypeError("visitor must be a function");function h(T){if(T===null)return"";if(Z.isDate(T))return T.toISOString();if(!c&&Z.isBlob(T))throw new Be("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(T)||Z.isTypedArray(T)?c&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function p(T,D,O){let k=T;if(T&&!O&&typeof T=="object"){if(Z.endsWith(D,"{}"))D=r?D:D.slice(0,-2),T=JSON.stringify(T);else if(Z.isArray(T)&&FZ(T)||(Z.isFileList(T)||Z.endsWith(D,"[]"))&&(k=Z.toArray(T)))return D=pV(D),k.forEach(function(S,U){!(Z.isUndefined(S)||S===null)&&e.append(o===!0?kb([D],U,s):o===null?D:D+"[]",h(S))}),!1}return JE(T)?!0:(e.append(kb(O,D,s),h(T)),!1)}const m=[],_=Object.assign(UZ,{defaultVisitor:p,convertValue:h,isVisitable:JE});function I(T,D){if(!Z.isUndefined(T)){if(m.indexOf(T)!==-1)throw Error("Circular reference detected in "+D.join("."));m.push(T),Z.forEach(T,function(k,P){(!(Z.isUndefined(k)||k===null)&&i.call(e,k,Z.isString(P)?P.trim():P,D,_))===!0&&I(k,D?D.concat(P):[P])}),m.pop()}}if(!Z.isObject(t))throw new TypeError("data must be an object");return I(t),e}function Nb(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function HS(t,e){this._pairs=[],t&&j_(t,this,e)}const mV=HS.prototype;mV.append=function(e,n){this._pairs.push([e,n])};mV.toString=function(e){const n=e?function(r){return e.call(this,r,Nb)}:Nb;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function jZ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gV(t,e,n){if(!e)return t;const r=n&&n.encode||jZ,i=n&&n.serialize;let s;if(i?s=i(e,n):s=Z.isURLSearchParams(e)?e.toString():new HS(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Ob{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BZ=typeof URLSearchParams<"u"?URLSearchParams:HS,zZ=typeof FormData<"u"?FormData:null,$Z=typeof Blob<"u"?Blob:null,WZ={isBrowser:!0,classes:{URLSearchParams:BZ,FormData:zZ,Blob:$Z},protocols:["http","https","file","blob","url","data"]},QS=typeof window<"u"&&typeof document<"u",XE=typeof navigator=="object"&&navigator||void 0,qZ=QS&&(!XE||["ReactNative","NativeScript","NS"].indexOf(XE.product)<0),GZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KZ=QS&&window.location.href||"http://localhost",HZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:QS,hasStandardBrowserEnv:qZ,hasStandardBrowserWebWorkerEnv:GZ,navigator:XE,origin:KZ},Symbol.toStringTag,{value:"Module"})),xr={...HZ,...WZ};function QZ(t,e){return j_(t,new xr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return xr.isNode&&Z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function YZ(t){return Z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JZ(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function _V(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),c=s>=n.length;return o=!o&&Z.isArray(i)?i.length:o,c?(Z.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Z.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Z.isArray(i[o])&&(i[o]=JZ(i[o])),!u)}if(Z.isFormData(t)&&Z.isFunction(t.entries)){const n={};return Z.forEachEntry(t,(r,i)=>{e(YZ(r),i,n,0)}),n}return null}function XZ(t,e,n){if(Z.isString(t))try{return(e||JSON.parse)(t),Z.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const cp={transitional:yV,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Z.isObject(e);if(s&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return i?JSON.stringify(_V(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return QZ(e,this.formSerializer).toString();if((u=Z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return j_(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),XZ(e)):e}],transformResponse:[function(e){const n=this.transitional||cp.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?Be.from(u,Be.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xr.classes.FormData,Blob:xr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],t=>{cp.headers[t]={}});const ZZ=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),eee=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&ZZ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Db=Symbol("internals");function uh(t){return t&&String(t).trim().toLowerCase()}function Sg(t){return t===!1||t==null?t:Z.isArray(t)?t.map(Sg):String(t)}function tee(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const nee=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zw(t,e,n,r,i){if(Z.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Z.isString(e)){if(Z.isString(r))return e.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(e)}}function ree(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function iee(t,e){const n=Z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class kr{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(u,c,h){const p=uh(c);if(!p)throw new Error("header name must be a non-empty string");const m=Z.findKey(i,p);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||c]=Sg(u))}const o=(u,c)=>Z.forEach(u,(h,p)=>s(h,p,c));if(Z.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Z.isString(e)&&(e=e.trim())&&!nee(e))o(eee(e),n);else if(Z.isHeaders(e))for(const[u,c]of e.entries())s(c,u,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=uh(e),e){const r=Z.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return tee(i);if(Z.isFunction(n))return n.call(this,i,r);if(Z.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=uh(e),e){const r=Z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Zw(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=uh(o),o){const u=Z.findKey(r,o);u&&(!n||Zw(r,r[u],u,n))&&(delete r[u],i=!0)}}return Z.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Zw(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Z.forEach(this,(i,s)=>{const o=Z.findKey(r,s);if(o){n[o]=Sg(i),delete n[s];return}const u=e?ree(s):String(s).trim();u!==s&&delete n[s],n[u]=Sg(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Z.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Db]=this[Db]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=uh(o);r[u]||(iee(i,o),r[u]=!0)}return Z.isArray(e)?e.forEach(s):s(e),this}}kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(kr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Z.freezeMethods(kr);function e0(t,e){const n=this||cp,r=e||n,i=kr.from(r.headers);let s=r.data;return Z.forEach(t,function(u){s=u.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function vV(t){return!!(t&&t.__CANCEL__)}function ad(t,e,n){Be.call(this,t??"canceled",Be.ERR_CANCELED,e,n),this.name="CanceledError"}Z.inherits(ad,Be,{__CANCEL__:!0});function wV(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Be("Request failed with status code "+n.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function see(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function oee(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),p=r[s];o||(o=h),n[i]=c,r[i]=h;let m=s,_=0;for(;m!==i;)_+=n[m++],m=m%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),h-o<e)return;const I=p&&h-p;return I?Math.round(_*1e3/I):void 0}}function aee(t,e){let n=0,r=1e3/e,i,s;const o=(h,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),m=p-n;m>=r?o(h,p):(i=h,s||(s=setTimeout(()=>{s=null,o(i)},r-m)))},()=>i&&o(i)]}const Ry=(t,e,n=3)=>{let r=0;const i=oee(50,250);return aee(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,c=o-r,h=i(c),p=o<=u;r=o;const m={loaded:o,total:u,progress:u?o/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&p?(u-o)/h:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(m)},n)},Lb=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Mb=t=>(...e)=>Z.asap(()=>t(...e)),uee=xr.hasStandardBrowserEnv?function(){const e=xr.navigator&&/(msie|trident)/i.test(xr.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const u=Z.isString(o)?i(o):o;return u.protocol===r.protocol&&u.host===r.host}}():function(){return function(){return!0}}(),lee=xr.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Z.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Z.isString(r)&&o.push("path="+r),Z.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cee(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dee(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function EV(t,e){return t&&!cee(e)?dee(t,e):e}const Vb=t=>t instanceof kr?{...t}:t;function ju(t,e){e=e||{};const n={};function r(h,p,m){return Z.isPlainObject(h)&&Z.isPlainObject(p)?Z.merge.call({caseless:m},h,p):Z.isPlainObject(p)?Z.merge({},p):Z.isArray(p)?p.slice():p}function i(h,p,m){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return r(void 0,h,m)}else return r(h,p,m)}function s(h,p){if(!Z.isUndefined(p))return r(void 0,p)}function o(h,p){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return r(void 0,h)}else return r(void 0,p)}function u(h,p,m){if(m in e)return r(h,p);if(m in t)return r(void 0,h)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(h,p)=>i(Vb(h),Vb(p),!0)};return Z.forEach(Object.keys(Object.assign({},t,e)),function(p){const m=c[p]||i,_=m(t[p],e[p],p);Z.isUndefined(_)&&m!==u||(n[p]=_)}),n}const TV=t=>{const e=ju({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=e;e.headers=o=kr.from(o),e.url=gV(EV(e.baseURL,e.url),t.params,t.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(Z.isFormData(n)){if(xr.hasStandardBrowserEnv||xr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[h,...p]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...p].join("; "))}}if(xr.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(e)),r||r!==!1&&uee(e.url))){const h=i&&s&&lee.read(s);h&&o.set(i,h)}return e},hee=typeof XMLHttpRequest<"u",fee=hee&&function(t){return new Promise(function(n,r){const i=TV(t);let s=i.data;const o=kr.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:h}=i,p,m,_,I,T;function D(){I&&I(),T&&T(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(i.method.toUpperCase(),i.url,!0),O.timeout=i.timeout;function k(){if(!O)return;const S=kr.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),q={data:!u||u==="text"||u==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:S,config:t,request:O};wV(function(C){n(C),D()},function(C){r(C),D()},q),O=null}"onloadend"in O?O.onloadend=k:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(k)},O.onabort=function(){O&&(r(new Be("Request aborted",Be.ECONNABORTED,t,O)),O=null)},O.onerror=function(){r(new Be("Network Error",Be.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let U=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const q=i.transitional||yV;i.timeoutErrorMessage&&(U=i.timeoutErrorMessage),r(new Be(U,q.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,t,O)),O=null},s===void 0&&o.setContentType(null),"setRequestHeader"in O&&Z.forEach(o.toJSON(),function(U,q){O.setRequestHeader(q,U)}),Z.isUndefined(i.withCredentials)||(O.withCredentials=!!i.withCredentials),u&&u!=="json"&&(O.responseType=i.responseType),h&&([_,T]=Ry(h,!0),O.addEventListener("progress",_)),c&&O.upload&&([m,I]=Ry(c),O.upload.addEventListener("progress",m),O.upload.addEventListener("loadend",I)),(i.cancelToken||i.signal)&&(p=S=>{O&&(r(!S||S.type?new ad(null,t,O):S),O.abort(),O=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const P=see(i.url);if(P&&xr.protocols.indexOf(P)===-1){r(new Be("Unsupported protocol "+P+":",Be.ERR_BAD_REQUEST,t));return}O.send(s||null)})},pee=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(h){if(!i){i=!0,u();const p=h instanceof Error?h:this.reason;r.abort(p instanceof Be?p:new ad(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new Be(`timeout ${e} of ms exceeded`,Be.ETIMEDOUT))},e);const u=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Z.asap(u),c}},mee=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},gee=async function*(t,e){for await(const n of yee(t))yield*mee(n,e)},yee=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Fb=(t,e,n,r)=>{const i=gee(t,e);let s=0,o,u=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:p}=await i.next();if(h){u(),c.close();return}let m=p.byteLength;if(n){let _=s+=m;n(_)}c.enqueue(new Uint8Array(p))}catch(h){throw u(h),h}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},B_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",IV=B_&&typeof ReadableStream=="function",_ee=B_&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),SV=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vee=IV&&SV(()=>{let t=!1;const e=new Request(xr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Ub=64*1024,ZE=IV&&SV(()=>Z.isReadableStream(new Response("").body)),Ay={stream:ZE&&(t=>t.body)};B_&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ay[e]&&(Ay[e]=Z.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Be(`Response type '${e}' is not supported`,Be.ERR_NOT_SUPPORT,r)})})})(new Response);const wee=async t=>{if(t==null)return 0;if(Z.isBlob(t))return t.size;if(Z.isSpecCompliantForm(t))return(await new Request(xr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(t)||Z.isArrayBuffer(t))return t.byteLength;if(Z.isURLSearchParams(t)&&(t=t+""),Z.isString(t))return(await _ee(t)).byteLength},Eee=async(t,e)=>{const n=Z.toFiniteNumber(t.getContentLength());return n??wee(e)},Tee=B_&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:_}=TV(t);h=h?(h+"").toLowerCase():"text";let I=pee([i,s&&s.toAbortSignal()],o),T;const D=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let O;try{if(c&&vee&&n!=="get"&&n!=="head"&&(O=await Eee(p,r))!==0){let q=new Request(e,{method:"POST",body:r,duplex:"half"}),$;if(Z.isFormData(r)&&($=q.headers.get("content-type"))&&p.setContentType($),q.body){const[C,R]=Lb(O,Ry(Mb(c)));r=Fb(q.body,Ub,C,R)}}Z.isString(m)||(m=m?"include":"omit");const k="credentials"in Request.prototype;T=new Request(e,{..._,signal:I,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:k?m:void 0});let P=await fetch(T);const S=ZE&&(h==="stream"||h==="response");if(ZE&&(u||S&&D)){const q={};["status","statusText","headers"].forEach(L=>{q[L]=P[L]});const $=Z.toFiniteNumber(P.headers.get("content-length")),[C,R]=u&&Lb($,Ry(Mb(u),!0))||[];P=new Response(Fb(P.body,Ub,C,()=>{R&&R(),D&&D()}),q)}h=h||"text";let U=await Ay[Z.findKey(Ay,h)||"text"](P,t);return!S&&D&&D(),await new Promise((q,$)=>{wV(q,$,{data:U,headers:kr.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:T})})}catch(k){throw D&&D(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,t,T),{cause:k.cause||k}):Be.from(k,k&&k.code,t,T)}}),eT={http:VZ,xhr:fee,fetch:Tee};Z.forEach(eT,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const jb=t=>`- ${t}`,Iee=t=>Z.isFunction(t)||t===null||t===!1,RV={getAdapter:t=>{t=Z.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!Iee(n)&&(r=eT[(o=String(n)).toLowerCase()],r===void 0))throw new Be(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(jb).join(`
`):" "+jb(s[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:eT};function t0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ad(null,t)}function Bb(t){return t0(t),t.headers=kr.from(t.headers),t.data=e0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),RV.getAdapter(t.adapter||cp.adapter)(t).then(function(r){return t0(t),r.data=e0.call(t,t.transformResponse,r),r.headers=kr.from(r.headers),r},function(r){return vV(r)||(t0(t),r&&r.response&&(r.response.data=e0.call(t,t.transformResponse,r.response),r.response.headers=kr.from(r.response.headers))),Promise.reject(r)})}const AV="1.7.7",YS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{YS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const zb={};YS.transitional=function(e,n,r){function i(s,o){return"[Axios v"+AV+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(e===!1)throw new Be(i(o," has been removed"+(n?" in "+n:"")),Be.ERR_DEPRECATED);return n&&!zb[o]&&(zb[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,u):!0}};function See(t,e,n){if(typeof t!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const u=t[s],c=u===void 0||o(u,s,t);if(c!==!0)throw new Be("option "+s+" must be "+c,Be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Be("Unknown option "+s,Be.ERR_BAD_OPTION)}}const tT={assertOptions:See,validators:YS},Ao=tT.validators;class Eu{constructor(e){this.defaults=e,this.interceptors={request:new Ob,response:new Ob}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ju(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&tT.assertOptions(r,{silentJSONParsing:Ao.transitional(Ao.boolean),forcedJSONParsing:Ao.transitional(Ao.boolean),clarifyTimeoutError:Ao.transitional(Ao.boolean)},!1),i!=null&&(Z.isFunction(i)?n.paramsSerializer={serialize:i}:tT.assertOptions(i,{encode:Ao.function,serialize:Ao.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Z.merge(s.common,s[n.method]);s&&Z.forEach(["delete","get","head","post","put","patch","common"],T=>{delete s[T]}),n.headers=kr.concat(o,s);const u=[];let c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(c=c&&D.synchronous,u.unshift(D.fulfilled,D.rejected))});const h=[];this.interceptors.response.forEach(function(D){h.push(D.fulfilled,D.rejected)});let p,m=0,_;if(!c){const T=[Bb.bind(this),void 0];for(T.unshift.apply(T,u),T.push.apply(T,h),_=T.length,p=Promise.resolve(n);m<_;)p=p.then(T[m++],T[m++]);return p}_=u.length;let I=n;for(m=0;m<_;){const T=u[m++],D=u[m++];try{I=T(I)}catch(O){D.call(this,O);break}}try{p=Bb.call(this,I)}catch(T){return Promise.reject(T)}for(m=0,_=h.length;m<_;)p=p.then(h[m++],h[m++]);return p}getUri(e){e=ju(this.defaults,e);const n=EV(e.baseURL,e.url);return gV(n,e.params,e.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(e){Eu.prototype[e]=function(n,r){return this.request(ju(r||{},{method:e,url:n,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,u){return this.request(ju(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Eu.prototype[e]=n(),Eu.prototype[e+"Form"]=n(!0)});class JS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,u){r.reason||(r.reason=new ad(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new JS(function(i){e=i}),cancel:e}}}function Ree(t){return function(n){return t.apply(null,n)}}function Aee(t){return Z.isObject(t)&&t.isAxiosError===!0}const nT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nT).forEach(([t,e])=>{nT[e]=t});function PV(t){const e=new Eu(t),n=iV(Eu.prototype.request,e);return Z.extend(n,Eu.prototype,e,{allOwnKeys:!0}),Z.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return PV(ju(t,i))},n}const sn=PV(cp);sn.Axios=Eu;sn.CanceledError=ad;sn.CancelToken=JS;sn.isCancel=vV;sn.VERSION=AV;sn.toFormData=j_;sn.AxiosError=Be;sn.Cancel=sn.CanceledError;sn.all=function(e){return Promise.all(e)};sn.spread=Ree;sn.isAxiosError=Aee;sn.mergeConfig=ju;sn.AxiosHeaders=kr;sn.formToJSON=t=>_V(Z.isHTMLForm(t)?new FormData(t):t);sn.getAdapter=RV.getAdapter;sn.HttpStatusCode=nT;sn.default=sn;const iu={turnTime:4e3,colors:MS,playingTo:6,cpuDelay:1200},$b=t=>{let e=Number(t);return Number.isNaN(e)&&(e=1),24e3/(5*e)},Wb=()=>{const t=P_(),e=[];return{...Rf({deck:t.slice(12),board:t.slice(0,12)}),selected:e}},qb={players:{you:{score:0,color:iu.colors[0]},cpu:{score:0,color:iu.colors[1]}},gameStarted:!1,myName:"you",setFound:!1,declarer:null,gameOver:null,cpuTurnInterval:1e3,startTime:new Date};class Pee extends z.Component{constructor(n){super(n);Sn(this,"handleStartGame",n=>{n.preventDefault(),this.setState({gameStarted:!0,startTime:new Date}),console.log(`Turns every ${this.state.cpuTurnInterval} ms`),setTimeout(()=>{const r=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:r})},iu.cpuDelay)});Sn(this,"componentDidMount",()=>{const n=window.localStorage.getItem("soloDifficulty");let r=n?Number(n):2;const i=$b(r);this.setState({difficulty:r,cpuTurnInterval:i})});Sn(this,"componentWillUnmount",()=>{this.state.cpuTimer!==null&&window.clearInterval(this.state.cpuTimer)});Sn(this,"cpuTurn",()=>{const{board:n,declarer:r,gameOver:i}=this.state;if(r||i)return;const[s,o]=Ct.shuffle(n).slice(0,2),u=AS(s,o);n.includes(u)&&(this.setState({declarer:"cpu",selected:[s],cpuFound:[o,u],setFound:!0}),this.state.cpuTimer!==null&&clearInterval(this.state.cpuTimer),this.setState({cpuAnimation:window.setInterval(this.animateCpuChoice,900)}))});Sn(this,"animateCpuChoice",()=>{const{selected:n,cpuFound:r}=this.state,i=[...r];if(i.length===0)return;const s=[...n,i.pop()];this.setState({cpuFound:i,selected:s}),s.length===3&&(this.state.cpuAnimation!==null&&clearInterval(this.state.cpuAnimation),this.updateSelected(s,"cpu"))});Sn(this,"updatePlayerScore",(n,r)=>{const{players:i}=this.state,s=i[n].score+r;return[M_(i,u=>{u[n].score=s}),s]});Sn(this,"expireDeclare",()=>{const{declarer:n,selected:r}=this.state;if(n&&!Ni(r)){const[i]=this.updatePlayerScore(n,-.5);this.setState({players:i,declarer:null,timeDeclared:void 0,selected:[]})}});Sn(this,"markPointForDeclarer",n=>{const[r,i]=this.updatePlayerScore(n,1),{user:s}=this.props.userReducer,o=i>=iu.playingTo?n:"",u={players:r,gameOver:o};if(!Ct.isEmpty(o)){const c=s&&s.uid||"anonymous",h=n=="you"?1:0,p=Math.round((new Date().getTime()-this.state.startTime.getTime())/1e3);sn.post("/api/game",{uid:c,total_time:p,player_won:h,difficulty_level:this.state.difficulty,winning_score:i}).then(()=>{console.log("Game sent")}).catch(m=>{console.log("Error sending game")})}return this.setState(u),u});Sn(this,"performDeclare",n=>{if(!this.state.declarer){const r=new Date().getTime(),i={declarer:n,timeDeclared:r};this.setState(i),this.setState({undeclareId:window.setTimeout(()=>{this.expireDeclare()},iu.turnTime)})}});Sn(this,"updateSelected",(n,r)=>{const i={setFound:Ni(n),selected:n,declarer:r};i.setFound&&(this.state.undeclareId&&clearTimeout(this.state.undeclareId),setTimeout(()=>{this.removeSet()},2e3)),this.setState(i)});Sn(this,"handleCardClick",n=>{const{setFound:r,declarer:i,myName:s}=this.state;if(!r&&i!=="cpu"){const o=PS(n,this.state.selected);i||this.performDeclare(s),this.setState({selected:o}),Ni(o)&&this.updateSelected(o,"you")}});Sn(this,"handleRedeal",()=>{const n=Rf(this.state);this.setState(n)});Sn(this,"removeSet",()=>{const{declarer:n,selected:r}=this.state;if(n&&Ni(r)){console.log("Set found, removing"),this.markPointForDeclarer(n);const i={setFound:!1,declarer:null,timeDeclared:void 0,...eM(this.state)};this.setState(i)}this.state.cpuTimer&&clearInterval(this.state.cpuTimer),setTimeout(()=>{const i=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:i})},iu.cpuDelay)});Sn(this,"resetGame",()=>{this.state.cpuTimer&&window.clearInterval(this.state.cpuTimer),this.setState({...Ct.cloneDeep(qb),...Wb()})});this.state={...Ct.cloneDeep(qb),...Wb(),difficulty:2}}render(){const{board:n,deck:r,selected:i,declarer:s,players:o,gameStarted:u,setFound:c}=this.state,{userReducer:h}=this.props,{user:p}=h;return h.loading?"Loading...":u?w.jsx(li.Fragment,{children:w.jsx(x_,{board:n,deck:r,selected:i,declarer:s,handleCardClick:this.handleCardClick,handleDeclare:()=>{},handleRedeal:this.handleRedeal,players:o,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.myName,resetGame:this.resetGame,solo:!0,gameMode:"versus"})}):w.jsxs("div",{className:"container main-content",children:[p!==null&&w.jsx(GS,{}),w.jsx("h3",{className:"text-center mb-4",children:"Solo Play vs. Computer"}),w.jsx("h4",{className:"mb-4",children:"Choose difficulty level:"}),w.jsxs("div",{className:"row",children:[w.jsxs("div",{className:"col-12",children:[w.jsxs("form",{onSubmit:this.handleStartGame,children:[w.jsx("div",{className:"col-10 col-md-6 mb-5",children:w.jsx(kM.Range,{step:1,min:1,max:8,values:[this.state.difficulty],onChange:m=>{const _=$b(m);window.localStorage.setItem("soloDifficulty",m.toString()),this.setState({cpuTurnInterval:_,difficulty:m})},renderTrack:({props:m,children:_})=>w.jsx("div",{...m,style:{...m.style,height:"6px",width:"100%",backgroundColor:"#ccc"},children:_}),renderThumb:({props:m})=>w.jsx("div",{...m,style:{...m.style,height:"24px",width:"24px",backgroundColor:"#999"}})})}),w.jsx("input",{type:"submit",value:"Start",className:"btn btn-primary"})]}),w.jsxs("p",{style:{marginTop:"24px"},children:["First to ",iu.playingTo," points is the winner"]})]}),w.jsxs("div",{className:"row mt-4",children:[w.jsx("p",{children:"Other Game Options:"}),w.jsxs("ul",{style:{listStyleType:"none"},children:[w.jsx("li",{className:"mb-4",children:w.jsx(_n,{to:"/local",children:"Local Multiplayer"})}),w.jsx("li",{className:"mb-4",children:w.jsx(_n,{to:"/training",children:"Training"})}),w.jsx("hr",{}),w.jsx("li",{children:w.jsx(_n,{to:"/",children:"Back to Main Menu"})})]})]})]}),!p&&w.jsx("div",{className:"row mt-4",children:w.jsxs("div",{children:[w.jsx("p",{children:"To save your game statistics, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:tM,className:"btn btn-info",children:"Sign in"})})]})})]})}}const Cee=t=>({userReducer:t.user}),bee=jQ(Cee)(Pee),xee=["as","disabled"];function kee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nee(t){return!t||t.trim()==="#"}function CV({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:u=0,type:c}){t||(n!=null||r!=null||i!=null?t="a":t="button");const h={tagName:t};if(t==="button")return[{type:c||"button",disabled:e},h];const p=_=>{if((e||t==="a"&&Nee(n))&&_.preventDefault(),e){_.stopPropagation();return}o==null||o(_)},m=_=>{_.key===" "&&(_.preventDefault(),p(_))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:u,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:p,onKeyDown:m},h]}const Oee=z.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=kee(t,xee);const[s,{tagName:o}]=CV(Object.assign({tagName:n,disabled:r},i));return w.jsx(o,Object.assign({},i,s,{ref:e}))});Oee.displayName="Button";const XS=z.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...u},c)=>{const h=Ta(e,"btn"),[p,{tagName:m}]=CV({tagName:t,disabled:s,...u}),_=m;return w.jsx(_,{...p,...u,ref:c,disabled:s,className:Wr(o,h,i&&"active",n&&`${h}-${n}`,r&&`${h}-${r}`,u.href&&s&&"disabled")})});XS.displayName="Button";const Dee=({show:t,handleClose:e})=>w.jsx(w.Fragment,{children:w.jsxs(Yn,{show:t,children:[w.jsx(Yn.Header,{className:"justify-content-center",children:w.jsx(Yn.Title,{children:"Training Mode"})}),w.jsx(Yn.Body,{children:w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsx("p",{className:"my-2",children:"Find the one card that completes a set with the two highlighted cards."}),w.jsx("p",{className:"my-2",children:"Try to keep finding SETs for as long as you can."})]})}),w.jsx(Yn.Footer,{children:w.jsx("div",{className:"d-flex justify-content-center",children:w.jsx(XS,{onClick:e,variant:"primary",children:"Let's Go!"})})})]})}),Lee=({handleClose:t,show:e,finalScore:n})=>w.jsx(w.Fragment,{children:w.jsxs(Yn,{show:e,children:[w.jsxs(Yn.Body,{children:[w.jsx("h3",{className:"text-center mt-3",children:"GAME OVER!"}),w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsxs("p",{className:"text-center my-2",children:["Final Score: ",n," "]}),w.jsxs("p",{className:"text-center my-2",children:["Best Score: ",localStorage.getItem("highScoreTraining")||0]})]})]}),w.jsxs(Yn.Footer,{children:[w.jsx("button",{className:"btn btn-primary",onClick:t,children:w.jsx(_n,{style:{color:"white",textDecoration:"none"},to:"/",children:"Main Menu"})}),w.jsx(XS,{onClick:t,variant:"secondary",children:"Restart"})]})]})}),n0={turnTime:4e3,colors:MS,playingTo:6,cpuDelay:1200,initialTurnTime:7e3,minimumTurnTime:1600},Mee=()=>{const[t,e]=z.useState([]),[n,r]=z.useState([]),[i,s]=z.useState(0),[o,u]=z.useState(null),[c,h]=z.useState(0),[p,m]=z.useState(null),[_,I]=z.useState(n0.initialTurnTime/1e3),T=z.useRef(null);T.current=_;const D=z.useRef(null);D.current=i;const[O,k]=z.useState(!0),[P,S]=z.useState(!1),[U,q]=z.useState(!1),[$,C]=z.useState(!1),R=oe=>{const ce=Math.round(n0.initialTurnTime-1100*Math.log2(oe+1));return Math.max(ce,n0.minimumTurnTime)},L=({score:oe})=>{m(Date.now()),q(!1)};z.useEffect(()=>{u(Date.now()),L({score:0})},[]);const V=({precise:oe=!1}={})=>{const ce=Date.now()-p;return((R(D.current)-ce)/1e3).toFixed(1)};iJ(()=>{const oe=Date.now(),ce=Math.round((oe-o)/1e3),de=Math.round(oe-p),Q=R(D.current)-de;h(ce),I((Q/1e3).toFixed(1)),Q<0&&!U&&N()},U||O?null:200);const j=({select:oe=!0}={})=>{const{board:ce,deck:de}=N7({boardSize:8,commonTraits:null});e([...ce.slice(0,2),"0333",...ce.slice(2)]),oe&&r(ce.slice(0,2))};z.useEffect(()=>{j({select:!1})},[]);const M=oe=>{const ce=V();I(ce),!(n.length===3||O)&&(Ni([...n,oe])?(q(!0),s(i+1),r([...n,oe]),window.setTimeout(()=>{j(),L({score:i+1})},650)):N())},N=()=>{k(!0);const oe=AS(...n);r([...n,oe]),Number(localStorage.getItem("highScoreTraining"))<i&&localStorage.setItem("highScoreTraining",i),window.setTimeout(()=>{S(!0)},2500)},fe=()=>{k(!1),S(!1),q(!1),s(0),j(),u(Date.now()),L({score:0})};return w.jsxs(li.Fragment,{children:[w.jsx("div",{className:"d-flex flex-column justify-content-between",children:w.jsx("div",{children:w.jsx(x_,{board:t,deck:[],selected:n,declarer:null,handleCardClick:M,handleDeclare:()=>{},players:{you:{name:"you",score:i,color:O?"error-red":"light-blue"}},setFound:!1,gameOver:O,myName:"you",resetGame:()=>{},solo:!0,gameMode:"training",elapsedTime:c,timeLeft:_})})}),w.jsx(Dee,{show:!$,setShow:C,handleClose:()=>{C(!0),fe()}}),w.jsx(Lee,{show:$&&O&&P,finalScore:i,handleClose:fe})]})};function bV({isHost:t,players:e,setState:n}){return Ct.findKey(e,r=>r.host),w.jsxs("div",{className:"container mt-4",children:[w.jsx("h4",{children:"Players:"}),w.jsx("ul",{className:"collection",children:Ct.map(e,(r,i)=>w.jsx("li",{className:"collection-item",children:w.jsxs("span",{className:"player-name",children:[i," ",r.host&&"(host)"]})},i))}),t?w.jsx("button",{className:"btn btn-primary",onClick:()=>{n({gameStarted:!0})},children:"Start Game"}):w.jsx("p",{children:"Waiting for host to start game..."})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Vee(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(p){try{h(r.next(p))}catch(m){o(m)}}function c(p){try{h(r.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(u,c)}h((r=r.apply(t,[])).next())})}function Fee(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tc=function(){return tc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tc.apply(this,arguments)},xV=function(t){return{loading:t==null,value:t}},Uee=function(){return function(t,e){switch(e.type){case"error":return tc(tc({},t),{error:e.error,loading:!1,value:void 0});case"reset":return xV(e.defaultValue);case"value":return tc(tc({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},jee=function(t){var e=t?t():void 0,n=z.useReducer(Uee(),xV(e)),r=n[0],i=n[1],s=z.useCallback(function(){var c=t?t():void 0;i({type:"reset",defaultValue:c})},[t]),o=z.useCallback(function(c){i({type:"error",error:c})},[]),u=z.useCallback(function(c){i({type:"value",value:c})},[]);return z.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:u,value:r.value}},[r.error,r.loading,s,o,u,r.value])},z_=function(t,e){var n=jee(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,u=n.value;return z.useEffect(function(){var c=U5(t,function(h){return Vee(void 0,void 0,void 0,function(){var p;return Fee(this,function(m){switch(m.label){case 0:return[3,4];case 1:return m.trys.push([1,3,,4]),[4,e.onUserChanged(h)];case 2:return m.sent(),[3,4];case 3:return p=m.sent(),s(p),[3,4];case 4:return o(h),[2]}})})},s);return function(){c()}},[t]),[u,i,r]};const r0={turnTime:5e3,colors:MS,playingTo:6};function Bee(){const t=Af(ve=>ve.user),[e,n,r]=z_(vu),{user:i}=t,s=C_(),o=Af(ve=>ve.user.loading),c=z.useRef({}).current,h=P_(),p={...Rf({deck:h.slice(12),board:h.slice(0,12)}),selected:[]},[m,_]=z.useState(),[I,T]=z.useState(""),[D,O]=z.useState();z.useState();const[k,P]=z.useState(),[S,U]=z.useState({gameTitle:"",players:{},created:!1,gameStarted:!1,myName:"",setFound:!1,declarer:null,gameOver:"",...p}),q=z.useRef(S);q.current=S,z.useEffect(()=>{const ve=async()=>{try{const be=xs(_u(cu,"games"),KL("creator_uid","==",e.uid));(await JL(be)).forEach(ke=>{console.log(ke.id);const nt={...ke.data(),gameTitle:ke.id};console.log("Old game: ",nt),_(nt)})}catch(be){console.log("Error getting documents: ",be)}};e&&!Ct.isEmpty(e.uid)&&ve()},[e]),z.useEffect(()=>function(){window.clearInterval(D)},[D]);const $=ve=>{U({...q.current,...ve})},C=async()=>{console.log("game in progress",m);try{await Eg(la(cu,"games",m.gameTitle)),console.log(`Document with ID ${m.gameTitle} deleted successfully.`),_(null)}catch(ve){console.error("Error deleting document: ",ve)}},R=ve=>{const{myName:be}=S;if(!S.declarer){const xe=PS(ve,S.selected);Ni(xe)&&me(xe,be),$({selected:xe})}},L=()=>{const ve=Rf(S);Q(ve)},V=ve=>{const be=_u(ve,"actions");return sp(be,xe=>{console.log("snap",xe),xe.docChanges().forEach(ke=>{if(ke.type==="added"){const nt=ke.doc.data();console.log(nt),ce(nt),Eg(ke.doc.ref)}ke.type==="removed"&&console.log("Removed action: ",ke.doc.data())})}),be},j=async ve=>{c.game=la(cu,"games",ve);const be=window.setInterval(()=>{jw(ve,{})},3e4);O(be);const xe=V(c.game);P(xe)},M=()=>{const ve=Ct.findKey(m.players,xe=>xe.host),{gameTitle:be}=m;$({gameTitle:be}),j(be),$({myName:ve,created:!0,...m,lastUpdate:_i.firestore.FieldValue.serverTimestamp()})},N=async ve=>{ve.preventDefault();const{myName:be,board:xe,deck:ke,selected:nt,players:lt,gameOver:Ve}=S;console.log("players",lt);const En=Ct.isEmpty(I)?`${be}'s game`:I;$({gameTitle:En});try{const At=await SS(_u(cu,"games"),{title:I,creator_uid:e.uid,players:lt,board:xe,deck:ke,selected:nt,gameOver:Ve,lastUpdate:_i.firestore.FieldValue.serverTimestamp()});c.game=At,c.actions=V(At);const vi=window.setInterval(()=>{jw(c.game,{})},3e4);O(vi),console.log(c.actions),$({created:!0})}catch(At){console.error("Error adding document: ",At)}},fe=ve=>{ve.preventDefault(),console.log("uid",e.uid),$({myName:i.nickname,players:{[i.nickname]:{host:!0,uid:e.uid,score:0,color:r0.colors[0],position:0}}})},oe=ve=>{if(!ve)return{};const{players:be}=q.current,xe=be[ve].score+1,ke=M_(be,lt=>{lt[ve].score=xe}),nt=xe>=r0.playingTo?ve:"";return nt&&window.setTimeout(()=>{Eg(c.game),clearInterval(D)},3e3),{players:ke,gameOver:nt}},ce=ve=>{const{type:be,payload:xe}=ve,{players:ke,declarer:nt,board:lt}=q.current,Ve=Math.max(...Object.values(ke).map(En=>En.position));switch(be){case"join":if(Object.keys(ke).includes(xe.name))return;const En={...ke,[xe.name]:{host:!1,uid:xe.uid,score:0,color:r0.colors[Object.keys(ke).length],position:Ve+1}};Q({players:En});break;case"found":!nt&&ue(lt,xe.selected)&&me(xe.selected,xe.name);break;default:return}},de=(ve,be)=>{if(Ni(ve)){const xe=oe(be),ke={...q.current,setFound:!1,declarer:null,...xe,...eM(q.current)};Q(ke)}},Q=ve=>{console.log("updating",q.current.gameTitle),$(ve),jw(c.game,ve)},ue=(ve,be)=>{for(let xe=0;xe<be.length;xe++)if(!ve.includes(be[xe]))return!1;return!0},me=(ve,be)=>{const xe={setFound:Ni(ve),selected:ve,declarer:be};Q(xe),xe.setFound&&setTimeout(()=>{de(ve,be)},4e3)},{board:_e,deck:Ce,selected:Ae,declarer:Ge,players:Me,created:Ye,gameStarted:mt,myName:Jt}=S;return o?"Loading...":e?m&&!S.created?w.jsxs("div",{className:"container",children:[w.jsx("p",{children:"You are already hosting a game. Return to it?"}),w.jsx("button",{className:"btn btn-primary mr-5",onClick:()=>M(),children:"YES!"}),w.jsx("button",{className:"btn btn-danger",onClick:C,children:"No, remove it"})]}):Jt===""?w.jsxs("div",{className:"container",children:[w.jsx(GS,{}),w.jsx("h4",{children:"Enter your nickname:"}),w.jsx("form",{onSubmit:fe,children:w.jsxs("div",{className:"row mb-4",children:[w.jsx("div",{className:"col-md-3 mb-3 mr-md-4",children:w.jsx("input",{autoFocus:!0,placeholder:"hostname",value:i.nickname,onChange:ve=>{s(rV(ve.target.value)),window.localStorage.setItem("nickname",ve.target.value)}})}),w.jsx("div",{className:"col-md-3",children:w.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})}),w.jsx("div",{children:w.jsx("p",{children:w.jsx(_n,{to:"/",children:"Main Menu"})})})]}):Ye?mt?w.jsx(x_,{board:_e,deck:Ce,selected:Ae,declarer:Ge,handleCardClick:R,handleRedeal:L,players:Me,setFound:S.setFound,gameOver:S.gameOver,myName:S.myName,gameMode:"versus"}):w.jsx(bV,{isHost:!0,players:Me,setState:Q}):w.jsxs("div",{className:"container mt-4",children:[w.jsx("h4",{children:"Name your game:"}),w.jsxs("form",{onSubmit:N,children:[w.jsx("div",{className:"mb-3",children:w.jsx("input",{autoFocus:!0,placeholder:`${Jt}'s game`,onChange:ve=>{T(ve.target.value)},value:I})}),w.jsx("div",{children:w.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create"})})]})]}):w.jsxs("div",{className:"container mt-4",children:[w.jsx("p",{children:"To host a game, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:O7,className:"btn btn-info",children:"Sign in"})})]})}const zee=()=>{const[t,e,n]=z_(vu);console.log(t);const r=()=>{const s=new ui;wI(vu,s)},i=()=>{vu.signOut()};return w.jsx("div",{className:"container mt-3",children:t?w.jsxs("div",{children:[w.jsxs("p",{children:["Welcome, ",t.displayName]}),w.jsx("p",{children:w.jsx(_n,{to:"/",children:"Home"})}),w.jsx("button",{className:"btn btn-primary",onClick:i,children:"Sign Out"})]}):w.jsx("button",{className:"btn btn-primary",onClick:r,children:"Sign In with Google"})})};function $ee(){const[t,e]=z.useState([]),[n,r]=z.useState(!1);if(z.useEffect(()=>{const s=_u(cu,"games"),o=sp(s,u=>{const c=[];u.forEach(h=>{c.push({name:h.id,...h.data()})}),e(c),r(!0)});return()=>o()},[]),console.log(t),!n)return null;const i=t.filter(s=>{const{lastUpdate:o}=s;if(!o)return!1;const u=o.toMillis(),c=new Date().getTime();return Math.round((c-u)/1e3)<40});return w.jsx("div",{className:"container",style:{height:"100vh"},children:i.length===0?w.jsx(z.Fragment,{children:w.jsx("div",{className:"row",children:w.jsxs("div",{className:"col-8 col-md-6",children:[w.jsx("div",{className:"card-panel teal",style:{marginTop:window.innerHeight*.2},children:w.jsx("span",{className:"white-text",children:"There are currently no active games."})}),w.jsxs("p",{children:["Click ",w.jsx(_n,{to:"/host",children:"here"})," to host one"]}),w.jsx("p",{children:w.jsx(_n,{className:"btn btn-primary",to:"/",children:"Back"})})]})})}):w.jsxs(z.Fragment,{children:[w.jsx("h4",{className:"text-center my-4",children:"Available games"}),w.jsx("div",{className:"row align-content-center",children:i.map((s,o)=>w.jsx("div",{className:"col-6 col-md-4",children:w.jsx("div",{className:"card available-game",children:w.jsx("div",{className:"my-auto text-center",children:w.jsx(_n,{to:`/guest/${s.name}`,children:s.name})})})},s.name))}),w.jsx("div",{className:"row",children:w.jsx("div",{className:"col mt-4",children:w.jsx(_n,{className:"btn btn-primary",to:"/",children:"Back"})})})]})})}const kV=z.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:s,...o},u)=>{t=Ta(t,"spinner");const c=`${t}-${n}`;return w.jsx(i,{ref:u,...o,className:Wr(s,c,r&&`${c}-${r}`,e&&`text-${e}`)})});kV.displayName="Spinner";function Wee(t){const[e,n,r]=z_(vu),i=Af(oe=>oe.user),{user:s,loading:o}=i,u=C_(),c=t9(),[h,p]=z.useState({popupVisible:!1,setFound:!1,displayAnimation:!1,animatedSet:[],declarer:"",deck:[],board:[],selected:[],pending:null,gameStarted:!1}),[m,_]=z.useState("");z.useState();const T=z.useRef({}).current,D=z.useRef(h);D.current=h;const O=oe=>{p({...D.current,...oe})},k=()=>{const{declarer:oe,selected:ce}=D.current;Ct.isEmpty(oe)&&ce.length===3&&!Ni(ce)&&O({selected:[]})},P=oe=>{const{declarer:ce,selected:de}=D.current;if(ce)return;const Q=PS(oe,de);if(Q.length>3)return;const ue={};if(Q.length===3)if(Ni(Q)){const me={type:"found",payload:{selected:Q,name:m}};console.log("Found set, sending..."),q(me),ue.popupVisible=!0}else console.log("Bad set selected!"),window.setTimeout(k,1e3);O({...ue,selected:Q})},S=oe=>{oe.preventDefault();const ce=s.nickname;if(Ct.isEmpty(ce))return;_(ce);const de={type:"join",payload:{name:ce,uid:e.uid}};q(de)},U=oe=>{const ce={...oe.data()},{selected:de}=D.current;if(Ct.isEmpty(ce))return;console.log("Updating",ce);const Q=de.length<3&&Ct.isEmpty(ce.declarer)?de:ce.selected;O({...ce,selected:Q,popupVisible:!1})},q=async oe=>{console.log("Creating on",T.actions),SS(T.actions,{...oe,created:_i.firestore.FieldValue.serverTimestamp()}).then(ce=>{if(oe.type==="found"){const de=ce.id;console.log("Document written with ID: ",de),O({pending:de})}})};z.useEffect(()=>{const{gameName:oe}=c;T.game=la(cu,"games",oe),T.actions=_u(T.game,"actions");const ce=sp(T.game,de=>{U(de)});return function(){T.game&&ce()}},[]);const{board:$,deck:C,selected:R,declarer:L,players:V,popupVisible:j}=h;if(i.loading)return"Loading profile...";if(Ct.isEmpty(s))return w.jsxs("div",{className:"container",children:[w.jsx("p",{children:"To join a game, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:tM,className:"btn btn-info",children:"Sign in"})}),w.jsx("p",{children:w.jsx(_n,{to:"/lobby",children:"Back"})})]});if(!m)return w.jsxs("div",{className:"container",children:[w.jsx(GS,{}),w.jsx("h4",{className:"mb-3",children:"Choose your nickname:"}),w.jsxs("form",{onSubmit:S,children:[w.jsx("div",{className:"col-12 col-md-4",children:w.jsx("input",{autoFocus:!0,type:"text",placeholder:"your name",value:s.nickname,onChange:oe=>{u(rV(oe.target.value)),window.localStorage.setItem("nickname",oe.target.value)}})}),w.jsx("div",{className:"col-12 col-md-4",children:w.jsx("input",{className:"btn btn-primary mt-3 ml-md-3",type:"submit",value:"Join"})})]})]});const{setFound:M,gameOver:N,gameStarted:fe}=D.current;return fe?w.jsxs(li.Fragment,{children:[w.jsxs(Yn,{show:h.pending&&j,children:[w.jsx(Yn.Header,{children:w.jsx(Yn.Title,{children:"Submitting action..."})}),w.jsxs(Yn.Body,{children:[w.jsx("p",{className:"text-center",children:"SET!"}),w.jsx("div",{className:"text-center",children:w.jsx(kV,{animation:"border"})})]})]}),w.jsx(x_,{board:$,deck:C,selected:R,declarer:L,handleCardClick:P,players:V,setFound:M,gameOver:N,myName:m,gameMode:"versus"})]}):w.jsx(bV,{players:V,isHost:!1})}function qee(t){const[e,n,r]=z_(vu);console.log(e);const i=Af(c=>c.user),{user:s}=i,[o,u]=z.useState(null);return C_(),z.useEffect(()=>{const c=async()=>{sn.get(`/api/user/stats/${s.uid}`).then(h=>{u(h.data)})};!i.loading&&s!==null&&c()},[i.loading]),i.loading?"Loading...":w.jsxs("div",{className:"container mt-2 mt-md-4",children:[w.jsx("h3",{children:"Statistics"}),w.jsxs("table",{className:"table table-striped",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Difficulty"}),w.jsx("th",{children:"Games Played"}),w.jsx("th",{children:"Winning Percentage"})]})}),w.jsx("tbody",{children:o&&o.map((c,h)=>w.jsxs("tr",{children:[w.jsx("td",{children:c.difficulty_level}),w.jsx("td",{children:c.games_played}),w.jsxs("td",{children:[Math.round(100*(c.games_won/c.games_played)),"%"]})]},`stats-${h}`))})]}),w.jsx("p",{children:w.jsx(_n,{to:"/",children:"Main Menu"})})]})}function Gee(){return w.jsx(T9,{children:w.jsx("div",{className:"container-fluid",children:w.jsxs(m9,{children:[w.jsx(Ki,{path:"/",element:w.jsx(V7,{})}),w.jsx(Ki,{path:"/rules",element:w.jsx(U7,{})}),w.jsx(Ki,{path:"/solo",element:w.jsx(bee,{})}),w.jsx(Ki,{path:"/training",element:w.jsx(Mee,{})}),w.jsx(Ki,{path:"/host",element:w.jsx(Bee,{})}),w.jsx(Ki,{path:"/lobby",element:w.jsx($ee,{})}),w.jsx(Ki,{path:"/guest/:gameName",element:w.jsx(Wee,{})}),w.jsx(Ki,{path:"/login",element:w.jsx(zee,{})}),w.jsx(Ki,{path:"/stats",element:w.jsx(qee,{})})]})})})}const Kee=LX({reducer:{user:JX}});sN(document.getElementById("root")).render(w.jsx(zQ,{store:Kee,children:w.jsx(Gee,{})}));
