var k3=Object.defineProperty;var N3=(t,e,n)=>e in t?k3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rn=(t,e,n)=>N3(t,typeof e!="symbol"?e+"":e,n);function O3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var px={exports:{}},$y={},mx={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=Symbol.for("react.element"),D3=Symbol.for("react.portal"),L3=Symbol.for("react.fragment"),M3=Symbol.for("react.strict_mode"),V3=Symbol.for("react.profiler"),F3=Symbol.for("react.provider"),U3=Symbol.for("react.context"),j3=Symbol.for("react.forward_ref"),B3=Symbol.for("react.suspense"),$3=Symbol.for("react.memo"),z3=Symbol.for("react.lazy"),uA=Symbol.iterator;function W3(t){return t===null||typeof t!="object"?null:(t=uA&&t[uA]||t["@@iterator"],typeof t=="function"?t:null)}var gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yx=Object.assign,_x={};function Yc(t,e,n){this.props=t,this.context=e,this.refs=_x,this.updater=n||gx}Yc.prototype.isReactComponent={};Yc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vx(){}vx.prototype=Yc.prototype;function TT(t,e,n){this.props=t,this.context=e,this.refs=_x,this.updater=n||gx}var IT=TT.prototype=new vx;IT.constructor=TT;yx(IT,Yc.prototype);IT.isPureReactComponent=!0;var lA=Array.isArray,wx=Object.prototype.hasOwnProperty,ST={current:null},Ex={key:!0,ref:!0,__self:!0,__source:!0};function Tx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wx.call(e,r)&&!Ex.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:zf,type:t,key:s,ref:o,props:i,_owner:ST.current}}function q3(t,e){return{$$typeof:zf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function RT(t){return typeof t=="object"&&t!==null&&t.$$typeof===zf}function G3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cA=/\/+/g;function pw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G3(""+t.key):e.toString(36)}function dg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zf:case D3:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+pw(o,0):r,lA(i)?(n="",t!=null&&(n=t.replace(cA,"$&/")+"/"),dg(i,e,n,"",function(h){return h})):i!=null&&(RT(i)&&(i=q3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cA,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",lA(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+pw(s,u);o+=dg(s,e,n,c,i)}else if(c=W3(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+pw(s,u++),o+=dg(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lm(t,e,n){if(t==null)return t;var r=[],i=0;return dg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function K3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pr={current:null},hg={transition:null},H3={ReactCurrentDispatcher:pr,ReactCurrentBatchConfig:hg,ReactCurrentOwner:ST};function Ix(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Lm,forEach:function(t,e,n){Lm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lm(t,function(){e++}),e},toArray:function(t){return Lm(t,function(e){return e})||[]},only:function(t){if(!RT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=Yc;Je.Fragment=L3;Je.Profiler=V3;Je.PureComponent=TT;Je.StrictMode=M3;Je.Suspense=B3;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H3;Je.act=Ix;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ST.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)wx.call(e,c)&&!Ex.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:zf,type:t.type,key:i,ref:s,props:r,_owner:o}};Je.createContext=function(t){return t={$$typeof:U3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F3,_context:t},t.Consumer=t};Je.createElement=Tx;Je.createFactory=function(t){var e=Tx.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:j3,render:t}};Je.isValidElement=RT;Je.lazy=function(t){return{$$typeof:z3,_payload:{_status:-1,_result:t},_init:K3}};Je.memo=function(t,e){return{$$typeof:$3,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=hg.transition;hg.transition={};try{t()}finally{hg.transition=e}};Je.unstable_act=Ix;Je.useCallback=function(t,e){return pr.current.useCallback(t,e)};Je.useContext=function(t){return pr.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return pr.current.useDeferredValue(t)};Je.useEffect=function(t,e){return pr.current.useEffect(t,e)};Je.useId=function(){return pr.current.useId()};Je.useImperativeHandle=function(t,e,n){return pr.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return pr.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return pr.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return pr.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return pr.current.useReducer(t,e,n)};Je.useRef=function(t){return pr.current.useRef(t)};Je.useState=function(t){return pr.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return pr.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return pr.current.useTransition()};Je.version="18.3.1";mx.exports=Je;var B=mx.exports;const He=$f(B),E0=O3({__proto__:null,default:He},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3=B,Y3=Symbol.for("react.element"),J3=Symbol.for("react.fragment"),X3=Object.prototype.hasOwnProperty,Z3=Q3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e$={key:!0,ref:!0,__self:!0,__source:!0};function Sx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)X3.call(e,r)&&!e$.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Y3,type:t,key:s,ref:o,props:i,_owner:Z3.current}}$y.Fragment=J3;$y.jsx=Sx;$y.jsxs=Sx;px.exports=$y;var w=px.exports,Rx={exports:{}},Xr={},Ax={exports:{}},Px={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ae){var me=H.length;H.push(ae);e:for(;0<me;){var ge=me-1>>>1,Se=H[ge];if(0<i(Se,ae))H[ge]=ae,H[me]=Se,me=ge;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ae=H[0],me=H.pop();if(me!==ae){H[0]=me;e:for(var ge=0,Se=H.length,we=Se>>>1;ge<we;){var Ne=2*(ge+1)-1,Pe=H[Ne],Fe=Ne+1,fe=H[Fe];if(0>i(Pe,me))Fe<Se&&0>i(fe,Pe)?(H[ge]=fe,H[Fe]=me,ge=Fe):(H[ge]=Pe,H[Ne]=me,ge=Ne);else if(Fe<Se&&0>i(fe,me))H[ge]=fe,H[Fe]=me,ge=Fe;else break e}}return ae}function i(H,ae){var me=H.sortIndex-ae.sortIndex;return me!==0?me:H.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],p=1,m=null,_=3,A=!1,T=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(H){for(var ae=n(h);ae!==null;){if(ae.callback===null)r(h);else if(ae.startTime<=H)r(h),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(h)}}function F(H){if(k=!1,I(H),!T)if(n(c)!==null)T=!0,le(z);else{var ae=n(h);ae!==null&&ue(F,ae.startTime-H)}}function z(H,ae){T=!1,k&&(k=!1,P(S),S=-1),A=!0;var me=_;try{for(I(ae),m=n(c);m!==null&&(!(m.expirationTime>ae)||H&&!U());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,_=m.priorityLevel;var Se=ge(m.expirationTime<=ae);ae=t.unstable_now(),typeof Se=="function"?m.callback=Se:m===n(c)&&r(c),I(ae)}else r(c);m=n(c)}if(m!==null)var we=!0;else{var Ne=n(h);Ne!==null&&ue(F,Ne.startTime-ae),we=!1}return we}finally{m=null,_=me,A=!1}}var G=!1,C=null,S=-1,L=5,V=-1;function U(){return!(t.unstable_now()-V<L)}function M(){if(C!==null){var H=t.unstable_now();V=H;var ae=!0;try{ae=C(!0,H)}finally{ae?O():(G=!1,C=null)}}else G=!1}var O;if(typeof R=="function")O=function(){R(M)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,re=he.port2;he.port1.onmessage=M,O=function(){re.postMessage(null)}}else O=function(){x(M,0)};function le(H){C=H,G||(G=!0,O())}function ue(H,ae){S=x(function(){H(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){T||A||(T=!0,le(z))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var ae=3;break;default:ae=_}var me=_;_=ae;try{return H()}finally{_=me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ae){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var me=_;_=H;try{return ae()}finally{_=me}},t.unstable_scheduleCallback=function(H,ae,me){var ge=t.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ge+me:ge):me=ge,H){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=me+Se,H={id:p++,callback:ae,priorityLevel:H,startTime:me,expirationTime:Se,sortIndex:-1},me>ge?(H.sortIndex=me,e(h,H),n(c)===null&&H===n(h)&&(k?(P(S),S=-1):k=!0,ue(F,me-ge))):(H.sortIndex=Se,e(c,H),T||A||(T=!0,le(z))),H},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(H){var ae=_;return function(){var me=_;_=ae;try{return H.apply(this,arguments)}finally{_=me}}}})(Px);Ax.exports=Px;var t$=Ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n$=B,Gr=t$;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cx=new Set,Qh={};function Qu(t,e){Ic(t,e),Ic(t+"Capture",e)}function Ic(t,e){for(Qh[t]=e,t=0;t<e.length;t++)Cx.add(e[t])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T0=Object.prototype.hasOwnProperty,r$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dA={},hA={};function i$(t){return T0.call(hA,t)?!0:T0.call(dA,t)?!1:r$.test(t)?hA[t]=!0:(dA[t]=!0,!1)}function s$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o$(t,e,n,r){if(e===null||typeof e>"u"||s$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var AT=/[\-:]([a-z])/g;function PT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AT,PT);Bn[e]=new mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AT,PT);Bn[e]=new mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AT,PT);Bn[e]=new mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function CT(t,e,n,r){var i=Bn.hasOwnProperty(e)?Bn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o$(e,n,i,r)&&(n=null),r||i===null?i$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ro=n$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mm=Symbol.for("react.element"),Ql=Symbol.for("react.portal"),Yl=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),xx=Symbol.for("react.context"),xT=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),R0=Symbol.for("react.suspense_list"),kT=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),kx=Symbol.for("react.offscreen"),fA=Symbol.iterator;function th(t){return t===null||typeof t!="object"?null:(t=fA&&t[fA]||t["@@iterator"],typeof t=="function"?t:null)}var zt=Object.assign,mw;function _h(t){if(mw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mw=e&&e[1]||""}return`
`+mw+t}var gw=!1;function yw(t,e){if(!t||gw)return"";gw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,u=s.length-1;1<=o&&0<=u&&i[o]!==s[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==s[u]){if(o!==1||u!==1)do if(o--,u--,0>u||i[o]!==s[u]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{gw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_h(t):""}function a$(t){switch(t.tag){case 5:return _h(t.type);case 16:return _h("Lazy");case 13:return _h("Suspense");case 19:return _h("SuspenseList");case 0:case 2:case 15:return t=yw(t.type,!1),t;case 11:return t=yw(t.type.render,!1),t;case 1:return t=yw(t.type,!0),t;default:return""}}function A0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yl:return"Fragment";case Ql:return"Portal";case I0:return"Profiler";case bT:return"StrictMode";case S0:return"Suspense";case R0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xx:return(t.displayName||"Context")+".Consumer";case bx:return(t._context.displayName||"Context")+".Provider";case xT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kT:return e=t.displayName||null,e!==null?e:A0(t.type)||"Memo";case No:e=t._payload,t=t._init;try{return A0(t(e))}catch{}}return null}function u$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A0(e);case 8:return e===bT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ra(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l$(t){var e=Nx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vm(t){t._valueTracker||(t._valueTracker=l$(t))}function Ox(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ug(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function P0(t,e){var n=e.checked;return zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pA(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ra(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dx(t,e){e=e.checked,e!=null&&CT(t,"checked",e,!1)}function C0(t,e){Dx(t,e);var n=ra(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?b0(t,e.type,n):e.hasOwnProperty("defaultValue")&&b0(t,e.type,ra(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mA(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function b0(t,e,n){(e!=="number"||Ug(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vh=Array.isArray;function cc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ra(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function x0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gA(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(vh(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ra(n)}}function Lx(t,e){var n=ra(e.value),r=ra(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yA(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fm,Vx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fm=Fm||document.createElement("div"),Fm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},c$=["Webkit","ms","Moz","O"];Object.keys(xh).forEach(function(t){c$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xh[e]=xh[t]})});function Fx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xh.hasOwnProperty(t)&&xh[t]?(""+e).trim():e+"px"}function Ux(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Fx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var d$=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N0(t,e){if(e){if(d$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function O0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D0=null;function NT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var L0=null,dc=null,hc=null;function _A(t){if(t=Gf(t)){if(typeof L0!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Ky(e),L0(t.stateNode,t.type,e))}}function jx(t){dc?hc?hc.push(t):hc=[t]:dc=t}function Bx(){if(dc){var t=dc,e=hc;if(hc=dc=null,_A(t),e)for(t=0;t<e.length;t++)_A(e[t])}}function $x(t,e){return t(e)}function zx(){}var _w=!1;function Wx(t,e,n){if(_w)return t(e,n);_w=!0;try{return $x(t,e,n)}finally{_w=!1,(dc!==null||hc!==null)&&(zx(),Bx())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var r=Ky(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var M0=!1;if(Ks)try{var nh={};Object.defineProperty(nh,"passive",{get:function(){M0=!0}}),window.addEventListener("test",nh,nh),window.removeEventListener("test",nh,nh)}catch{M0=!1}function h$(t,e,n,r,i,s,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var kh=!1,jg=null,Bg=!1,V0=null,f$={onError:function(t){kh=!0,jg=t}};function p$(t,e,n,r,i,s,o,u,c){kh=!1,jg=null,h$.apply(f$,arguments)}function m$(t,e,n,r,i,s,o,u,c){if(p$.apply(this,arguments),kh){if(kh){var h=jg;kh=!1,jg=null}else throw Error(ce(198));Bg||(Bg=!0,V0=h)}}function Yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vA(t){if(Yu(t)!==t)throw Error(ce(188))}function g$(t){var e=t.alternate;if(!e){if(e=Yu(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vA(i),t;if(s===r)return vA(i),e;s=s.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function Gx(t){return t=g$(t),t!==null?Kx(t):null}function Kx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kx(t);if(e!==null)return e;t=t.sibling}return null}var Hx=Gr.unstable_scheduleCallback,wA=Gr.unstable_cancelCallback,y$=Gr.unstable_shouldYield,_$=Gr.unstable_requestPaint,tn=Gr.unstable_now,v$=Gr.unstable_getCurrentPriorityLevel,OT=Gr.unstable_ImmediatePriority,Qx=Gr.unstable_UserBlockingPriority,$g=Gr.unstable_NormalPriority,w$=Gr.unstable_LowPriority,Yx=Gr.unstable_IdlePriority,zy=null,os=null;function E$(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(zy,t,void 0,(t.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:S$,T$=Math.log,I$=Math.LN2;function S$(t){return t>>>=0,t===0?32:31-(T$(t)/I$|0)|0}var Um=64,jm=4194304;function wh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~i;u!==0?r=wh(u):(s&=o,s!==0&&(r=wh(s)))}else o=n&~i,o!==0?r=wh(o):s!==0&&(r=wh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Li(e),i=1<<n,r|=t[n],e&=~i;return r}function R$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Li(s),u=1<<o,c=i[o];c===-1?(!(u&n)||u&r)&&(i[o]=R$(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function F0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jx(){var t=Um;return Um<<=1,!(Um&4194240)&&(Um=64),t}function vw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Li(e),t[e]=n}function P$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Li(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function DT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Li(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _t=0;function Xx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zx,LT,ek,tk,nk,U0=!1,Bm=[],Go=null,Ko=null,Ho=null,Xh=new Map,Zh=new Map,Lo=[],C$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EA(t,e){switch(t){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":Xh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(e.pointerId)}}function rh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gf(e),e!==null&&LT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function b$(t,e,n,r,i){switch(e){case"focusin":return Go=rh(Go,t,e,n,r,i),!0;case"dragenter":return Ko=rh(Ko,t,e,n,r,i),!0;case"mouseover":return Ho=rh(Ho,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xh.set(s,rh(Xh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Zh.set(s,rh(Zh.get(s)||null,t,e,n,r,i)),!0}return!1}function rk(t){var e=du(t.target);if(e!==null){var n=Yu(e);if(n!==null){if(e=n.tag,e===13){if(e=qx(n),e!==null){t.blockedOn=e,nk(t.priority,function(){ek(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=j0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);D0=r,n.target.dispatchEvent(r),D0=null}else return e=Gf(n),e!==null&&LT(e),t.blockedOn=n,!1;e.shift()}return!0}function TA(t,e,n){fg(t)&&n.delete(e)}function x$(){U0=!1,Go!==null&&fg(Go)&&(Go=null),Ko!==null&&fg(Ko)&&(Ko=null),Ho!==null&&fg(Ho)&&(Ho=null),Xh.forEach(TA),Zh.forEach(TA)}function ih(t,e){t.blockedOn===e&&(t.blockedOn=null,U0||(U0=!0,Gr.unstable_scheduleCallback(Gr.unstable_NormalPriority,x$)))}function ef(t){function e(i){return ih(i,t)}if(0<Bm.length){ih(Bm[0],t);for(var n=1;n<Bm.length;n++){var r=Bm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Go!==null&&ih(Go,t),Ko!==null&&ih(Ko,t),Ho!==null&&ih(Ho,t),Xh.forEach(e),Zh.forEach(e),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)rk(n),n.blockedOn===null&&Lo.shift()}var fc=ro.ReactCurrentBatchConfig,Wg=!0;function k$(t,e,n,r){var i=_t,s=fc.transition;fc.transition=null;try{_t=1,MT(t,e,n,r)}finally{_t=i,fc.transition=s}}function N$(t,e,n,r){var i=_t,s=fc.transition;fc.transition=null;try{_t=4,MT(t,e,n,r)}finally{_t=i,fc.transition=s}}function MT(t,e,n,r){if(Wg){var i=j0(t,e,n,r);if(i===null)bw(t,e,r,qg,n),EA(t,r);else if(b$(i,t,e,n,r))r.stopPropagation();else if(EA(t,r),e&4&&-1<C$.indexOf(t)){for(;i!==null;){var s=Gf(i);if(s!==null&&Zx(s),s=j0(t,e,n,r),s===null&&bw(t,e,r,qg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bw(t,e,r,null,n)}}var qg=null;function j0(t,e,n,r){if(qg=null,t=NT(r),t=du(t),t!==null)if(e=Yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qg=t,null}function ik(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v$()){case OT:return 1;case Qx:return 4;case $g:case w$:return 16;case Yx:return 536870912;default:return 16}default:return 16}}var Uo=null,VT=null,pg=null;function sk(){if(pg)return pg;var t,e=VT,n=e.length,r,i="value"in Uo?Uo.value:Uo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return pg=i.slice(t,1<r?1-r:void 0)}function mg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $m(){return!0}function IA(){return!1}function Zr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$m:IA,this.isPropagationStopped=IA,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$m)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$m)},persist:function(){},isPersistent:$m}),e}var Jc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},FT=Zr(Jc),qf=zt({},Jc,{view:0,detail:0}),O$=Zr(qf),ww,Ew,sh,Wy=zt({},qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sh&&(sh&&t.type==="mousemove"?(ww=t.screenX-sh.screenX,Ew=t.screenY-sh.screenY):Ew=ww=0,sh=t),ww)},movementY:function(t){return"movementY"in t?t.movementY:Ew}}),SA=Zr(Wy),D$=zt({},Wy,{dataTransfer:0}),L$=Zr(D$),M$=zt({},qf,{relatedTarget:0}),Tw=Zr(M$),V$=zt({},Jc,{animationName:0,elapsedTime:0,pseudoElement:0}),F$=Zr(V$),U$=zt({},Jc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j$=Zr(U$),B$=zt({},Jc,{data:0}),RA=Zr(B$),$$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=W$[t])?!!e[t]:!1}function UT(){return q$}var G$=zt({},qf,{key:function(t){if(t.key){var e=$$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UT,charCode:function(t){return t.type==="keypress"?mg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K$=Zr(G$),H$=zt({},Wy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AA=Zr(H$),Q$=zt({},qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UT}),Y$=Zr(Q$),J$=zt({},Jc,{propertyName:0,elapsedTime:0,pseudoElement:0}),X$=Zr(J$),Z$=zt({},Wy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ez=Zr(Z$),tz=[9,13,27,32],jT=Ks&&"CompositionEvent"in window,Nh=null;Ks&&"documentMode"in document&&(Nh=document.documentMode);var nz=Ks&&"TextEvent"in window&&!Nh,ok=Ks&&(!jT||Nh&&8<Nh&&11>=Nh),PA=" ",CA=!1;function ak(t,e){switch(t){case"keyup":return tz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jl=!1;function rz(t,e){switch(t){case"compositionend":return uk(e);case"keypress":return e.which!==32?null:(CA=!0,PA);case"textInput":return t=e.data,t===PA&&CA?null:t;default:return null}}function iz(t,e){if(Jl)return t==="compositionend"||!jT&&ak(t,e)?(t=sk(),pg=VT=Uo=null,Jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ok&&e.locale!=="ko"?null:e.data;default:return null}}var sz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sz[t.type]:e==="textarea"}function lk(t,e,n,r){jx(r),e=Gg(e,"onChange"),0<e.length&&(n=new FT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Oh=null,tf=null;function oz(t){wk(t,0)}function qy(t){var e=ec(t);if(Ox(e))return t}function az(t,e){if(t==="change")return e}var ck=!1;if(Ks){var Iw;if(Ks){var Sw="oninput"in document;if(!Sw){var xA=document.createElement("div");xA.setAttribute("oninput","return;"),Sw=typeof xA.oninput=="function"}Iw=Sw}else Iw=!1;ck=Iw&&(!document.documentMode||9<document.documentMode)}function kA(){Oh&&(Oh.detachEvent("onpropertychange",dk),tf=Oh=null)}function dk(t){if(t.propertyName==="value"&&qy(tf)){var e=[];lk(e,tf,t,NT(t)),Wx(oz,e)}}function uz(t,e,n){t==="focusin"?(kA(),Oh=e,tf=n,Oh.attachEvent("onpropertychange",dk)):t==="focusout"&&kA()}function lz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qy(tf)}function cz(t,e){if(t==="click")return qy(e)}function dz(t,e){if(t==="input"||t==="change")return qy(e)}function hz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fi=typeof Object.is=="function"?Object.is:hz;function nf(t,e){if(Fi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!T0.call(e,i)||!Fi(t[i],e[i]))return!1}return!0}function NA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function OA(t,e){var n=NA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NA(n)}}function hk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fk(){for(var t=window,e=Ug();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ug(t.document)}return e}function BT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fz(t){var e=fk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hk(n.ownerDocument.documentElement,n)){if(r!==null&&BT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=OA(n,s);var o=OA(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pz=Ks&&"documentMode"in document&&11>=document.documentMode,Xl=null,B0=null,Dh=null,$0=!1;function DA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$0||Xl==null||Xl!==Ug(r)||(r=Xl,"selectionStart"in r&&BT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dh&&nf(Dh,r)||(Dh=r,r=Gg(B0,"onSelect"),0<r.length&&(e=new FT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xl)))}function zm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zl={animationend:zm("Animation","AnimationEnd"),animationiteration:zm("Animation","AnimationIteration"),animationstart:zm("Animation","AnimationStart"),transitionend:zm("Transition","TransitionEnd")},Rw={},pk={};Ks&&(pk=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Gy(t){if(Rw[t])return Rw[t];if(!Zl[t])return t;var e=Zl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pk)return Rw[t]=e[n];return t}var mk=Gy("animationend"),gk=Gy("animationiteration"),yk=Gy("animationstart"),_k=Gy("transitionend"),vk=new Map,LA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(t,e){vk.set(t,e),Qu(e,[t])}for(var Aw=0;Aw<LA.length;Aw++){var Pw=LA[Aw],mz=Pw.toLowerCase(),gz=Pw[0].toUpperCase()+Pw.slice(1);_a(mz,"on"+gz)}_a(mk,"onAnimationEnd");_a(gk,"onAnimationIteration");_a(yk,"onAnimationStart");_a("dblclick","onDoubleClick");_a("focusin","onFocus");_a("focusout","onBlur");_a(_k,"onTransitionEnd");Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);Qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yz=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eh));function MA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,m$(r,e,void 0,t),t.currentTarget=null}function wk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;MA(i,u,h),s=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;MA(i,u,h),s=c}}}if(Bg)throw t=V0,Bg=!1,V0=null,t}function Ct(t,e){var n=e[K0];n===void 0&&(n=e[K0]=new Set);var r=t+"__bubble";n.has(r)||(Ek(e,t,2,!1),n.add(r))}function Cw(t,e,n){var r=0;e&&(r|=4),Ek(n,t,r,e)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function rf(t){if(!t[Wm]){t[Wm]=!0,Cx.forEach(function(n){n!=="selectionchange"&&(yz.has(n)||Cw(n,!1,t),Cw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wm]||(e[Wm]=!0,Cw("selectionchange",!1,e))}}function Ek(t,e,n,r){switch(ik(e)){case 1:var i=k$;break;case 4:i=N$;break;default:i=MT}n=i.bind(null,e,n,t),i=void 0,!M0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bw(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;u!==null;){if(o=du(u),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}u=u.parentNode}}r=r.return}Wx(function(){var h=s,p=NT(n),m=[];e:{var _=vk.get(t);if(_!==void 0){var A=FT,T=t;switch(t){case"keypress":if(mg(n)===0)break e;case"keydown":case"keyup":A=K$;break;case"focusin":T="focus",A=Tw;break;case"focusout":T="blur",A=Tw;break;case"beforeblur":case"afterblur":A=Tw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=SA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=L$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Y$;break;case mk:case gk:case yk:A=F$;break;case _k:A=X$;break;case"scroll":A=O$;break;case"wheel":A=ez;break;case"copy":case"cut":case"paste":A=j$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=AA}var k=(e&4)!==0,x=!k&&t==="scroll",P=k?_!==null?_+"Capture":null:_;k=[];for(var R=h,I;R!==null;){I=R;var F=I.stateNode;if(I.tag===5&&F!==null&&(I=F,P!==null&&(F=Jh(R,P),F!=null&&k.push(sf(R,F,I)))),x)break;R=R.return}0<k.length&&(_=new A(_,T,null,n,p),m.push({event:_,listeners:k}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",_&&n!==D0&&(T=n.relatedTarget||n.fromElement)&&(du(T)||T[Hs]))break e;if((A||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,A?(T=n.relatedTarget||n.toElement,A=h,T=T?du(T):null,T!==null&&(x=Yu(T),T!==x||T.tag!==5&&T.tag!==6)&&(T=null)):(A=null,T=h),A!==T)){if(k=SA,F="onMouseLeave",P="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(k=AA,F="onPointerLeave",P="onPointerEnter",R="pointer"),x=A==null?_:ec(A),I=T==null?_:ec(T),_=new k(F,R+"leave",A,n,p),_.target=x,_.relatedTarget=I,F=null,du(p)===h&&(k=new k(P,R+"enter",T,n,p),k.target=I,k.relatedTarget=x,F=k),x=F,A&&T)t:{for(k=A,P=T,R=0,I=k;I;I=Ll(I))R++;for(I=0,F=P;F;F=Ll(F))I++;for(;0<R-I;)k=Ll(k),R--;for(;0<I-R;)P=Ll(P),I--;for(;R--;){if(k===P||P!==null&&k===P.alternate)break t;k=Ll(k),P=Ll(P)}k=null}else k=null;A!==null&&VA(m,_,A,k,!1),T!==null&&x!==null&&VA(m,x,T,k,!0)}}e:{if(_=h?ec(h):window,A=_.nodeName&&_.nodeName.toLowerCase(),A==="select"||A==="input"&&_.type==="file")var z=az;else if(bA(_))if(ck)z=dz;else{z=lz;var G=uz}else(A=_.nodeName)&&A.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(z=cz);if(z&&(z=z(t,h))){lk(m,z,n,p);break e}G&&G(t,_,h),t==="focusout"&&(G=_._wrapperState)&&G.controlled&&_.type==="number"&&b0(_,"number",_.value)}switch(G=h?ec(h):window,t){case"focusin":(bA(G)||G.contentEditable==="true")&&(Xl=G,B0=h,Dh=null);break;case"focusout":Dh=B0=Xl=null;break;case"mousedown":$0=!0;break;case"contextmenu":case"mouseup":case"dragend":$0=!1,DA(m,n,p);break;case"selectionchange":if(pz)break;case"keydown":case"keyup":DA(m,n,p)}var C;if(jT)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Jl?ak(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(ok&&n.locale!=="ko"&&(Jl||S!=="onCompositionStart"?S==="onCompositionEnd"&&Jl&&(C=sk()):(Uo=p,VT="value"in Uo?Uo.value:Uo.textContent,Jl=!0)),G=Gg(h,S),0<G.length&&(S=new RA(S,t,null,n,p),m.push({event:S,listeners:G}),C?S.data=C:(C=uk(n),C!==null&&(S.data=C)))),(C=nz?rz(t,n):iz(t,n))&&(h=Gg(h,"onBeforeInput"),0<h.length&&(p=new RA("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=C))}wk(m,e)})}function sf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jh(t,n),s!=null&&r.unshift(sf(t,s,i)),s=Jh(t,e),s!=null&&r.push(sf(t,s,i))),t=t.return}return r}function Ll(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function VA(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,i?(c=Jh(n,s),c!=null&&o.unshift(sf(n,c,u))):i||(c=Jh(n,s),c!=null&&o.push(sf(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _z=/\r\n?/g,vz=/\u0000|\uFFFD/g;function FA(t){return(typeof t=="string"?t:""+t).replace(_z,`
`).replace(vz,"")}function qm(t,e,n){if(e=FA(e),FA(t)!==e&&n)throw Error(ce(425))}function Kg(){}var z0=null,W0=null;function q0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,wz=typeof clearTimeout=="function"?clearTimeout:void 0,UA=typeof Promise=="function"?Promise:void 0,Ez=typeof queueMicrotask=="function"?queueMicrotask:typeof UA<"u"?function(t){return UA.resolve(null).then(t).catch(Tz)}:G0;function Tz(t){setTimeout(function(){throw t})}function xw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ef(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ef(e)}function Qo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xc=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Xc,of="__reactProps$"+Xc,Hs="__reactContainer$"+Xc,K0="__reactEvents$"+Xc,Iz="__reactListeners$"+Xc,Sz="__reactHandles$"+Xc;function du(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hs]||n[Xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jA(t);t!==null;){if(n=t[Xi])return n;t=jA(t)}return e}t=n,n=t.parentNode}return null}function Gf(t){return t=t[Xi]||t[Hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ec(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Ky(t){return t[of]||null}var H0=[],tc=-1;function va(t){return{current:t}}function xt(t){0>tc||(t.current=H0[tc],H0[tc]=null,tc--)}function At(t,e){tc++,H0[tc]=t.current,t.current=e}var ia={},Xn=va(ia),xr=va(!1),bu=ia;function Sc(t,e){var n=t.type.contextTypes;if(!n)return ia;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function Hg(){xt(xr),xt(Xn)}function BA(t,e,n){if(Xn.current!==ia)throw Error(ce(168));At(Xn,e),At(xr,n)}function Tk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,u$(t)||"Unknown",i));return zt({},n,r)}function Qg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ia,bu=Xn.current,At(Xn,t),At(xr,xr.current),!0}function $A(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=Tk(t,e,bu),r.__reactInternalMemoizedMergedChildContext=t,xt(xr),xt(Xn),At(Xn,t)):xt(xr),At(xr,n)}var Ms=null,Hy=!1,kw=!1;function Ik(t){Ms===null?Ms=[t]:Ms.push(t)}function Rz(t){Hy=!0,Ik(t)}function wa(){if(!kw&&Ms!==null){kw=!0;var t=0,e=_t;try{var n=Ms;for(_t=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ms=null,Hy=!1}catch(i){throw Ms!==null&&(Ms=Ms.slice(t+1)),Hx(OT,wa),i}finally{_t=e,kw=!1}}return null}var nc=[],rc=0,Yg=null,Jg=0,hi=[],fi=0,xu=null,Vs=1,Fs="";function Xa(t,e){nc[rc++]=Jg,nc[rc++]=Yg,Yg=t,Jg=e}function Sk(t,e,n){hi[fi++]=Vs,hi[fi++]=Fs,hi[fi++]=xu,xu=t;var r=Vs;t=Fs;var i=32-Li(r)-1;r&=~(1<<i),n+=1;var s=32-Li(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vs=1<<32-Li(e)+i|n<<i|r,Fs=s+t}else Vs=1<<s|n<<i|r,Fs=t}function $T(t){t.return!==null&&(Xa(t,1),Sk(t,1,0))}function zT(t){for(;t===Yg;)Yg=nc[--rc],nc[rc]=null,Jg=nc[--rc],nc[rc]=null;for(;t===xu;)xu=hi[--fi],hi[fi]=null,Fs=hi[--fi],hi[fi]=null,Vs=hi[--fi],hi[fi]=null}var Wr=null,Br=null,Ot=!1,Oi=null;function Rk(t,e){var n=mi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wr=t,Br=Qo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wr=t,Br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xu!==null?{id:Vs,overflow:Fs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wr=t,Br=null,!0):!1;default:return!1}}function Q0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Y0(t){if(Ot){var e=Br;if(e){var n=e;if(!zA(t,e)){if(Q0(t))throw Error(ce(418));e=Qo(n.nextSibling);var r=Wr;e&&zA(t,e)?Rk(r,n):(t.flags=t.flags&-4097|2,Ot=!1,Wr=t)}}else{if(Q0(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Ot=!1,Wr=t}}}function WA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wr=t}function Gm(t){if(t!==Wr)return!1;if(!Ot)return WA(t),Ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!q0(t.type,t.memoizedProps)),e&&(e=Br)){if(Q0(t))throw Ak(),Error(ce(418));for(;e;)Rk(t,e),e=Qo(e.nextSibling)}if(WA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Br=Qo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Br=null}}else Br=Wr?Qo(t.stateNode.nextSibling):null;return!0}function Ak(){for(var t=Br;t;)t=Qo(t.nextSibling)}function Rc(){Br=Wr=null,Ot=!1}function WT(t){Oi===null?Oi=[t]:Oi.push(t)}var Az=ro.ReactCurrentBatchConfig;function oh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var u=i.refs;o===null?delete u[s]:u[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Km(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qA(t){var e=t._init;return e(t._payload)}function Pk(t){function e(P,R){if(t){var I=P.deletions;I===null?(P.deletions=[R],P.flags|=16):I.push(R)}}function n(P,R){if(!t)return null;for(;R!==null;)e(P,R),R=R.sibling;return null}function r(P,R){for(P=new Map;R!==null;)R.key!==null?P.set(R.key,R):P.set(R.index,R),R=R.sibling;return P}function i(P,R){return P=Zo(P,R),P.index=0,P.sibling=null,P}function s(P,R,I){return P.index=I,t?(I=P.alternate,I!==null?(I=I.index,I<R?(P.flags|=2,R):I):(P.flags|=2,R)):(P.flags|=1048576,R)}function o(P){return t&&P.alternate===null&&(P.flags|=2),P}function u(P,R,I,F){return R===null||R.tag!==6?(R=Fw(I,P.mode,F),R.return=P,R):(R=i(R,I),R.return=P,R)}function c(P,R,I,F){var z=I.type;return z===Yl?p(P,R,I.props.children,F,I.key):R!==null&&(R.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===No&&qA(z)===R.type)?(F=i(R,I.props),F.ref=oh(P,R,I),F.return=P,F):(F=Tg(I.type,I.key,I.props,null,P.mode,F),F.ref=oh(P,R,I),F.return=P,F)}function h(P,R,I,F){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=Uw(I,P.mode,F),R.return=P,R):(R=i(R,I.children||[]),R.return=P,R)}function p(P,R,I,F,z){return R===null||R.tag!==7?(R=wu(I,P.mode,F,z),R.return=P,R):(R=i(R,I),R.return=P,R)}function m(P,R,I){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Fw(""+R,P.mode,I),R.return=P,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Mm:return I=Tg(R.type,R.key,R.props,null,P.mode,I),I.ref=oh(P,null,R),I.return=P,I;case Ql:return R=Uw(R,P.mode,I),R.return=P,R;case No:var F=R._init;return m(P,F(R._payload),I)}if(vh(R)||th(R))return R=wu(R,P.mode,I,null),R.return=P,R;Km(P,R)}return null}function _(P,R,I,F){var z=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:u(P,R,""+I,F);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Mm:return I.key===z?c(P,R,I,F):null;case Ql:return I.key===z?h(P,R,I,F):null;case No:return z=I._init,_(P,R,z(I._payload),F)}if(vh(I)||th(I))return z!==null?null:p(P,R,I,F,null);Km(P,I)}return null}function A(P,R,I,F,z){if(typeof F=="string"&&F!==""||typeof F=="number")return P=P.get(I)||null,u(R,P,""+F,z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Mm:return P=P.get(F.key===null?I:F.key)||null,c(R,P,F,z);case Ql:return P=P.get(F.key===null?I:F.key)||null,h(R,P,F,z);case No:var G=F._init;return A(P,R,I,G(F._payload),z)}if(vh(F)||th(F))return P=P.get(I)||null,p(R,P,F,z,null);Km(R,F)}return null}function T(P,R,I,F){for(var z=null,G=null,C=R,S=R=0,L=null;C!==null&&S<I.length;S++){C.index>S?(L=C,C=null):L=C.sibling;var V=_(P,C,I[S],F);if(V===null){C===null&&(C=L);break}t&&C&&V.alternate===null&&e(P,C),R=s(V,R,S),G===null?z=V:G.sibling=V,G=V,C=L}if(S===I.length)return n(P,C),Ot&&Xa(P,S),z;if(C===null){for(;S<I.length;S++)C=m(P,I[S],F),C!==null&&(R=s(C,R,S),G===null?z=C:G.sibling=C,G=C);return Ot&&Xa(P,S),z}for(C=r(P,C);S<I.length;S++)L=A(C,P,S,I[S],F),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?S:L.key),R=s(L,R,S),G===null?z=L:G.sibling=L,G=L);return t&&C.forEach(function(U){return e(P,U)}),Ot&&Xa(P,S),z}function k(P,R,I,F){var z=th(I);if(typeof z!="function")throw Error(ce(150));if(I=z.call(I),I==null)throw Error(ce(151));for(var G=z=null,C=R,S=R=0,L=null,V=I.next();C!==null&&!V.done;S++,V=I.next()){C.index>S?(L=C,C=null):L=C.sibling;var U=_(P,C,V.value,F);if(U===null){C===null&&(C=L);break}t&&C&&U.alternate===null&&e(P,C),R=s(U,R,S),G===null?z=U:G.sibling=U,G=U,C=L}if(V.done)return n(P,C),Ot&&Xa(P,S),z;if(C===null){for(;!V.done;S++,V=I.next())V=m(P,V.value,F),V!==null&&(R=s(V,R,S),G===null?z=V:G.sibling=V,G=V);return Ot&&Xa(P,S),z}for(C=r(P,C);!V.done;S++,V=I.next())V=A(C,P,S,V.value,F),V!==null&&(t&&V.alternate!==null&&C.delete(V.key===null?S:V.key),R=s(V,R,S),G===null?z=V:G.sibling=V,G=V);return t&&C.forEach(function(M){return e(P,M)}),Ot&&Xa(P,S),z}function x(P,R,I,F){if(typeof I=="object"&&I!==null&&I.type===Yl&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Mm:e:{for(var z=I.key,G=R;G!==null;){if(G.key===z){if(z=I.type,z===Yl){if(G.tag===7){n(P,G.sibling),R=i(G,I.props.children),R.return=P,P=R;break e}}else if(G.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===No&&qA(z)===G.type){n(P,G.sibling),R=i(G,I.props),R.ref=oh(P,G,I),R.return=P,P=R;break e}n(P,G);break}else e(P,G);G=G.sibling}I.type===Yl?(R=wu(I.props.children,P.mode,F,I.key),R.return=P,P=R):(F=Tg(I.type,I.key,I.props,null,P.mode,F),F.ref=oh(P,R,I),F.return=P,P=F)}return o(P);case Ql:e:{for(G=I.key;R!==null;){if(R.key===G)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){n(P,R.sibling),R=i(R,I.children||[]),R.return=P,P=R;break e}else{n(P,R);break}else e(P,R);R=R.sibling}R=Uw(I,P.mode,F),R.return=P,P=R}return o(P);case No:return G=I._init,x(P,R,G(I._payload),F)}if(vh(I))return T(P,R,I,F);if(th(I))return k(P,R,I,F);Km(P,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,R!==null&&R.tag===6?(n(P,R.sibling),R=i(R,I),R.return=P,P=R):(n(P,R),R=Fw(I,P.mode,F),R.return=P,P=R),o(P)):n(P,R)}return x}var Ac=Pk(!0),Ck=Pk(!1),Xg=va(null),Zg=null,ic=null,qT=null;function GT(){qT=ic=Zg=null}function KT(t){var e=Xg.current;xt(Xg),t._currentValue=e}function J0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pc(t,e){Zg=t,qT=ic=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rr=!0),t.firstContext=null)}function wi(t){var e=t._currentValue;if(qT!==t)if(t={context:t,memoizedValue:e,next:null},ic===null){if(Zg===null)throw Error(ce(308));ic=t,Zg.dependencies={lanes:0,firstContext:t}}else ic=ic.next=t;return e}var hu=null;function HT(t){hu===null?hu=[t]:hu.push(t)}function bk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,HT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qs(t,r)}function Qs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Oo=!1;function QT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qs(t,n)}return i=r.interleaved,i===null?(e.next=e,HT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qs(t,n)}function gg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,DT(t,n)}}function GA(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ey(t,e,n,r){var i=t.updateQueue;Oo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==o&&(u===null?p.firstBaseUpdate=h:u.next=h,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;o=0,p=h=c=null,u=s;do{var _=u.lane,A=u.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:A,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,k=u;switch(_=e,A=n,k.tag){case 1:if(T=k.payload,typeof T=="function"){m=T.call(A,m,_);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=k.payload,_=typeof T=="function"?T.call(A,m,_):T,_==null)break e;m=zt({},m,_);break e;case 2:Oo=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[u]:_.push(u))}else A={eventTime:A,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(h=p=A,c=m):p=p.next=A,o|=_;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;_=u,u=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nu|=o,t.lanes=o,t.memoizedState=m}}function KA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var Kf={},as=va(Kf),af=va(Kf),uf=va(Kf);function fu(t){if(t===Kf)throw Error(ce(174));return t}function YT(t,e){switch(At(uf,e),At(af,t),At(as,Kf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:k0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=k0(e,t)}xt(as),At(as,e)}function Pc(){xt(as),xt(af),xt(uf)}function kk(t){fu(uf.current);var e=fu(as.current),n=k0(e,t.type);e!==n&&(At(af,t),At(as,n))}function JT(t){af.current===t&&(xt(as),xt(af))}var Ut=va(0);function ty(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nw=[];function XT(){for(var t=0;t<Nw.length;t++)Nw[t]._workInProgressVersionPrimary=null;Nw.length=0}var yg=ro.ReactCurrentDispatcher,Ow=ro.ReactCurrentBatchConfig,ku=0,Bt=null,yn=null,Pn=null,ny=!1,Lh=!1,lf=0,Pz=0;function Kn(){throw Error(ce(321))}function ZT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fi(t[n],e[n]))return!1;return!0}function eI(t,e,n,r,i,s){if(ku=s,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yg.current=t===null||t.memoizedState===null?kz:Nz,t=n(r,i),Lh){s=0;do{if(Lh=!1,lf=0,25<=s)throw Error(ce(301));s+=1,Pn=yn=null,e.updateQueue=null,yg.current=Oz,t=n(r,i)}while(Lh)}if(yg.current=ry,e=yn!==null&&yn.next!==null,ku=0,Pn=yn=Bt=null,ny=!1,e)throw Error(ce(300));return t}function tI(){var t=lf!==0;return lf=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Bt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Ei(){if(yn===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=Pn===null?Bt.memoizedState:Pn.next;if(e!==null)Pn=e,yn=t;else{if(t===null)throw Error(ce(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Pn===null?Bt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function cf(t,e){return typeof e=="function"?e(t):e}function Dw(t){var e=Ei(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=yn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=o=null,c=null,h=s;do{var p=h.lane;if((ku&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=m,o=r):c=c.next=m,Bt.lanes|=p,Nu|=p}h=h.next}while(h!==null&&h!==s);c===null?o=r:c.next=u,Fi(r,e.memoizedState)||(Rr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Bt.lanes|=s,Nu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lw(t){var e=Ei(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Fi(s,e.memoizedState)||(Rr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Nk(){}function Ok(t,e){var n=Bt,r=Ei(),i=e(),s=!Fi(r.memoizedState,i);if(s&&(r.memoizedState=i,Rr=!0),r=r.queue,nI(Mk.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,df(9,Lk.bind(null,n,r,i,e),void 0,null),bn===null)throw Error(ce(349));ku&30||Dk(n,e,i)}return i}function Dk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lk(t,e,n,r){e.value=n,e.getSnapshot=r,Vk(e)&&Fk(t)}function Mk(t,e,n){return n(function(){Vk(e)&&Fk(t)})}function Vk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fi(t,n)}catch{return!0}}function Fk(t){var e=Qs(t,1);e!==null&&Mi(e,t,1,-1)}function HA(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:t},e.queue=t,t=t.dispatch=xz.bind(null,Bt,t),[e.memoizedState,t]}function df(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uk(){return Ei().memoizedState}function _g(t,e,n,r){var i=Ji();Bt.flags|=t,i.memoizedState=df(1|e,n,void 0,r===void 0?null:r)}function Qy(t,e,n,r){var i=Ei();r=r===void 0?null:r;var s=void 0;if(yn!==null){var o=yn.memoizedState;if(s=o.destroy,r!==null&&ZT(r,o.deps)){i.memoizedState=df(e,n,s,r);return}}Bt.flags|=t,i.memoizedState=df(1|e,n,s,r)}function QA(t,e){return _g(8390656,8,t,e)}function nI(t,e){return Qy(2048,8,t,e)}function jk(t,e){return Qy(4,2,t,e)}function Bk(t,e){return Qy(4,4,t,e)}function $k(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zk(t,e,n){return n=n!=null?n.concat([t]):null,Qy(4,4,$k.bind(null,e,t),n)}function rI(){}function Wk(t,e){var n=Ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ZT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qk(t,e){var n=Ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ZT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gk(t,e,n){return ku&21?(Fi(n,e)||(n=Jx(),Bt.lanes|=n,Nu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rr=!0),t.memoizedState=n)}function Cz(t,e){var n=_t;_t=n!==0&&4>n?n:4,t(!0);var r=Ow.transition;Ow.transition={};try{t(!1),e()}finally{_t=n,Ow.transition=r}}function Kk(){return Ei().memoizedState}function bz(t,e,n){var r=Xo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hk(t))Qk(e,n);else if(n=bk(t,e,n,r),n!==null){var i=lr();Mi(n,t,r,i),Yk(n,e,r)}}function xz(t,e,n){var r=Xo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hk(t))Qk(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,u=s(o,n);if(i.hasEagerState=!0,i.eagerState=u,Fi(u,o)){var c=e.interleaved;c===null?(i.next=i,HT(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=bk(t,e,i,r),n!==null&&(i=lr(),Mi(n,t,r,i),Yk(n,e,r))}}function Hk(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function Qk(t,e){Lh=ny=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,DT(t,n)}}var ry={readContext:wi,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},kz={readContext:wi,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:wi,useEffect:QA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_g(4194308,4,$k.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _g(4194308,4,t,e)},useInsertionEffect:function(t,e){return _g(4,2,t,e)},useMemo:function(t,e){var n=Ji();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ji();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bz.bind(null,Bt,t),[r.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:HA,useDebugValue:rI,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=HA(!1),e=t[0];return t=Cz.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bt,i=Ji();if(Ot){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),bn===null)throw Error(ce(349));ku&30||Dk(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,QA(Mk.bind(null,r,s,t),[t]),r.flags|=2048,df(9,Lk.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ji(),e=bn.identifierPrefix;if(Ot){var n=Fs,r=Vs;n=(r&~(1<<32-Li(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=lf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Nz={readContext:wi,useCallback:Wk,useContext:wi,useEffect:nI,useImperativeHandle:zk,useInsertionEffect:jk,useLayoutEffect:Bk,useMemo:qk,useReducer:Dw,useRef:Uk,useState:function(){return Dw(cf)},useDebugValue:rI,useDeferredValue:function(t){var e=Ei();return Gk(e,yn.memoizedState,t)},useTransition:function(){var t=Dw(cf)[0],e=Ei().memoizedState;return[t,e]},useMutableSource:Nk,useSyncExternalStore:Ok,useId:Kk,unstable_isNewReconciler:!1},Oz={readContext:wi,useCallback:Wk,useContext:wi,useEffect:nI,useImperativeHandle:zk,useInsertionEffect:jk,useLayoutEffect:Bk,useMemo:qk,useReducer:Lw,useRef:Uk,useState:function(){return Lw(cf)},useDebugValue:rI,useDeferredValue:function(t){var e=Ei();return yn===null?e.memoizedState=t:Gk(e,yn.memoizedState,t)},useTransition:function(){var t=Lw(cf)[0],e=Ei().memoizedState;return[t,e]},useMutableSource:Nk,useSyncExternalStore:Ok,useId:Kk,unstable_isNewReconciler:!1};function ki(t,e){if(t&&t.defaultProps){e=zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function X0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yy={isMounted:function(t){return(t=t._reactInternals)?Yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=lr(),i=Xo(t),s=qs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yo(t,s,i),e!==null&&(Mi(e,t,i,r),gg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=lr(),i=Xo(t),s=qs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yo(t,s,i),e!==null&&(Mi(e,t,i,r),gg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lr(),r=Xo(t),i=qs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yo(t,i,r),e!==null&&(Mi(e,t,r,n),gg(e,t,r))}};function YA(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!nf(n,r)||!nf(i,s):!0}function Jk(t,e,n){var r=!1,i=ia,s=e.contextType;return typeof s=="object"&&s!==null?s=wi(s):(i=kr(e)?bu:Xn.current,r=e.contextTypes,s=(r=r!=null)?Sc(t,i):ia),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function JA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yy.enqueueReplaceState(e,e.state,null)}function Z0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},QT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wi(s):(s=kr(e)?bu:Xn.current,i.context=Sc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(X0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yy.enqueueReplaceState(i,i.state,null),ey(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cc(t,e){try{var n="",r=e;do n+=a$(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Dz=typeof WeakMap=="function"?WeakMap:Map;function Xk(t,e,n){n=qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sy||(sy=!0,cE=r),eE(t,e)},n}function Zk(t,e,n){n=qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){eE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eE(t,e),typeof r!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Dz;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Hz.bind(null,t,e,n),e.then(t,t))}function ZA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qs(-1,1),e.tag=2,Yo(n,e,1))),n.lanes|=1),t)}var Lz=ro.ReactCurrentOwner,Rr=!1;function sr(t,e,n,r){e.child=t===null?Ck(e,null,n,r):Ac(e,t.child,n,r)}function tP(t,e,n,r,i){n=n.render;var s=e.ref;return pc(e,i),r=eI(t,e,n,r,s,i),n=tI(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ys(t,e,i)):(Ot&&n&&$T(e),e.flags|=1,sr(t,e,r,i),e.child)}function nP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!dI(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,eN(t,e,s,r,i)):(t=Tg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:nf,n(o,r)&&t.ref===e.ref)return Ys(t,e,i)}return e.flags|=1,t=Zo(s,r),t.ref=e.ref,t.return=e,e.child=t}function eN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(nf(s,r)&&t.ref===e.ref)if(Rr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Rr=!0);else return e.lanes=t.lanes,Ys(t,e,i)}return tE(t,e,n,r,i)}function tN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(oc,Ur),Ur|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(oc,Ur),Ur|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,At(oc,Ur),Ur|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,At(oc,Ur),Ur|=r;return sr(t,e,i,n),e.child}function nN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tE(t,e,n,r,i){var s=kr(n)?bu:Xn.current;return s=Sc(e,s),pc(e,i),n=eI(t,e,n,r,s,i),r=tI(),t!==null&&!Rr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ys(t,e,i)):(Ot&&r&&$T(e),e.flags|=1,sr(t,e,n,i),e.child)}function rP(t,e,n,r,i){if(kr(n)){var s=!0;Qg(e)}else s=!1;if(pc(e,i),e.stateNode===null)vg(t,e),Jk(e,n,r),Z0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=wi(h):(h=kr(n)?bu:Xn.current,h=Sc(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&JA(e,o,r,h),Oo=!1;var _=e.memoizedState;o.state=_,ey(e,r,o,i),c=e.memoizedState,u!==r||_!==c||xr.current||Oo?(typeof p=="function"&&(X0(e,n,p,r),c=e.memoizedState),(u=Oo||YA(e,n,u,r,_,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xk(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:ki(e.type,u),o.props=h,m=e.pendingProps,_=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=wi(c):(c=kr(n)?bu:Xn.current,c=Sc(e,c));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==m||_!==c)&&JA(e,o,r,c),Oo=!1,_=e.memoizedState,o.state=_,ey(e,r,o,i);var T=e.memoizedState;u!==m||_!==T||xr.current||Oo?(typeof A=="function"&&(X0(e,n,A,r),T=e.memoizedState),(h=Oo||YA(e,n,h,r,_,T,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return nE(t,e,n,r,s,i)}function nE(t,e,n,r,i,s){nN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&$A(e,n,!1),Ys(t,e,s);r=e.stateNode,Lz.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ac(e,t.child,null,s),e.child=Ac(e,null,u,s)):sr(t,e,u,s),e.memoizedState=r.state,i&&$A(e,n,!0),e.child}function rN(t){var e=t.stateNode;e.pendingContext?BA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&BA(t,e.context,!1),YT(t,e.containerInfo)}function iP(t,e,n,r,i){return Rc(),WT(i),e.flags|=256,sr(t,e,n,r),e.child}var rE={dehydrated:null,treeContext:null,retryLane:0};function iE(t){return{baseLanes:t,cachePool:null,transitions:null}}function iN(t,e,n){var r=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Ut,i&1),t===null)return Y0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zy(o,r,0,null),t=wu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=iE(n),e.memoizedState=rE,t):iI(e,o));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Mz(t,e,o,r,u,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Zo(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Zo(u,s):(s=wu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?iE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rE,r}return s=t.child,t=s.sibling,r=Zo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iI(t,e){return e=Zy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hm(t,e,n,r){return r!==null&&WT(r),Ac(e,t.child,null,n),t=iI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mz(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mw(Error(ce(422))),Hm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zy({mode:"visible",children:r.children},i,0,null),s=wu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ac(e,t.child,null,o),e.child.memoizedState=iE(o),e.memoizedState=rE,s);if(!(e.mode&1))return Hm(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ce(419)),r=Mw(s,r,void 0),Hm(t,e,o,r)}if(u=(o&t.childLanes)!==0,Rr||u){if(r=bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qs(t,i),Mi(r,t,i,-1))}return cI(),r=Mw(Error(ce(421))),Hm(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Qz.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Br=Qo(i.nextSibling),Wr=e,Ot=!0,Oi=null,t!==null&&(hi[fi++]=Vs,hi[fi++]=Fs,hi[fi++]=xu,Vs=t.id,Fs=t.overflow,xu=e),e=iI(e,r.children),e.flags|=4096,e)}function sP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),J0(t.return,e,n)}function Vw(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sN(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sr(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sP(t,n,e);else if(t.tag===19)sP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(At(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ty(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vw(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ty(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vw(e,!0,n,null,s);break;case"together":Vw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=Zo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Vz(t,e,n){switch(e.tag){case 3:rN(e),Rc();break;case 5:kk(e);break;case 1:kr(e.type)&&Qg(e);break;case 4:YT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(Xg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?iN(t,e,n):(At(Ut,Ut.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);At(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,tN(t,e,n)}return Ys(t,e,n)}var oN,sE,aN,uN;oN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sE=function(){};aN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fu(as.current);var s=null;switch(n){case"input":i=P0(t,i),r=P0(t,r),s=[];break;case"select":i=zt({},i,{value:void 0}),r=zt({},r,{value:void 0}),s=[];break;case"textarea":i=x0(t,i),r=x0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kg)}N0(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var u=i[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qh.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(u=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Qh.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ct("scroll",t),s||u===c||(s=[])):(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};uN=function(t,e,n,r){n!==r&&(e.flags|=4)};function ah(t,e){if(!Ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fz(t,e,n){var r=e.pendingProps;switch(zT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(e),null;case 1:return kr(e.type)&&Hg(),Hn(e),null;case 3:return r=e.stateNode,Pc(),xt(xr),xt(Xn),XT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Oi!==null&&(fE(Oi),Oi=null))),sE(t,e),Hn(e),null;case 5:JT(e);var i=fu(uf.current);if(n=e.type,t!==null&&e.stateNode!=null)aN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Hn(e),null}if(t=fu(as.current),Gm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xi]=e,r[of]=s,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<Eh.length;i++)Ct(Eh[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":pA(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":gA(r,s),Ct("invalid",r)}N0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&qm(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&qm(r.textContent,u,t),i=["children",""+u]):Qh.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ct("scroll",r)}switch(n){case"input":Vm(r),mA(r,s,!0);break;case"textarea":Vm(r),yA(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Kg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xi]=e,t[of]=r,oN(t,e,!1,!1),e.stateNode=t;e:{switch(o=O0(n,r),n){case"dialog":Ct("cancel",t),Ct("close",t),i=r;break;case"iframe":case"object":case"embed":Ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eh.length;i++)Ct(Eh[i],t);i=r;break;case"source":Ct("error",t),i=r;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=r;break;case"details":Ct("toggle",t),i=r;break;case"input":pA(t,r),i=P0(t,r),Ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=zt({},r,{value:void 0}),Ct("invalid",t);break;case"textarea":gA(t,r),i=x0(t,r),Ct("invalid",t);break;default:i=r}N0(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?Ux(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vx(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yh(t,c):typeof c=="number"&&Yh(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ct("scroll",t):c!=null&&CT(t,s,c,o))}switch(n){case"input":Vm(t),mA(t,r,!1);break;case"textarea":Vm(t),yA(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ra(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cc(t,!!r.multiple,s,!1):r.defaultValue!=null&&cc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hn(e),null;case 6:if(t&&e.stateNode!=null)uN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=fu(uf.current),fu(as.current),Gm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xi]=e,(s=r.nodeValue!==n)&&(t=Wr,t!==null))switch(t.tag){case 3:qm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qm(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return Hn(e),null;case 13:if(xt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Br!==null&&e.mode&1&&!(e.flags&128))Ak(),Rc(),e.flags|=98560,s=!1;else if(s=Gm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[Xi]=e}else Rc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hn(e),s=!1}else Oi!==null&&(fE(Oi),Oi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?vn===0&&(vn=3):cI())),e.updateQueue!==null&&(e.flags|=4),Hn(e),null);case 4:return Pc(),sE(t,e),t===null&&rf(e.stateNode.containerInfo),Hn(e),null;case 10:return KT(e.type._context),Hn(e),null;case 17:return kr(e.type)&&Hg(),Hn(e),null;case 19:if(xt(Ut),s=e.memoizedState,s===null)return Hn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ah(s,!1);else{if(vn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ty(t),o!==null){for(e.flags|=128,ah(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&tn()>bc&&(e.flags|=128,r=!0,ah(s,!1),e.lanes=4194304)}else{if(!r)if(t=ty(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ah(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ot)return Hn(e),null}else 2*tn()-s.renderingStartTime>bc&&n!==1073741824&&(e.flags|=128,r=!0,ah(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tn(),e.sibling=null,n=Ut.current,At(Ut,r?n&1|2:n&1),e):(Hn(e),null);case 22:case 23:return lI(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ur&1073741824&&(Hn(e),e.subtreeFlags&6&&(e.flags|=8192)):Hn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function Uz(t,e){switch(zT(e),e.tag){case 1:return kr(e.type)&&Hg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pc(),xt(xr),xt(Xn),XT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return JT(e),null;case 13:if(xt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));Rc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Ut),null;case 4:return Pc(),null;case 10:return KT(e.type._context),null;case 22:case 23:return lI(),null;case 24:return null;default:return null}}var Qm=!1,Yn=!1,jz=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function sc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Kt(t,e,r)}else n.current=null}function oE(t,e,n){try{n()}catch(r){Kt(t,e,r)}}var oP=!1;function Bz(t,e){if(z0=Wg,t=fk(),BT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,p=0,m=t,_=null;t:for(;;){for(var A;m!==n||i!==0&&m.nodeType!==3||(u=o+i),m!==s||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)_=m,m=A;for(;;){if(m===t)break t;if(_===n&&++h===i&&(u=o),_===s&&++p===r&&(c=o),(A=m.nextSibling)!==null)break;m=_,_=m.parentNode}m=A}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(W0={focusedElem:t,selectionRange:n},Wg=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var k=T.memoizedProps,x=T.memoizedState,P=e.stateNode,R=P.getSnapshotBeforeUpdate(e.elementType===e.type?k:ki(e.type,k),x);P.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(F){Kt(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return T=oP,oP=!1,T}function Mh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oE(e,n,s)}i=i.next}while(i!==r)}}function Jy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lN(t){var e=t.alternate;e!==null&&(t.alternate=null,lN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xi],delete e[of],delete e[K0],delete e[Iz],delete e[Sz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cN(t){return t.tag===5||t.tag===3||t.tag===4}function aP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kg));else if(r!==4&&(t=t.child,t!==null))for(uE(t,e,n),t=t.sibling;t!==null;)uE(t,e,n),t=t.sibling}function lE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lE(t,e,n),t=t.sibling;t!==null;)lE(t,e,n),t=t.sibling}var Mn=null,Ni=!1;function Po(t,e,n){for(n=n.child;n!==null;)dN(t,e,n),n=n.sibling}function dN(t,e,n){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(zy,n)}catch{}switch(n.tag){case 5:Yn||sc(n,e);case 6:var r=Mn,i=Ni;Mn=null,Po(t,e,n),Mn=r,Ni=i,Mn!==null&&(Ni?(t=Mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mn.removeChild(n.stateNode));break;case 18:Mn!==null&&(Ni?(t=Mn,n=n.stateNode,t.nodeType===8?xw(t.parentNode,n):t.nodeType===1&&xw(t,n),ef(t)):xw(Mn,n.stateNode));break;case 4:r=Mn,i=Ni,Mn=n.stateNode.containerInfo,Ni=!0,Po(t,e,n),Mn=r,Ni=i;break;case 0:case 11:case 14:case 15:if(!Yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oE(n,e,o),i=i.next}while(i!==r)}Po(t,e,n);break;case 1:if(!Yn&&(sc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Kt(n,e,u)}Po(t,e,n);break;case 21:Po(t,e,n);break;case 22:n.mode&1?(Yn=(r=Yn)||n.memoizedState!==null,Po(t,e,n),Yn=r):Po(t,e,n);break;default:Po(t,e,n)}}function uP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jz),e.forEach(function(r){var i=Yz.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Mn=u.stateNode,Ni=!1;break e;case 3:Mn=u.stateNode.containerInfo,Ni=!0;break e;case 4:Mn=u.stateNode.containerInfo,Ni=!0;break e}u=u.return}if(Mn===null)throw Error(ce(160));dN(s,o,i),Mn=null,Ni=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(h){Kt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hN(e,t),e=e.sibling}function hN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xi(e,t),Qi(t),r&4){try{Mh(3,t,t.return),Jy(3,t)}catch(k){Kt(t,t.return,k)}try{Mh(5,t,t.return)}catch(k){Kt(t,t.return,k)}}break;case 1:xi(e,t),Qi(t),r&512&&n!==null&&sc(n,n.return);break;case 5:if(xi(e,t),Qi(t),r&512&&n!==null&&sc(n,n.return),t.flags&32){var i=t.stateNode;try{Yh(i,"")}catch(k){Kt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&Dx(i,s),O0(u,o);var h=O0(u,s);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Ux(i,m):p==="dangerouslySetInnerHTML"?Vx(i,m):p==="children"?Yh(i,m):CT(i,p,m,h)}switch(u){case"input":C0(i,s);break;case"textarea":Lx(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?cc(i,!!s.multiple,A,!1):_!==!!s.multiple&&(s.defaultValue!=null?cc(i,!!s.multiple,s.defaultValue,!0):cc(i,!!s.multiple,s.multiple?[]:"",!1))}i[of]=s}catch(k){Kt(t,t.return,k)}}break;case 6:if(xi(e,t),Qi(t),r&4){if(t.stateNode===null)throw Error(ce(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){Kt(t,t.return,k)}}break;case 3:if(xi(e,t),Qi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ef(e.containerInfo)}catch(k){Kt(t,t.return,k)}break;case 4:xi(e,t),Qi(t);break;case 13:xi(e,t),Qi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(aI=tn())),r&4&&uP(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Yn=(h=Yn)||p,xi(e,t),Yn=h):xi(e,t),Qi(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Ie=t,p=t.child;p!==null;){for(m=Ie=p;Ie!==null;){switch(_=Ie,A=_.child,_.tag){case 0:case 11:case 14:case 15:Mh(4,_,_.return);break;case 1:sc(_,_.return);var T=_.stateNode;if(typeof T.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(k){Kt(r,n,k)}}break;case 5:sc(_,_.return);break;case 22:if(_.memoizedState!==null){cP(m);continue}}A!==null?(A.return=_,Ie=A):cP(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Fx("display",o))}catch(k){Kt(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(k){Kt(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xi(e,t),Qi(t),r&4&&uP(t);break;case 21:break;default:xi(e,t),Qi(t)}}function Qi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cN(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Yh(i,""),r.flags&=-33);var s=aP(t);lE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,u=aP(t);uE(t,u,o);break;default:throw Error(ce(161))}}catch(c){Kt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $z(t,e,n){Ie=t,fN(t)}function fN(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Qm;if(!o){var u=i.alternate,c=u!==null&&u.memoizedState!==null||Yn;u=Qm;var h=Yn;if(Qm=o,(Yn=c)&&!h)for(Ie=i;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?dP(i):c!==null?(c.return=o,Ie=c):dP(i);for(;s!==null;)Ie=s,fN(s),s=s.sibling;Ie=i,Qm=u,Yn=h}lP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ie=s):lP(t)}}function lP(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yn||Jy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&KA(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}KA(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&ef(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Yn||e.flags&512&&aE(e)}catch(_){Kt(e,e.return,_)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function cP(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function dP(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jy(4,e)}catch(c){Kt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Kt(e,i,c)}}var s=e.return;try{aE(e)}catch(c){Kt(e,s,c)}break;case 5:var o=e.return;try{aE(e)}catch(c){Kt(e,o,c)}}}catch(c){Kt(e,e.return,c)}if(e===t){Ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Ie=u;break}Ie=e.return}}var zz=Math.ceil,iy=ro.ReactCurrentDispatcher,sI=ro.ReactCurrentOwner,yi=ro.ReactCurrentBatchConfig,at=0,bn=null,dn=null,Un=0,Ur=0,oc=va(0),vn=0,hf=null,Nu=0,Xy=0,oI=0,Vh=null,Sr=null,aI=0,bc=1/0,Ls=null,sy=!1,cE=null,Jo=null,Ym=!1,jo=null,oy=0,Fh=0,dE=null,wg=-1,Eg=0;function lr(){return at&6?tn():wg!==-1?wg:wg=tn()}function Xo(t){return t.mode&1?at&2&&Un!==0?Un&-Un:Az.transition!==null?(Eg===0&&(Eg=Jx()),Eg):(t=_t,t!==0||(t=window.event,t=t===void 0?16:ik(t.type)),t):1}function Mi(t,e,n,r){if(50<Fh)throw Fh=0,dE=null,Error(ce(185));Wf(t,n,r),(!(at&2)||t!==bn)&&(t===bn&&(!(at&2)&&(Xy|=n),vn===4&&Mo(t,Un)),Nr(t,r),n===1&&at===0&&!(e.mode&1)&&(bc=tn()+500,Hy&&wa()))}function Nr(t,e){var n=t.callbackNode;A$(t,e);var r=zg(t,t===bn?Un:0);if(r===0)n!==null&&wA(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wA(n),e===1)t.tag===0?Rz(hP.bind(null,t)):Ik(hP.bind(null,t)),Ez(function(){!(at&6)&&wa()}),n=null;else{switch(Xx(r)){case 1:n=OT;break;case 4:n=Qx;break;case 16:n=$g;break;case 536870912:n=Yx;break;default:n=$g}n=EN(n,pN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pN(t,e){if(wg=-1,Eg=0,at&6)throw Error(ce(327));var n=t.callbackNode;if(mc()&&t.callbackNode!==n)return null;var r=zg(t,t===bn?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ay(t,r);else{e=r;var i=at;at|=2;var s=gN();(bn!==t||Un!==e)&&(Ls=null,bc=tn()+500,vu(t,e));do try{Gz();break}catch(u){mN(t,u)}while(!0);GT(),iy.current=s,at=i,dn!==null?e=0:(bn=null,Un=0,e=vn)}if(e!==0){if(e===2&&(i=F0(t),i!==0&&(r=i,e=hE(t,i))),e===1)throw n=hf,vu(t,0),Mo(t,r),Nr(t,tn()),n;if(e===6)Mo(t,r);else{if(i=t.current.alternate,!(r&30)&&!Wz(i)&&(e=ay(t,r),e===2&&(s=F0(t),s!==0&&(r=s,e=hE(t,s))),e===1))throw n=hf,vu(t,0),Mo(t,r),Nr(t,tn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Za(t,Sr,Ls);break;case 3:if(Mo(t,r),(r&130023424)===r&&(e=aI+500-tn(),10<e)){if(zg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){lr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=G0(Za.bind(null,t,Sr,Ls),e);break}Za(t,Sr,Ls);break;case 4:if(Mo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Li(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zz(r/1960))-r,10<r){t.timeoutHandle=G0(Za.bind(null,t,Sr,Ls),r);break}Za(t,Sr,Ls);break;case 5:Za(t,Sr,Ls);break;default:throw Error(ce(329))}}}return Nr(t,tn()),t.callbackNode===n?pN.bind(null,t):null}function hE(t,e){var n=Vh;return t.current.memoizedState.isDehydrated&&(vu(t,e).flags|=256),t=ay(t,e),t!==2&&(e=Sr,Sr=n,e!==null&&fE(e)),t}function fE(t){Sr===null?Sr=t:Sr.push.apply(Sr,t)}function Wz(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mo(t,e){for(e&=~oI,e&=~Xy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Li(e),r=1<<n;t[n]=-1,e&=~r}}function hP(t){if(at&6)throw Error(ce(327));mc();var e=zg(t,0);if(!(e&1))return Nr(t,tn()),null;var n=ay(t,e);if(t.tag!==0&&n===2){var r=F0(t);r!==0&&(e=r,n=hE(t,r))}if(n===1)throw n=hf,vu(t,0),Mo(t,e),Nr(t,tn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Za(t,Sr,Ls),Nr(t,tn()),null}function uI(t,e){var n=at;at|=1;try{return t(e)}finally{at=n,at===0&&(bc=tn()+500,Hy&&wa())}}function Ou(t){jo!==null&&jo.tag===0&&!(at&6)&&mc();var e=at;at|=1;var n=yi.transition,r=_t;try{if(yi.transition=null,_t=1,t)return t()}finally{_t=r,yi.transition=n,at=e,!(at&6)&&wa()}}function lI(){Ur=oc.current,xt(oc)}function vu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wz(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(zT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hg();break;case 3:Pc(),xt(xr),xt(Xn),XT();break;case 5:JT(r);break;case 4:Pc();break;case 13:xt(Ut);break;case 19:xt(Ut);break;case 10:KT(r.type._context);break;case 22:case 23:lI()}n=n.return}if(bn=t,dn=t=Zo(t.current,null),Un=Ur=e,vn=0,hf=null,oI=Xy=Nu=0,Sr=Vh=null,hu!==null){for(e=0;e<hu.length;e++)if(n=hu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}hu=null}return t}function mN(t,e){do{var n=dn;try{if(GT(),yg.current=ry,ny){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ny=!1}if(ku=0,Pn=yn=Bt=null,Lh=!1,lf=0,sI.current=null,n===null||n.return===null){vn=1,hf=e,dn=null;break}e:{var s=t,o=n.return,u=n,c=e;if(e=Un,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=ZA(o);if(A!==null){A.flags&=-257,eP(A,o,u,s,e),A.mode&1&&XA(s,h,e),e=A,c=h;var T=e.updateQueue;if(T===null){var k=new Set;k.add(c),e.updateQueue=k}else T.add(c);break e}else{if(!(e&1)){XA(s,h,e),cI();break e}c=Error(ce(426))}}else if(Ot&&u.mode&1){var x=ZA(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),eP(x,o,u,s,e),WT(Cc(c,u));break e}}s=c=Cc(c,u),vn!==4&&(vn=2),Vh===null?Vh=[s]:Vh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var P=Xk(s,c,e);GA(s,P);break e;case 1:u=c;var R=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof R.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Jo===null||!Jo.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var F=Zk(s,u,e);GA(s,F);break e}}s=s.return}while(s!==null)}_N(n)}catch(z){e=z,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function gN(){var t=iy.current;return iy.current=ry,t===null?ry:t}function cI(){(vn===0||vn===3||vn===2)&&(vn=4),bn===null||!(Nu&268435455)&&!(Xy&268435455)||Mo(bn,Un)}function ay(t,e){var n=at;at|=2;var r=gN();(bn!==t||Un!==e)&&(Ls=null,vu(t,e));do try{qz();break}catch(i){mN(t,i)}while(!0);if(GT(),at=n,iy.current=r,dn!==null)throw Error(ce(261));return bn=null,Un=0,vn}function qz(){for(;dn!==null;)yN(dn)}function Gz(){for(;dn!==null&&!y$();)yN(dn)}function yN(t){var e=wN(t.alternate,t,Ur);t.memoizedProps=t.pendingProps,e===null?_N(t):dn=e,sI.current=null}function _N(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uz(n,e),n!==null){n.flags&=32767,dn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vn=6,dn=null;return}}else if(n=Fz(n,e,Ur),n!==null){dn=n;return}if(e=e.sibling,e!==null){dn=e;return}dn=e=t}while(e!==null);vn===0&&(vn=5)}function Za(t,e,n){var r=_t,i=yi.transition;try{yi.transition=null,_t=1,Kz(t,e,n,r)}finally{yi.transition=i,_t=r}return null}function Kz(t,e,n,r){do mc();while(jo!==null);if(at&6)throw Error(ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(P$(t,s),t===bn&&(dn=bn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ym||(Ym=!0,EN($g,function(){return mc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yi.transition,yi.transition=null;var o=_t;_t=1;var u=at;at|=4,sI.current=null,Bz(t,n),hN(n,t),fz(W0),Wg=!!z0,W0=z0=null,t.current=n,$z(n),_$(),at=u,_t=o,yi.transition=s}else t.current=n;if(Ym&&(Ym=!1,jo=t,oy=i),s=t.pendingLanes,s===0&&(Jo=null),E$(n.stateNode),Nr(t,tn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sy)throw sy=!1,t=cE,cE=null,t;return oy&1&&t.tag!==0&&mc(),s=t.pendingLanes,s&1?t===dE?Fh++:(Fh=0,dE=t):Fh=0,wa(),null}function mc(){if(jo!==null){var t=Xx(oy),e=yi.transition,n=_t;try{if(yi.transition=null,_t=16>t?16:t,jo===null)var r=!1;else{if(t=jo,jo=null,oy=0,at&6)throw Error(ce(331));var i=at;for(at|=4,Ie=t.current;Ie!==null;){var s=Ie,o=s.child;if(Ie.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Ie=h;Ie!==null;){var p=Ie;switch(p.tag){case 0:case 11:case 15:Mh(8,p,s)}var m=p.child;if(m!==null)m.return=p,Ie=m;else for(;Ie!==null;){p=Ie;var _=p.sibling,A=p.return;if(lN(p),p===h){Ie=null;break}if(_!==null){_.return=A,Ie=_;break}Ie=A}}}var T=s.alternate;if(T!==null){var k=T.child;if(k!==null){T.child=null;do{var x=k.sibling;k.sibling=null,k=x}while(k!==null)}}Ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ie=o;else e:for(;Ie!==null;){if(s=Ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mh(9,s,s.return)}var P=s.sibling;if(P!==null){P.return=s.return,Ie=P;break e}Ie=s.return}}var R=t.current;for(Ie=R;Ie!==null;){o=Ie;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Ie=I;else e:for(o=R;Ie!==null;){if(u=Ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jy(9,u)}}catch(z){Kt(u,u.return,z)}if(u===o){Ie=null;break e}var F=u.sibling;if(F!==null){F.return=u.return,Ie=F;break e}Ie=u.return}}if(at=i,wa(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(zy,t)}catch{}r=!0}return r}finally{_t=n,yi.transition=e}}return!1}function fP(t,e,n){e=Cc(n,e),e=Xk(t,e,1),t=Yo(t,e,1),e=lr(),t!==null&&(Wf(t,1,e),Nr(t,e))}function Kt(t,e,n){if(t.tag===3)fP(t,t,n);else for(;e!==null;){if(e.tag===3){fP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jo===null||!Jo.has(r))){t=Cc(n,t),t=Zk(e,t,1),e=Yo(e,t,1),t=lr(),e!==null&&(Wf(e,1,t),Nr(e,t));break}}e=e.return}}function Hz(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=lr(),t.pingedLanes|=t.suspendedLanes&n,bn===t&&(Un&n)===n&&(vn===4||vn===3&&(Un&130023424)===Un&&500>tn()-aI?vu(t,0):oI|=n),Nr(t,e)}function vN(t,e){e===0&&(t.mode&1?(e=jm,jm<<=1,!(jm&130023424)&&(jm=4194304)):e=1);var n=lr();t=Qs(t,e),t!==null&&(Wf(t,e,n),Nr(t,n))}function Qz(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vN(t,n)}function Yz(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),vN(t,n)}var wN;wN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xr.current)Rr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rr=!1,Vz(t,e,n);Rr=!!(t.flags&131072)}else Rr=!1,Ot&&e.flags&1048576&&Sk(e,Jg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vg(t,e),t=e.pendingProps;var i=Sc(e,Xn.current);pc(e,n),i=eI(null,e,r,t,i,n);var s=tI();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(s=!0,Qg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,QT(e),i.updater=Yy,e.stateNode=i,i._reactInternals=e,Z0(e,r,t,n),e=nE(null,e,r,!0,s,n)):(e.tag=0,Ot&&s&&$T(e),sr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Xz(r),t=ki(r,t),i){case 0:e=tE(null,e,r,t,n);break e;case 1:e=rP(null,e,r,t,n);break e;case 11:e=tP(null,e,r,t,n);break e;case 14:e=nP(null,e,r,ki(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),tE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),rP(t,e,r,i,n);case 3:e:{if(rN(e),t===null)throw Error(ce(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xk(t,e),ey(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cc(Error(ce(423)),e),e=iP(t,e,r,n,i);break e}else if(r!==i){i=Cc(Error(ce(424)),e),e=iP(t,e,r,n,i);break e}else for(Br=Qo(e.stateNode.containerInfo.firstChild),Wr=e,Ot=!0,Oi=null,n=Ck(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rc(),r===i){e=Ys(t,e,n);break e}sr(t,e,r,n)}e=e.child}return e;case 5:return kk(e),t===null&&Y0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,q0(r,i)?o=null:s!==null&&q0(r,s)&&(e.flags|=32),nN(t,e),sr(t,e,o,n),e.child;case 6:return t===null&&Y0(e),null;case 13:return iN(t,e,n);case 4:return YT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ac(e,null,r,n):sr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),tP(t,e,r,i,n);case 7:return sr(t,e,e.pendingProps,n),e.child;case 8:return sr(t,e,e.pendingProps.children,n),e.child;case 12:return sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,At(Xg,r._currentValue),r._currentValue=o,s!==null)if(Fi(s.value,o)){if(s.children===i.children&&!xr.current){e=Ys(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){o=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=qs(-1,n&-n),c.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),J0(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ce(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),J0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pc(e,n),i=wi(i),r=r(i),e.flags|=1,sr(t,e,r,n),e.child;case 14:return r=e.type,i=ki(r,e.pendingProps),i=ki(r.type,i),nP(t,e,r,i,n);case 15:return eN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),vg(t,e),e.tag=1,kr(r)?(t=!0,Qg(e)):t=!1,pc(e,n),Jk(e,r,i),Z0(e,r,i,n),nE(null,e,r,!0,t,n);case 19:return sN(t,e,n);case 22:return tN(t,e,n)}throw Error(ce(156,e.tag))};function EN(t,e){return Hx(t,e)}function Jz(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(t,e,n,r){return new Jz(t,e,n,r)}function dI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xz(t){if(typeof t=="function")return dI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xT)return 11;if(t===kT)return 14}return 2}function Zo(t,e){var n=t.alternate;return n===null?(n=mi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")dI(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yl:return wu(n.children,i,s,e);case bT:o=8,i|=8;break;case I0:return t=mi(12,n,e,i|2),t.elementType=I0,t.lanes=s,t;case S0:return t=mi(13,n,e,i),t.elementType=S0,t.lanes=s,t;case R0:return t=mi(19,n,e,i),t.elementType=R0,t.lanes=s,t;case kx:return Zy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bx:o=10;break e;case xx:o=9;break e;case xT:o=11;break e;case kT:o=14;break e;case No:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=mi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function wu(t,e,n,r){return t=mi(7,t,r,e),t.lanes=n,t}function Zy(t,e,n,r){return t=mi(22,t,r,e),t.elementType=kx,t.lanes=n,t.stateNode={isHidden:!1},t}function Fw(t,e,n){return t=mi(6,t,null,e),t.lanes=n,t}function Uw(t,e,n){return e=mi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zz(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vw(0),this.expirationTimes=vw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function hI(t,e,n,r,i,s,o,u,c){return t=new Zz(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},QT(s),t}function e5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function TN(t){if(!t)return ia;t=t._reactInternals;e:{if(Yu(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(kr(n))return Tk(t,n,e)}return e}function IN(t,e,n,r,i,s,o,u,c){return t=hI(n,r,!0,t,i,s,o,u,c),t.context=TN(null),n=t.current,r=lr(),i=Xo(n),s=qs(r,i),s.callback=e??null,Yo(n,s,i),t.current.lanes=i,Wf(t,i,r),Nr(t,r),t}function e_(t,e,n,r){var i=e.current,s=lr(),o=Xo(i);return n=TN(n),e.context===null?e.context=n:e.pendingContext=n,e=qs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yo(i,e,o),t!==null&&(Mi(t,i,o,s),gg(t,i,o)),o}function uy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fI(t,e){pP(t,e),(t=t.alternate)&&pP(t,e)}function t5(){return null}var SN=typeof reportError=="function"?reportError:function(t){console.error(t)};function pI(t){this._internalRoot=t}t_.prototype.render=pI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));e_(t,e,null,null)};t_.prototype.unmount=pI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ou(function(){e_(null,t,null,null)}),e[Hs]=null}};function t_(t){this._internalRoot=t}t_.prototype.unstable_scheduleHydration=function(t){if(t){var e=tk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lo.length&&e!==0&&e<Lo[n].priority;n++);Lo.splice(n,0,t),n===0&&rk(t)}};function mI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function n_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mP(){}function n5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=uy(o);s.call(h)}}var o=IN(e,r,t,0,null,!1,!1,"",mP);return t._reactRootContainer=o,t[Hs]=o.current,rf(t.nodeType===8?t.parentNode:t),Ou(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var h=uy(c);u.call(h)}}var c=hI(t,0,!1,null,null,!1,!1,"",mP);return t._reactRootContainer=c,t[Hs]=c.current,rf(t.nodeType===8?t.parentNode:t),Ou(function(){e_(e,c,n,r)}),c}function r_(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var u=i;i=function(){var c=uy(o);u.call(c)}}e_(e,o,t,i)}else o=n5(n,e,t,i,r);return uy(o)}Zx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wh(e.pendingLanes);n!==0&&(DT(e,n|1),Nr(e,tn()),!(at&6)&&(bc=tn()+500,wa()))}break;case 13:Ou(function(){var r=Qs(t,1);if(r!==null){var i=lr();Mi(r,t,1,i)}}),fI(t,1)}};LT=function(t){if(t.tag===13){var e=Qs(t,134217728);if(e!==null){var n=lr();Mi(e,t,134217728,n)}fI(t,134217728)}};ek=function(t){if(t.tag===13){var e=Xo(t),n=Qs(t,e);if(n!==null){var r=lr();Mi(n,t,e,r)}fI(t,e)}};tk=function(){return _t};nk=function(t,e){var n=_t;try{return _t=t,e()}finally{_t=n}};L0=function(t,e,n){switch(e){case"input":if(C0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ky(r);if(!i)throw Error(ce(90));Ox(r),C0(r,i)}}}break;case"textarea":Lx(t,n);break;case"select":e=n.value,e!=null&&cc(t,!!n.multiple,e,!1)}};$x=uI;zx=Ou;var r5={usingClientEntryPoint:!1,Events:[Gf,ec,Ky,jx,Bx,uI]},uh={findFiberByHostInstance:du,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i5={bundleType:uh.bundleType,version:uh.version,rendererPackageName:uh.rendererPackageName,rendererConfig:uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gx(t),t===null?null:t.stateNode},findFiberByHostInstance:uh.findFiberByHostInstance||t5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{zy=Jm.inject(i5),os=Jm}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r5;Xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mI(e))throw Error(ce(200));return e5(t,e,null,n)};Xr.createRoot=function(t,e){if(!mI(t))throw Error(ce(299));var n=!1,r="",i=SN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=hI(t,1,!1,null,null,n,!1,r,i),t[Hs]=e.current,rf(t.nodeType===8?t.parentNode:t),new pI(e)};Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=Gx(e),t=t===null?null:t.stateNode,t};Xr.flushSync=function(t){return Ou(t)};Xr.hydrate=function(t,e,n){if(!n_(e))throw Error(ce(200));return r_(null,t,e,!0,n)};Xr.hydrateRoot=function(t,e,n){if(!mI(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IN(e,null,t,1,n??null,i,!1,s,o),t[Hs]=e.current,rf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new t_(e)};Xr.render=function(t,e,n){if(!n_(e))throw Error(ce(200));return r_(null,t,e,!1,n)};Xr.unmountComponentAtNode=function(t){if(!n_(t))throw Error(ce(40));return t._reactRootContainer?(Ou(function(){r_(null,null,t,!1,function(){t._reactRootContainer=null,t[Hs]=null})}),!0):!1};Xr.unstable_batchedUpdates=uI;Xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!n_(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return r_(t,e,n,!1,r)};Xr.version="18.3.1-next-f1338f8080-20240426";function RN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RN)}catch(t){console.error(t)}}RN(),Rx.exports=Xr;var AN=Rx.exports;const ac=$f(AN);var PN,gP=AN;PN=gP.createRoot,gP.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ff(){return ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ff.apply(this,arguments)}var Bo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bo||(Bo={}));const yP="popstate";function s5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:u}=r.location;return pE("",{pathname:s,search:o,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ly(i)}return a5(e,n,null,t)}function hn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o5(){return Math.random().toString(36).substr(2,8)}function _P(t,e){return{usr:t.state,key:t.key,idx:e}}function pE(t,e,n,r){return n===void 0&&(n=null),ff({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zc(e):e,{state:n,key:e&&e.key||r||o5()})}function ly(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function a5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,u=Bo.Pop,c=null,h=p();h==null&&(h=0,o.replaceState(ff({},o.state,{idx:h}),""));function p(){return(o.state||{idx:null}).idx}function m(){u=Bo.Pop;let x=p(),P=x==null?null:x-h;h=x,c&&c({action:u,location:k.location,delta:P})}function _(x,P){u=Bo.Push;let R=pE(k.location,x,P);h=p()+1;let I=_P(R,h),F=k.createHref(R);try{o.pushState(I,"",F)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(F)}s&&c&&c({action:u,location:k.location,delta:1})}function A(x,P){u=Bo.Replace;let R=pE(k.location,x,P);h=p();let I=_P(R,h),F=k.createHref(R);o.replaceState(I,"",F),s&&c&&c({action:u,location:k.location,delta:0})}function T(x){let P=i.location.origin!=="null"?i.location.origin:i.location.href,R=typeof x=="string"?x:ly(x);return R=R.replace(/ $/,"%20"),hn(P,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,P)}let k={get action(){return u},get location(){return t(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(yP,m),c=x,()=>{i.removeEventListener(yP,m),c=null}},createHref(x){return e(i,x)},createURL:T,encodeLocation(x){let P=T(x);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:_,replace:A,go(x){return o.go(x)}};return k}var vP;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(vP||(vP={}));function u5(t,e,n){return n===void 0&&(n="/"),l5(t,e,n,!1)}function l5(t,e,n,r){let i=typeof e=="string"?Zc(e):e,s=gI(i.pathname||"/",n);if(s==null)return null;let o=bN(t);c5(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let h=E5(s);u=v5(o[c],h,r)}return u}function bN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(hn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let h=ea([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(hn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),bN(s.children,e,p,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:y5(h,s.index),routesMeta:p})};return t.forEach((s,o)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,o);else for(let c of xN(s.path))i(s,o,c)}),e}function xN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=xN(r.join("/")),u=[];return u.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function c5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const d5=/^:[\w-]+$/,h5=3,f5=2,p5=1,m5=10,g5=-2,wP=t=>t==="*";function y5(t,e){let n=t.split("/"),r=n.length;return n.some(wP)&&(r+=g5),e&&(r+=f5),n.filter(i=>!wP(i)).reduce((i,s)=>i+(d5.test(s)?h5:s===""?p5:m5),r)}function _5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function v5(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=EP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},p),_=c.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=EP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:ea([s,m.pathname]),pathnameBase:R5(ea([s,m.pathnameBase])),route:_}),m.pathnameBase!=="/"&&(s=ea([s,m.pathnameBase]))}return o}function EP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=w5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,p,m)=>{let{paramName:_,isOptional:A}=p;if(_==="*"){let k=u[m]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const T=u[m];return A&&!T?h[_]=void 0:h[_]=(T||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function w5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),CN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return CN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gI(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function T5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Zc(t):t;return{pathname:n?n.startsWith("/")?n:I5(n,e):e,search:A5(r),hash:P5(i)}}function I5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function jw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function S5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kN(t,e){let n=S5(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Zc(t):(i=ff({},t),hn(!i.pathname||!i.pathname.includes("?"),jw("?","pathname","search",i)),hn(!i.pathname||!i.pathname.includes("#"),jw("#","pathname","hash",i)),hn(!i.search||!i.search.includes("#"),jw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,u;if(o==null)u=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),m-=1;i.pathname=_.join("/")}u=m>=0?e[m]:"/"}let c=T5(i,u),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||p)&&(c.pathname+="/"),c}const ea=t=>t.join("/").replace(/\/\/+/g,"/"),R5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function C5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ON=["post","put","patch","delete"];new Set(ON);const b5=["get",...ON];new Set(b5);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pf.apply(this,arguments)}const yI=B.createContext(null),x5=B.createContext(null),Ju=B.createContext(null),i_=B.createContext(null),Ea=B.createContext({outlet:null,matches:[],isDataRoute:!1}),DN=B.createContext(null);function k5(t,e){let{relative:n}=e===void 0?{}:e;Hf()||hn(!1);let{basename:r,navigator:i}=B.useContext(Ju),{hash:s,pathname:o,search:u}=VN(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:ea([r,o])),i.createHref({pathname:c,search:u,hash:s})}function Hf(){return B.useContext(i_)!=null}function s_(){return Hf()||hn(!1),B.useContext(i_).location}function LN(t){B.useContext(Ju).static||B.useLayoutEffect(t)}function MN(){let{isDataRoute:t}=B.useContext(Ea);return t?q5():N5()}function N5(){Hf()||hn(!1);let t=B.useContext(yI),{basename:e,future:n,navigator:r}=B.useContext(Ju),{matches:i}=B.useContext(Ea),{pathname:s}=s_(),o=JSON.stringify(kN(i,n.v7_relativeSplatPath)),u=B.useRef(!1);return LN(()=>{u.current=!0}),B.useCallback(function(h,p){if(p===void 0&&(p={}),!u.current)return;if(typeof h=="number"){r.go(h);return}let m=NN(h,JSON.parse(o),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ea([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,s,t])}function O5(){let{matches:t}=B.useContext(Ea),e=t[t.length-1];return e?e.params:{}}function VN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=B.useContext(Ju),{matches:i}=B.useContext(Ea),{pathname:s}=s_(),o=JSON.stringify(kN(i,r.v7_relativeSplatPath));return B.useMemo(()=>NN(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function D5(t,e){return L5(t,e)}function L5(t,e,n,r){Hf()||hn(!1);let{navigator:i}=B.useContext(Ju),{matches:s}=B.useContext(Ea),o=s[s.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=s_(),p;if(e){var m;let x=typeof e=="string"?Zc(e):e;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||hn(!1),p=x}else p=h;let _=p.pathname||"/",A=_;if(c!=="/"){let x=c.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=u5(t,{pathname:A}),k=j5(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:ea([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ea([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&k?B.createElement(i_.Provider,{value:{location:pf({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Bo.Pop}},k):k}function M5(){let t=W5(),e=C5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),n?B.createElement("pre",{style:i},n):null,null)}const V5=B.createElement(M5,null);class F5 extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?B.createElement(Ea.Provider,{value:this.props.routeContext},B.createElement(DN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function U5(t){let{routeContext:e,match:n,children:r}=t,i=B.useContext(yI);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),B.createElement(Ea.Provider,{value:e},r)}function j5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=o.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);p>=0||hn(!1),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=p),m.route.id){let{loaderData:_,errors:A}=n,T=m.route.loader&&_[m.route.id]===void 0&&(!A||A[m.route.id]===void 0);if(m.route.lazy||T){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,m,_)=>{let A,T=!1,k=null,x=null;n&&(A=u&&m.route.id?u[m.route.id]:void 0,k=m.route.errorElement||V5,c&&(h<0&&_===0?(T=!0,x=null):h===_&&(T=!0,x=m.route.hydrateFallbackElement||null)));let P=e.concat(o.slice(0,_+1)),R=()=>{let I;return A?I=k:T?I=x:m.route.Component?I=B.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=p,B.createElement(U5,{match:m,routeContext:{outlet:p,matches:P,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?B.createElement(F5,{location:n.location,revalidation:n.revalidation,component:k,error:A,children:R(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):R()},null)}var FN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FN||{}),cy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cy||{});function B5(t){let e=B.useContext(yI);return e||hn(!1),e}function $5(t){let e=B.useContext(x5);return e||hn(!1),e}function z5(t){let e=B.useContext(Ea);return e||hn(!1),e}function UN(t){let e=z5(),n=e.matches[e.matches.length-1];return n.route.id||hn(!1),n.route.id}function W5(){var t;let e=B.useContext(DN),n=$5(cy.UseRouteError),r=UN(cy.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function q5(){let{router:t}=B5(FN.UseNavigateStable),e=UN(cy.UseNavigateStable),n=B.useRef(!1);return LN(()=>{n.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pf({fromRouteId:e},s)))},[t,e])}function Yi(t){hn(!1)}function G5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Bo.Pop,navigator:s,static:o=!1,future:u}=t;Hf()&&hn(!1);let c=e.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:c,navigator:s,static:o,future:pf({v7_relativeSplatPath:!1},u)}),[c,u,s,o]);typeof r=="string"&&(r=Zc(r));let{pathname:p="/",search:m="",hash:_="",state:A=null,key:T="default"}=r,k=B.useMemo(()=>{let x=gI(p,c);return x==null?null:{location:{pathname:x,search:m,hash:_,state:A,key:T},navigationType:i}},[c,p,m,_,A,T,i]);return k==null?null:B.createElement(Ju.Provider,{value:h},B.createElement(i_.Provider,{children:n,value:k}))}function K5(t){let{children:e,location:n}=t;return D5(mE(e),n)}new Promise(()=>{});function mE(t,e){e===void 0&&(e=[]);let n=[];return B.Children.forEach(t,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){n.push.apply(n,mE(r.props.children,s));return}r.type!==Yi&&hn(!1),!r.props.index||!r.props.children||hn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}function H5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Q5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Y5(t,e){return t.button===0&&(!e||e==="_self")&&!Q5(t)}const J5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],X5="6";try{window.__reactRouterVersion=X5}catch{}const Z5="startTransition",TP=E0[Z5];function e9(t){let{basename:e,children:n,future:r,window:i}=t,s=B.useRef();s.current==null&&(s.current=s5({window:i,v5Compat:!0}));let o=s.current,[u,c]=B.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},p=B.useCallback(m=>{h&&TP?TP(()=>c(m)):c(m)},[c,h]);return B.useLayoutEffect(()=>o.listen(p),[o,p]),B.createElement(G5,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const t9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wn=B.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:u,target:c,to:h,preventScrollReset:p,viewTransition:m}=e,_=H5(e,J5),{basename:A}=B.useContext(Ju),T,k=!1;if(typeof h=="string"&&n9.test(h)&&(T=h,t9))try{let I=new URL(window.location.href),F=h.startsWith("//")?new URL(I.protocol+h):new URL(h),z=gI(F.pathname,A);F.origin===I.origin&&z!=null?h=z+F.search+F.hash:k=!0}catch{}let x=k5(h,{relative:i}),P=r9(h,{replace:o,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:m});function R(I){r&&r(I),I.defaultPrevented||P(I)}return B.createElement("a",gE({},_,{href:T||x,onClick:k||s?r:R,ref:n,target:c}))});var IP;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(IP||(IP={}));var SP;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(SP||(SP={}));function r9(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:u}=e===void 0?{}:e,c=MN(),h=s_(),p=VN(t,{relative:o});return B.useCallback(m=>{if(Y5(m,n)){m.preventDefault();let _=r!==void 0?r:ly(h)===ly(p);c(t,{replace:_,state:i,preventScrollReset:s,relative:o,viewTransition:u})}},[h,c,p,r,i,n,t,s,o,u])}var dy={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dy.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",m=1,_=2,A=4,T=1,k=2,x=1,P=2,R=4,I=8,F=16,z=32,G=64,C=128,S=256,L=512,V=30,U="...",M=800,O=16,he=1,re=2,le=3,ue=1/0,H=9007199254740991,ae=17976931348623157e292,me=NaN,ge=4294967295,Se=ge-1,we=ge>>>1,Ne=[["ary",C],["bind",x],["bindKey",P],["curry",I],["curryRight",F],["flip",L],["partial",z],["partialRight",G],["rearg",S]],Pe="[object Arguments]",Fe="[object Array]",fe="[object AsyncFunction]",Le="[object Boolean]",xe="[object Date]",Me="[object DOMException]",ct="[object Error]",rt="[object Function]",Vt="[object GeneratorFunction]",vt="[object Map]",We="[object Number]",ei="[object Null]",an="[object Object]",gs="[object Promise]",sl="[object Proxy]",Ii="[object RegExp]",$n="[object Set]",ys="[object String]",Bi="[object Symbol]",co="[object Undefined]",$i="[object WeakMap]",Ve="[object WeakSet]",wt="[object ArrayBuffer]",gr="[object DataView]",ol="[object Float32Array]",al="[object Float64Array]",yd="[object Int8Array]",_s="[object Int16Array]",ul="[object Int32Array]",ll="[object Uint8Array]",ba="[object Uint8ClampedArray]",_d="[object Uint16Array]",vd="[object Uint32Array]",wd=/\b__p \+= '';/g,Tp=/\b(__p \+=) '' \+/g,Ip=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ho=/&(?:amp|lt|gt|quot|#39);/g,cl=/[&<>"']/g,Ed=RegExp(ho.source),vs=RegExp(cl.source),Sp=/<%-([\s\S]+?)%>/g,dl=/<%([\s\S]+?)%>/g,Td=/<%=([\s\S]+?)%>/g,xa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rp=/^\w*$/,Nn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hl=/[\\^$.*+?()[\]{}|]/g,ka=RegExp(hl.source),ws=/^\s+/,sv=/\s/,ov=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fo=/\{\n\/\* \[wrapped with (.+)\] \*/,av=/,? & /,uv=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fl=/[()=,{}\[\]\/\s]/,Ap=/\\(\\)?/g,Id=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Na=/\w*$/,zi=/^[-+]0x[0-9a-f]+$/i,Pp=/^0b[01]+$/i,Cp=/^\[object .+?Constructor\]$/,Sd=/^0o[0-7]+$/i,Rd=/^(?:0|[1-9]\d*)$/,bp=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oa=/($^)/,lv=/['\n\r\u2028\u2029\\]/g,Es="\\ud800-\\udfff",xp="\\u0300-\\u036f",Ad="\\ufe20-\\ufe2f",Da="\\u20d0-\\u20ff",Wi=xp+Ad+Da,pl="\\u2700-\\u27bf",kp="a-z\\xdf-\\xf6\\xf8-\\xff",Np="\\xac\\xb1\\xd7\\xf7",Op="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dp="\\u2000-\\u206f",Pd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ml="A-Z\\xc0-\\xd6\\xd8-\\xde",Cd="\\ufe0e\\ufe0f",bd=Np+Op+Dp+Pd,xd="['’]",cv="["+Es+"]",kd="["+bd+"]",La="["+Wi+"]",Lp="\\d+",Ts="["+pl+"]",ti="["+kp+"]",Ma="[^"+Es+bd+Lp+pl+kp+ml+"]",po="\\ud83c[\\udffb-\\udfff]",Mp="(?:"+La+"|"+po+")",Et="[^"+Es+"]",mo="(?:\\ud83c[\\udde6-\\uddff]){2}",Is="[\\ud800-\\udbff][\\udc00-\\udfff]",ni="["+ml+"]",Vp="\\u200d",Nd="(?:"+ti+"|"+Ma+")",dv="(?:"+ni+"|"+Ma+")",Fp="(?:"+xd+"(?:d|ll|m|re|s|t|ve))?",Up="(?:"+xd+"(?:D|LL|M|RE|S|T|VE))?",jp=Mp+"?",go="["+Cd+"]?",qi="(?:"+Vp+"(?:"+[Et,mo,Is].join("|")+")"+go+jp+")*",Bp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$p="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Od=go+jp+qi,yo="(?:"+[Ts,mo,Is].join("|")+")"+Od,hv="(?:"+[Et+La+"?",La,mo,Is,cv].join("|")+")",fv=RegExp(xd,"g"),pv=RegExp(La,"g"),ri=RegExp(po+"(?="+po+")|"+hv+Od,"g"),mv=RegExp([ni+"?"+ti+"+"+Fp+"(?="+[kd,ni,"$"].join("|")+")",dv+"+"+Up+"(?="+[kd,ni+Nd,"$"].join("|")+")",ni+"?"+Nd+"+"+Fp,ni+"+"+Up,$p,Bp,Lp,yo].join("|"),"g"),gv=RegExp("["+Vp+Es+Wi+Cd+"]"),gl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zp=-1,dt={};dt[ol]=dt[al]=dt[yd]=dt[_s]=dt[ul]=dt[ll]=dt[ba]=dt[_d]=dt[vd]=!0,dt[Pe]=dt[Fe]=dt[wt]=dt[Le]=dt[gr]=dt[xe]=dt[ct]=dt[rt]=dt[vt]=dt[We]=dt[an]=dt[Ii]=dt[$n]=dt[ys]=dt[$i]=!1;var ut={};ut[Pe]=ut[Fe]=ut[wt]=ut[gr]=ut[Le]=ut[xe]=ut[ol]=ut[al]=ut[yd]=ut[_s]=ut[ul]=ut[vt]=ut[We]=ut[an]=ut[Ii]=ut[$n]=ut[ys]=ut[Bi]=ut[ll]=ut[ba]=ut[_d]=ut[vd]=!0,ut[ct]=ut[rt]=ut[$i]=!1;var Wp={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Dd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_v=parseFloat,qp=parseInt,Ld=typeof _n=="object"&&_n&&_n.Object===Object&&_n,Gp=typeof self=="object"&&self&&self.Object===Object&&self,qt=Ld||Gp||Function("return this")(),_l=e&&!e.nodeType&&e,On=_l&&!0&&t&&!t.nodeType&&t,Md=On&&On.exports===_l,Vd=Md&&Ld.process,In=function(){try{var W=On&&On.require&&On.require("util").types;return W||Vd&&Vd.binding&&Vd.binding("util")}catch{}}(),Fd=In&&In.isArrayBuffer,vl=In&&In.isDate,Va=In&&In.isMap,Ud=In&&In.isRegExp,Fa=In&&In.isSet,Kp=In&&In.isTypedArray;function zn(W,ee,Y){switch(Y.length){case 0:return W.call(ee);case 1:return W.call(ee,Y[0]);case 2:return W.call(ee,Y[0],Y[1]);case 3:return W.call(ee,Y[0],Y[1],Y[2])}return W.apply(ee,Y)}function Ua(W,ee,Y,Te){for(var Ue=-1,ft=W==null?0:W.length;++Ue<ft;){var pn=W[Ue];ee(Te,pn,Y(pn),W)}return Te}function er(W,ee){for(var Y=-1,Te=W==null?0:W.length;++Y<Te&&ee(W[Y],Y,W)!==!1;);return W}function Hp(W,ee){for(var Y=W==null?0:W.length;Y--&&ee(W[Y],Y,W)!==!1;);return W}function wl(W,ee){for(var Y=-1,Te=W==null?0:W.length;++Y<Te;)if(!ee(W[Y],Y,W))return!1;return!0}function ii(W,ee){for(var Y=-1,Te=W==null?0:W.length,Ue=0,ft=[];++Y<Te;){var pn=W[Y];ee(pn,Y,W)&&(ft[Ue++]=pn)}return ft}function ja(W,ee){var Y=W==null?0:W.length;return!!Y&&Ss(W,ee,0)>-1}function _o(W,ee,Y){for(var Te=-1,Ue=W==null?0:W.length;++Te<Ue;)if(Y(ee,W[Te]))return!0;return!1}function It(W,ee){for(var Y=-1,Te=W==null?0:W.length,Ue=Array(Te);++Y<Te;)Ue[Y]=ee(W[Y],Y,W);return Ue}function Si(W,ee){for(var Y=-1,Te=ee.length,Ue=W.length;++Y<Te;)W[Ue+Y]=ee[Y];return W}function Ri(W,ee,Y,Te){var Ue=-1,ft=W==null?0:W.length;for(Te&&ft&&(Y=W[++Ue]);++Ue<ft;)Y=ee(Y,W[Ue],Ue,W);return Y}function Qp(W,ee,Y,Te){var Ue=W==null?0:W.length;for(Te&&Ue&&(Y=W[--Ue]);Ue--;)Y=ee(Y,W[Ue],Ue,W);return Y}function El(W,ee){for(var Y=-1,Te=W==null?0:W.length;++Y<Te;)if(ee(W[Y],Y,W))return!0;return!1}var Yp=v("length");function Jp(W){return W.split("")}function Tl(W){return W.match(uv)||[]}function Wn(W,ee,Y){var Te;return Y(W,function(Ue,ft,pn){if(ee(Ue,ft,pn))return Te=ft,!1}),Te}function Ba(W,ee,Y,Te){for(var Ue=W.length,ft=Y+(Te?1:-1);Te?ft--:++ft<Ue;)if(ee(W[ft],ft,W))return ft;return-1}function Ss(W,ee,Y){return ee===ee?yV(W,ee,Y):Ba(W,d,Y)}function vo(W,ee,Y,Te){for(var Ue=Y-1,ft=W.length;++Ue<ft;)if(Te(W[Ue],ee))return Ue;return-1}function d(W){return W!==W}function g(W,ee){var Y=W==null?0:W.length;return Y?pe(W,ee)/Y:me}function v(W){return function(ee){return ee==null?n:ee[W]}}function N(W){return function(ee){return W==null?n:W[ee]}}function K(W,ee,Y,Te,Ue){return Ue(W,function(ft,pn,St){Y=Te?(Te=!1,ft):ee(Y,ft,pn,St)}),Y}function X(W,ee){var Y=W.length;for(W.sort(ee);Y--;)W[Y]=W[Y].value;return W}function pe(W,ee){for(var Y,Te=-1,Ue=W.length;++Te<Ue;){var ft=ee(W[Te]);ft!==n&&(Y=Y===n?ft:Y+ft)}return Y}function ht(W,ee){for(var Y=-1,Te=Array(W);++Y<W;)Te[Y]=ee(Y);return Te}function fn(W,ee){return It(ee,function(Y){return[Y,W[Y]]})}function tt(W){return W&&W.slice(0,_1(W)+1).replace(ws,"")}function pt(W){return function(ee){return W(ee)}}function un(W,ee){return It(ee,function(Y){return W[Y]})}function si(W,ee){return W.has(ee)}function yr(W,ee){for(var Y=-1,Te=W.length;++Y<Te&&Ss(ee,W[Y],0)>-1;);return Y}function $a(W,ee){for(var Y=W.length;Y--&&Ss(ee,W[Y],0)>-1;);return Y}function jd(W,ee){for(var Y=W.length,Te=0;Y--;)W[Y]===ee&&++Te;return Te}var cV=N(Wp),dV=N(Dd);function hV(W){return"\\"+yv[W]}function fV(W,ee){return W==null?n:W[ee]}function Il(W){return gv.test(W)}function pV(W){return gl.test(W)}function mV(W){for(var ee,Y=[];!(ee=W.next()).done;)Y.push(ee.value);return Y}function vv(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Te,Ue){Y[++ee]=[Ue,Te]}),Y}function y1(W,ee){return function(Y){return W(ee(Y))}}function wo(W,ee){for(var Y=-1,Te=W.length,Ue=0,ft=[];++Y<Te;){var pn=W[Y];(pn===ee||pn===p)&&(W[Y]=p,ft[Ue++]=Y)}return ft}function Xp(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Te){Y[++ee]=Te}),Y}function gV(W){var ee=-1,Y=Array(W.size);return W.forEach(function(Te){Y[++ee]=[Te,Te]}),Y}function yV(W,ee,Y){for(var Te=Y-1,Ue=W.length;++Te<Ue;)if(W[Te]===ee)return Te;return-1}function _V(W,ee,Y){for(var Te=Y+1;Te--;)if(W[Te]===ee)return Te;return Te}function Sl(W){return Il(W)?wV(W):Yp(W)}function Ai(W){return Il(W)?EV(W):Jp(W)}function _1(W){for(var ee=W.length;ee--&&sv.test(W.charAt(ee)););return ee}var vV=N(kt);function wV(W){for(var ee=ri.lastIndex=0;ri.test(W);)++ee;return ee}function EV(W){return W.match(ri)||[]}function TV(W){return W.match(mv)||[]}var IV=function W(ee){ee=ee==null?qt:Rl.defaults(qt.Object(),ee,Rl.pick(qt,yl));var Y=ee.Array,Te=ee.Date,Ue=ee.Error,ft=ee.Function,pn=ee.Math,St=ee.Object,wv=ee.RegExp,SV=ee.String,oi=ee.TypeError,Zp=Y.prototype,RV=ft.prototype,Al=St.prototype,em=ee["__core-js_shared__"],tm=RV.toString,gt=Al.hasOwnProperty,AV=0,v1=function(){var a=/[^.]+$/.exec(em&&em.keys&&em.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),nm=Al.toString,PV=tm.call(St),CV=qt._,bV=wv("^"+tm.call(gt).replace(hl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rm=Md?ee.Buffer:n,Eo=ee.Symbol,im=ee.Uint8Array,w1=rm?rm.allocUnsafe:n,sm=y1(St.getPrototypeOf,St),E1=St.create,T1=Al.propertyIsEnumerable,om=Zp.splice,I1=Eo?Eo.isConcatSpreadable:n,Bd=Eo?Eo.iterator:n,za=Eo?Eo.toStringTag:n,am=function(){try{var a=Ha(St,"defineProperty");return a({},"",{}),a}catch{}}(),xV=ee.clearTimeout!==qt.clearTimeout&&ee.clearTimeout,kV=Te&&Te.now!==qt.Date.now&&Te.now,NV=ee.setTimeout!==qt.setTimeout&&ee.setTimeout,um=pn.ceil,lm=pn.floor,Ev=St.getOwnPropertySymbols,OV=rm?rm.isBuffer:n,S1=ee.isFinite,DV=Zp.join,LV=y1(St.keys,St),mn=pn.max,qn=pn.min,MV=Te.now,VV=ee.parseInt,R1=pn.random,FV=Zp.reverse,Tv=Ha(ee,"DataView"),$d=Ha(ee,"Map"),Iv=Ha(ee,"Promise"),Pl=Ha(ee,"Set"),zd=Ha(ee,"WeakMap"),Wd=Ha(St,"create"),cm=zd&&new zd,Cl={},UV=Qa(Tv),jV=Qa($d),BV=Qa(Iv),$V=Qa(Pl),zV=Qa(zd),dm=Eo?Eo.prototype:n,qd=dm?dm.valueOf:n,A1=dm?dm.toString:n;function b(a){if(Gt(a)&&!Be(a)&&!(a instanceof Xe)){if(a instanceof ai)return a;if(gt.call(a,"__wrapped__"))return PR(a)}return new ai(a)}var bl=function(){function a(){}return function(l){if(!Ft(l))return{};if(E1)return E1(l);a.prototype=l;var f=new a;return a.prototype=n,f}}();function hm(){}function ai(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}b.templateSettings={escape:Sp,evaluate:dl,interpolate:Td,variable:"",imports:{_:b}},b.prototype=hm.prototype,b.prototype.constructor=b,ai.prototype=bl(hm.prototype),ai.prototype.constructor=ai;function Xe(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function WV(){var a=new Xe(this.__wrapped__);return a.__actions__=_r(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=_r(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=_r(this.__views__),a}function qV(){if(this.__filtered__){var a=new Xe(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function GV(){var a=this.__wrapped__.value(),l=this.__dir__,f=Be(a),y=l<0,E=f?a.length:0,D=iU(0,E,this.__views__),j=D.start,$=D.end,q=$-j,te=y?$:j-1,ne=this.__iteratees__,se=ne.length,ve=0,Ae=qn(q,this.__takeCount__);if(!f||!y&&E==q&&Ae==q)return Y1(a,this.__actions__);var Oe=[];e:for(;q--&&ve<Ae;){te+=l;for(var Ge=-1,De=a[te];++Ge<se;){var Qe=ne[Ge],nt=Qe.iteratee,Vr=Qe.type,rr=nt(De);if(Vr==re)De=rr;else if(!rr){if(Vr==he)continue e;break e}}Oe[ve++]=De}return Oe}Xe.prototype=bl(hm.prototype),Xe.prototype.constructor=Xe;function Wa(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function KV(){this.__data__=Wd?Wd(null):{},this.size=0}function HV(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function QV(a){var l=this.__data__;if(Wd){var f=l[a];return f===c?n:f}return gt.call(l,a)?l[a]:n}function YV(a){var l=this.__data__;return Wd?l[a]!==n:gt.call(l,a)}function JV(a,l){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Wd&&l===n?c:l,this}Wa.prototype.clear=KV,Wa.prototype.delete=HV,Wa.prototype.get=QV,Wa.prototype.has=YV,Wa.prototype.set=JV;function Rs(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function XV(){this.__data__=[],this.size=0}function ZV(a){var l=this.__data__,f=fm(l,a);if(f<0)return!1;var y=l.length-1;return f==y?l.pop():om.call(l,f,1),--this.size,!0}function eF(a){var l=this.__data__,f=fm(l,a);return f<0?n:l[f][1]}function tF(a){return fm(this.__data__,a)>-1}function nF(a,l){var f=this.__data__,y=fm(f,a);return y<0?(++this.size,f.push([a,l])):f[y][1]=l,this}Rs.prototype.clear=XV,Rs.prototype.delete=ZV,Rs.prototype.get=eF,Rs.prototype.has=tF,Rs.prototype.set=nF;function As(a){var l=-1,f=a==null?0:a.length;for(this.clear();++l<f;){var y=a[l];this.set(y[0],y[1])}}function rF(){this.size=0,this.__data__={hash:new Wa,map:new($d||Rs),string:new Wa}}function iF(a){var l=Rm(this,a).delete(a);return this.size-=l?1:0,l}function sF(a){return Rm(this,a).get(a)}function oF(a){return Rm(this,a).has(a)}function aF(a,l){var f=Rm(this,a),y=f.size;return f.set(a,l),this.size+=f.size==y?0:1,this}As.prototype.clear=rF,As.prototype.delete=iF,As.prototype.get=sF,As.prototype.has=oF,As.prototype.set=aF;function qa(a){var l=-1,f=a==null?0:a.length;for(this.__data__=new As;++l<f;)this.add(a[l])}function uF(a){return this.__data__.set(a,c),this}function lF(a){return this.__data__.has(a)}qa.prototype.add=qa.prototype.push=uF,qa.prototype.has=lF;function Pi(a){var l=this.__data__=new Rs(a);this.size=l.size}function cF(){this.__data__=new Rs,this.size=0}function dF(a){var l=this.__data__,f=l.delete(a);return this.size=l.size,f}function hF(a){return this.__data__.get(a)}function fF(a){return this.__data__.has(a)}function pF(a,l){var f=this.__data__;if(f instanceof Rs){var y=f.__data__;if(!$d||y.length<i-1)return y.push([a,l]),this.size=++f.size,this;f=this.__data__=new As(y)}return f.set(a,l),this.size=f.size,this}Pi.prototype.clear=cF,Pi.prototype.delete=dF,Pi.prototype.get=hF,Pi.prototype.has=fF,Pi.prototype.set=pF;function P1(a,l){var f=Be(a),y=!f&&Ya(a),E=!f&&!y&&Ao(a),D=!f&&!y&&!E&&Ol(a),j=f||y||E||D,$=j?ht(a.length,SV):[],q=$.length;for(var te in a)(l||gt.call(a,te))&&!(j&&(te=="length"||E&&(te=="offset"||te=="parent")||D&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||xs(te,q)))&&$.push(te);return $}function C1(a){var l=a.length;return l?a[Dv(0,l-1)]:n}function mF(a,l){return Am(_r(a),Ga(l,0,a.length))}function gF(a){return Am(_r(a))}function Sv(a,l,f){(f!==n&&!Ci(a[l],f)||f===n&&!(l in a))&&Ps(a,l,f)}function Gd(a,l,f){var y=a[l];(!(gt.call(a,l)&&Ci(y,f))||f===n&&!(l in a))&&Ps(a,l,f)}function fm(a,l){for(var f=a.length;f--;)if(Ci(a[f][0],l))return f;return-1}function yF(a,l,f,y){return To(a,function(E,D,j){l(y,E,f(E),j)}),y}function b1(a,l){return a&&Ki(l,Sn(l),a)}function _F(a,l){return a&&Ki(l,wr(l),a)}function Ps(a,l,f){l=="__proto__"&&am?am(a,l,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[l]=f}function Rv(a,l){for(var f=-1,y=l.length,E=Y(y),D=a==null;++f<y;)E[f]=D?n:sw(a,l[f]);return E}function Ga(a,l,f){return a===a&&(f!==n&&(a=a<=f?a:f),l!==n&&(a=a>=l?a:l)),a}function ui(a,l,f,y,E,D){var j,$=l&m,q=l&_,te=l&A;if(f&&(j=E?f(a,y,E,D):f(a)),j!==n)return j;if(!Ft(a))return a;var ne=Be(a);if(ne){if(j=oU(a),!$)return _r(a,j)}else{var se=Gn(a),ve=se==rt||se==Vt;if(Ao(a))return Z1(a,$);if(se==an||se==Pe||ve&&!E){if(j=q||ve?{}:_R(a),!$)return q?QF(a,_F(j,a)):HF(a,b1(j,a))}else{if(!ut[se])return E?a:{};j=aU(a,se,$)}}D||(D=new Pi);var Ae=D.get(a);if(Ae)return Ae;D.set(a,j),KR(a)?a.forEach(function(De){j.add(ui(De,l,f,De,a,D))}):qR(a)&&a.forEach(function(De,Qe){j.set(Qe,ui(De,l,f,Qe,a,D))});var Oe=te?q?qv:Wv:q?wr:Sn,Ge=ne?n:Oe(a);return er(Ge||a,function(De,Qe){Ge&&(Qe=De,De=a[Qe]),Gd(j,Qe,ui(De,l,f,Qe,a,D))}),j}function vF(a){var l=Sn(a);return function(f){return x1(f,a,l)}}function x1(a,l,f){var y=f.length;if(a==null)return!y;for(a=St(a);y--;){var E=f[y],D=l[E],j=a[E];if(j===n&&!(E in a)||!D(j))return!1}return!0}function k1(a,l,f){if(typeof a!="function")throw new oi(o);return Zd(function(){a.apply(n,f)},l)}function Kd(a,l,f,y){var E=-1,D=ja,j=!0,$=a.length,q=[],te=l.length;if(!$)return q;f&&(l=It(l,pt(f))),y?(D=_o,j=!1):l.length>=i&&(D=si,j=!1,l=new qa(l));e:for(;++E<$;){var ne=a[E],se=f==null?ne:f(ne);if(ne=y||ne!==0?ne:0,j&&se===se){for(var ve=te;ve--;)if(l[ve]===se)continue e;q.push(ne)}else D(l,se,y)||q.push(ne)}return q}var To=iR(Gi),N1=iR(Pv,!0);function wF(a,l){var f=!0;return To(a,function(y,E,D){return f=!!l(y,E,D),f}),f}function pm(a,l,f){for(var y=-1,E=a.length;++y<E;){var D=a[y],j=l(D);if(j!=null&&($===n?j===j&&!Mr(j):f(j,$)))var $=j,q=D}return q}function EF(a,l,f,y){var E=a.length;for(f=qe(f),f<0&&(f=-f>E?0:E+f),y=y===n||y>E?E:qe(y),y<0&&(y+=E),y=f>y?0:QR(y);f<y;)a[f++]=l;return a}function O1(a,l){var f=[];return To(a,function(y,E,D){l(y,E,D)&&f.push(y)}),f}function Dn(a,l,f,y,E){var D=-1,j=a.length;for(f||(f=lU),E||(E=[]);++D<j;){var $=a[D];l>0&&f($)?l>1?Dn($,l-1,f,y,E):Si(E,$):y||(E[E.length]=$)}return E}var Av=sR(),D1=sR(!0);function Gi(a,l){return a&&Av(a,l,Sn)}function Pv(a,l){return a&&D1(a,l,Sn)}function mm(a,l){return ii(l,function(f){return ks(a[f])})}function Ka(a,l){l=So(l,a);for(var f=0,y=l.length;a!=null&&f<y;)a=a[Hi(l[f++])];return f&&f==y?a:n}function L1(a,l,f){var y=l(a);return Be(a)?y:Si(y,f(a))}function tr(a){return a==null?a===n?co:ei:za&&za in St(a)?rU(a):gU(a)}function Cv(a,l){return a>l}function TF(a,l){return a!=null&&gt.call(a,l)}function IF(a,l){return a!=null&&l in St(a)}function SF(a,l,f){return a>=qn(l,f)&&a<mn(l,f)}function bv(a,l,f){for(var y=f?_o:ja,E=a[0].length,D=a.length,j=D,$=Y(D),q=1/0,te=[];j--;){var ne=a[j];j&&l&&(ne=It(ne,pt(l))),q=qn(ne.length,q),$[j]=!f&&(l||E>=120&&ne.length>=120)?new qa(j&&ne):n}ne=a[0];var se=-1,ve=$[0];e:for(;++se<E&&te.length<q;){var Ae=ne[se],Oe=l?l(Ae):Ae;if(Ae=f||Ae!==0?Ae:0,!(ve?si(ve,Oe):y(te,Oe,f))){for(j=D;--j;){var Ge=$[j];if(!(Ge?si(Ge,Oe):y(a[j],Oe,f)))continue e}ve&&ve.push(Oe),te.push(Ae)}}return te}function RF(a,l,f,y){return Gi(a,function(E,D,j){l(y,f(E),D,j)}),y}function Hd(a,l,f){l=So(l,a),a=TR(a,l);var y=a==null?a:a[Hi(ci(l))];return y==null?n:zn(y,a,f)}function M1(a){return Gt(a)&&tr(a)==Pe}function AF(a){return Gt(a)&&tr(a)==wt}function PF(a){return Gt(a)&&tr(a)==xe}function Qd(a,l,f,y,E){return a===l?!0:a==null||l==null||!Gt(a)&&!Gt(l)?a!==a&&l!==l:CF(a,l,f,y,Qd,E)}function CF(a,l,f,y,E,D){var j=Be(a),$=Be(l),q=j?Fe:Gn(a),te=$?Fe:Gn(l);q=q==Pe?an:q,te=te==Pe?an:te;var ne=q==an,se=te==an,ve=q==te;if(ve&&Ao(a)){if(!Ao(l))return!1;j=!0,ne=!1}if(ve&&!ne)return D||(D=new Pi),j||Ol(a)?mR(a,l,f,y,E,D):tU(a,l,q,f,y,E,D);if(!(f&T)){var Ae=ne&&gt.call(a,"__wrapped__"),Oe=se&&gt.call(l,"__wrapped__");if(Ae||Oe){var Ge=Ae?a.value():a,De=Oe?l.value():l;return D||(D=new Pi),E(Ge,De,f,y,D)}}return ve?(D||(D=new Pi),nU(a,l,f,y,E,D)):!1}function bF(a){return Gt(a)&&Gn(a)==vt}function xv(a,l,f,y){var E=f.length,D=E,j=!y;if(a==null)return!D;for(a=St(a);E--;){var $=f[E];if(j&&$[2]?$[1]!==a[$[0]]:!($[0]in a))return!1}for(;++E<D;){$=f[E];var q=$[0],te=a[q],ne=$[1];if(j&&$[2]){if(te===n&&!(q in a))return!1}else{var se=new Pi;if(y)var ve=y(te,ne,q,a,l,se);if(!(ve===n?Qd(ne,te,T|k,y,se):ve))return!1}}return!0}function V1(a){if(!Ft(a)||dU(a))return!1;var l=ks(a)?bV:Cp;return l.test(Qa(a))}function xF(a){return Gt(a)&&tr(a)==Ii}function kF(a){return Gt(a)&&Gn(a)==$n}function NF(a){return Gt(a)&&Nm(a.length)&&!!dt[tr(a)]}function F1(a){return typeof a=="function"?a:a==null?Er:typeof a=="object"?Be(a)?B1(a[0],a[1]):j1(a):oA(a)}function kv(a){if(!Xd(a))return LV(a);var l=[];for(var f in St(a))gt.call(a,f)&&f!="constructor"&&l.push(f);return l}function OF(a){if(!Ft(a))return mU(a);var l=Xd(a),f=[];for(var y in a)y=="constructor"&&(l||!gt.call(a,y))||f.push(y);return f}function Nv(a,l){return a<l}function U1(a,l){var f=-1,y=vr(a)?Y(a.length):[];return To(a,function(E,D,j){y[++f]=l(E,D,j)}),y}function j1(a){var l=Kv(a);return l.length==1&&l[0][2]?wR(l[0][0],l[0][1]):function(f){return f===a||xv(f,a,l)}}function B1(a,l){return Qv(a)&&vR(l)?wR(Hi(a),l):function(f){var y=sw(f,a);return y===n&&y===l?ow(f,a):Qd(l,y,T|k)}}function gm(a,l,f,y,E){a!==l&&Av(l,function(D,j){if(E||(E=new Pi),Ft(D))DF(a,l,j,f,gm,y,E);else{var $=y?y(Jv(a,j),D,j+"",a,l,E):n;$===n&&($=D),Sv(a,j,$)}},wr)}function DF(a,l,f,y,E,D,j){var $=Jv(a,f),q=Jv(l,f),te=j.get(q);if(te){Sv(a,f,te);return}var ne=D?D($,q,f+"",a,l,j):n,se=ne===n;if(se){var ve=Be(q),Ae=!ve&&Ao(q),Oe=!ve&&!Ae&&Ol(q);ne=q,ve||Ae||Oe?Be($)?ne=$:Zt($)?ne=_r($):Ae?(se=!1,ne=Z1(q,!0)):Oe?(se=!1,ne=eR(q,!0)):ne=[]:eh(q)||Ya(q)?(ne=$,Ya($)?ne=YR($):(!Ft($)||ks($))&&(ne=_R(q))):se=!1}se&&(j.set(q,ne),E(ne,q,y,D,j),j.delete(q)),Sv(a,f,ne)}function $1(a,l){var f=a.length;if(f)return l+=l<0?f:0,xs(l,f)?a[l]:n}function z1(a,l,f){l.length?l=It(l,function(D){return Be(D)?function(j){return Ka(j,D.length===1?D[0]:D)}:D}):l=[Er];var y=-1;l=It(l,pt(ke()));var E=U1(a,function(D,j,$){var q=It(l,function(te){return te(D)});return{criteria:q,index:++y,value:D}});return X(E,function(D,j){return KF(D,j,f)})}function LF(a,l){return W1(a,l,function(f,y){return ow(a,y)})}function W1(a,l,f){for(var y=-1,E=l.length,D={};++y<E;){var j=l[y],$=Ka(a,j);f($,j)&&Yd(D,So(j,a),$)}return D}function MF(a){return function(l){return Ka(l,a)}}function Ov(a,l,f,y){var E=y?vo:Ss,D=-1,j=l.length,$=a;for(a===l&&(l=_r(l)),f&&($=It(a,pt(f)));++D<j;)for(var q=0,te=l[D],ne=f?f(te):te;(q=E($,ne,q,y))>-1;)$!==a&&om.call($,q,1),om.call(a,q,1);return a}function q1(a,l){for(var f=a?l.length:0,y=f-1;f--;){var E=l[f];if(f==y||E!==D){var D=E;xs(E)?om.call(a,E,1):Vv(a,E)}}return a}function Dv(a,l){return a+lm(R1()*(l-a+1))}function VF(a,l,f,y){for(var E=-1,D=mn(um((l-a)/(f||1)),0),j=Y(D);D--;)j[y?D:++E]=a,a+=f;return j}function Lv(a,l){var f="";if(!a||l<1||l>H)return f;do l%2&&(f+=a),l=lm(l/2),l&&(a+=a);while(l);return f}function Ke(a,l){return Xv(ER(a,l,Er),a+"")}function FF(a){return C1(Dl(a))}function UF(a,l){var f=Dl(a);return Am(f,Ga(l,0,f.length))}function Yd(a,l,f,y){if(!Ft(a))return a;l=So(l,a);for(var E=-1,D=l.length,j=D-1,$=a;$!=null&&++E<D;){var q=Hi(l[E]),te=f;if(q==="__proto__"||q==="constructor"||q==="prototype")return a;if(E!=j){var ne=$[q];te=y?y(ne,q,$):n,te===n&&(te=Ft(ne)?ne:xs(l[E+1])?[]:{})}Gd($,q,te),$=$[q]}return a}var G1=cm?function(a,l){return cm.set(a,l),a}:Er,jF=am?function(a,l){return am(a,"toString",{configurable:!0,enumerable:!1,value:uw(l),writable:!0})}:Er;function BF(a){return Am(Dl(a))}function li(a,l,f){var y=-1,E=a.length;l<0&&(l=-l>E?0:E+l),f=f>E?E:f,f<0&&(f+=E),E=l>f?0:f-l>>>0,l>>>=0;for(var D=Y(E);++y<E;)D[y]=a[y+l];return D}function $F(a,l){var f;return To(a,function(y,E,D){return f=l(y,E,D),!f}),!!f}function ym(a,l,f){var y=0,E=a==null?y:a.length;if(typeof l=="number"&&l===l&&E<=we){for(;y<E;){var D=y+E>>>1,j=a[D];j!==null&&!Mr(j)&&(f?j<=l:j<l)?y=D+1:E=D}return E}return Mv(a,l,Er,f)}function Mv(a,l,f,y){var E=0,D=a==null?0:a.length;if(D===0)return 0;l=f(l);for(var j=l!==l,$=l===null,q=Mr(l),te=l===n;E<D;){var ne=lm((E+D)/2),se=f(a[ne]),ve=se!==n,Ae=se===null,Oe=se===se,Ge=Mr(se);if(j)var De=y||Oe;else te?De=Oe&&(y||ve):$?De=Oe&&ve&&(y||!Ae):q?De=Oe&&ve&&!Ae&&(y||!Ge):Ae||Ge?De=!1:De=y?se<=l:se<l;De?E=ne+1:D=ne}return qn(D,Se)}function K1(a,l){for(var f=-1,y=a.length,E=0,D=[];++f<y;){var j=a[f],$=l?l(j):j;if(!f||!Ci($,q)){var q=$;D[E++]=j===0?0:j}}return D}function H1(a){return typeof a=="number"?a:Mr(a)?me:+a}function Lr(a){if(typeof a=="string")return a;if(Be(a))return It(a,Lr)+"";if(Mr(a))return A1?A1.call(a):"";var l=a+"";return l=="0"&&1/a==-ue?"-0":l}function Io(a,l,f){var y=-1,E=ja,D=a.length,j=!0,$=[],q=$;if(f)j=!1,E=_o;else if(D>=i){var te=l?null:ZF(a);if(te)return Xp(te);j=!1,E=si,q=new qa}else q=l?[]:$;e:for(;++y<D;){var ne=a[y],se=l?l(ne):ne;if(ne=f||ne!==0?ne:0,j&&se===se){for(var ve=q.length;ve--;)if(q[ve]===se)continue e;l&&q.push(se),$.push(ne)}else E(q,se,f)||(q!==$&&q.push(se),$.push(ne))}return $}function Vv(a,l){return l=So(l,a),a=TR(a,l),a==null||delete a[Hi(ci(l))]}function Q1(a,l,f,y){return Yd(a,l,f(Ka(a,l)),y)}function _m(a,l,f,y){for(var E=a.length,D=y?E:-1;(y?D--:++D<E)&&l(a[D],D,a););return f?li(a,y?0:D,y?D+1:E):li(a,y?D+1:0,y?E:D)}function Y1(a,l){var f=a;return f instanceof Xe&&(f=f.value()),Ri(l,function(y,E){return E.func.apply(E.thisArg,Si([y],E.args))},f)}function Fv(a,l,f){var y=a.length;if(y<2)return y?Io(a[0]):[];for(var E=-1,D=Y(y);++E<y;)for(var j=a[E],$=-1;++$<y;)$!=E&&(D[E]=Kd(D[E]||j,a[$],l,f));return Io(Dn(D,1),l,f)}function J1(a,l,f){for(var y=-1,E=a.length,D=l.length,j={};++y<E;){var $=y<D?l[y]:n;f(j,a[y],$)}return j}function Uv(a){return Zt(a)?a:[]}function jv(a){return typeof a=="function"?a:Er}function So(a,l){return Be(a)?a:Qv(a,l)?[a]:AR(mt(a))}var zF=Ke;function Ro(a,l,f){var y=a.length;return f=f===n?y:f,!l&&f>=y?a:li(a,l,f)}var X1=xV||function(a){return qt.clearTimeout(a)};function Z1(a,l){if(l)return a.slice();var f=a.length,y=w1?w1(f):new a.constructor(f);return a.copy(y),y}function Bv(a){var l=new a.constructor(a.byteLength);return new im(l).set(new im(a)),l}function WF(a,l){var f=l?Bv(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function qF(a){var l=new a.constructor(a.source,Na.exec(a));return l.lastIndex=a.lastIndex,l}function GF(a){return qd?St(qd.call(a)):{}}function eR(a,l){var f=l?Bv(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function tR(a,l){if(a!==l){var f=a!==n,y=a===null,E=a===a,D=Mr(a),j=l!==n,$=l===null,q=l===l,te=Mr(l);if(!$&&!te&&!D&&a>l||D&&j&&q&&!$&&!te||y&&j&&q||!f&&q||!E)return 1;if(!y&&!D&&!te&&a<l||te&&f&&E&&!y&&!D||$&&f&&E||!j&&E||!q)return-1}return 0}function KF(a,l,f){for(var y=-1,E=a.criteria,D=l.criteria,j=E.length,$=f.length;++y<j;){var q=tR(E[y],D[y]);if(q){if(y>=$)return q;var te=f[y];return q*(te=="desc"?-1:1)}}return a.index-l.index}function nR(a,l,f,y){for(var E=-1,D=a.length,j=f.length,$=-1,q=l.length,te=mn(D-j,0),ne=Y(q+te),se=!y;++$<q;)ne[$]=l[$];for(;++E<j;)(se||E<D)&&(ne[f[E]]=a[E]);for(;te--;)ne[$++]=a[E++];return ne}function rR(a,l,f,y){for(var E=-1,D=a.length,j=-1,$=f.length,q=-1,te=l.length,ne=mn(D-$,0),se=Y(ne+te),ve=!y;++E<ne;)se[E]=a[E];for(var Ae=E;++q<te;)se[Ae+q]=l[q];for(;++j<$;)(ve||E<D)&&(se[Ae+f[j]]=a[E++]);return se}function _r(a,l){var f=-1,y=a.length;for(l||(l=Y(y));++f<y;)l[f]=a[f];return l}function Ki(a,l,f,y){var E=!f;f||(f={});for(var D=-1,j=l.length;++D<j;){var $=l[D],q=y?y(f[$],a[$],$,f,a):n;q===n&&(q=a[$]),E?Ps(f,$,q):Gd(f,$,q)}return f}function HF(a,l){return Ki(a,Hv(a),l)}function QF(a,l){return Ki(a,gR(a),l)}function vm(a,l){return function(f,y){var E=Be(f)?Ua:yF,D=l?l():{};return E(f,a,ke(y,2),D)}}function xl(a){return Ke(function(l,f){var y=-1,E=f.length,D=E>1?f[E-1]:n,j=E>2?f[2]:n;for(D=a.length>3&&typeof D=="function"?(E--,D):n,j&&nr(f[0],f[1],j)&&(D=E<3?n:D,E=1),l=St(l);++y<E;){var $=f[y];$&&a(l,$,y,D)}return l})}function iR(a,l){return function(f,y){if(f==null)return f;if(!vr(f))return a(f,y);for(var E=f.length,D=l?E:-1,j=St(f);(l?D--:++D<E)&&y(j[D],D,j)!==!1;);return f}}function sR(a){return function(l,f,y){for(var E=-1,D=St(l),j=y(l),$=j.length;$--;){var q=j[a?$:++E];if(f(D[q],q,D)===!1)break}return l}}function YF(a,l,f){var y=l&x,E=Jd(a);function D(){var j=this&&this!==qt&&this instanceof D?E:a;return j.apply(y?f:this,arguments)}return D}function oR(a){return function(l){l=mt(l);var f=Il(l)?Ai(l):n,y=f?f[0]:l.charAt(0),E=f?Ro(f,1).join(""):l.slice(1);return y[a]()+E}}function kl(a){return function(l){return Ri(iA(rA(l).replace(fv,"")),a,"")}}function Jd(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var f=bl(a.prototype),y=a.apply(f,l);return Ft(y)?y:f}}function JF(a,l,f){var y=Jd(a);function E(){for(var D=arguments.length,j=Y(D),$=D,q=Nl(E);$--;)j[$]=arguments[$];var te=D<3&&j[0]!==q&&j[D-1]!==q?[]:wo(j,q);if(D-=te.length,D<f)return dR(a,l,wm,E.placeholder,n,j,te,n,n,f-D);var ne=this&&this!==qt&&this instanceof E?y:a;return zn(ne,this,j)}return E}function aR(a){return function(l,f,y){var E=St(l);if(!vr(l)){var D=ke(f,3);l=Sn(l),f=function($){return D(E[$],$,E)}}var j=a(l,f,y);return j>-1?E[D?l[j]:j]:n}}function uR(a){return bs(function(l){var f=l.length,y=f,E=ai.prototype.thru;for(a&&l.reverse();y--;){var D=l[y];if(typeof D!="function")throw new oi(o);if(E&&!j&&Sm(D)=="wrapper")var j=new ai([],!0)}for(y=j?y:f;++y<f;){D=l[y];var $=Sm(D),q=$=="wrapper"?Gv(D):n;q&&Yv(q[0])&&q[1]==(C|I|z|S)&&!q[4].length&&q[9]==1?j=j[Sm(q[0])].apply(j,q[3]):j=D.length==1&&Yv(D)?j[$]():j.thru(D)}return function(){var te=arguments,ne=te[0];if(j&&te.length==1&&Be(ne))return j.plant(ne).value();for(var se=0,ve=f?l[se].apply(this,te):ne;++se<f;)ve=l[se].call(this,ve);return ve}})}function wm(a,l,f,y,E,D,j,$,q,te){var ne=l&C,se=l&x,ve=l&P,Ae=l&(I|F),Oe=l&L,Ge=ve?n:Jd(a);function De(){for(var Qe=arguments.length,nt=Y(Qe),Vr=Qe;Vr--;)nt[Vr]=arguments[Vr];if(Ae)var rr=Nl(De),Fr=jd(nt,rr);if(y&&(nt=nR(nt,y,E,Ae)),D&&(nt=rR(nt,D,j,Ae)),Qe-=Fr,Ae&&Qe<te){var en=wo(nt,rr);return dR(a,l,wm,De.placeholder,f,nt,en,$,q,te-Qe)}var bi=se?f:this,Os=ve?bi[a]:a;return Qe=nt.length,$?nt=yU(nt,$):Oe&&Qe>1&&nt.reverse(),ne&&q<Qe&&(nt.length=q),this&&this!==qt&&this instanceof De&&(Os=Ge||Jd(Os)),Os.apply(bi,nt)}return De}function lR(a,l){return function(f,y){return RF(f,a,l(y),{})}}function Em(a,l){return function(f,y){var E;if(f===n&&y===n)return l;if(f!==n&&(E=f),y!==n){if(E===n)return y;typeof f=="string"||typeof y=="string"?(f=Lr(f),y=Lr(y)):(f=H1(f),y=H1(y)),E=a(f,y)}return E}}function $v(a){return bs(function(l){return l=It(l,pt(ke())),Ke(function(f){var y=this;return a(l,function(E){return zn(E,y,f)})})})}function Tm(a,l){l=l===n?" ":Lr(l);var f=l.length;if(f<2)return f?Lv(l,a):l;var y=Lv(l,um(a/Sl(l)));return Il(l)?Ro(Ai(y),0,a).join(""):y.slice(0,a)}function XF(a,l,f,y){var E=l&x,D=Jd(a);function j(){for(var $=-1,q=arguments.length,te=-1,ne=y.length,se=Y(ne+q),ve=this&&this!==qt&&this instanceof j?D:a;++te<ne;)se[te]=y[te];for(;q--;)se[te++]=arguments[++$];return zn(ve,E?f:this,se)}return j}function cR(a){return function(l,f,y){return y&&typeof y!="number"&&nr(l,f,y)&&(f=y=n),l=Ns(l),f===n?(f=l,l=0):f=Ns(f),y=y===n?l<f?1:-1:Ns(y),VF(l,f,y,a)}}function Im(a){return function(l,f){return typeof l=="string"&&typeof f=="string"||(l=di(l),f=di(f)),a(l,f)}}function dR(a,l,f,y,E,D,j,$,q,te){var ne=l&I,se=ne?j:n,ve=ne?n:j,Ae=ne?D:n,Oe=ne?n:D;l|=ne?z:G,l&=~(ne?G:z),l&R||(l&=~(x|P));var Ge=[a,l,E,Ae,se,Oe,ve,$,q,te],De=f.apply(n,Ge);return Yv(a)&&IR(De,Ge),De.placeholder=y,SR(De,a,l)}function zv(a){var l=pn[a];return function(f,y){if(f=di(f),y=y==null?0:qn(qe(y),292),y&&S1(f)){var E=(mt(f)+"e").split("e"),D=l(E[0]+"e"+(+E[1]+y));return E=(mt(D)+"e").split("e"),+(E[0]+"e"+(+E[1]-y))}return l(f)}}var ZF=Pl&&1/Xp(new Pl([,-0]))[1]==ue?function(a){return new Pl(a)}:dw;function hR(a){return function(l){var f=Gn(l);return f==vt?vv(l):f==$n?gV(l):fn(l,a(l))}}function Cs(a,l,f,y,E,D,j,$){var q=l&P;if(!q&&typeof a!="function")throw new oi(o);var te=y?y.length:0;if(te||(l&=~(z|G),y=E=n),j=j===n?j:mn(qe(j),0),$=$===n?$:qe($),te-=E?E.length:0,l&G){var ne=y,se=E;y=E=n}var ve=q?n:Gv(a),Ae=[a,l,f,y,E,ne,se,D,j,$];if(ve&&pU(Ae,ve),a=Ae[0],l=Ae[1],f=Ae[2],y=Ae[3],E=Ae[4],$=Ae[9]=Ae[9]===n?q?0:a.length:mn(Ae[9]-te,0),!$&&l&(I|F)&&(l&=~(I|F)),!l||l==x)var Oe=YF(a,l,f);else l==I||l==F?Oe=JF(a,l,$):(l==z||l==(x|z))&&!E.length?Oe=XF(a,l,f,y):Oe=wm.apply(n,Ae);var Ge=ve?G1:IR;return SR(Ge(Oe,Ae),a,l)}function fR(a,l,f,y){return a===n||Ci(a,Al[f])&&!gt.call(y,f)?l:a}function pR(a,l,f,y,E,D){return Ft(a)&&Ft(l)&&(D.set(l,a),gm(a,l,n,pR,D),D.delete(l)),a}function eU(a){return eh(a)?n:a}function mR(a,l,f,y,E,D){var j=f&T,$=a.length,q=l.length;if($!=q&&!(j&&q>$))return!1;var te=D.get(a),ne=D.get(l);if(te&&ne)return te==l&&ne==a;var se=-1,ve=!0,Ae=f&k?new qa:n;for(D.set(a,l),D.set(l,a);++se<$;){var Oe=a[se],Ge=l[se];if(y)var De=j?y(Ge,Oe,se,l,a,D):y(Oe,Ge,se,a,l,D);if(De!==n){if(De)continue;ve=!1;break}if(Ae){if(!El(l,function(Qe,nt){if(!si(Ae,nt)&&(Oe===Qe||E(Oe,Qe,f,y,D)))return Ae.push(nt)})){ve=!1;break}}else if(!(Oe===Ge||E(Oe,Ge,f,y,D))){ve=!1;break}}return D.delete(a),D.delete(l),ve}function tU(a,l,f,y,E,D,j){switch(f){case gr:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case wt:return!(a.byteLength!=l.byteLength||!D(new im(a),new im(l)));case Le:case xe:case We:return Ci(+a,+l);case ct:return a.name==l.name&&a.message==l.message;case Ii:case ys:return a==l+"";case vt:var $=vv;case $n:var q=y&T;if($||($=Xp),a.size!=l.size&&!q)return!1;var te=j.get(a);if(te)return te==l;y|=k,j.set(a,l);var ne=mR($(a),$(l),y,E,D,j);return j.delete(a),ne;case Bi:if(qd)return qd.call(a)==qd.call(l)}return!1}function nU(a,l,f,y,E,D){var j=f&T,$=Wv(a),q=$.length,te=Wv(l),ne=te.length;if(q!=ne&&!j)return!1;for(var se=q;se--;){var ve=$[se];if(!(j?ve in l:gt.call(l,ve)))return!1}var Ae=D.get(a),Oe=D.get(l);if(Ae&&Oe)return Ae==l&&Oe==a;var Ge=!0;D.set(a,l),D.set(l,a);for(var De=j;++se<q;){ve=$[se];var Qe=a[ve],nt=l[ve];if(y)var Vr=j?y(nt,Qe,ve,l,a,D):y(Qe,nt,ve,a,l,D);if(!(Vr===n?Qe===nt||E(Qe,nt,f,y,D):Vr)){Ge=!1;break}De||(De=ve=="constructor")}if(Ge&&!De){var rr=a.constructor,Fr=l.constructor;rr!=Fr&&"constructor"in a&&"constructor"in l&&!(typeof rr=="function"&&rr instanceof rr&&typeof Fr=="function"&&Fr instanceof Fr)&&(Ge=!1)}return D.delete(a),D.delete(l),Ge}function bs(a){return Xv(ER(a,n,xR),a+"")}function Wv(a){return L1(a,Sn,Hv)}function qv(a){return L1(a,wr,gR)}var Gv=cm?function(a){return cm.get(a)}:dw;function Sm(a){for(var l=a.name+"",f=Cl[l],y=gt.call(Cl,l)?f.length:0;y--;){var E=f[y],D=E.func;if(D==null||D==a)return E.name}return l}function Nl(a){var l=gt.call(b,"placeholder")?b:a;return l.placeholder}function ke(){var a=b.iteratee||lw;return a=a===lw?F1:a,arguments.length?a(arguments[0],arguments[1]):a}function Rm(a,l){var f=a.__data__;return cU(l)?f[typeof l=="string"?"string":"hash"]:f.map}function Kv(a){for(var l=Sn(a),f=l.length;f--;){var y=l[f],E=a[y];l[f]=[y,E,vR(E)]}return l}function Ha(a,l){var f=fV(a,l);return V1(f)?f:n}function rU(a){var l=gt.call(a,za),f=a[za];try{a[za]=n;var y=!0}catch{}var E=nm.call(a);return y&&(l?a[za]=f:delete a[za]),E}var Hv=Ev?function(a){return a==null?[]:(a=St(a),ii(Ev(a),function(l){return T1.call(a,l)}))}:hw,gR=Ev?function(a){for(var l=[];a;)Si(l,Hv(a)),a=sm(a);return l}:hw,Gn=tr;(Tv&&Gn(new Tv(new ArrayBuffer(1)))!=gr||$d&&Gn(new $d)!=vt||Iv&&Gn(Iv.resolve())!=gs||Pl&&Gn(new Pl)!=$n||zd&&Gn(new zd)!=$i)&&(Gn=function(a){var l=tr(a),f=l==an?a.constructor:n,y=f?Qa(f):"";if(y)switch(y){case UV:return gr;case jV:return vt;case BV:return gs;case $V:return $n;case zV:return $i}return l});function iU(a,l,f){for(var y=-1,E=f.length;++y<E;){var D=f[y],j=D.size;switch(D.type){case"drop":a+=j;break;case"dropRight":l-=j;break;case"take":l=qn(l,a+j);break;case"takeRight":a=mn(a,l-j);break}}return{start:a,end:l}}function sU(a){var l=a.match(fo);return l?l[1].split(av):[]}function yR(a,l,f){l=So(l,a);for(var y=-1,E=l.length,D=!1;++y<E;){var j=Hi(l[y]);if(!(D=a!=null&&f(a,j)))break;a=a[j]}return D||++y!=E?D:(E=a==null?0:a.length,!!E&&Nm(E)&&xs(j,E)&&(Be(a)||Ya(a)))}function oU(a){var l=a.length,f=new a.constructor(l);return l&&typeof a[0]=="string"&&gt.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function _R(a){return typeof a.constructor=="function"&&!Xd(a)?bl(sm(a)):{}}function aU(a,l,f){var y=a.constructor;switch(l){case wt:return Bv(a);case Le:case xe:return new y(+a);case gr:return WF(a,f);case ol:case al:case yd:case _s:case ul:case ll:case ba:case _d:case vd:return eR(a,f);case vt:return new y;case We:case ys:return new y(a);case Ii:return qF(a);case $n:return new y;case Bi:return GF(a)}}function uU(a,l){var f=l.length;if(!f)return a;var y=f-1;return l[y]=(f>1?"& ":"")+l[y],l=l.join(f>2?", ":" "),a.replace(ov,`{
/* [wrapped with `+l+`] */
`)}function lU(a){return Be(a)||Ya(a)||!!(I1&&a&&a[I1])}function xs(a,l){var f=typeof a;return l=l??H,!!l&&(f=="number"||f!="symbol"&&Rd.test(a))&&a>-1&&a%1==0&&a<l}function nr(a,l,f){if(!Ft(f))return!1;var y=typeof l;return(y=="number"?vr(f)&&xs(l,f.length):y=="string"&&l in f)?Ci(f[l],a):!1}function Qv(a,l){if(Be(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Mr(a)?!0:Rp.test(a)||!xa.test(a)||l!=null&&a in St(l)}function cU(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function Yv(a){var l=Sm(a),f=b[l];if(typeof f!="function"||!(l in Xe.prototype))return!1;if(a===f)return!0;var y=Gv(f);return!!y&&a===y[0]}function dU(a){return!!v1&&v1 in a}var hU=em?ks:fw;function Xd(a){var l=a&&a.constructor,f=typeof l=="function"&&l.prototype||Al;return a===f}function vR(a){return a===a&&!Ft(a)}function wR(a,l){return function(f){return f==null?!1:f[a]===l&&(l!==n||a in St(f))}}function fU(a){var l=xm(a,function(y){return f.size===h&&f.clear(),y}),f=l.cache;return l}function pU(a,l){var f=a[1],y=l[1],E=f|y,D=E<(x|P|C),j=y==C&&f==I||y==C&&f==S&&a[7].length<=l[8]||y==(C|S)&&l[7].length<=l[8]&&f==I;if(!(D||j))return a;y&x&&(a[2]=l[2],E|=f&x?0:R);var $=l[3];if($){var q=a[3];a[3]=q?nR(q,$,l[4]):$,a[4]=q?wo(a[3],p):l[4]}return $=l[5],$&&(q=a[5],a[5]=q?rR(q,$,l[6]):$,a[6]=q?wo(a[5],p):l[6]),$=l[7],$&&(a[7]=$),y&C&&(a[8]=a[8]==null?l[8]:qn(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=E,a}function mU(a){var l=[];if(a!=null)for(var f in St(a))l.push(f);return l}function gU(a){return nm.call(a)}function ER(a,l,f){return l=mn(l===n?a.length-1:l,0),function(){for(var y=arguments,E=-1,D=mn(y.length-l,0),j=Y(D);++E<D;)j[E]=y[l+E];E=-1;for(var $=Y(l+1);++E<l;)$[E]=y[E];return $[l]=f(j),zn(a,this,$)}}function TR(a,l){return l.length<2?a:Ka(a,li(l,0,-1))}function yU(a,l){for(var f=a.length,y=qn(l.length,f),E=_r(a);y--;){var D=l[y];a[y]=xs(D,f)?E[D]:n}return a}function Jv(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var IR=RR(G1),Zd=NV||function(a,l){return qt.setTimeout(a,l)},Xv=RR(jF);function SR(a,l,f){var y=l+"";return Xv(a,uU(y,_U(sU(y),f)))}function RR(a){var l=0,f=0;return function(){var y=MV(),E=O-(y-f);if(f=y,E>0){if(++l>=M)return arguments[0]}else l=0;return a.apply(n,arguments)}}function Am(a,l){var f=-1,y=a.length,E=y-1;for(l=l===n?y:l;++f<l;){var D=Dv(f,E),j=a[D];a[D]=a[f],a[f]=j}return a.length=l,a}var AR=fU(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(Nn,function(f,y,E,D){l.push(E?D.replace(Ap,"$1"):y||f)}),l});function Hi(a){if(typeof a=="string"||Mr(a))return a;var l=a+"";return l=="0"&&1/a==-ue?"-0":l}function Qa(a){if(a!=null){try{return tm.call(a)}catch{}try{return a+""}catch{}}return""}function _U(a,l){return er(Ne,function(f){var y="_."+f[0];l&f[1]&&!ja(a,y)&&a.push(y)}),a.sort()}function PR(a){if(a instanceof Xe)return a.clone();var l=new ai(a.__wrapped__,a.__chain__);return l.__actions__=_r(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function vU(a,l,f){(f?nr(a,l,f):l===n)?l=1:l=mn(qe(l),0);var y=a==null?0:a.length;if(!y||l<1)return[];for(var E=0,D=0,j=Y(um(y/l));E<y;)j[D++]=li(a,E,E+=l);return j}function wU(a){for(var l=-1,f=a==null?0:a.length,y=0,E=[];++l<f;){var D=a[l];D&&(E[y++]=D)}return E}function EU(){var a=arguments.length;if(!a)return[];for(var l=Y(a-1),f=arguments[0],y=a;y--;)l[y-1]=arguments[y];return Si(Be(f)?_r(f):[f],Dn(l,1))}var TU=Ke(function(a,l){return Zt(a)?Kd(a,Dn(l,1,Zt,!0)):[]}),IU=Ke(function(a,l){var f=ci(l);return Zt(f)&&(f=n),Zt(a)?Kd(a,Dn(l,1,Zt,!0),ke(f,2)):[]}),SU=Ke(function(a,l){var f=ci(l);return Zt(f)&&(f=n),Zt(a)?Kd(a,Dn(l,1,Zt,!0),n,f):[]});function RU(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:qe(l),li(a,l<0?0:l,y)):[]}function AU(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:qe(l),l=y-l,li(a,0,l<0?0:l)):[]}function PU(a,l){return a&&a.length?_m(a,ke(l,3),!0,!0):[]}function CU(a,l){return a&&a.length?_m(a,ke(l,3),!0):[]}function bU(a,l,f,y){var E=a==null?0:a.length;return E?(f&&typeof f!="number"&&nr(a,l,f)&&(f=0,y=E),EF(a,l,f,y)):[]}function CR(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=f==null?0:qe(f);return E<0&&(E=mn(y+E,0)),Ba(a,ke(l,3),E)}function bR(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=y-1;return f!==n&&(E=qe(f),E=f<0?mn(y+E,0):qn(E,y-1)),Ba(a,ke(l,3),E,!0)}function xR(a){var l=a==null?0:a.length;return l?Dn(a,1):[]}function xU(a){var l=a==null?0:a.length;return l?Dn(a,ue):[]}function kU(a,l){var f=a==null?0:a.length;return f?(l=l===n?1:qe(l),Dn(a,l)):[]}function NU(a){for(var l=-1,f=a==null?0:a.length,y={};++l<f;){var E=a[l];y[E[0]]=E[1]}return y}function kR(a){return a&&a.length?a[0]:n}function OU(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=f==null?0:qe(f);return E<0&&(E=mn(y+E,0)),Ss(a,l,E)}function DU(a){var l=a==null?0:a.length;return l?li(a,0,-1):[]}var LU=Ke(function(a){var l=It(a,Uv);return l.length&&l[0]===a[0]?bv(l):[]}),MU=Ke(function(a){var l=ci(a),f=It(a,Uv);return l===ci(f)?l=n:f.pop(),f.length&&f[0]===a[0]?bv(f,ke(l,2)):[]}),VU=Ke(function(a){var l=ci(a),f=It(a,Uv);return l=typeof l=="function"?l:n,l&&f.pop(),f.length&&f[0]===a[0]?bv(f,n,l):[]});function FU(a,l){return a==null?"":DV.call(a,l)}function ci(a){var l=a==null?0:a.length;return l?a[l-1]:n}function UU(a,l,f){var y=a==null?0:a.length;if(!y)return-1;var E=y;return f!==n&&(E=qe(f),E=E<0?mn(y+E,0):qn(E,y-1)),l===l?_V(a,l,E):Ba(a,d,E,!0)}function jU(a,l){return a&&a.length?$1(a,qe(l)):n}var BU=Ke(NR);function NR(a,l){return a&&a.length&&l&&l.length?Ov(a,l):a}function $U(a,l,f){return a&&a.length&&l&&l.length?Ov(a,l,ke(f,2)):a}function zU(a,l,f){return a&&a.length&&l&&l.length?Ov(a,l,n,f):a}var WU=bs(function(a,l){var f=a==null?0:a.length,y=Rv(a,l);return q1(a,It(l,function(E){return xs(E,f)?+E:E}).sort(tR)),y});function qU(a,l){var f=[];if(!(a&&a.length))return f;var y=-1,E=[],D=a.length;for(l=ke(l,3);++y<D;){var j=a[y];l(j,y,a)&&(f.push(j),E.push(y))}return q1(a,E),f}function Zv(a){return a==null?a:FV.call(a)}function GU(a,l,f){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&nr(a,l,f)?(l=0,f=y):(l=l==null?0:qe(l),f=f===n?y:qe(f)),li(a,l,f)):[]}function KU(a,l){return ym(a,l)}function HU(a,l,f){return Mv(a,l,ke(f,2))}function QU(a,l){var f=a==null?0:a.length;if(f){var y=ym(a,l);if(y<f&&Ci(a[y],l))return y}return-1}function YU(a,l){return ym(a,l,!0)}function JU(a,l,f){return Mv(a,l,ke(f,2),!0)}function XU(a,l){var f=a==null?0:a.length;if(f){var y=ym(a,l,!0)-1;if(Ci(a[y],l))return y}return-1}function ZU(a){return a&&a.length?K1(a):[]}function ej(a,l){return a&&a.length?K1(a,ke(l,2)):[]}function tj(a){var l=a==null?0:a.length;return l?li(a,1,l):[]}function nj(a,l,f){return a&&a.length?(l=f||l===n?1:qe(l),li(a,0,l<0?0:l)):[]}function rj(a,l,f){var y=a==null?0:a.length;return y?(l=f||l===n?1:qe(l),l=y-l,li(a,l<0?0:l,y)):[]}function ij(a,l){return a&&a.length?_m(a,ke(l,3),!1,!0):[]}function sj(a,l){return a&&a.length?_m(a,ke(l,3)):[]}var oj=Ke(function(a){return Io(Dn(a,1,Zt,!0))}),aj=Ke(function(a){var l=ci(a);return Zt(l)&&(l=n),Io(Dn(a,1,Zt,!0),ke(l,2))}),uj=Ke(function(a){var l=ci(a);return l=typeof l=="function"?l:n,Io(Dn(a,1,Zt,!0),n,l)});function lj(a){return a&&a.length?Io(a):[]}function cj(a,l){return a&&a.length?Io(a,ke(l,2)):[]}function dj(a,l){return l=typeof l=="function"?l:n,a&&a.length?Io(a,n,l):[]}function ew(a){if(!(a&&a.length))return[];var l=0;return a=ii(a,function(f){if(Zt(f))return l=mn(f.length,l),!0}),ht(l,function(f){return It(a,v(f))})}function OR(a,l){if(!(a&&a.length))return[];var f=ew(a);return l==null?f:It(f,function(y){return zn(l,n,y)})}var hj=Ke(function(a,l){return Zt(a)?Kd(a,l):[]}),fj=Ke(function(a){return Fv(ii(a,Zt))}),pj=Ke(function(a){var l=ci(a);return Zt(l)&&(l=n),Fv(ii(a,Zt),ke(l,2))}),mj=Ke(function(a){var l=ci(a);return l=typeof l=="function"?l:n,Fv(ii(a,Zt),n,l)}),gj=Ke(ew);function yj(a,l){return J1(a||[],l||[],Gd)}function _j(a,l){return J1(a||[],l||[],Yd)}var vj=Ke(function(a){var l=a.length,f=l>1?a[l-1]:n;return f=typeof f=="function"?(a.pop(),f):n,OR(a,f)});function DR(a){var l=b(a);return l.__chain__=!0,l}function wj(a,l){return l(a),a}function Pm(a,l){return l(a)}var Ej=bs(function(a){var l=a.length,f=l?a[0]:0,y=this.__wrapped__,E=function(D){return Rv(D,a)};return l>1||this.__actions__.length||!(y instanceof Xe)||!xs(f)?this.thru(E):(y=y.slice(f,+f+(l?1:0)),y.__actions__.push({func:Pm,args:[E],thisArg:n}),new ai(y,this.__chain__).thru(function(D){return l&&!D.length&&D.push(n),D}))});function Tj(){return DR(this)}function Ij(){return new ai(this.value(),this.__chain__)}function Sj(){this.__values__===n&&(this.__values__=HR(this.value()));var a=this.__index__>=this.__values__.length,l=a?n:this.__values__[this.__index__++];return{done:a,value:l}}function Rj(){return this}function Aj(a){for(var l,f=this;f instanceof hm;){var y=PR(f);y.__index__=0,y.__values__=n,l?E.__wrapped__=y:l=y;var E=y;f=f.__wrapped__}return E.__wrapped__=a,l}function Pj(){var a=this.__wrapped__;if(a instanceof Xe){var l=a;return this.__actions__.length&&(l=new Xe(this)),l=l.reverse(),l.__actions__.push({func:Pm,args:[Zv],thisArg:n}),new ai(l,this.__chain__)}return this.thru(Zv)}function Cj(){return Y1(this.__wrapped__,this.__actions__)}var bj=vm(function(a,l,f){gt.call(a,f)?++a[f]:Ps(a,f,1)});function xj(a,l,f){var y=Be(a)?wl:wF;return f&&nr(a,l,f)&&(l=n),y(a,ke(l,3))}function kj(a,l){var f=Be(a)?ii:O1;return f(a,ke(l,3))}var Nj=aR(CR),Oj=aR(bR);function Dj(a,l){return Dn(Cm(a,l),1)}function Lj(a,l){return Dn(Cm(a,l),ue)}function Mj(a,l,f){return f=f===n?1:qe(f),Dn(Cm(a,l),f)}function LR(a,l){var f=Be(a)?er:To;return f(a,ke(l,3))}function MR(a,l){var f=Be(a)?Hp:N1;return f(a,ke(l,3))}var Vj=vm(function(a,l,f){gt.call(a,f)?a[f].push(l):Ps(a,f,[l])});function Fj(a,l,f,y){a=vr(a)?a:Dl(a),f=f&&!y?qe(f):0;var E=a.length;return f<0&&(f=mn(E+f,0)),Om(a)?f<=E&&a.indexOf(l,f)>-1:!!E&&Ss(a,l,f)>-1}var Uj=Ke(function(a,l,f){var y=-1,E=typeof l=="function",D=vr(a)?Y(a.length):[];return To(a,function(j){D[++y]=E?zn(l,j,f):Hd(j,l,f)}),D}),jj=vm(function(a,l,f){Ps(a,f,l)});function Cm(a,l){var f=Be(a)?It:U1;return f(a,ke(l,3))}function Bj(a,l,f,y){return a==null?[]:(Be(l)||(l=l==null?[]:[l]),f=y?n:f,Be(f)||(f=f==null?[]:[f]),z1(a,l,f))}var $j=vm(function(a,l,f){a[f?0:1].push(l)},function(){return[[],[]]});function zj(a,l,f){var y=Be(a)?Ri:K,E=arguments.length<3;return y(a,ke(l,4),f,E,To)}function Wj(a,l,f){var y=Be(a)?Qp:K,E=arguments.length<3;return y(a,ke(l,4),f,E,N1)}function qj(a,l){var f=Be(a)?ii:O1;return f(a,km(ke(l,3)))}function Gj(a){var l=Be(a)?C1:FF;return l(a)}function Kj(a,l,f){(f?nr(a,l,f):l===n)?l=1:l=qe(l);var y=Be(a)?mF:UF;return y(a,l)}function Hj(a){var l=Be(a)?gF:BF;return l(a)}function Qj(a){if(a==null)return 0;if(vr(a))return Om(a)?Sl(a):a.length;var l=Gn(a);return l==vt||l==$n?a.size:kv(a).length}function Yj(a,l,f){var y=Be(a)?El:$F;return f&&nr(a,l,f)&&(l=n),y(a,ke(l,3))}var Jj=Ke(function(a,l){if(a==null)return[];var f=l.length;return f>1&&nr(a,l[0],l[1])?l=[]:f>2&&nr(l[0],l[1],l[2])&&(l=[l[0]]),z1(a,Dn(l,1),[])}),bm=kV||function(){return qt.Date.now()};function Xj(a,l){if(typeof l!="function")throw new oi(o);return a=qe(a),function(){if(--a<1)return l.apply(this,arguments)}}function VR(a,l,f){return l=f?n:l,l=a&&l==null?a.length:l,Cs(a,C,n,n,n,n,l)}function FR(a,l){var f;if(typeof l!="function")throw new oi(o);return a=qe(a),function(){return--a>0&&(f=l.apply(this,arguments)),a<=1&&(l=n),f}}var tw=Ke(function(a,l,f){var y=x;if(f.length){var E=wo(f,Nl(tw));y|=z}return Cs(a,y,l,f,E)}),UR=Ke(function(a,l,f){var y=x|P;if(f.length){var E=wo(f,Nl(UR));y|=z}return Cs(l,y,a,f,E)});function jR(a,l,f){l=f?n:l;var y=Cs(a,I,n,n,n,n,n,l);return y.placeholder=jR.placeholder,y}function BR(a,l,f){l=f?n:l;var y=Cs(a,F,n,n,n,n,n,l);return y.placeholder=BR.placeholder,y}function $R(a,l,f){var y,E,D,j,$,q,te=0,ne=!1,se=!1,ve=!0;if(typeof a!="function")throw new oi(o);l=di(l)||0,Ft(f)&&(ne=!!f.leading,se="maxWait"in f,D=se?mn(di(f.maxWait)||0,l):D,ve="trailing"in f?!!f.trailing:ve);function Ae(en){var bi=y,Os=E;return y=E=n,te=en,j=a.apply(Os,bi),j}function Oe(en){return te=en,$=Zd(Qe,l),ne?Ae(en):j}function Ge(en){var bi=en-q,Os=en-te,aA=l-bi;return se?qn(aA,D-Os):aA}function De(en){var bi=en-q,Os=en-te;return q===n||bi>=l||bi<0||se&&Os>=D}function Qe(){var en=bm();if(De(en))return nt(en);$=Zd(Qe,Ge(en))}function nt(en){return $=n,ve&&y?Ae(en):(y=E=n,j)}function Vr(){$!==n&&X1($),te=0,y=q=E=$=n}function rr(){return $===n?j:nt(bm())}function Fr(){var en=bm(),bi=De(en);if(y=arguments,E=this,q=en,bi){if($===n)return Oe(q);if(se)return X1($),$=Zd(Qe,l),Ae(q)}return $===n&&($=Zd(Qe,l)),j}return Fr.cancel=Vr,Fr.flush=rr,Fr}var Zj=Ke(function(a,l){return k1(a,1,l)}),eB=Ke(function(a,l,f){return k1(a,di(l)||0,f)});function tB(a){return Cs(a,L)}function xm(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new oi(o);var f=function(){var y=arguments,E=l?l.apply(this,y):y[0],D=f.cache;if(D.has(E))return D.get(E);var j=a.apply(this,y);return f.cache=D.set(E,j)||D,j};return f.cache=new(xm.Cache||As),f}xm.Cache=As;function km(a){if(typeof a!="function")throw new oi(o);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function nB(a){return FR(2,a)}var rB=zF(function(a,l){l=l.length==1&&Be(l[0])?It(l[0],pt(ke())):It(Dn(l,1),pt(ke()));var f=l.length;return Ke(function(y){for(var E=-1,D=qn(y.length,f);++E<D;)y[E]=l[E].call(this,y[E]);return zn(a,this,y)})}),nw=Ke(function(a,l){var f=wo(l,Nl(nw));return Cs(a,z,n,l,f)}),zR=Ke(function(a,l){var f=wo(l,Nl(zR));return Cs(a,G,n,l,f)}),iB=bs(function(a,l){return Cs(a,S,n,n,n,l)});function sB(a,l){if(typeof a!="function")throw new oi(o);return l=l===n?l:qe(l),Ke(a,l)}function oB(a,l){if(typeof a!="function")throw new oi(o);return l=l==null?0:mn(qe(l),0),Ke(function(f){var y=f[l],E=Ro(f,0,l);return y&&Si(E,y),zn(a,this,E)})}function aB(a,l,f){var y=!0,E=!0;if(typeof a!="function")throw new oi(o);return Ft(f)&&(y="leading"in f?!!f.leading:y,E="trailing"in f?!!f.trailing:E),$R(a,l,{leading:y,maxWait:l,trailing:E})}function uB(a){return VR(a,1)}function lB(a,l){return nw(jv(l),a)}function cB(){if(!arguments.length)return[];var a=arguments[0];return Be(a)?a:[a]}function dB(a){return ui(a,A)}function hB(a,l){return l=typeof l=="function"?l:n,ui(a,A,l)}function fB(a){return ui(a,m|A)}function pB(a,l){return l=typeof l=="function"?l:n,ui(a,m|A,l)}function mB(a,l){return l==null||x1(a,l,Sn(l))}function Ci(a,l){return a===l||a!==a&&l!==l}var gB=Im(Cv),yB=Im(function(a,l){return a>=l}),Ya=M1(function(){return arguments}())?M1:function(a){return Gt(a)&&gt.call(a,"callee")&&!T1.call(a,"callee")},Be=Y.isArray,_B=Fd?pt(Fd):AF;function vr(a){return a!=null&&Nm(a.length)&&!ks(a)}function Zt(a){return Gt(a)&&vr(a)}function vB(a){return a===!0||a===!1||Gt(a)&&tr(a)==Le}var Ao=OV||fw,wB=vl?pt(vl):PF;function EB(a){return Gt(a)&&a.nodeType===1&&!eh(a)}function TB(a){if(a==null)return!0;if(vr(a)&&(Be(a)||typeof a=="string"||typeof a.splice=="function"||Ao(a)||Ol(a)||Ya(a)))return!a.length;var l=Gn(a);if(l==vt||l==$n)return!a.size;if(Xd(a))return!kv(a).length;for(var f in a)if(gt.call(a,f))return!1;return!0}function IB(a,l){return Qd(a,l)}function SB(a,l,f){f=typeof f=="function"?f:n;var y=f?f(a,l):n;return y===n?Qd(a,l,n,f):!!y}function rw(a){if(!Gt(a))return!1;var l=tr(a);return l==ct||l==Me||typeof a.message=="string"&&typeof a.name=="string"&&!eh(a)}function RB(a){return typeof a=="number"&&S1(a)}function ks(a){if(!Ft(a))return!1;var l=tr(a);return l==rt||l==Vt||l==fe||l==sl}function WR(a){return typeof a=="number"&&a==qe(a)}function Nm(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=H}function Ft(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function Gt(a){return a!=null&&typeof a=="object"}var qR=Va?pt(Va):bF;function AB(a,l){return a===l||xv(a,l,Kv(l))}function PB(a,l,f){return f=typeof f=="function"?f:n,xv(a,l,Kv(l),f)}function CB(a){return GR(a)&&a!=+a}function bB(a){if(hU(a))throw new Ue(s);return V1(a)}function xB(a){return a===null}function kB(a){return a==null}function GR(a){return typeof a=="number"||Gt(a)&&tr(a)==We}function eh(a){if(!Gt(a)||tr(a)!=an)return!1;var l=sm(a);if(l===null)return!0;var f=gt.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&tm.call(f)==PV}var iw=Ud?pt(Ud):xF;function NB(a){return WR(a)&&a>=-H&&a<=H}var KR=Fa?pt(Fa):kF;function Om(a){return typeof a=="string"||!Be(a)&&Gt(a)&&tr(a)==ys}function Mr(a){return typeof a=="symbol"||Gt(a)&&tr(a)==Bi}var Ol=Kp?pt(Kp):NF;function OB(a){return a===n}function DB(a){return Gt(a)&&Gn(a)==$i}function LB(a){return Gt(a)&&tr(a)==Ve}var MB=Im(Nv),VB=Im(function(a,l){return a<=l});function HR(a){if(!a)return[];if(vr(a))return Om(a)?Ai(a):_r(a);if(Bd&&a[Bd])return mV(a[Bd]());var l=Gn(a),f=l==vt?vv:l==$n?Xp:Dl;return f(a)}function Ns(a){if(!a)return a===0?a:0;if(a=di(a),a===ue||a===-ue){var l=a<0?-1:1;return l*ae}return a===a?a:0}function qe(a){var l=Ns(a),f=l%1;return l===l?f?l-f:l:0}function QR(a){return a?Ga(qe(a),0,ge):0}function di(a){if(typeof a=="number")return a;if(Mr(a))return me;if(Ft(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=Ft(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=tt(a);var f=Pp.test(a);return f||Sd.test(a)?qp(a.slice(2),f?2:8):zi.test(a)?me:+a}function YR(a){return Ki(a,wr(a))}function FB(a){return a?Ga(qe(a),-H,H):a===0?a:0}function mt(a){return a==null?"":Lr(a)}var UB=xl(function(a,l){if(Xd(l)||vr(l)){Ki(l,Sn(l),a);return}for(var f in l)gt.call(l,f)&&Gd(a,f,l[f])}),JR=xl(function(a,l){Ki(l,wr(l),a)}),Dm=xl(function(a,l,f,y){Ki(l,wr(l),a,y)}),jB=xl(function(a,l,f,y){Ki(l,Sn(l),a,y)}),BB=bs(Rv);function $B(a,l){var f=bl(a);return l==null?f:b1(f,l)}var zB=Ke(function(a,l){a=St(a);var f=-1,y=l.length,E=y>2?l[2]:n;for(E&&nr(l[0],l[1],E)&&(y=1);++f<y;)for(var D=l[f],j=wr(D),$=-1,q=j.length;++$<q;){var te=j[$],ne=a[te];(ne===n||Ci(ne,Al[te])&&!gt.call(a,te))&&(a[te]=D[te])}return a}),WB=Ke(function(a){return a.push(n,pR),zn(XR,n,a)});function qB(a,l){return Wn(a,ke(l,3),Gi)}function GB(a,l){return Wn(a,ke(l,3),Pv)}function KB(a,l){return a==null?a:Av(a,ke(l,3),wr)}function HB(a,l){return a==null?a:D1(a,ke(l,3),wr)}function QB(a,l){return a&&Gi(a,ke(l,3))}function YB(a,l){return a&&Pv(a,ke(l,3))}function JB(a){return a==null?[]:mm(a,Sn(a))}function XB(a){return a==null?[]:mm(a,wr(a))}function sw(a,l,f){var y=a==null?n:Ka(a,l);return y===n?f:y}function ZB(a,l){return a!=null&&yR(a,l,TF)}function ow(a,l){return a!=null&&yR(a,l,IF)}var e4=lR(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=nm.call(l)),a[l]=f},uw(Er)),t4=lR(function(a,l,f){l!=null&&typeof l.toString!="function"&&(l=nm.call(l)),gt.call(a,l)?a[l].push(f):a[l]=[f]},ke),n4=Ke(Hd);function Sn(a){return vr(a)?P1(a):kv(a)}function wr(a){return vr(a)?P1(a,!0):OF(a)}function r4(a,l){var f={};return l=ke(l,3),Gi(a,function(y,E,D){Ps(f,l(y,E,D),y)}),f}function i4(a,l){var f={};return l=ke(l,3),Gi(a,function(y,E,D){Ps(f,E,l(y,E,D))}),f}var s4=xl(function(a,l,f){gm(a,l,f)}),XR=xl(function(a,l,f,y){gm(a,l,f,y)}),o4=bs(function(a,l){var f={};if(a==null)return f;var y=!1;l=It(l,function(D){return D=So(D,a),y||(y=D.length>1),D}),Ki(a,qv(a),f),y&&(f=ui(f,m|_|A,eU));for(var E=l.length;E--;)Vv(f,l[E]);return f});function a4(a,l){return ZR(a,km(ke(l)))}var u4=bs(function(a,l){return a==null?{}:LF(a,l)});function ZR(a,l){if(a==null)return{};var f=It(qv(a),function(y){return[y]});return l=ke(l),W1(a,f,function(y,E){return l(y,E[0])})}function l4(a,l,f){l=So(l,a);var y=-1,E=l.length;for(E||(E=1,a=n);++y<E;){var D=a==null?n:a[Hi(l[y])];D===n&&(y=E,D=f),a=ks(D)?D.call(a):D}return a}function c4(a,l,f){return a==null?a:Yd(a,l,f)}function d4(a,l,f,y){return y=typeof y=="function"?y:n,a==null?a:Yd(a,l,f,y)}var eA=hR(Sn),tA=hR(wr);function h4(a,l,f){var y=Be(a),E=y||Ao(a)||Ol(a);if(l=ke(l,4),f==null){var D=a&&a.constructor;E?f=y?new D:[]:Ft(a)?f=ks(D)?bl(sm(a)):{}:f={}}return(E?er:Gi)(a,function(j,$,q){return l(f,j,$,q)}),f}function f4(a,l){return a==null?!0:Vv(a,l)}function p4(a,l,f){return a==null?a:Q1(a,l,jv(f))}function m4(a,l,f,y){return y=typeof y=="function"?y:n,a==null?a:Q1(a,l,jv(f),y)}function Dl(a){return a==null?[]:un(a,Sn(a))}function g4(a){return a==null?[]:un(a,wr(a))}function y4(a,l,f){return f===n&&(f=l,l=n),f!==n&&(f=di(f),f=f===f?f:0),l!==n&&(l=di(l),l=l===l?l:0),Ga(di(a),l,f)}function _4(a,l,f){return l=Ns(l),f===n?(f=l,l=0):f=Ns(f),a=di(a),SF(a,l,f)}function v4(a,l,f){if(f&&typeof f!="boolean"&&nr(a,l,f)&&(l=f=n),f===n&&(typeof l=="boolean"?(f=l,l=n):typeof a=="boolean"&&(f=a,a=n)),a===n&&l===n?(a=0,l=1):(a=Ns(a),l===n?(l=a,a=0):l=Ns(l)),a>l){var y=a;a=l,l=y}if(f||a%1||l%1){var E=R1();return qn(a+E*(l-a+_v("1e-"+((E+"").length-1))),l)}return Dv(a,l)}var w4=kl(function(a,l,f){return l=l.toLowerCase(),a+(f?nA(l):l)});function nA(a){return aw(mt(a).toLowerCase())}function rA(a){return a=mt(a),a&&a.replace(bp,cV).replace(pv,"")}function E4(a,l,f){a=mt(a),l=Lr(l);var y=a.length;f=f===n?y:Ga(qe(f),0,y);var E=f;return f-=l.length,f>=0&&a.slice(f,E)==l}function T4(a){return a=mt(a),a&&vs.test(a)?a.replace(cl,dV):a}function I4(a){return a=mt(a),a&&ka.test(a)?a.replace(hl,"\\$&"):a}var S4=kl(function(a,l,f){return a+(f?"-":"")+l.toLowerCase()}),R4=kl(function(a,l,f){return a+(f?" ":"")+l.toLowerCase()}),A4=oR("toLowerCase");function P4(a,l,f){a=mt(a),l=qe(l);var y=l?Sl(a):0;if(!l||y>=l)return a;var E=(l-y)/2;return Tm(lm(E),f)+a+Tm(um(E),f)}function C4(a,l,f){a=mt(a),l=qe(l);var y=l?Sl(a):0;return l&&y<l?a+Tm(l-y,f):a}function b4(a,l,f){a=mt(a),l=qe(l);var y=l?Sl(a):0;return l&&y<l?Tm(l-y,f)+a:a}function x4(a,l,f){return f||l==null?l=0:l&&(l=+l),VV(mt(a).replace(ws,""),l||0)}function k4(a,l,f){return(f?nr(a,l,f):l===n)?l=1:l=qe(l),Lv(mt(a),l)}function N4(){var a=arguments,l=mt(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var O4=kl(function(a,l,f){return a+(f?"_":"")+l.toLowerCase()});function D4(a,l,f){return f&&typeof f!="number"&&nr(a,l,f)&&(l=f=n),f=f===n?ge:f>>>0,f?(a=mt(a),a&&(typeof l=="string"||l!=null&&!iw(l))&&(l=Lr(l),!l&&Il(a))?Ro(Ai(a),0,f):a.split(l,f)):[]}var L4=kl(function(a,l,f){return a+(f?" ":"")+aw(l)});function M4(a,l,f){return a=mt(a),f=f==null?0:Ga(qe(f),0,a.length),l=Lr(l),a.slice(f,f+l.length)==l}function V4(a,l,f){var y=b.templateSettings;f&&nr(a,l,f)&&(l=n),a=mt(a),l=Dm({},l,y,fR);var E=Dm({},l.imports,y.imports,fR),D=Sn(E),j=un(E,D),$,q,te=0,ne=l.interpolate||Oa,se="__p += '",ve=wv((l.escape||Oa).source+"|"+ne.source+"|"+(ne===Td?Id:Oa).source+"|"+(l.evaluate||Oa).source+"|$","g"),Ae="//# sourceURL="+(gt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zp+"]")+`
`;a.replace(ve,function(De,Qe,nt,Vr,rr,Fr){return nt||(nt=Vr),se+=a.slice(te,Fr).replace(lv,hV),Qe&&($=!0,se+=`' +
__e(`+Qe+`) +
'`),rr&&(q=!0,se+=`';
`+rr+`;
__p += '`),nt&&(se+=`' +
((__t = (`+nt+`)) == null ? '' : __t) +
'`),te=Fr+De.length,De}),se+=`';
`;var Oe=gt.call(l,"variable")&&l.variable;if(!Oe)se=`with (obj) {
`+se+`
}
`;else if(fl.test(Oe))throw new Ue(u);se=(q?se.replace(wd,""):se).replace(Tp,"$1").replace(Ip,"$1;"),se="function("+(Oe||"obj")+`) {
`+(Oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var Ge=sA(function(){return ft(D,Ae+"return "+se).apply(n,j)});if(Ge.source=se,rw(Ge))throw Ge;return Ge}function F4(a){return mt(a).toLowerCase()}function U4(a){return mt(a).toUpperCase()}function j4(a,l,f){if(a=mt(a),a&&(f||l===n))return tt(a);if(!a||!(l=Lr(l)))return a;var y=Ai(a),E=Ai(l),D=yr(y,E),j=$a(y,E)+1;return Ro(y,D,j).join("")}function B4(a,l,f){if(a=mt(a),a&&(f||l===n))return a.slice(0,_1(a)+1);if(!a||!(l=Lr(l)))return a;var y=Ai(a),E=$a(y,Ai(l))+1;return Ro(y,0,E).join("")}function $4(a,l,f){if(a=mt(a),a&&(f||l===n))return a.replace(ws,"");if(!a||!(l=Lr(l)))return a;var y=Ai(a),E=yr(y,Ai(l));return Ro(y,E).join("")}function z4(a,l){var f=V,y=U;if(Ft(l)){var E="separator"in l?l.separator:E;f="length"in l?qe(l.length):f,y="omission"in l?Lr(l.omission):y}a=mt(a);var D=a.length;if(Il(a)){var j=Ai(a);D=j.length}if(f>=D)return a;var $=f-Sl(y);if($<1)return y;var q=j?Ro(j,0,$).join(""):a.slice(0,$);if(E===n)return q+y;if(j&&($+=q.length-$),iw(E)){if(a.slice($).search(E)){var te,ne=q;for(E.global||(E=wv(E.source,mt(Na.exec(E))+"g")),E.lastIndex=0;te=E.exec(ne);)var se=te.index;q=q.slice(0,se===n?$:se)}}else if(a.indexOf(Lr(E),$)!=$){var ve=q.lastIndexOf(E);ve>-1&&(q=q.slice(0,ve))}return q+y}function W4(a){return a=mt(a),a&&Ed.test(a)?a.replace(ho,vV):a}var q4=kl(function(a,l,f){return a+(f?" ":"")+l.toUpperCase()}),aw=oR("toUpperCase");function iA(a,l,f){return a=mt(a),l=f?n:l,l===n?pV(a)?TV(a):Tl(a):a.match(l)||[]}var sA=Ke(function(a,l){try{return zn(a,n,l)}catch(f){return rw(f)?f:new Ue(f)}}),G4=bs(function(a,l){return er(l,function(f){f=Hi(f),Ps(a,f,tw(a[f],a))}),a});function K4(a){var l=a==null?0:a.length,f=ke();return a=l?It(a,function(y){if(typeof y[1]!="function")throw new oi(o);return[f(y[0]),y[1]]}):[],Ke(function(y){for(var E=-1;++E<l;){var D=a[E];if(zn(D[0],this,y))return zn(D[1],this,y)}})}function H4(a){return vF(ui(a,m))}function uw(a){return function(){return a}}function Q4(a,l){return a==null||a!==a?l:a}var Y4=uR(),J4=uR(!0);function Er(a){return a}function lw(a){return F1(typeof a=="function"?a:ui(a,m))}function X4(a){return j1(ui(a,m))}function Z4(a,l){return B1(a,ui(l,m))}var e3=Ke(function(a,l){return function(f){return Hd(f,a,l)}}),t3=Ke(function(a,l){return function(f){return Hd(a,f,l)}});function cw(a,l,f){var y=Sn(l),E=mm(l,y);f==null&&!(Ft(l)&&(E.length||!y.length))&&(f=l,l=a,a=this,E=mm(l,Sn(l)));var D=!(Ft(f)&&"chain"in f)||!!f.chain,j=ks(a);return er(E,function($){var q=l[$];a[$]=q,j&&(a.prototype[$]=function(){var te=this.__chain__;if(D||te){var ne=a(this.__wrapped__),se=ne.__actions__=_r(this.__actions__);return se.push({func:q,args:arguments,thisArg:a}),ne.__chain__=te,ne}return q.apply(a,Si([this.value()],arguments))})}),a}function n3(){return qt._===this&&(qt._=CV),this}function dw(){}function r3(a){return a=qe(a),Ke(function(l){return $1(l,a)})}var i3=$v(It),s3=$v(wl),o3=$v(El);function oA(a){return Qv(a)?v(Hi(a)):MF(a)}function a3(a){return function(l){return a==null?n:Ka(a,l)}}var u3=cR(),l3=cR(!0);function hw(){return[]}function fw(){return!1}function c3(){return{}}function d3(){return""}function h3(){return!0}function f3(a,l){if(a=qe(a),a<1||a>H)return[];var f=ge,y=qn(a,ge);l=ke(l),a-=ge;for(var E=ht(y,l);++f<a;)l(f);return E}function p3(a){return Be(a)?It(a,Hi):Mr(a)?[a]:_r(AR(mt(a)))}function m3(a){var l=++AV;return mt(a)+l}var g3=Em(function(a,l){return a+l},0),y3=zv("ceil"),_3=Em(function(a,l){return a/l},1),v3=zv("floor");function w3(a){return a&&a.length?pm(a,Er,Cv):n}function E3(a,l){return a&&a.length?pm(a,ke(l,2),Cv):n}function T3(a){return g(a,Er)}function I3(a,l){return g(a,ke(l,2))}function S3(a){return a&&a.length?pm(a,Er,Nv):n}function R3(a,l){return a&&a.length?pm(a,ke(l,2),Nv):n}var A3=Em(function(a,l){return a*l},1),P3=zv("round"),C3=Em(function(a,l){return a-l},0);function b3(a){return a&&a.length?pe(a,Er):0}function x3(a,l){return a&&a.length?pe(a,ke(l,2)):0}return b.after=Xj,b.ary=VR,b.assign=UB,b.assignIn=JR,b.assignInWith=Dm,b.assignWith=jB,b.at=BB,b.before=FR,b.bind=tw,b.bindAll=G4,b.bindKey=UR,b.castArray=cB,b.chain=DR,b.chunk=vU,b.compact=wU,b.concat=EU,b.cond=K4,b.conforms=H4,b.constant=uw,b.countBy=bj,b.create=$B,b.curry=jR,b.curryRight=BR,b.debounce=$R,b.defaults=zB,b.defaultsDeep=WB,b.defer=Zj,b.delay=eB,b.difference=TU,b.differenceBy=IU,b.differenceWith=SU,b.drop=RU,b.dropRight=AU,b.dropRightWhile=PU,b.dropWhile=CU,b.fill=bU,b.filter=kj,b.flatMap=Dj,b.flatMapDeep=Lj,b.flatMapDepth=Mj,b.flatten=xR,b.flattenDeep=xU,b.flattenDepth=kU,b.flip=tB,b.flow=Y4,b.flowRight=J4,b.fromPairs=NU,b.functions=JB,b.functionsIn=XB,b.groupBy=Vj,b.initial=DU,b.intersection=LU,b.intersectionBy=MU,b.intersectionWith=VU,b.invert=e4,b.invertBy=t4,b.invokeMap=Uj,b.iteratee=lw,b.keyBy=jj,b.keys=Sn,b.keysIn=wr,b.map=Cm,b.mapKeys=r4,b.mapValues=i4,b.matches=X4,b.matchesProperty=Z4,b.memoize=xm,b.merge=s4,b.mergeWith=XR,b.method=e3,b.methodOf=t3,b.mixin=cw,b.negate=km,b.nthArg=r3,b.omit=o4,b.omitBy=a4,b.once=nB,b.orderBy=Bj,b.over=i3,b.overArgs=rB,b.overEvery=s3,b.overSome=o3,b.partial=nw,b.partialRight=zR,b.partition=$j,b.pick=u4,b.pickBy=ZR,b.property=oA,b.propertyOf=a3,b.pull=BU,b.pullAll=NR,b.pullAllBy=$U,b.pullAllWith=zU,b.pullAt=WU,b.range=u3,b.rangeRight=l3,b.rearg=iB,b.reject=qj,b.remove=qU,b.rest=sB,b.reverse=Zv,b.sampleSize=Kj,b.set=c4,b.setWith=d4,b.shuffle=Hj,b.slice=GU,b.sortBy=Jj,b.sortedUniq=ZU,b.sortedUniqBy=ej,b.split=D4,b.spread=oB,b.tail=tj,b.take=nj,b.takeRight=rj,b.takeRightWhile=ij,b.takeWhile=sj,b.tap=wj,b.throttle=aB,b.thru=Pm,b.toArray=HR,b.toPairs=eA,b.toPairsIn=tA,b.toPath=p3,b.toPlainObject=YR,b.transform=h4,b.unary=uB,b.union=oj,b.unionBy=aj,b.unionWith=uj,b.uniq=lj,b.uniqBy=cj,b.uniqWith=dj,b.unset=f4,b.unzip=ew,b.unzipWith=OR,b.update=p4,b.updateWith=m4,b.values=Dl,b.valuesIn=g4,b.without=hj,b.words=iA,b.wrap=lB,b.xor=fj,b.xorBy=pj,b.xorWith=mj,b.zip=gj,b.zipObject=yj,b.zipObjectDeep=_j,b.zipWith=vj,b.entries=eA,b.entriesIn=tA,b.extend=JR,b.extendWith=Dm,cw(b,b),b.add=g3,b.attempt=sA,b.camelCase=w4,b.capitalize=nA,b.ceil=y3,b.clamp=y4,b.clone=dB,b.cloneDeep=fB,b.cloneDeepWith=pB,b.cloneWith=hB,b.conformsTo=mB,b.deburr=rA,b.defaultTo=Q4,b.divide=_3,b.endsWith=E4,b.eq=Ci,b.escape=T4,b.escapeRegExp=I4,b.every=xj,b.find=Nj,b.findIndex=CR,b.findKey=qB,b.findLast=Oj,b.findLastIndex=bR,b.findLastKey=GB,b.floor=v3,b.forEach=LR,b.forEachRight=MR,b.forIn=KB,b.forInRight=HB,b.forOwn=QB,b.forOwnRight=YB,b.get=sw,b.gt=gB,b.gte=yB,b.has=ZB,b.hasIn=ow,b.head=kR,b.identity=Er,b.includes=Fj,b.indexOf=OU,b.inRange=_4,b.invoke=n4,b.isArguments=Ya,b.isArray=Be,b.isArrayBuffer=_B,b.isArrayLike=vr,b.isArrayLikeObject=Zt,b.isBoolean=vB,b.isBuffer=Ao,b.isDate=wB,b.isElement=EB,b.isEmpty=TB,b.isEqual=IB,b.isEqualWith=SB,b.isError=rw,b.isFinite=RB,b.isFunction=ks,b.isInteger=WR,b.isLength=Nm,b.isMap=qR,b.isMatch=AB,b.isMatchWith=PB,b.isNaN=CB,b.isNative=bB,b.isNil=kB,b.isNull=xB,b.isNumber=GR,b.isObject=Ft,b.isObjectLike=Gt,b.isPlainObject=eh,b.isRegExp=iw,b.isSafeInteger=NB,b.isSet=KR,b.isString=Om,b.isSymbol=Mr,b.isTypedArray=Ol,b.isUndefined=OB,b.isWeakMap=DB,b.isWeakSet=LB,b.join=FU,b.kebabCase=S4,b.last=ci,b.lastIndexOf=UU,b.lowerCase=R4,b.lowerFirst=A4,b.lt=MB,b.lte=VB,b.max=w3,b.maxBy=E3,b.mean=T3,b.meanBy=I3,b.min=S3,b.minBy=R3,b.stubArray=hw,b.stubFalse=fw,b.stubObject=c3,b.stubString=d3,b.stubTrue=h3,b.multiply=A3,b.nth=jU,b.noConflict=n3,b.noop=dw,b.now=bm,b.pad=P4,b.padEnd=C4,b.padStart=b4,b.parseInt=x4,b.random=v4,b.reduce=zj,b.reduceRight=Wj,b.repeat=k4,b.replace=N4,b.result=l4,b.round=P3,b.runInContext=W,b.sample=Gj,b.size=Qj,b.snakeCase=O4,b.some=Yj,b.sortedIndex=KU,b.sortedIndexBy=HU,b.sortedIndexOf=QU,b.sortedLastIndex=YU,b.sortedLastIndexBy=JU,b.sortedLastIndexOf=XU,b.startCase=L4,b.startsWith=M4,b.subtract=C3,b.sum=b3,b.sumBy=x3,b.template=V4,b.times=f3,b.toFinite=Ns,b.toInteger=qe,b.toLength=QR,b.toLower=F4,b.toNumber=di,b.toSafeInteger=FB,b.toString=mt,b.toUpper=U4,b.trim=j4,b.trimEnd=B4,b.trimStart=$4,b.truncate=z4,b.unescape=W4,b.uniqueId=m3,b.upperCase=q4,b.upperFirst=aw,b.each=LR,b.eachRight=MR,b.first=kR,cw(b,function(){var a={};return Gi(b,function(l,f){gt.call(b.prototype,f)||(a[f]=l)}),a}(),{chain:!1}),b.VERSION=r,er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),er(["drop","take"],function(a,l){Xe.prototype[a]=function(f){f=f===n?1:mn(qe(f),0);var y=this.__filtered__&&!l?new Xe(this):this.clone();return y.__filtered__?y.__takeCount__=qn(f,y.__takeCount__):y.__views__.push({size:qn(f,ge),type:a+(y.__dir__<0?"Right":"")}),y},Xe.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),er(["filter","map","takeWhile"],function(a,l){var f=l+1,y=f==he||f==le;Xe.prototype[a]=function(E){var D=this.clone();return D.__iteratees__.push({iteratee:ke(E,3),type:f}),D.__filtered__=D.__filtered__||y,D}}),er(["head","last"],function(a,l){var f="take"+(l?"Right":"");Xe.prototype[a]=function(){return this[f](1).value()[0]}}),er(["initial","tail"],function(a,l){var f="drop"+(l?"":"Right");Xe.prototype[a]=function(){return this.__filtered__?new Xe(this):this[f](1)}}),Xe.prototype.compact=function(){return this.filter(Er)},Xe.prototype.find=function(a){return this.filter(a).head()},Xe.prototype.findLast=function(a){return this.reverse().find(a)},Xe.prototype.invokeMap=Ke(function(a,l){return typeof a=="function"?new Xe(this):this.map(function(f){return Hd(f,a,l)})}),Xe.prototype.reject=function(a){return this.filter(km(ke(a)))},Xe.prototype.slice=function(a,l){a=qe(a);var f=this;return f.__filtered__&&(a>0||l<0)?new Xe(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),l!==n&&(l=qe(l),f=l<0?f.dropRight(-l):f.take(l-a)),f)},Xe.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Xe.prototype.toArray=function(){return this.take(ge)},Gi(Xe.prototype,function(a,l){var f=/^(?:filter|find|map|reject)|While$/.test(l),y=/^(?:head|last)$/.test(l),E=b[y?"take"+(l=="last"?"Right":""):l],D=y||/^find/.test(l);E&&(b.prototype[l]=function(){var j=this.__wrapped__,$=y?[1]:arguments,q=j instanceof Xe,te=$[0],ne=q||Be(j),se=function(Qe){var nt=E.apply(b,Si([Qe],$));return y&&ve?nt[0]:nt};ne&&f&&typeof te=="function"&&te.length!=1&&(q=ne=!1);var ve=this.__chain__,Ae=!!this.__actions__.length,Oe=D&&!ve,Ge=q&&!Ae;if(!D&&ne){j=Ge?j:new Xe(this);var De=a.apply(j,$);return De.__actions__.push({func:Pm,args:[se],thisArg:n}),new ai(De,ve)}return Oe&&Ge?a.apply(this,$):(De=this.thru(se),Oe?y?De.value()[0]:De.value():De)})}),er(["pop","push","shift","sort","splice","unshift"],function(a){var l=Zp[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",y=/^(?:pop|shift)$/.test(a);b.prototype[a]=function(){var E=arguments;if(y&&!this.__chain__){var D=this.value();return l.apply(Be(D)?D:[],E)}return this[f](function(j){return l.apply(Be(j)?j:[],E)})}}),Gi(Xe.prototype,function(a,l){var f=b[l];if(f){var y=f.name+"";gt.call(Cl,y)||(Cl[y]=[]),Cl[y].push({name:l,func:f})}}),Cl[wm(n,P).name]=[{name:"wrapper",func:n}],Xe.prototype.clone=WV,Xe.prototype.reverse=qV,Xe.prototype.value=GV,b.prototype.at=Ej,b.prototype.chain=Tj,b.prototype.commit=Ij,b.prototype.next=Sj,b.prototype.plant=Aj,b.prototype.reverse=Pj,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=Cj,b.prototype.first=b.prototype.head,Bd&&(b.prototype[Bd]=Rj),b},Rl=IV();On?((On.exports=Rl)._=Rl,_l._=Rl):qt._=Rl}).call(_n)})(dy,dy.exports);var jt=dy.exports;const $o=$f(jt);var RP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},i9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},BN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,u=o?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let _=(u&15)<<2|h>>6,A=h&63;c||(A=64,o||(_=64)),r.push(n[p],n[m],n[_],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||h==null||m==null)throw new s9;const _=s<<2|u>>4;if(r.push(_),h!==64){const A=u<<4&240|h>>2;if(r.push(A),m!==64){const T=h<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o9=function(t){const e=jN(t);return BN.encodeByteArray(e,!0)},hy=function(t){return o9(t).replace(/\./g,"")},$N=function(t){try{return BN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fy(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!a9(n)||(t[n]=fy(t[n],e[n]));return t}function a9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=()=>zN().__FIREBASE_DEFAULTS__,l9=()=>{if(typeof process>"u"||typeof RP>"u")return;const t=RP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$N(t[1]);return e&&JSON.parse(e)},o_=()=>{try{return u9()||l9()||c9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WN=t=>{var e,n;return(n=(e=o_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},d9=t=>{const e=WN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qN=()=>{var t;return(t=o_())===null||t===void 0?void 0:t.config},GN=t=>{var e;return(e=o_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hy(JSON.stringify(n)),hy(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function _I(){var t;const e=(t=o_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m9(){return typeof window<"u"||KN()}function KN(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function g9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QN(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YN(){return!_I()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mf(){try{return typeof indexedDB=="object"}catch{return!1}}function y9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_9,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xu.prototype.create)}}class Xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v9(s,r):"Error",u=`${this.serviceName}: ${o} (${i}).`;return new cr(i,u,r)}}function v9(t,e){return t.replace(w9,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const w9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(PP(s)&&PP(o)){if(!xc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function PP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Th(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function JN(t,e){const n=new T9(t,e);return n.subscribe.bind(n)}class T9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");I9(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bw),i.error===void 0&&(i.error=Bw),i.complete===void 0&&(i.complete=Bw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S9=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new h9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A9(e))try{this.getOrInitializeService({instanceIdentifier:eu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eu){return this.instances.has(e)}getOptions(e=eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eu){return this.component?this.component.multipleInstances?e:eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function R9(t){return t===eu?void 0:t}function A9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=[];var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const ZN={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},P9=Ye.INFO,C9={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},b9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=C9[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a_{constructor(e){this.name=e,this._logLevel=P9,this._logHandler=b9,this._userLogHandler=null,wI.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}function x9(t){wI.forEach(e=>{e.setLogLevel(t)})}function k9(t,e){for(const n of wI){let r=null;e&&e.level&&(r=ZN[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const u=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:Ye[s].toLowerCase(),message:u,args:o,type:i.name})}}}const N9=(t,e)=>e.some(n=>t instanceof n);let CP,bP;function O9(){return CP||(CP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D9(){return bP||(bP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eO=new WeakMap,yE=new WeakMap,tO=new WeakMap,$w=new WeakMap,EI=new WeakMap;function L9(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ta(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eO.set(n,t)}).catch(()=>{}),EI.set(e,t),e}function M9(t){if(yE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yE.set(t,e)}let _E={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ta(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function V9(t){_E=t(_E)}function F9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zw(this),e,...n);return tO.set(r,e.sort?e.sort():[e]),ta(r)}:D9().includes(t)?function(...e){return t.apply(zw(this),e),ta(eO.get(this))}:function(...e){return ta(t.apply(zw(this),e))}}function U9(t){return typeof t=="function"?F9(t):(t instanceof IDBTransaction&&M9(t),N9(t,O9())?new Proxy(t,_E):t)}function ta(t){if(t instanceof IDBRequest)return L9(t);if($w.has(t))return $w.get(t);const e=U9(t);return e!==t&&($w.set(t,e),EI.set(e,t)),e}const zw=t=>EI.get(t);function j9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=ta(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ta(o.result),c.oldVersion,c.newVersion,ta(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const B9=["get","getKey","getAll","getAllKeys","count"],$9=["put","add","delete","clear"],Ww=new Map;function xP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ww.get(e))return Ww.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||B9.includes(n)))return;const s=async function(o,...u){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),i&&c.done]))[0]};return Ww.set(e,s),s}V9(t=>({...t,get:(e,n,r)=>xP(e,n)||t.get(e,n,r),has:(e,n)=>!!xP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function W9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const py="@firebase/app",vE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new a_("@firebase/app"),q9="@firebase/app-compat",G9="@firebase/analytics-compat",K9="@firebase/analytics",H9="@firebase/app-check-compat",Q9="@firebase/app-check",Y9="@firebase/auth",J9="@firebase/auth-compat",X9="@firebase/database",Z9="@firebase/data-connect",e6="@firebase/database-compat",t6="@firebase/functions",n6="@firebase/functions-compat",r6="@firebase/installations",i6="@firebase/installations-compat",s6="@firebase/messaging",o6="@firebase/messaging-compat",a6="@firebase/performance",u6="@firebase/performance-compat",l6="@firebase/remote-config",c6="@firebase/remote-config-compat",d6="@firebase/storage",h6="@firebase/storage-compat",f6="@firebase/firestore",p6="@firebase/vertexai-preview",m6="@firebase/firestore-compat",g6="firebase",y6="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]",_6={[py]:"fire-core",[q9]:"fire-core-compat",[K9]:"fire-analytics",[G9]:"fire-analytics-compat",[Q9]:"fire-app-check",[H9]:"fire-app-check-compat",[Y9]:"fire-auth",[J9]:"fire-auth-compat",[X9]:"fire-rtdb",[Z9]:"fire-data-connect",[e6]:"fire-rtdb-compat",[t6]:"fire-fn",[n6]:"fire-fn-compat",[r6]:"fire-iid",[i6]:"fire-iid-compat",[s6]:"fire-fcm",[o6]:"fire-fcm-compat",[a6]:"fire-perf",[u6]:"fire-perf-compat",[l6]:"fire-rc",[c6]:"fire-rc-compat",[d6]:"fire-gcs",[h6]:"fire-gcs-compat",[f6]:"fire-fst",[m6]:"fire-fst-compat",[p6]:"fire-vertex","fire-js":"fire-js",[g6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=new Map,kc=new Map,Nc=new Map;function gf(t,e){try{t.container.addComponent(e)}catch(n){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nO(t,e){t.container.addOrOverwriteComponent(e)}function aa(t){const e=t.name;if(Nc.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;Nc.set(e,t);for(const n of oa.values())gf(n,t);for(const n of kc.values())gf(n,t);return!0}function Qf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function v6(t,e,n=sa){Qf(t,e).clearInstance(n)}function rO(t){return t.options!==void 0}function Ht(t){return t.settings!==void 0}function w6(){Nc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new Xu("app","Firebase",E6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iO=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6 extends iO{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const u=e;super(u.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,vi(py,vE,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){II(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw _i.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=y6;function u_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sa,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _i.create("bad-app-name",{appName:String(i)});if(n||(n=qN()),!n)throw _i.create("no-options");const s=oa.get(i);if(s){if(xc(n,s.options)&&xc(r,s.config))return s;throw _i.create("duplicate-app",{appName:i})}const o=new XN(i);for(const c of Nc.values())o.addComponent(c);const u=new iO(n,r,o);return oa.set(i,u),u}function I6(t,e){if(m9()&&!KN())throw _i.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;rO(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((p,m)=>Math.imul(31,p)+m.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw _i.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=kc.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const u=new XN(s);for(const h of Nc.values())u.addComponent(h);const c=new T6(n,e,s,u);return kc.set(s,c),c}function TI(t=sa){const e=oa.get(t);if(!e&&t===sa&&qN())return u_();if(!e)throw _i.create("no-app",{appName:t});return e}function S6(){return Array.from(oa.values())}async function II(t){let e=!1;const n=t.name;oa.has(n)?(e=!0,oa.delete(n)):kc.has(n)&&t.decRefCount()<=0&&(kc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function vi(t,e,n){var r;let i=(r=_6[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(u.join(" "));return}aa(new ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function sO(t,e){if(t!==null&&typeof t!="function")throw _i.create("invalid-log-argument");k9(t,e)}function oO(t){x9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="firebase-heartbeat-database",A6=1,yf="firebase-heartbeat-store";let qw=null;function aO(){return qw||(qw=j9(R6,A6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yf)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),qw}async function P6(t){try{const n=(await aO()).transaction(yf),r=await n.objectStore(yf).get(uO(t));return await n.done,r}catch(e){if(e instanceof cr)Js.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Js.warn(n.message)}}}async function kP(t,e){try{const r=(await aO()).transaction(yf,"readwrite");await r.objectStore(yf).put(e,uO(t)),await r.done}catch(n){if(n instanceof cr)Js.warn(n.message);else{const r=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Js.warn(r.message)}}}function uO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=1024,b6=30*24*60*60*1e3;class x6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NP();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=b6}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NP(),{heartbeatsToSend:r,unsentEntries:i}=k6(this._heartbeatsCache.heartbeats),s=hy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Js.warn(n),""}}}function NP(){return new Date().toISOString().substring(0,10)}function k6(t,e=C6){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),OP(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),OP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mf()?y9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OP(t){return hy(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){aa(new ds("platform-logger",e=>new z9(e),"PRIVATE")),aa(new ds("heartbeat",e=>new x6(e),"PRIVATE")),vi(py,vE,t),vi(py,vE,"esm2017"),vi("fire-js","")}O6("");const D6=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:cr,SDK_VERSION:Ta,_DEFAULT_ENTRY_NAME:sa,_addComponent:gf,_addOrOverwriteComponent:nO,_apps:oa,_clearComponents:w6,_components:Nc,_getProvider:Qf,_isFirebaseApp:rO,_isFirebaseServerApp:Ht,_registerComponent:aa,_removeServiceInstance:v6,_serverApps:kc,deleteApp:II,getApp:TI,getApps:S6,initializeApp:u_,initializeServerApp:I6,onLog:sO,registerVersion:vi,setLogLevel:oO},Symbol.toStringTag,{value:"Module"}));function SI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const lh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ml={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function lO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M6=L6,V6=lO,cO=new Xu("auth","Firebase",lO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new a_("@firebase/auth");function F6(t,...e){my.logLevel<=Ye.WARN&&my.warn(`Auth (${Ta}): ${t}`,...e)}function Ig(t,...e){my.logLevel<=Ye.ERROR&&my.error(`Auth (${Ta}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,...e){throw AI(t,...e)}function En(t,...e){return AI(t,...e)}function RI(t,e,n){const r=Object.assign(Object.assign({},V6()),{[e]:n});return new Xu("auth","Firebase",r).create(e,{appName:t.name})}function xn(t){return RI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function td(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&kn(t,"argument-error"),RI(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function AI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cO.create(t,...e)}function de(t,e,...n){if(!t)throw AI(e,...n)}function rs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ig(e),new Error(e)}function Ui(t,e){t||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PI(){return DP()==="http:"||DP()==="https:"}function DP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PI()||HN()||"connection"in navigator)?navigator.onLine:!0}function j6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ui(n>e,"Short delay should be less than long delay!"),this.isMobile=p9()||vI()}get(){return U6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){Ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new Yf(3e4,6e4);function Jt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xt(t,e,n,r,i={}){return hO(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const u=ed(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},s);return g9()||(h.referrerPolicy="no-referrer"),dO.fetch()(fO(t,t.config.apiHost,n,u),h)})}async function hO(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},B6),e);try{const i=new W6(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ih(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const u=s.ok?o.errorMessage:o.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ih(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ih(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw RI(t,p,h);kn(t,p)}}catch(i){if(i instanceof cr)throw i;kn(t,"network-request-failed",{message:String(i)})}}async function io(t,e,n,r,i={}){const s=await Xt(t,e,n,r,i);return"mfaPendingCredential"in s&&kn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function fO(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?CI(t.config,i):`${t.config.apiScheme}://${i}`}function z6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W6{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),$6.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ih(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=En(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t){return t!==void 0&&t.getResponse!==void 0}function MP(t){return t!==void 0&&t.enterprise!==void 0}class q6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return z6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t){return(await Xt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function K6(t,e){return Xt(t,"GET","/v2/recaptchaConfig",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(t,e){return Xt(t,"POST","/v1/accounts:delete",e)}async function Q6(t,e){return Xt(t,"POST","/v1/accounts:update",e)}async function pO(t,e){return Xt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y6(t,e=!1){const n=be(t),r=await n.getIdToken(e),i=l_(r);de(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Uh(Gw(i.auth_time)),issuedAtTime:Uh(Gw(i.iat)),expirationTime:Uh(Gw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Gw(t){return Number(t)*1e3}function l_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ig("JWT malformed, contained fewer than 3 sections"),null;try{const i=$N(n);return i?JSON.parse(i):(Ig("Failed to decode base64 JWT payload"),null)}catch(i){return Ig("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function VP(t){const e=l_(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&J6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uh(this.lastLoginAt),this.creationTime=Uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xs(t,pO(n,{idToken:r}));de(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mO(s.providerUserInfo):[],u=eW(t.providerData,o),c=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new wE(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Z6(t){const e=be(t);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mO(t){return t.map(e=>{var{providerId:n}=e,r=SI(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tW(t,e){const n=await hO(t,{},async()=>{const r=ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=fO(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",dO.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nW(t,e){return Xt(t,"POST","/v2/accounts:revokeToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=VP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tW(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gc;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gc,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=SI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xs(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y6(this,e)}reload(){return Z6(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ht(this.auth.app))return Promise.reject(xn(this.auth));const e=await this.getIdToken();return await Xs(this,H6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,u,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,A=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(u=n.tenantId)!==null&&u!==void 0?u:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(h=n.createdAt)!==null&&h!==void 0?h:void 0,R=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:F,isAnonymous:z,providerData:G,stsTokenManager:C}=n;de(I&&C,e,"internal-error");const S=gc.fromJSON(this.name,C);de(typeof I=="string",e,"internal-error"),Co(m,e.name),Co(_,e.name),de(typeof F=="boolean",e,"internal-error"),de(typeof z=="boolean",e,"internal-error"),Co(A,e.name),Co(T,e.name),Co(k,e.name),Co(x,e.name),Co(P,e.name),Co(R,e.name);const L=new Us({uid:I,auth:e,email:_,emailVerified:F,displayName:m,isAnonymous:z,photoURL:T,phoneNumber:A,tenantId:k,stsTokenManager:S,createdAt:P,lastLoginAt:R});return G&&Array.isArray(G)&&(L.providerData=G.map(V=>Object.assign({},V))),x&&(L._redirectEventId=x),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new gc;i.updateFromServerResponse(n);const s=new Us({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];de(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?mO(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new gc;u.updateFromIdToken(r);const c=new Us({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wE(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new Map;function $r(t){Ui(t instanceof Function,"Expected a class definition");let e=FP.get(t);return e?(Ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,FP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gO.type="NONE";const Oc=gO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t,e,n){return`firebase:${t}:${e}:${n}`}class yc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Eu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Eu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yc($r(Oc),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||$r(Oc);const o=Eu(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Us._fromJSON(e,p);h!==s&&(u=m),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new yc(s,e,r):(s=c[0],u&&await s._set(o,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new yc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EO(e))return"Blackberry";if(TO(e))return"Webos";if(_O(e))return"Safari";if((e.includes("chrome/")||vO(e))&&!e.includes("edge/"))return"Chrome";if(Jf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yO(t=Wt()){return/firefox\//i.test(t)}function _O(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vO(t=Wt()){return/crios\//i.test(t)}function wO(t=Wt()){return/iemobile/i.test(t)}function Jf(t=Wt()){return/android/i.test(t)}function EO(t=Wt()){return/blackberry/i.test(t)}function TO(t=Wt()){return/webos/i.test(t)}function Xf(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rW(t=Wt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function iW(t=Wt()){var e;return Xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sW(){return QN()&&document.documentMode===10}function IO(t=Wt()){return Xf(t)||Jf(t)||TO(t)||EO(t)||/windows phone/i.test(t)||wO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e=[]){let n;switch(t){case"Browser":n=UP(Wt());break;case"Worker":n=`${UP(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ta}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,u)=>{try{const c=e(s);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e={}){return Xt(t,"GET","/v2/passwordPolicy",Jt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=6;class lW{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jP(this),this.idTokenSubscription=new jP(this),this.beforeStateQueue=new oW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$r(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pO(this,{idToken:e}),r=await Us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ht(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ht(this.app))return Promise.reject(xn(this));const n=e?be(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ht(this.app)?Promise.reject(xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ht(this.app)?Promise.reject(xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aW(this),n=new lW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$r(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[$r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(u,this,"internal-error"),u.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F6(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qt(t){return be(t)}class jP{constructor(e){this.auth=e,this.observer=null,this.addObserver=JN(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dW(t){Zf=t}function bI(t){return Zf.loadJS(t)}function hW(){return Zf.recaptchaV2Script}function fW(){return Zf.recaptchaEnterpriseScript}function pW(){return Zf.gapiScript}function RO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const mW="recaptcha-enterprise",gW="NO_RECAPTCHA";class yW{constructor(e){this.type=mW,this.auth=Qt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,u)=>{K6(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new q6(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(c=>{u(c)})})}function i(s,o,u){const c=window.grecaptcha;MP(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(gW)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(u=>{if(!n&&MP(window.grecaptcha))i(u,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=fW();c.length!==0&&(c+=u),bI(c).then(()=>{i(u,s,o)}).catch(h=>{o(h)})}}).catch(u=>{o(u)})})}}async function BP(t,e,n,r=!1){const i=new yW(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await BP(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await BP(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t,e){const n=Qf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xc(s,e??{}))return i;kn(i,"already-initialized")}return n.initialize({options:e})}function vW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AO(t,e,n){const r=Qt(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=PO(e),{host:o,port:u}=wW(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||EW()}function PO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wW(t){const e=PO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:$P(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:$P(o)}}}function $P(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,n){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e){return Xt(t,"POST","/v1/accounts:resetPassword",Jt(t,e))}async function TW(t,e){return Xt(t,"POST","/v1/accounts:update",e)}async function IW(t,e){return Xt(t,"POST","/v1/accounts:signUp",e)}async function SW(t,e){return Xt(t,"POST","/v1/accounts:update",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RW(t,e){return io(t,"POST","/v1/accounts:signInWithPassword",Jt(t,e))}async function c_(t,e){return Xt(t,"POST","/v1/accounts:sendOobCode",Jt(t,e))}async function AW(t,e){return c_(t,e)}async function PW(t,e){return c_(t,e)}async function CW(t,e){return c_(t,e)}async function bW(t,e){return c_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xW(t,e){return io(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}async function kW(t,e){return io(t,"POST","/v1/accounts:signInWithEmailLink",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends nd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ef(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ef(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wf(e,n,"signInWithPassword",RW);case"emailLink":return xW(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wf(e,r,"signUpPassword",IW);case"emailLink":return kW(e,{idToken:n,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return io(t,"POST","/v1/accounts:signInWithIdp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="http://localhost";class hs extends nd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=SI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new hs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:NW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ed(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OW(t,e){return Xt(t,"POST","/v1/accounts:sendVerificationCode",Jt(t,e))}async function DW(t,e){return io(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e))}async function LW(t,e){const n=await io(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,e));if(n.temporaryProof)throw Ih(t,"account-exists-with-different-credential",n);return n}const MW={USER_NOT_FOUND:"user-not-found"};async function VW(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return io(t,"POST","/v1/accounts:signInWithPhoneNumber",Jt(t,n),MW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends nd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Tu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Tu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return DW(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return LW(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return VW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Tu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UW(t){const e=uc(Th(t)).link,n=e?uc(Th(e)).deep_link_id:null,r=uc(Th(t)).deep_link_id;return(r?uc(Th(r)).link:null)||r||n||e||t}class d_{constructor(e){var n,r,i,s,o,u;const c=uc(Th(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=FW((i=c.mode)!==null&&i!==void 0?i:null);de(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=UW(e);try{return new d_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,n){return Ef._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=d_.parseLink(n);return de(r,"argument-error"),Ef._fromEmailAndCode(e,r.code,r.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends so{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _c extends rd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return de("providerId"in n&&"signInMethod"in n,"argument-error"),hs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return de(e.idToken||e.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return _c.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return _c.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:u}=e;if(!r&&!i&&!n&&!s||!u)return null;try{return new _c(u)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends rd{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends rd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends rd{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW="http://localhost";class Dc extends nd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Dc(r,s)}static _create(e,n){return new Dc(e,n)}buildRequest(){return{requestUri:jW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW="saml.";class gy extends so{constructor(e){de(e.startsWith(BW),"argument-error"),super(e)}static credentialFromResult(e){return gy.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return gy.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Dc.fromJSON(e);return de(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Dc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends rd{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ts.credential(n,r)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return io(t,"POST","/v1/accounts:signUp",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Us._fromIdTokenResponse(e,r,i),o=zP(r);return new Ti({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=zP(r);return new Ti({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function zP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(t){var e;if(Ht(t.app))return Promise.reject(xn(t));const n=Qt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ti({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bO(n,{returnSecureToken:!0}),i=await Ti._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends cr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,yy.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new yy(e,n,r,i)}}function xO(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?yy._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(t,e){const n=be(t);await h_(!0,n,e);const{providerUserInfo:r}=await Q6(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=kO(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xI(t,e,n=!1){const r=await Xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ti._forOperation(t,"link",r)}async function h_(t,e,n){await vf(e);const r=kO(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";de(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t,e,n=!1){const{auth:r}=t;if(Ht(r.app))return Promise.reject(xn(r));const i="reauthenticate";try{const s=await Xs(t,xO(r,i,e,t),n);de(s.idToken,r,"internal-error");const o=l_(s.idToken);de(o,r,"internal-error");const{sub:u}=o;return de(t.uid===u,r,"user-mismatch"),Ti._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&kn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO(t,e,n=!1){if(Ht(t.app))return Promise.reject(xn(t));const r="signIn",i=await xO(t,r,e),s=await Ti._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function f_(t,e){return OO(Qt(t),e)}async function DO(t,e){const n=be(t);return await h_(!1,n,e.providerId),xI(n,e)}async function LO(t,e){return NO(be(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(t,e){return io(t,"POST","/v1/accounts:signInWithCustomToken",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e){if(Ht(t.app))return Promise.reject(xn(t));const n=Qt(t),r=await WW(n,{token:e,returnSecureToken:!0}),i=await Ti._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?kI._fromServerResponse(e,n):"totpInfo"in n?NI._fromServerResponse(e,n):kn(e,"internal-error")}}class kI extends ep{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new kI(n)}}class NI extends ep{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new NI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(t,e,n){var r;de(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),de(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(de(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(de(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t){const e=Qt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GW(t,e,n){const r=Qt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&p_(r,i,n),await wf(r,i,"getOobCode",PW)}async function KW(t,e,n){await CO(be(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}async function HW(t,e){await SW(be(t),{oobCode:e})}async function MO(t,e){const n=be(t),r=await CO(n,{oobCode:e}),i=r.requestType;switch(de(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(r.mfaInfo,n,"internal-error");default:de(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=ep._fromServerResponse(Qt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function QW(t,e){const{data:n}=await MO(be(t),e);return n.email}async function YW(t,e,n){if(Ht(t.app))return Promise.reject(xn(t));const r=Qt(t),o=await wf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bO).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&OI(t),c}),u=await Ti._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function JW(t,e,n){return Ht(t.app)?Promise.reject(xn(t)):f_(be(t),Ia.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XW(t,e,n){const r=Qt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,u){de(u.handleCodeInApp,r,"argument-error"),u&&p_(r,o,u)}s(i,n),await wf(r,i,"getOobCode",CW)}function ZW(t,e){const n=d_.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function eq(t,e,n){if(Ht(t.app))return Promise.reject(xn(t));const r=be(t),i=Ia.credentialWithLink(e,n||_f());return de(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),f_(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tq(t,e){return Xt(t,"POST","/v1/accounts:createAuthUri",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(t,e){const n=PI()?_f():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await tq(be(t),r);return i||[]}async function rq(t,e){const n=be(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&p_(n.auth,i,e);const{email:s}=await AW(n.auth,i);s!==t.email&&await t.reload()}async function iq(t,e,n){const r=be(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&p_(r.auth,s,n);const{email:o}=await bW(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sq(t,e){return Xt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oq(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=be(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Xs(r,sq(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function aq(t,e){const n=be(t);return Ht(n.auth.app)?Promise.reject(xn(n.auth)):VO(n,e,null)}function uq(t,e){return VO(be(t),null,e)}async function VO(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Xs(t,TW(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=l_(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const u=o!=="anonymous"&&o!=="custom"?o:null;return new vc(s,u)}}if(!r)return null;switch(r){case"facebook.com":return new cq(s,i);case"github.com":return new dq(s,i);case"google.com":return new hq(s,i);case"twitter.com":return new fq(s,i,t.screenName||null);case"custom":case"anonymous":return new vc(s,null);default:return new vc(s,r,i)}}class vc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class FO extends vc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class cq extends vc{constructor(e,n){super(e,"facebook.com",n)}}class dq extends FO{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class hq extends vc{constructor(e,n){super(e,"google.com",n)}}class fq extends FO{constructor(e,n,r){super(e,"twitter.com",n,r)}}function pq(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:lq(n)}function mq(t,e,n,r){return be(t).onIdTokenChanged(e,n,r)}function gq(t,e,n){return be(t).beforeAuthStateChanged(e,n)}function yq(t,e,n,r){return be(t).onAuthStateChanged(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new pu("enroll",e,n)}static _fromMfaPendingCredential(e){return new pu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return pu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return pu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Qt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(u=>ep._fromServerResponse(r,u));de(i.mfaPendingCredential,r,"internal-error");const o=pu._fromMfaPendingCredential(i.mfaPendingCredential);return new DI(o,s,async u=>{const c=await u._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(n.operationType){case"signIn":const p=await Ti._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(p.user),p;case"reauthenticate":return de(n.user,r,"internal-error"),Ti._forOperation(n.user,n.operationType,h);default:kn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function _q(t,e){var n;const r=be(t),i=e;return de(e.customData.operationType,r,"argument-error"),de((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),DI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:start",Jt(t,e))}function wq(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(t,e))}function Eq(t,e){return Xt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(t,e))}class LI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>ep._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new LI(e)}async getSession(){return pu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Xs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Xs(this.user,Eq(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Kw=new WeakMap;function Tq(t){const e=be(t);return Kw.has(e)||Kw.set(e,LI._fromUser(e)),Kw.get(e)}const _y="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_y,"1"),this.storage.removeItem(_y),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=1e3,Sq=10;class jO extends UO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sW()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Sq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Iq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jO.type="LOCAL";const m_=jO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO extends UO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BO.type="SESSION";const ua=BO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new g_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(o).map(async h=>h(n.origin,s)),c=await Rq(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}g_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((u,c)=>{const h=tp("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return window}function Pq(t){cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof cn().WorkerGlobalScope<"u"&&typeof cn().importScripts=="function"}async function Cq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xq(){return MI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="firebaseLocalStorageDb",kq=1,vy="firebaseLocalStorage",zO="fbase_key";class np{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function y_(t,e){return t.transaction([vy],e?"readwrite":"readonly").objectStore(vy)}function Nq(){const t=indexedDB.deleteDatabase($O);return new np(t).toPromise()}function EE(){const t=indexedDB.open($O,kq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vy,{keyPath:zO})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vy)?e(r):(r.close(),await Nq(),e(await EE()))})})}async function WP(t,e,n){const r=y_(t,!0).put({[zO]:e,value:n});return new np(r).toPromise()}async function Oq(t,e){const n=y_(t,!1).get(e),r=await new np(n).toPromise();return r===void 0?null:r.value}function qP(t,e){const n=y_(t,!0).delete(e);return new np(n).toPromise()}const Dq=800,Lq=3;class WO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await EE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Lq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=g_._getInstance(xq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Cq(),!this.activeServiceWorker)return;this.sender=new Aq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await EE();return await WP(e,_y,"1"),await qP(e,_y),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Oq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=y_(i,!1).getAll();return new np(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WO.type="LOCAL";const Lc=WO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:start",Jt(t,e))}function Vq(t,e){return Xt(t,"POST","/v2/accounts/mfaSignIn:finalize",Jt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=500,Uq=6e4,Xm=1e12;class jq{constructor(e){this.auth=e,this.counter=Xm,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Bq(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Xm;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Xm;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Xm;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class Bq{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;de(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=$q(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Uq)},Fq))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function $q(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=RO("rcb"),zq=new Yf(3e4,6e4);class Wq{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=cn().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return de(qq(n),e,"argument-error"),this.shouldResolveImmediately(n)&&LP(cn().grecaptcha)?Promise.resolve(cn().grecaptcha):new Promise((r,i)=>{const s=cn().setTimeout(()=>{i(En(e,"network-request-failed"))},zq.get());cn()[Hw]=()=>{cn().clearTimeout(s),delete cn()[Hw];const u=cn().grecaptcha;if(!u||!LP(u)){i(En(e,"internal-error"));return}const c=u.render;u.render=(h,p)=>{const m=c(h,p);return this.counter++,m},this.hostLanguage=n,r(u)};const o=`${hW()}?${ed({onload:Hw,render:"explicit",hl:n})}`;bI(o).catch(()=>{clearTimeout(s),i(En(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=cn().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function qq(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Gq{async load(e){return new jq(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="recaptcha",Kq={theme:"light",type:"image"};let Hq=class{constructor(e,n,r=Object.assign({},Kq)){this.parameters=r,this.type=qO,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qt(e),this.isInvisible=this.parameters.size==="invisible",de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;de(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gq:new Wq,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=cn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){de(PI()&&!MI(),this.auth,"internal-error"),await Qq(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await G6(this.auth);de(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Qq(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Tu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function Yq(t,e,n){if(Ht(t.app))return Promise.reject(xn(t));const r=Qt(t),i=await __(r,e,be(n));return new VI(i,s=>f_(r,s))}async function Jq(t,e,n){const r=be(t);await h_(!1,r,"phone");const i=await __(r.auth,e,be(n));return new VI(i,s=>DO(r,s))}async function Xq(t,e,n){const r=be(t);if(Ht(r.auth.app))return Promise.reject(xn(r.auth));const i=await __(r.auth,e,be(n));return new VI(i,s=>LO(r,s))}async function __(t,e,n){var r;const i=await n.verify();try{de(typeof i=="string",t,"argument-error"),de(n.type===qO,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return de(o.type==="enroll",t,"internal-error"),(await vq(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{de(o.type==="signin",t,"internal-error");const u=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return de(u,t,"missing-multi-factor-info"),(await Mq(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await OW(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function Zq(t,e){const n=be(t);if(Ht(n.auth.app))return Promise.reject(xn(n.auth));await xI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=class Sg{constructor(e){this.providerId=Sg.PROVIDER_ID,this.auth=Qt(e)}verifyPhoneNumber(e,n){return __(this.auth,e,be(n))}static credential(e,n){return Tu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Sg.credentialFromTaggedObject(n)}static credentialFromError(e){return Sg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Tu._fromTokenResponse(n,r):null}};Du.PROVIDER_ID="phone";Du.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t,e){return e?$r(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends nd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eG(t){return OO(t.auth,new FI(t),t.bypassAuthState)}function tG(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),NO(n,new FI(t),t.bypassAuthState)}async function nG(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),xI(n,new FI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eG;case"linkViaPopup":case"linkViaRedirect":return nG;case"reauthViaPopup":case"reauthViaRedirect":return tG;default:kn(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rG=new Yf(2e3,1e4);async function UI(t,e,n){if(Ht(t.app))return Promise.reject(En(t,"operation-not-supported-in-this-environment"));const r=Qt(t);td(t,e,so);const i=Zu(r,n);return new js(r,"signInViaPopup",e,i).executeNotNull()}async function iG(t,e,n){const r=be(t);if(Ht(r.auth.app))return Promise.reject(En(r.auth,"operation-not-supported-in-this-environment"));td(r.auth,e,so);const i=Zu(r.auth,n);return new js(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function sG(t,e,n){const r=be(t);td(r.auth,e,so);const i=Zu(r.auth,n);return new js(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class js extends GO{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,js.currentPopupAction&&js.currentPopupAction.cancel(),js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rG.get())};e()}}js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG="pendingRedirect",jh=new Map;class aG extends GO{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const r=await uG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uG(t,e){const n=HO(e),r=KO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function jI(t,e){return KO(t)._set(HO(e),"true")}function lG(){jh.clear()}function BI(t,e){jh.set(t._key(),e)}function KO(t){return $r(t._redirectPersistence)}function HO(t){return Eu(oG,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(t,e,n){return dG(t,e,n)}async function dG(t,e,n){if(Ht(t.app))return Promise.reject(xn(t));const r=Qt(t);td(t,e,so),await r._initializationPromise;const i=Zu(r,n);return await jI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function hG(t,e,n){return fG(t,e,n)}async function fG(t,e,n){const r=be(t);if(td(r.auth,e,so),Ht(r.auth.app))return Promise.reject(xn(r.auth));await r.auth._initializationPromise;const i=Zu(r.auth,n);await jI(i,r.auth);const s=await QO(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function pG(t,e,n){return mG(t,e,n)}async function mG(t,e,n){const r=be(t);td(r.auth,e,so),await r.auth._initializationPromise;const i=Zu(r.auth,n);await h_(!1,r,e.providerId),await jI(i,r.auth);const s=await QO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function gG(t,e){return await Qt(t)._initializationPromise,v_(t,e,!1)}async function v_(t,e,n=!1){if(Ht(t.app))return Promise.reject(xn(t));const r=Qt(t),i=Zu(r,e),o=await new aG(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function QO(t){const e=tp(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yG=10*60*1e3;class YO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_G(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yG&&this.cachedEventUids.clear(),this.cachedEventUids.has(GP(e))}saveEventToCache(e){this.cachedEventUids.add(GP(e)),this.lastProcessedEventTime=Date.now()}}function GP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JO({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _G(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JO(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(t,e={}){return Xt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wG=/^https?/;async function EG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XO(t);for(const n of e)try{if(TG(n))return}catch{}kn(t,"unauthorized-domain")}function TG(t){const e=_f(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wG.test(n))return!1;if(vG.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG=new Yf(3e4,6e4);function KP(){const t=cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SG(t){return new Promise((e,n)=>{var r,i,s;function o(){KP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KP(),n(En(t,"network-request-failed"))},timeout:IG.get()})}if(!((i=(r=cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cn().gapi)===null||s===void 0)&&s.load)o();else{const u=RO("iframefcb");return cn()[u]=()=>{gapi.load?o():n(En(t,"network-request-failed"))},bI(`${pW()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Rg=null,e})}let Rg=null;function RG(t){return Rg=Rg||SG(t),Rg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AG=new Yf(5e3,15e3),PG="__/auth/iframe",CG="emulator/auth/iframe",bG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kG(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?CI(e,CG):`https://${t.config.authDomain}/${PG}`,r={apiKey:e.apiKey,appName:t.name,v:Ta},i=xG.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ed(r).slice(1)}`}async function NG(t){const e=await RG(t),n=cn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:kG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bG,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),u=cn().setTimeout(()=>{s(o)},AG.get());function c(){cn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DG=500,LG=600,MG="_blank",VG="http://localhost";class HP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FG(t,e,n,r=DG,i=LG){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},OG),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Wt().toLowerCase();n&&(u=vO(h)?MG:n),yO(h)&&(e=e||VG,c.scrollbars="yes");const p=Object.entries(c).reduce((_,[A,T])=>`${_}${A}=${T},`,"");if(iW(h)&&u!=="_self")return UG(e||"",u),new HP(null);const m=window.open(e||"",u,p);de(m,t,"popup-blocked");try{m.focus()}catch{}return new HP(m)}function UG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jG="__/auth/handler",BG="emulator/auth/handler",$G=encodeURIComponent("fac");async function TE(t,e,n,r,i,s){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ta,eventId:i};if(e instanceof so){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",E9(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof rd){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),h=c?`#${$G}=${encodeURIComponent(c)}`:"";return`${zG(t)}?${ed(u).slice(1)}${h}`}function zG({config:t}){return t.emulator?CI(t,BG):`https://${t.authDomain}/${jG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="webStorageSupport";class WG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ua,this._completeRedirectFn=v_,this._overrideRedirectResult=BI}async _openPopup(e,n,r,i){var s;Ui((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await TE(e,n,r,_f(),i);return FG(e,o,tp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await TE(e,n,r,_f(),i);return Pq(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ui(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NG(e),r=new YO(e);return n.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qw,{type:Qw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qw];o!==void 0&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IO()||_O()||Xf()}}const ZO=WG;class qG{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return rs("unexpected MultiFactorSessionType")}}}class $I extends qG{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new $I(e)}_finalizeEnroll(e,n,r){return wq(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Vq(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class eD{constructor(){}static assertion(e){return $I._fromCredential(e)}}eD.FACTOR_ID="phone";var QP="@firebase/auth",YP="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HG(t){aa(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SO(t)},h=new cW(r,i,s,c);return vW(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),aa(new ds("auth-internal",e=>{const n=Qt(e.getProvider("auth").getImmediate());return(r=>new GG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(QP,YP,KG(t)),vi(QP,YP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QG=5*60,YG=GN("authIdTokenMaxAge")||QG;let JP=null;const JG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YG)return;const i=n==null?void 0:n.token;JP!==i&&(JP=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function XG(t=TI()){const e=Qf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_W(t,{popupRedirectResolver:ZO,persistence:[Lc,m_,ua]}),r=GN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=JG(s.toString());gq(n,o,()=>o(n.currentUser)),mq(n,u=>o(u))}}const i=WN("auth");return i&&AO(n,`http://${i}`),n}function ZG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=En("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ZG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HG("Browser");var e8="firebase",t8="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(e8,t8,"app");var XP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iu,tD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function L(){}L.prototype=S.prototype,C.D=S.prototype,C.prototype=new L,C.prototype.constructor=C,C.C=function(V,U,M){for(var O=Array(arguments.length-2),he=2;he<arguments.length;he++)O[he-2]=arguments[he];return S.prototype[U].apply(V,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,S,L){L||(L=0);var V=Array(16);if(typeof S=="string")for(var U=0;16>U;++U)V[U]=S.charCodeAt(L++)|S.charCodeAt(L++)<<8|S.charCodeAt(L++)<<16|S.charCodeAt(L++)<<24;else for(U=0;16>U;++U)V[U]=S[L++]|S[L++]<<8|S[L++]<<16|S[L++]<<24;S=C.g[0],L=C.g[1],U=C.g[2];var M=C.g[3],O=S+(M^L&(U^M))+V[0]+3614090360&4294967295;S=L+(O<<7&4294967295|O>>>25),O=M+(U^S&(L^U))+V[1]+3905402710&4294967295,M=S+(O<<12&4294967295|O>>>20),O=U+(L^M&(S^L))+V[2]+606105819&4294967295,U=M+(O<<17&4294967295|O>>>15),O=L+(S^U&(M^S))+V[3]+3250441966&4294967295,L=U+(O<<22&4294967295|O>>>10),O=S+(M^L&(U^M))+V[4]+4118548399&4294967295,S=L+(O<<7&4294967295|O>>>25),O=M+(U^S&(L^U))+V[5]+1200080426&4294967295,M=S+(O<<12&4294967295|O>>>20),O=U+(L^M&(S^L))+V[6]+2821735955&4294967295,U=M+(O<<17&4294967295|O>>>15),O=L+(S^U&(M^S))+V[7]+4249261313&4294967295,L=U+(O<<22&4294967295|O>>>10),O=S+(M^L&(U^M))+V[8]+1770035416&4294967295,S=L+(O<<7&4294967295|O>>>25),O=M+(U^S&(L^U))+V[9]+2336552879&4294967295,M=S+(O<<12&4294967295|O>>>20),O=U+(L^M&(S^L))+V[10]+4294925233&4294967295,U=M+(O<<17&4294967295|O>>>15),O=L+(S^U&(M^S))+V[11]+2304563134&4294967295,L=U+(O<<22&4294967295|O>>>10),O=S+(M^L&(U^M))+V[12]+1804603682&4294967295,S=L+(O<<7&4294967295|O>>>25),O=M+(U^S&(L^U))+V[13]+4254626195&4294967295,M=S+(O<<12&4294967295|O>>>20),O=U+(L^M&(S^L))+V[14]+2792965006&4294967295,U=M+(O<<17&4294967295|O>>>15),O=L+(S^U&(M^S))+V[15]+1236535329&4294967295,L=U+(O<<22&4294967295|O>>>10),O=S+(U^M&(L^U))+V[1]+4129170786&4294967295,S=L+(O<<5&4294967295|O>>>27),O=M+(L^U&(S^L))+V[6]+3225465664&4294967295,M=S+(O<<9&4294967295|O>>>23),O=U+(S^L&(M^S))+V[11]+643717713&4294967295,U=M+(O<<14&4294967295|O>>>18),O=L+(M^S&(U^M))+V[0]+3921069994&4294967295,L=U+(O<<20&4294967295|O>>>12),O=S+(U^M&(L^U))+V[5]+3593408605&4294967295,S=L+(O<<5&4294967295|O>>>27),O=M+(L^U&(S^L))+V[10]+38016083&4294967295,M=S+(O<<9&4294967295|O>>>23),O=U+(S^L&(M^S))+V[15]+3634488961&4294967295,U=M+(O<<14&4294967295|O>>>18),O=L+(M^S&(U^M))+V[4]+3889429448&4294967295,L=U+(O<<20&4294967295|O>>>12),O=S+(U^M&(L^U))+V[9]+568446438&4294967295,S=L+(O<<5&4294967295|O>>>27),O=M+(L^U&(S^L))+V[14]+3275163606&4294967295,M=S+(O<<9&4294967295|O>>>23),O=U+(S^L&(M^S))+V[3]+4107603335&4294967295,U=M+(O<<14&4294967295|O>>>18),O=L+(M^S&(U^M))+V[8]+1163531501&4294967295,L=U+(O<<20&4294967295|O>>>12),O=S+(U^M&(L^U))+V[13]+2850285829&4294967295,S=L+(O<<5&4294967295|O>>>27),O=M+(L^U&(S^L))+V[2]+4243563512&4294967295,M=S+(O<<9&4294967295|O>>>23),O=U+(S^L&(M^S))+V[7]+1735328473&4294967295,U=M+(O<<14&4294967295|O>>>18),O=L+(M^S&(U^M))+V[12]+2368359562&4294967295,L=U+(O<<20&4294967295|O>>>12),O=S+(L^U^M)+V[5]+4294588738&4294967295,S=L+(O<<4&4294967295|O>>>28),O=M+(S^L^U)+V[8]+2272392833&4294967295,M=S+(O<<11&4294967295|O>>>21),O=U+(M^S^L)+V[11]+1839030562&4294967295,U=M+(O<<16&4294967295|O>>>16),O=L+(U^M^S)+V[14]+4259657740&4294967295,L=U+(O<<23&4294967295|O>>>9),O=S+(L^U^M)+V[1]+2763975236&4294967295,S=L+(O<<4&4294967295|O>>>28),O=M+(S^L^U)+V[4]+1272893353&4294967295,M=S+(O<<11&4294967295|O>>>21),O=U+(M^S^L)+V[7]+4139469664&4294967295,U=M+(O<<16&4294967295|O>>>16),O=L+(U^M^S)+V[10]+3200236656&4294967295,L=U+(O<<23&4294967295|O>>>9),O=S+(L^U^M)+V[13]+681279174&4294967295,S=L+(O<<4&4294967295|O>>>28),O=M+(S^L^U)+V[0]+3936430074&4294967295,M=S+(O<<11&4294967295|O>>>21),O=U+(M^S^L)+V[3]+3572445317&4294967295,U=M+(O<<16&4294967295|O>>>16),O=L+(U^M^S)+V[6]+76029189&4294967295,L=U+(O<<23&4294967295|O>>>9),O=S+(L^U^M)+V[9]+3654602809&4294967295,S=L+(O<<4&4294967295|O>>>28),O=M+(S^L^U)+V[12]+3873151461&4294967295,M=S+(O<<11&4294967295|O>>>21),O=U+(M^S^L)+V[15]+530742520&4294967295,U=M+(O<<16&4294967295|O>>>16),O=L+(U^M^S)+V[2]+3299628645&4294967295,L=U+(O<<23&4294967295|O>>>9),O=S+(U^(L|~M))+V[0]+4096336452&4294967295,S=L+(O<<6&4294967295|O>>>26),O=M+(L^(S|~U))+V[7]+1126891415&4294967295,M=S+(O<<10&4294967295|O>>>22),O=U+(S^(M|~L))+V[14]+2878612391&4294967295,U=M+(O<<15&4294967295|O>>>17),O=L+(M^(U|~S))+V[5]+4237533241&4294967295,L=U+(O<<21&4294967295|O>>>11),O=S+(U^(L|~M))+V[12]+1700485571&4294967295,S=L+(O<<6&4294967295|O>>>26),O=M+(L^(S|~U))+V[3]+2399980690&4294967295,M=S+(O<<10&4294967295|O>>>22),O=U+(S^(M|~L))+V[10]+4293915773&4294967295,U=M+(O<<15&4294967295|O>>>17),O=L+(M^(U|~S))+V[1]+2240044497&4294967295,L=U+(O<<21&4294967295|O>>>11),O=S+(U^(L|~M))+V[8]+1873313359&4294967295,S=L+(O<<6&4294967295|O>>>26),O=M+(L^(S|~U))+V[15]+4264355552&4294967295,M=S+(O<<10&4294967295|O>>>22),O=U+(S^(M|~L))+V[6]+2734768916&4294967295,U=M+(O<<15&4294967295|O>>>17),O=L+(M^(U|~S))+V[13]+1309151649&4294967295,L=U+(O<<21&4294967295|O>>>11),O=S+(U^(L|~M))+V[4]+4149444226&4294967295,S=L+(O<<6&4294967295|O>>>26),O=M+(L^(S|~U))+V[11]+3174756917&4294967295,M=S+(O<<10&4294967295|O>>>22),O=U+(S^(M|~L))+V[2]+718787259&4294967295,U=M+(O<<15&4294967295|O>>>17),O=L+(M^(U|~S))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(U+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+U&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var L=S-this.blockSize,V=this.B,U=this.h,M=0;M<S;){if(U==0)for(;M<=L;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<S;)if(V[U++]=C.charCodeAt(M++),U==this.blockSize){i(this,V),U=0;break}}else for(;M<S;)if(V[U++]=C[M++],U==this.blockSize){i(this,V),U=0;break}}this.h=U,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var L=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=L&255,L/=256;for(this.u(C),C=Array(16),S=L=0;4>S;++S)for(var V=0;32>V;V+=8)C[L++]=this.g[S]>>>V&255;return C};function s(C,S){var L=u;return Object.prototype.hasOwnProperty.call(L,C)?L[C]:L[C]=S(C)}function o(C,S){this.h=S;for(var L=[],V=!0,U=C.length-1;0<=U;U--){var M=C[U]|0;V&&M==S||(L[U]=M,V=!1)}this.g=L}var u={};function c(C){return-128<=C&&128>C?s(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return m;if(0>C)return x(h(-C));for(var S=[],L=1,V=0;C>=L;V++)S[V]=C/L|0,L*=4294967296;return new o(S,0)}function p(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return x(p(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=h(Math.pow(S,8)),V=m,U=0;U<C.length;U+=8){var M=Math.min(8,C.length-U),O=parseInt(C.substring(U,U+M),S);8>M?(M=h(Math.pow(S,M)),V=V.j(M).add(h(O))):(V=V.j(L),V=V.add(h(O)))}return V}var m=c(0),_=c(1),A=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-x(this).m();for(var C=0,S=1,L=0;L<this.g.length;L++){var V=this.i(L);C+=(0<=V?V:4294967296+V)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(k(this))return"-"+x(this).toString(C);for(var S=h(Math.pow(C,6)),L=this,V="";;){var U=F(L,S).g;L=P(L,U.j(S));var M=((0<L.g.length?L.g[0]:L.h)>>>0).toString(C);if(L=U,T(L))return M+V;for(;6>M.length;)M="0"+M;V=M+V}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function k(C){return C.h==-1}t.l=function(C){return C=P(this,C),k(C)?-1:T(C)?0:1};function x(C){for(var S=C.g.length,L=[],V=0;V<S;V++)L[V]=~C.g[V];return new o(L,~C.h).add(_)}t.abs=function(){return k(this)?x(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),L=[],V=0,U=0;U<=S;U++){var M=V+(this.i(U)&65535)+(C.i(U)&65535),O=(M>>>16)+(this.i(U)>>>16)+(C.i(U)>>>16);V=O>>>16,M&=65535,O&=65535,L[U]=O<<16|M}return new o(L,L[L.length-1]&-2147483648?-1:0)};function P(C,S){return C.add(x(S))}t.j=function(C){if(T(this)||T(C))return m;if(k(this))return k(C)?x(this).j(x(C)):x(x(this).j(C));if(k(C))return x(this.j(x(C)));if(0>this.l(A)&&0>C.l(A))return h(this.m()*C.m());for(var S=this.g.length+C.g.length,L=[],V=0;V<2*S;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(var U=0;U<C.g.length;U++){var M=this.i(V)>>>16,O=this.i(V)&65535,he=C.i(U)>>>16,re=C.i(U)&65535;L[2*V+2*U]+=O*re,R(L,2*V+2*U),L[2*V+2*U+1]+=M*re,R(L,2*V+2*U+1),L[2*V+2*U+1]+=O*he,R(L,2*V+2*U+1),L[2*V+2*U+2]+=M*he,R(L,2*V+2*U+2)}for(V=0;V<S;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=S;V<2*S;V++)L[V]=0;return new o(L,0)};function R(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function I(C,S){this.g=C,this.h=S}function F(C,S){if(T(S))throw Error("division by zero");if(T(C))return new I(m,m);if(k(C))return S=F(x(C),S),new I(x(S.g),x(S.h));if(k(S))return S=F(C,x(S)),new I(x(S.g),S.h);if(30<C.g.length){if(k(C)||k(S))throw Error("slowDivide_ only works with positive integers.");for(var L=_,V=S;0>=V.l(C);)L=z(L),V=z(V);var U=G(L,1),M=G(V,1);for(V=G(V,2),L=G(L,2);!T(V);){var O=M.add(V);0>=O.l(C)&&(U=U.add(L),M=O),V=G(V,1),L=G(L,1)}return S=P(C,U.j(S)),new I(U,S)}for(U=m;0<=C.l(S);){for(L=Math.max(1,Math.floor(C.m()/S.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),M=h(L),O=M.j(S);k(O)||0<O.l(C);)L-=V,M=h(L),O=M.j(S);T(M)&&(M=_),U=U.add(M),C=P(C,O)}return new I(U,C)}t.A=function(C){return F(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),L=[],V=0;V<S;V++)L[V]=this.i(V)&C.i(V);return new o(L,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),L=[],V=0;V<S;V++)L[V]=this.i(V)|C.i(V);return new o(L,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),L=[],V=0;V<S;V++)L[V]=this.i(V)^C.i(V);return new o(L,this.h^C.h)};function z(C){for(var S=C.g.length+1,L=[],V=0;V<S;V++)L[V]=C.i(V)<<1|C.i(V-1)>>>31;return new o(L,C.h)}function G(C,S){var L=S>>5;S%=32;for(var V=C.g.length-L,U=[],M=0;M<V;M++)U[M]=0<S?C.i(M+L)>>>S|C.i(M+L+1)<<32-S:C.i(M+L);return new o(U,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Iu=o}).apply(typeof XP<"u"?XP:typeof self<"u"?self:typeof window<"u"?window:{});var Zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nD,Sh,rD,Ag,IE,iD,sD,oD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zm=="object"&&Zm];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var K=d[N];if(!(K in v))break e;v=v[K]}d=d[d.length-1],N=v[d],g=g(N),g!=N&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var v=0,N=!1,K={next:function(){if(!N&&v<d.length){var X=v++;return{value:g(X,d[X]),done:!1}}return N=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function h(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,v){return d.call.apply(d.bind,arguments)}function m(d,g,v){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,N),d.apply(g,K)}}return function(){return d.apply(g,arguments)}}function _(d,g,v){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,_.apply(null,arguments)}function A(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var N=v.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function T(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(N,K,X){for(var pe=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)pe[ht-2]=arguments[ht];return g.prototype[K].apply(N,pe)}}function k(d){const g=d.length;if(0<g){const v=Array(g);for(let N=0;N<g;N++)v[N]=d[N];return v}return[]}function x(d,g){for(let v=1;v<arguments.length;v++){const N=arguments[v];if(c(N)){const K=d.length||0,X=N.length||0;d.length=K+X;for(let pe=0;pe<X;pe++)d[K+pe]=N[pe]}else d.push(N)}}class P{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function R(d){return/^[\s\xa0]*$/.test(d)}function I(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function G(d,g,v){for(const N in d)g.call(v,d[N],N,d)}function C(d,g){for(const v in d)g.call(void 0,d[v],v,d)}function S(d){const g={};for(const v in d)g[v]=d[v];return g}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(d,g){let v,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(v in N)d[v]=N[v];for(let X=0;X<L.length;X++)v=L[X],Object.prototype.hasOwnProperty.call(N,v)&&(d[v]=N[v])}}function U(d){var g=1;d=d.split(":");const v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function M(d){u.setTimeout(()=>{throw d},0)}function O(){var d=ae;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class he{constructor(){this.h=this.g=null}add(g,v){const N=re.get();N.set(g,v),this.h?this.h.next=N:this.g=N,this.h=N}}var re=new P(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,H=!1,ae=new he,me=()=>{const d=u.Promise.resolve(void 0);ue=()=>{d.then(ge)}};var ge=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(v){M(v)}var g=re;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}H=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};u.addEventListener("test",v,g),u.removeEventListener("test",v,g)}catch{}return d}();function Pe(d,g){if(we.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(z){e:{try{F(g.nodeName);var K=!0;break e}catch{}K=!1}K||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Fe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Pe.aa.h.call(this)}}T(Pe,we);var Fe={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function xe(d,g,v,N,K){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!N,this.ha=K,this.key=++Le,this.da=this.fa=!1}function Me(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ct(d){this.src=d,this.g={},this.h=0}ct.prototype.add=function(d,g,v,N,K){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var pe=Vt(d,g,N,K);return-1<pe?(g=d[pe],v||(g.fa=!1)):(g=new xe(g,this.src,X,!!N,K),g.fa=v,d.push(g)),g};function rt(d,g){var v=g.type;if(v in d.g){var N=d.g[v],K=Array.prototype.indexOf.call(N,g,void 0),X;(X=0<=K)&&Array.prototype.splice.call(N,K,1),X&&(Me(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Vt(d,g,v,N){for(var K=0;K<d.length;++K){var X=d[K];if(!X.da&&X.listener==g&&X.capture==!!v&&X.ha==N)return K}return-1}var vt="closure_lm_"+(1e6*Math.random()|0),We={};function ei(d,g,v,N,K){if(Array.isArray(g)){for(var X=0;X<g.length;X++)ei(d,g[X],v,N,K);return null}return v=$i(v),d&&d[fe]?d.K(g,v,h(N)?!!N.capture:!!N,K):an(d,g,v,!1,N,K)}function an(d,g,v,N,K,X){if(!g)throw Error("Invalid event type");var pe=h(K)?!!K.capture:!!K,ht=Bi(d);if(ht||(d[vt]=ht=new ct(d)),v=ht.add(g,v,N,pe,X),v.proxy)return v;if(N=gs(),v.proxy=N,N.src=d,N.listener=v,d.addEventListener)Ne||(K=pe),K===void 0&&(K=!1),d.addEventListener(g.toString(),N,K);else if(d.attachEvent)d.attachEvent($n(g.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gs(){function d(v){return g.call(d.src,d.listener,v)}const g=ys;return d}function sl(d,g,v,N,K){if(Array.isArray(g))for(var X=0;X<g.length;X++)sl(d,g[X],v,N,K);else N=h(N)?!!N.capture:!!N,v=$i(v),d&&d[fe]?(d=d.i,g=String(g).toString(),g in d.g&&(X=d.g[g],v=Vt(X,v,N,K),-1<v&&(Me(X[v]),Array.prototype.splice.call(X,v,1),X.length==0&&(delete d.g[g],d.h--)))):d&&(d=Bi(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Vt(g,v,N,K)),(v=-1<d?g[d]:null)&&Ii(v))}function Ii(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[fe])rt(g.i,d);else{var v=d.type,N=d.proxy;g.removeEventListener?g.removeEventListener(v,N,d.capture):g.detachEvent?g.detachEvent($n(v),N):g.addListener&&g.removeListener&&g.removeListener(N),(v=Bi(g))?(rt(v,d),v.h==0&&(v.src=null,g[vt]=null)):Me(d)}}}function $n(d){return d in We?We[d]:We[d]="on"+d}function ys(d,g){if(d.da)d=!0;else{g=new Pe(g,this);var v=d.listener,N=d.ha||d.src;d.fa&&Ii(d),d=v.call(N,g)}return d}function Bi(d){return d=d[vt],d instanceof ct?d:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function $i(d){return typeof d=="function"?d:(d[co]||(d[co]=function(g){return d.handleEvent(g)}),d[co])}function Ve(){Se.call(this),this.i=new ct(this),this.M=this,this.F=null}T(Ve,Se),Ve.prototype[fe]=!0,Ve.prototype.removeEventListener=function(d,g,v,N){sl(this,d,g,v,N)};function wt(d,g){var v,N=d.F;if(N)for(v=[];N;N=N.F)v.push(N);if(d=d.M,N=g.type||g,typeof g=="string")g=new we(g,d);else if(g instanceof we)g.target=g.target||d;else{var K=g;g=new we(N,d),V(g,K)}if(K=!0,v)for(var X=v.length-1;0<=X;X--){var pe=g.g=v[X];K=gr(pe,N,!0,g)&&K}if(pe=g.g=d,K=gr(pe,N,!0,g)&&K,K=gr(pe,N,!1,g)&&K,v)for(X=0;X<v.length;X++)pe=g.g=v[X],K=gr(pe,N,!1,g)&&K}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],N=0;N<v.length;N++)Me(v[N]);delete d.g[g],d.h--}}this.F=null},Ve.prototype.K=function(d,g,v,N){return this.i.add(String(d),g,!1,v,N)},Ve.prototype.L=function(d,g,v,N){return this.i.add(String(d),g,!0,v,N)};function gr(d,g,v,N){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var K=!0,X=0;X<g.length;++X){var pe=g[X];if(pe&&!pe.da&&pe.capture==v){var ht=pe.listener,fn=pe.ha||pe.src;pe.fa&&rt(d.i,pe),K=ht.call(fn,N)!==!1&&K}}return K&&!N.defaultPrevented}function ol(d,g,v){if(typeof d=="function")v&&(d=_(d,v));else if(d&&typeof d.handleEvent=="function")d=_(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:u.setTimeout(d,g||0)}function al(d){d.g=ol(()=>{d.g=null,d.i&&(d.i=!1,al(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class yd extends Se{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:al(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(d){Se.call(this),this.h=d,this.g={}}T(_s,Se);var ul=[];function ll(d){G(d.g,function(g,v){this.g.hasOwnProperty(v)&&Ii(g)},d),d.g={}}_s.prototype.N=function(){_s.aa.N.call(this),ll(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ba=u.JSON.stringify,_d=u.JSON.parse,vd=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function wd(){}wd.prototype.h=null;function Tp(d){return d.h||(d.h=d.i())}function Ip(){}var ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cl(){we.call(this,"d")}T(cl,we);function Ed(){we.call(this,"c")}T(Ed,we);var vs={},Sp=null;function dl(){return Sp=Sp||new Ve}vs.La="serverreachability";function Td(d){we.call(this,vs.La,d)}T(Td,we);function xa(d){const g=dl();wt(g,new Td(g))}vs.STAT_EVENT="statevent";function Rp(d,g){we.call(this,vs.STAT_EVENT,d),this.stat=g}T(Rp,we);function Nn(d){const g=dl();wt(g,new Rp(g,d))}vs.Ma="timingevent";function hl(d,g){we.call(this,vs.Ma,d),this.size=g}T(hl,we);function ka(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},g)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function sv(d,g,v,N,K,X){d.info(function(){if(d.g)if(X)for(var pe="",ht=X.split("&"),fn=0;fn<ht.length;fn++){var tt=ht[fn].split("=");if(1<tt.length){var pt=tt[0];tt=tt[1];var un=pt.split("_");pe=2<=un.length&&un[1]=="type"?pe+(pt+"="+tt+"&"):pe+(pt+"=redacted&")}}else pe=null;else pe=X;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+g+`
`+v+`
`+pe})}function ov(d,g,v,N,K,X,pe){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+g+`
`+v+`
`+X+" "+pe})}function fo(d,g,v,N){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+uv(d,v)+(N?" "+N:"")})}function av(d,g){d.info(function(){return"TIMEOUT: "+g})}ws.prototype.info=function(){};function uv(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var N=v[d];if(!(2>N.length)){var K=N[1];if(Array.isArray(K)&&!(1>K.length)){var X=K[0];if(X!="noop"&&X!="stop"&&X!="close")for(var pe=1;pe<K.length;pe++)K[pe]=""}}}}return ba(v)}catch{return g}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Id;function Na(){}T(Na,wd),Na.prototype.g=function(){return new XMLHttpRequest},Na.prototype.i=function(){return{}},Id=new Na;function zi(d,g,v,N){this.j=d,this.i=g,this.l=v,this.R=N||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pp}function Pp(){this.i=null,this.g="",this.h=!1}var Cp={},Sd={};function Rd(d,g,v){d.L=1,d.v=mo(ti(g)),d.m=v,d.P=!0,bp(d,null)}function bp(d,g){d.F=Date.now(),Es(d),d.A=ti(d.v);var v=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),Od(v.i,"t",N),d.C=0,v=d.j.J,d.h=new Pp,d.g=Yp(d.j,v?g:null,!d.m),0<d.O&&(d.M=new yd(_(d.Y,d,d.g),d.O)),g=d.U,v=d.g,N=d.ca;var K="readystatechange";Array.isArray(K)||(K&&(ul[0]=K.toString()),K=ul);for(var X=0;X<K.length;X++){var pe=ei(v,K[X],N||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),xa(),sv(d.i,d.u,d.A,d.l,d.R,d.m)}zi.prototype.ca=function(d){d=d.target;const g=this.M;g&&On(d)==3?g.j():this.Y(d)},zi.prototype.Y=function(d){try{if(d==this.g)e:{const un=On(this.g);var g=this.g.Ba();const si=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||Md(this.g)))){this.J||un!=4||g==7||(g==8||0>=si?xa(3):xa(2)),Ad(this);var v=this.g.Z();this.X=v;t:if(Oa(this)){var N=Md(this.g);d="";var K=N.length,X=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Da(this);var pe="";break t}this.h.i=new u.TextDecoder}for(g=0;g<K;g++)this.h.h=!0,d+=this.h.i.decode(N[g],{stream:!(X&&g==K-1)});N.length=0,this.h.g+=d,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=v==200,ov(this.i,this.u,this.A,this.l,this.R,un,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,fn=this.g;if((ht=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(ht)){var tt=ht;break t}}tt=null}if(v=tt)fo(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pl(this,v);else{this.o=!1,this.s=3,Nn(12),Wi(this),Da(this);break e}}if(this.P){v=!0;let yr;for(;!this.J&&this.C<pe.length;)if(yr=lv(this,pe),yr==Sd){un==4&&(this.s=4,Nn(14),v=!1),fo(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==Cp){this.s=4,Nn(15),fo(this.i,this.l,pe,"[Invalid Chunk]"),v=!1;break}else fo(this.i,this.l,yr,null),pl(this,yr);if(Oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||pe.length!=0||this.h.h||(this.s=1,Nn(16),v=!1),this.o=this.o&&v,!v)fo(this.i,this.l,pe,"[Invalid Chunked Response]"),Wi(this),Da(this);else if(0<pe.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),ii(pt),pt.M=!0,Nn(11))}}else fo(this.i,this.l,pe,null),pl(this,pe);un==4&&Wi(this),this.o&&!this.J&&(un==4?It(this.j,this):(this.o=!1,Es(this)))}else Vd(this.g),v==400&&0<pe.indexOf("Unknown SID")?(this.s=3,Nn(12)):(this.s=0,Nn(13)),Wi(this),Da(this)}}}catch{}finally{}};function Oa(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function lv(d,g){var v=d.C,N=g.indexOf(`
`,v);return N==-1?Sd:(v=Number(g.substring(v,N)),isNaN(v)?Cp:(N+=1,N+v>g.length?Sd:(g=g.slice(N,N+v),d.C=N+v,g)))}zi.prototype.cancel=function(){this.J=!0,Wi(this)};function Es(d){d.S=Date.now()+d.I,xp(d,d.I)}function xp(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ka(_(d.ba,d),g)}function Ad(d){d.B&&(u.clearTimeout(d.B),d.B=null)}zi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(av(this.i,this.A),this.L!=2&&(xa(),Nn(17)),Wi(this),this.s=2,Da(this)):xp(this,this.S-d)};function Da(d){d.j.G==0||d.J||It(d.j,d)}function Wi(d){Ad(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,ll(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function pl(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||Pd(v.h,d))){if(!d.K&&Pd(v.h,d)&&v.G==3){try{var N=v.Da.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)_o(v),Va(v);else break e;wl(v),Nn(18)}}else v.za=K[1],0<v.za-v.T&&37500>K[2]&&v.F&&v.v==0&&!v.C&&(v.C=ka(_(v.Za,v),6e3));if(1>=Dp(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ri(v,11)}else if((d.K||v.g==d)&&_o(v),!R(g))for(K=v.Da.g.parse(g),g=0;g<K.length;g++){let tt=K[g];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];const pt=tt[3];pt!=null&&(v.la=pt,v.j.info("VER="+v.la));const un=tt[4];un!=null&&(v.Aa=un,v.j.info("SVER="+v.Aa));const si=tt[5];si!=null&&typeof si=="number"&&0<si&&(N=1.5*si,v.L=N,v.j.info("backChannelRequestTimeoutMs_="+N)),N=v;const yr=d.g;if(yr){const $a=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var X=N.h;X.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ml(X,X.h),X.h=null))}if(N.D){const jd=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;jd&&(N.ya=jd,Et(N.I,N.D,jd))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),N=v;var pe=d;if(N.qa=El(N,N.J?N.ia:null,N.W),pe.K){Cd(N.h,pe);var ht=pe,fn=N.L;fn&&(ht.I=fn),ht.B&&(Ad(ht),Es(ht)),N.g=pe}else Hp(N);0<v.i.length&&Fa(v)}else tt[0]!="stop"&&tt[0]!="close"||Ri(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ri(v,7):vl(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}xa(4)}catch{}}var kp=class{constructor(d,g){this.g=d,this.map=g}};function Np(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Op(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Dp(d){return d.h?1:d.g?d.g.size:0}function Pd(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function ml(d,g){d.g?d.g.add(g):d.h=g}function Cd(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Np.prototype.cancel=function(){if(this.i=bd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function bd(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const v of d.g.values())g=g.concat(v.D);return g}return k(d.i)}function xd(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],v=d.length,N=0;N<v;N++)g.push(d[N]);return g}g=[],v=0;for(N in d)g[v++]=d[N];return g}function cv(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(const N in d)g[v++]=N;return g}}}function kd(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=cv(d),N=xd(d),K=N.length,X=0;X<K;X++)g.call(void 0,N[X],v&&v[X],d)}var La=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lp(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var N=d[v].indexOf("="),K=null;if(0<=N){var X=d[v].substring(0,N);K=d[v].substring(N+1)}else X=d[v];g(X,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Ts(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ts){this.h=d.h,Ma(this,d.j),this.o=d.o,this.g=d.g,po(this,d.s),this.l=d.l;var g=d.i,v=new go;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Mp(this,v),this.m=d.m}else d&&(g=String(d).match(La))?(this.h=!1,Ma(this,g[1]||"",!0),this.o=Is(g[2]||""),this.g=Is(g[3]||"",!0),po(this,g[4]),this.l=Is(g[5]||"",!0),Mp(this,g[6]||"",!0),this.m=Is(g[7]||"")):(this.h=!1,this.i=new go(null,this.h))}Ts.prototype.toString=function(){var d=[],g=this.j;g&&d.push(ni(g,Nd,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(ni(g,Nd,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(ni(v,v.charAt(0)=="/"?Fp:dv,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",ni(v,jp)),d.join("")};function ti(d){return new Ts(d)}function Ma(d,g,v){d.j=v?Is(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function po(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Mp(d,g,v){g instanceof go?(d.i=g,hv(d.i,d.h)):(v||(g=ni(g,Up)),d.i=new go(g,d.h))}function Et(d,g,v){d.i.set(g,v)}function mo(d){return Et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Is(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ni(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,Vp),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Vp(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Nd=/[#\/\?@]/g,dv=/[#\?:]/g,Fp=/[#\?]/g,Up=/[#\?@]/g,jp=/#/g;function go(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function qi(d){d.g||(d.g=new Map,d.h=0,d.i&&Lp(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=go.prototype,t.add=function(d,g){qi(this),this.i=null,d=yo(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function Bp(d,g){qi(d),g=yo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function $p(d,g){return qi(d),g=yo(d,g),d.g.has(g)}t.forEach=function(d,g){qi(this),this.g.forEach(function(v,N){v.forEach(function(K){d.call(g,K,N,this)},this)},this)},t.na=function(){qi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let N=0;N<g.length;N++){const K=d[N];for(let X=0;X<K.length;X++)v.push(g[N])}return v},t.V=function(d){qi(this);let g=[];if(typeof d=="string")$p(this,d)&&(g=g.concat(this.g.get(yo(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},t.set=function(d,g){return qi(this),this.i=null,d=yo(this,d),$p(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Od(d,g,v){Bp(d,g),0<v.length&&(d.i=null,d.g.set(yo(d,g),k(v)),d.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var N=g[v];const X=encodeURIComponent(String(N)),pe=this.V(N);for(N=0;N<pe.length;N++){var K=X;pe[N]!==""&&(K+="="+encodeURIComponent(String(pe[N]))),d.push(K)}}return this.i=d.join("&")};function yo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function hv(d,g){g&&!d.j&&(qi(d),d.i=null,d.g.forEach(function(v,N){var K=N.toLowerCase();N!=K&&(Bp(this,N),Od(this,K,v))},d)),d.j=g}function fv(d,g){const v=new ws;if(u.Image){const N=new Image;N.onload=A(ri,v,"TestLoadImage: loaded",!0,g,N),N.onerror=A(ri,v,"TestLoadImage: error",!1,g,N),N.onabort=A(ri,v,"TestLoadImage: abort",!1,g,N),N.ontimeout=A(ri,v,"TestLoadImage: timeout",!1,g,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else g(!1)}function pv(d,g){const v=new ws,N=new AbortController,K=setTimeout(()=>{N.abort(),ri(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:N.signal}).then(X=>{clearTimeout(K),X.ok?ri(v,"TestPingServer: ok",!0,g):ri(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(K),ri(v,"TestPingServer: error",!1,g)})}function ri(d,g,v,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(v)}catch{}}function mv(){this.g=new vd}function gv(d,g,v){const N=v||"";try{kd(d,function(K,X){let pe=K;h(K)&&(pe=ba(K)),g.push(N+X+"="+encodeURIComponent(pe))})}catch(K){throw g.push(N+"type="+encodeURIComponent("_badmap")),K}}function gl(d){this.l=d.Ub||null,this.j=d.eb||!1}T(gl,wd),gl.prototype.g=function(){return new yl(this.l,this.j)},gl.prototype.i=function(d){return function(){return d}}({});function yl(d,g){Ve.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(yl,Ve),t=yl.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ut(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||u).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dt(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ut(this)),this.g&&(this.readyState=3,ut(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zp(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function zp(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?dt(this):ut(this),this.readyState==3&&zp(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,dt(this))},t.Qa=function(d){this.g&&(this.response=d,dt(this))},t.ga=function(){this.g&&dt(this)};function dt(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ut(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function ut(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Wp(d){let g="";return G(d,function(v,N){g+=N,g+=":",g+=v,g+=`\r
`}),g}function Dd(d,g,v){e:{for(N in v){var N=!1;break e}N=!0}N||(v=Wp(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Et(d,g,v))}function kt(d){Ve.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(kt,Ve);var yv=/^https?$/i,_v=["POST","PUT"];t=kt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,v,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Id.g(),this.v=this.o?Tp(this.o):Tp(Id),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(X){qp(this,X);return}if(d=v||"",v=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)v.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const X of N.keys())v.set(X,N.get(X));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),K=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(_v,g,void 0))||N||K||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,pe]of v)this.g.setRequestHeader(X,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_l(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){qp(this,X)}};function qp(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Ld(d),qt(d)}function Ld(d){d.A||(d.A=!0,wt(d,"complete"),wt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,wt(this,"complete"),wt(this,"abort"),qt(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gp(this):this.bb())},t.bb=function(){Gp(this)};function Gp(d){if(d.h&&typeof o<"u"&&(!d.v[1]||On(d)!=4||d.Z()!=2)){if(d.u&&On(d)==4)ol(d.Ea,0,d);else if(wt(d,"readystatechange"),On(d)==4){d.h=!1;try{const pe=d.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var N;if(N=pe===0){var K=String(d.D).match(La)[1]||null;!K&&u.self&&u.self.location&&(K=u.self.location.protocol.slice(0,-1)),N=!yv.test(K?K.toLowerCase():"")}v=N}if(v)wt(d,"complete"),wt(d,"success");else{d.m=6;try{var X=2<On(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Ld(d)}}finally{qt(d)}}}}function qt(d,g){if(d.g){_l(d);const v=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||wt(d,"ready");try{v.onreadystatechange=N}catch{}}}function _l(d){d.I&&(u.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function On(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),_d(g)}};function Md(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Vd(d){const g={};d=(d.g&&2<=On(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(R(d[N]))continue;var v=U(d[N]);const K=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=g[K]||[];g[K]=X,X.push(v)}C(g,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function In(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function Fd(d){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=In("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=In("baseRetryDelayMs",5e3,d),this.cb=In("retryDelaySeedMs",1e4,d),this.Wa=In("forwardChannelMaxRetries",2,d),this.wa=In("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Np(d&&d.concurrentRequestLimit),this.Da=new mv,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fd.prototype,t.la=8,t.G=1,t.connect=function(d,g,v,N){Nn(0),this.W=d,this.H=g||{},v&&N!==void 0&&(this.H.OSID=v,this.H.OAID=N),this.F=this.X,this.I=El(this,null,this.W),Fa(this)};function vl(d){if(Ud(d),d.G==3){var g=d.U++,v=ti(d.I);if(Et(v,"SID",d.K),Et(v,"RID",g),Et(v,"TYPE","terminate"),Ua(d,v),g=new zi(d,d.j,g),g.L=2,g.v=mo(ti(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=g.v,v=!0),v||(g.g=Yp(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Es(g)}Qp(d)}function Va(d){d.g&&(ii(d),d.g.cancel(),d.g=null)}function Ud(d){Va(d),d.u&&(u.clearTimeout(d.u),d.u=null),_o(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function Fa(d){if(!Op(d.h)&&!d.s){d.s=!0;var g=d.Ga;ue||me(),H||(ue(),H=!0),ae.add(g,d),d.B=0}}function Kp(d,g){return Dp(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ka(_(d.Ga,d,g),Si(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const K=new zi(this,this.j,d);let X=this.o;if(this.S&&(X?(X=S(X),V(X,this.S)):X=this.S),this.m!==null||this.O||(K.H=X,X=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var N=this.i[v];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=er(this,K,g),v=ti(this.I),Et(v,"RID",d),Et(v,"CVER",22),this.D&&Et(v,"X-HTTP-Session-Id",this.D),Ua(this,v),X&&(this.O?g="headers="+encodeURIComponent(String(Wp(X)))+"&"+g:this.m&&Dd(v,this.m,X)),ml(this.h,K),this.Ua&&Et(v,"TYPE","init"),this.P?(Et(v,"$req",g),Et(v,"SID","null"),K.T=!0,Rd(K,v,null)):Rd(K,v,g),this.G=2}}else this.G==3&&(d?zn(this,d):this.i.length==0||Op(this.h)||zn(this))};function zn(d,g){var v;g?v=g.l:v=d.U++;const N=ti(d.I);Et(N,"SID",d.K),Et(N,"RID",v),Et(N,"AID",d.T),Ua(d,N),d.m&&d.o&&Dd(N,d.m,d.o),v=new zi(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=er(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ml(d.h,v),Rd(v,N,g)}function Ua(d,g){d.H&&G(d.H,function(v,N){Et(g,N,v)}),d.l&&kd({},function(v,N){Et(g,N,v)})}function er(d,g,v){v=Math.min(d.i.length,v);var N=d.l?_(d.l.Na,d.l,d):null;e:{var K=d.i;let X=-1;for(;;){const pe=["count="+v];X==-1?0<v?(X=K[0].g,pe.push("ofs="+X)):X=0:pe.push("ofs="+X);let ht=!0;for(let fn=0;fn<v;fn++){let tt=K[fn].g;const pt=K[fn].map;if(tt-=X,0>tt)X=Math.max(0,K[fn].g-100),ht=!1;else try{gv(pt,pe,"req"+tt+"_")}catch{N&&N(pt)}}if(ht){N=pe.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,N}function Hp(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ue||me(),H||(ue(),H=!0),ae.add(g,d),d.v=0}}function wl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ka(_(d.Fa,d),Si(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ka(_(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nn(10),Va(this),ja(this))};function ii(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function ja(d){d.g=new zi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=ti(d.qa);Et(g,"RID","rpc"),Et(g,"SID",d.K),Et(g,"AID",d.T),Et(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Et(g,"TO",d.ja),Et(g,"TYPE","xmlhttp"),Ua(d,g),d.m&&d.o&&Dd(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=mo(ti(g)),v.m=null,v.P=!0,bp(v,d)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),wl(this),Nn(19))};function _o(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function It(d,g){var v=null;if(d.g==g){_o(d),ii(d),d.g=null;var N=2}else if(Pd(d.h,g))v=g.D,Cd(d.h,g),N=1;else return;if(d.G!=0){if(g.o)if(N==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var K=d.B;N=dl(),wt(N,new hl(N,v)),Fa(d)}else Hp(d);else if(K=g.s,K==3||K==0&&0<g.X||!(N==1&&Kp(d,g)||N==2&&wl(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),K){case 1:Ri(d,5);break;case 4:Ri(d,10);break;case 3:Ri(d,6);break;default:Ri(d,2)}}}function Si(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function Ri(d,g){if(d.j.info("Error code "+g),g==2){var v=_(d.fb,d),N=d.Xa;const K=!N;N=new Ts(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ma(N,"https"),mo(N),K?fv(N.toString(),v):pv(N.toString(),v)}else Nn(2);d.G=0,d.l&&d.l.sa(g),Qp(d),Ud(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function Qp(d){if(d.G=0,d.ka=[],d.l){const g=bd(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function El(d,g,v){var N=v instanceof Ts?ti(v):new Ts(v);if(N.g!="")g&&(N.g=g+"."+N.g),po(N,N.s);else{var K=u.location;N=K.protocol,g=g?g+"."+K.hostname:K.hostname,K=+K.port;var X=new Ts(null);N&&Ma(X,N),g&&(X.g=g),K&&po(X,K),v&&(X.l=v),N=X}return v=d.D,g=d.ya,v&&g&&Et(N,v,g),Et(N,"VER",d.la),Ua(d,N),N}function Yp(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new kt(new gl({eb:v})):new kt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jp(){}t=Jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(d,g){return new Wn(d,g)};function Wn(d,g){Ve.call(this),this.g=new Fd(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!R(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new vo(this)}T(Wn,Ve),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){vl(this.g)},Wn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=ba(d),d=v);g.i.push(new kp(g.Ya++,d)),g.G==3&&Fa(g)},Wn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,Wn.aa.N.call(this)};function Ba(d){cl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}T(Ba,cl);function Ss(){Ed.call(this),this.status=1}T(Ss,Ed);function vo(d){this.g=d}T(vo,Jp),vo.prototype.ua=function(){wt(this.g,"a")},vo.prototype.ta=function(d){wt(this.g,new Ba(d))},vo.prototype.sa=function(d){wt(this.g,new Ss)},vo.prototype.ra=function(){wt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,oD=function(){return new Tl},sD=function(){return dl()},iD=vs,IE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,Ag=fl,Ap.COMPLETE="complete",rD=Ap,Ip.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,Sh=Ip,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,nD=kt}).apply(typeof Zm<"u"?Zm:typeof self<"u"?self:typeof window<"u"?window:{});const ZP="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new a_("@firebase/firestore");function Wl(){return la.logLevel}function n8(t){la.setLogLevel(t)}function oe(t,...e){if(la.logLevel<=Ye.DEBUG){const n=e.map(zI);la.debug(`Firestore (${id}): ${t}`,...n)}}function nn(t,...e){if(la.logLevel<=Ye.ERROR){const n=e.map(zI);la.error(`Firestore (${id}): ${t}`,...n)}}function fs(t,...e){if(la.logLevel<=Ye.WARN){const n=e.map(zI);la.warn(`Firestore (${id}): ${t}`,...n)}}function zI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t="Unexpected state"){const e=`FIRESTORE (${id}) INTERNAL ASSERTION FAILED: `+t;throw nn(e),new Error(e)}function Re(t,e){t||Ee()}function r8(t,e){t||Ee()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class s8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class o8{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new aD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Cn(e)}}class a8{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u8{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new a8(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l8{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new l8(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=d8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function Mc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function lD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Mt(0,0))}static max(){return new Ce(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ze extends Tf{construct(e,n,r){return new Ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ze(n)}static emptyPath(){return new Ze([])}}const h8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Tf{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return h8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ie(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ie(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(o=!o,i++):u!=="."||o?(r+=u,i++):(s(),i++)}if(s(),o)throw new ie(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ze.fromString(e))}static fromName(e){return new ye(Ze.fromString(e).popFirst(5))}static empty(){return new ye(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function SE(t){return t.fields.find(e=>e.kind===2)}function tu(t){return t.fields.filter(e=>e.kind!==2)}wy.UNKNOWN_ID=-1;class Pg{constructor(e,n){this.fieldPath=e,this.kind=n}}class If{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new If(0,Kr.min())}}function cD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new Kr(i,ye.empty(),e)}function dD(t){return new Kr(t.readTime,t.key,-1)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(Ce.min(),ye.empty(),-1)}static max(){return new Kr(Ce.max(),ye.empty(),-1)}}function WI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==hD)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(u=>{++i,u.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let u=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++u,u===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Bh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=qI(r.target.error);this.V.reject(new Bh(e,i))}}static open(e,n,r,i){try{return new w_(n,e.transaction(i,r))}catch(s){throw new Bh(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new p8(n)}}class us{constructor(e,n,r){this.name=e,this.version=n,this.p=r,us.S(Wt())===12.2&&nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return oe("SimpleDb","Removing database:",e),iu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mf())return!1;if(us.v())return!0;const e=Wt(),n=us.S(e),r=0<n&&n<10,i=pD(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(oe("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Bh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ie(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ie(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Bh(e,o))},i.onupgradeneeded=s=>{oe("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{oe("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const u=w_.open(this.db,e,s?"readonly":"readwrite",r),c=i(u).next(h=>(u.g(),h)).catch(h=>(u.abort(h),Q.reject(h))).toPromise();return c.catch(()=>{}),await u.m,c}catch(u){const c=u,h=c.name!=="FirebaseError"&&o<3;if(oe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function pD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class f8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return iu(this.B.delete())}}class Bh extends ie{constructor(e,n){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ra(t){return t.name==="IndexedDbTransactionError"}class p8{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(oe("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),iu(r)}add(e){return oe("SimpleDb","ADD",this.store.name,e,e),iu(this.store.add(e))}get(e){return iu(this.store.get(e)).next(n=>(n===void 0&&(n=null),oe("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return oe("SimpleDb","DELETE",this.store.name,e),iu(this.store.delete(e))}count(){return oe("SimpleDb","COUNT",this.store.name),iu(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Q((o,u)=>{s.onerror=c=>{u(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(u,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,u)=>u.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new Q((r,i)=>{n.onerror=s=>{const o=qI(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(u=>{u?o.continue():r()}):r()}})}W(e,n){const r=[];return new Q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void i();const c=new f8(u),h=n(u.primaryKey,u.value,c);if(h instanceof Q){const p=h.catch(m=>(c.done(),Q.reject(m)));r.push(p)}c.isDone?i():c.K===null?u.continue():u.continue(c.K)}}).next(()=>Q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function iu(t){return new Q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=qI(r.target.error);n(i)}})}let eC=!1;function qI(t){const e=us.S(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eC||(eC=!0,setTimeout(()=>{throw r},0)),r}}return t}class m8{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){oe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{oe("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ra(n)?oe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Sa(n)}await this.X(6e4)})}}class g8{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return Q.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return oe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(u=>{i-=u,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(u=>(oe("IndexBackfiller",`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,n,u))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=dD(s);WI(o,r)>0&&(r=o)}),new Kr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ar.oe=-1;function rp(t){return t==null}function Sf(t){return t===0&&1/t==-1/0}function mD(t){return typeof t=="number"&&Number.isInteger(t)&&!Sf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tC(e)),e=y8(t.get(n),e);return tC(e)}function y8(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function tC(t){return t+""}function is(t){const e=t.length;if(Re(e>=2),e===2)return Re(t.charAt(0)===""&&t.charAt(1)===""),Ze.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Ee(),t.charAt(o+1)){case"":const u=t.substring(s,o);let c;i.length===0?c=u:(i+=u,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Ee()}s=o+2}return new Ze(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){return[t,dr(e)]}function gD(t,e,n){return[t,dr(e),n]}const _8={},v8=["prefixPath","collectionGroup","readTime","documentId"],w8=["prefixPath","collectionGroup","documentId"],E8=["collectionGroup","readTime","prefixPath","documentId"],T8=["canonicalId","targetId"],I8=["targetId","path"],S8=["path","targetId"],R8=["collectionId","parent"],A8=["indexId","uid"],P8=["uid","sequenceNumber"],C8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],b8=["indexId","uid","orderedDocumentKey"],x8=["userId","collectionPath","documentId"],k8=["userId","collectionPath","largestBatchId"],N8=["userId","collectionGroup","largestBatchId"],yD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O8=[...yD,"documentOverlays"],_D=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vD=_D,GI=[...vD,"indexConfiguration","indexState","indexEntries"],D8=GI,L8=[...GI,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends fD{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Tn(t,e){const n=_e(t);return us.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function el(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||Vn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eg(this.root,e,this.comparator,!0)}}class eg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Vn.RED,this.left=i??Vn.EMPTY,this.right=s??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iC(this.data.getIterator())}getIteratorFrom(e){return new iC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class iC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new Pr([])}unionWith(e){let n=new Tt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ED("Invalid base64 string: "+s):s}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const V8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(t){if(Re(!!t),typeof t=="string"){let e=0;const n=V8.exec(t);if(Re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ca(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function KI(t){const e=t.mapValue.fields.__previous_value__;return E_(e)?KI(e):e}function Rf(t){const e=Zs(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n,r,i,s,o,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}class da{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bg={nullValue:"NULL_VALUE"};function Lu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E_(t)?4:TD(t)?9007199254740991:T_(t)?10:11:Ee()}function ps(t,e){if(t===e)return!0;const n=Lu(t);if(n!==Lu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rf(t).isEqual(Rf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zs(i.timestampValue),u=Zs(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ca(i.bytesValue).isEqual(ca(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Nt(i.geoPointValue.latitude)===Nt(s.geoPointValue.latitude)&&Nt(i.geoPointValue.longitude)===Nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Nt(i.integerValue)===Nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Nt(i.doubleValue),u=Nt(s.doubleValue);return o===u?Sf(o)===Sf(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Mc(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},u=s.mapValue.fields||{};if(rC(o)!==rC(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!ps(o[c],u[c])))return!1;return!0}(t,e);default:return Ee()}}function Af(t,e){return(t.values||[]).find(n=>ps(n,e))!==void 0}function ha(t,e){if(t===e)return 0;const n=Lu(t),r=Lu(e);if(n!==r)return je(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(s,o){const u=Nt(s.integerValue||s.doubleValue),c=Nt(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return sC(t.timestampValue,e.timestampValue);case 4:return sC(Rf(t),Rf(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(s,o){const u=ca(s),c=ca(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const u=s.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const p=je(u[h],c[h]);if(p!==0)return p}return je(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const u=je(Nt(s.latitude),Nt(o.latitude));return u!==0?u:je(Nt(s.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return oC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var u,c,h,p;const m=s.fields||{},_=o.fields||{},A=(u=m.value)===null||u===void 0?void 0:u.arrayValue,T=(c=_.value)===null||c===void 0?void 0:c.arrayValue,k=je(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:oC(A,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===zo.mapValue&&o===zo.mapValue)return 0;if(s===zo.mapValue)return 1;if(o===zo.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const _=je(c[m],p[m]);if(_!==0)return _;const A=ha(u[c[m]],h[p[m]]);if(A!==0)return A}return je(c.length,p.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function sC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const n=Zs(t),r=Zs(e),i=je(n.seconds,r.seconds);return i!==0?i:je(n.nanos,r.nanos)}function oC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ha(n[i],r[i]);if(s)return s}return je(n.length,r.length)}function Vc(t){return AE(t)}function AE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ca(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=AE(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${AE(n.fields[o])}`;return i+"}"}(t.mapValue):Ee()}function Mu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function PE(t){return!!t&&"integerValue"in t}function Pf(t){return!!t&&"arrayValue"in t}function aC(t){return!!t&&"nullValue"in t}function uC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xg(t){return!!t&&"mapValue"in t}function T_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $h(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return el(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$h(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$h(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const ID={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function U8(t){return"nullValue"in t?bg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mu(da.empty(),ye.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?T_(t)?ID:{mapValue:{}}:Ee()}function j8(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mu(da.empty(),ye.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?ID:"mapValue"in t?T_(t)?{mapValue:{}}:zo:Ee()}function lC(t,e){const n=ha(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function cC(t,e){const n=ha(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(n)}setAll(e){let n=Dt.emptyPath(),r={},i=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}o?r[u.lastSegment()]=$h(o):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());xg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){el(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Fn($h(this.value))}}function SD(t){const e=[];return el(t.fields,(n,r)=>{const i=new Dt([n]);if(xg(r)){const s=SD(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,i,s,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(e){return new bt(e,0,Ce.min(),Ce.min(),Ce.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,i){return new bt(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new bt(e,2,n,Ce.min(),Ce.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,Ce.min(),Ce.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.position=e,this.inclusive=n}}function dC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(o.referenceValue),n.key):r=ha(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n="asc"){this.field=e,this.dir=n}}function B8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{}class et extends RD{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $8(e,n,r):n==="array-contains"?new q8(e,r):n==="in"?new kD(e,r):n==="not-in"?new G8(e,r):n==="array-contains-any"?new K8(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z8(e,r):new W8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ha(n,this.value)):n!==null&&Lu(this.value)===Lu(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yt extends RD{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yt(e,n)}matches(e){return Fc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fc(t){return t.op==="and"}function CE(t){return t.op==="or"}function HI(t){return AD(t)&&Fc(t)}function AD(t){for(const e of t.filters)if(e instanceof yt)return!1;return!0}function bE(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+Vc(t.value);if(HI(t))return t.filters.map(e=>bE(e)).join(",");{const e=t.filters.map(n=>bE(n)).join(",");return`${t.op}(${e})`}}function PD(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)}(t,e):t instanceof yt?function(r,i){return i instanceof yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,u)=>s&&PD(o,i.filters[u]),!0):!1}(t,e):void Ee()}function CD(t,e){const n=t.filters.concat(e);return yt.create(n,t.op)}function bD(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${Vc(n.value)}`}(t):t instanceof yt?function(n){return n.op.toString()+" {"+n.getFilters().map(bD).join(" ,")+"}"}(t):"Filter"}class $8 extends et{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class z8 extends et{constructor(e,n){super(e,"in",n),this.keys=xD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class W8 extends et{constructor(e,n){super(e,"not-in",n),this.keys=xD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class q8 extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pf(n)&&Af(n.arrayValue,this.value)}}class kD extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Af(this.value.arrayValue,n)}}class G8 extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Af(this.value.arrayValue,n)}}class K8 extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Af(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n=null,r=[],i=[],s=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=u,this.ue=null}}function xE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new H8(t,e,n,r,i,s,o)}function Vu(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vc(r)).join(",")),e.ue=n}return e.ue}function ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hC(t.startAt,e.startAt)&&hC(t.endAt,e.endAt)}function Ey(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ty(t,e){return t.filters.filter(n=>n instanceof et&&n.field.isEqual(e))}function fC(t,e,n){let r=bg,i=!0;for(const s of Ty(t,e)){let o=bg,u=!0;switch(s.op){case"<":case"<=":o=U8(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,u=!1;break;case"!=":case"not-in":o=bg}lC({value:r,inclusive:i},{value:o,inclusive:u})<0&&(r=o,i=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];lC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function pC(t,e,n){let r=zo,i=!0;for(const s of Ty(t,e)){let o=zo,u=!0;switch(s.op){case">=":case">":o=j8(s.value),u=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,u=!1;break;case"!=":case"not-in":o=zo}cC({value:r,inclusive:i},{value:o,inclusive:u})>0&&(r=o,i=u)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];cC({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n=null,r=[],i=[],s=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ND(t,e,n,r,i,s,o,u){return new oo(t,e,n,r,i,s,o,u)}function sd(t){return new oo(t)}function mC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QI(t){return t.collectionGroup!==null}function wc(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Tt(Dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Cf(s,r))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new Cf(Dt.keyField(),r))}return e.ce}function hr(t){const e=_e(t);return e.le||(e.le=Q8(e,wc(t))),e.le}function Q8(t,e){if(t.limitType==="F")return xE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Cf(i.field,s)});const n=t.endAt?new fa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fa(t.startAt.position,t.startAt.inclusive):null;return xE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kE(t,e){const n=t.filters.concat([e]);return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Iy(t,e,n){return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sp(t,e){return ip(hr(t),hr(e))&&t.limitType===e.limitType}function OD(t){return`${Vu(hr(t))}|lt:${t.limitType}`}function ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bD(i)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vc(i)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function op(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,u,c){const h=dC(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,wc(r),i)||r.endAt&&!function(o,u,c){const h=dC(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,wc(r),i))}(t,e)}function DD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LD(t){return(e,n)=>{let r=!1;for(const i of wc(t)){const s=Y8(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y8(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(s,o,u){const c=o.data.field(s),h=u.data.field(s);return c!==null&&h!==null?ha(c,h):Ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){el(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=new Pt(ye.comparator);function Cr(){return J8}const MD=new Pt(ye.comparator);function Rh(...t){let e=MD;for(const n of t)e=e.insert(n.key,n);return e}function VD(t){let e=MD;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ss(){return zh()}function FD(){return zh()}function zh(){return new Aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const X8=new Pt(ye.comparator),Z8=new Tt(ye.comparator);function ze(...t){let e=Z8;for(const n of t)e=e.add(n);return e}const eK=new Tt(je);function YI(){return eK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function UD(t){return{integerValue:""+t}}function jD(t,e){return mD(e)?UD(e):JI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this._=void 0}}function tK(t,e,n){return t instanceof Uc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&E_(s)&&(s=KI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Fu?$D(t,e):t instanceof Uu?zD(t,e):function(i,s){const o=BD(i,s),u=gC(o)+gC(i.Pe);return PE(o)&&PE(i.Pe)?UD(u):JI(i.serializer,u)}(t,e)}function nK(t,e,n){return t instanceof Fu?$D(t,e):t instanceof Uu?zD(t,e):n}function BD(t,e){return t instanceof jc?function(r){return PE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Uc extends I_{}class Fu extends I_{constructor(e){super(),this.elements=e}}function $D(t,e){const n=WD(e);for(const r of t.elements)n.some(i=>ps(i,r))||n.push(r);return{arrayValue:{values:n}}}class Uu extends I_{constructor(e){super(),this.elements=e}}function zD(t,e){let n=WD(e);for(const r of t.elements)n=n.filter(i=>!ps(i,r));return{arrayValue:{values:n}}}class jc extends I_{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function gC(t){return Nt(t.integerValue||t.doubleValue)}function WD(t){return Pf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.field=e,this.transform=n}}function rK(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fu&&i instanceof Fu||r instanceof Uu&&i instanceof Uu?Mc(r.elements,i.elements,ps):r instanceof jc&&i instanceof jc?ps(r.Pe,i.Pe):r instanceof Uc&&i instanceof Uc}(t.transform,e.transform)}class iK{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class S_{}function qD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ad(t.key,Lt.none()):new od(t.key,t.data,Lt.none());{const n=t.data,r=Fn.empty();let i=new Tt(Dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ao(t.key,r,new Pr(i.toArray()),Lt.none())}}function sK(t,e,n){t instanceof od?function(i,s,o){const u=i.value.clone(),c=_C(i.fieldTransforms,s,o.transformResults);u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ao?function(i,s,o){if(!kg(i.precondition,s))return void s.convertToUnknownDocument(o.version);const u=_C(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(GD(i)),c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wh(t,e,n,r){return t instanceof od?function(s,o,u,c){if(!kg(s.precondition,o))return u;const h=s.value.clone(),p=vC(s.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ao?function(s,o,u,c){if(!kg(s.precondition,o))return u;const h=vC(s.fieldTransforms,c,o),p=o.data;return p.setAll(GD(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,u){return kg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function oK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BD(r.transform,i||null);s!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,s))}return n||null}function yC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Mc(r,i,(s,o)=>rK(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class od extends S_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ao extends S_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _C(t,e,n){const r=new Map;Re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,u=e.data.field(s.field);r.set(s.field,nK(o,u,n[i]))}return r}function vC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,tK(s,o,e))}return r}class ad extends S_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XI extends S_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sK(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FD();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=n.has(i.key)?null:u;const c=qD(o,u);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ze())}isEqual(e){return this.batchId===e.batchId&&Mc(this.mutations,e.mutations,(n,r)=>yC(n,r))&&Mc(this.baseMutations,e.baseMutations,(n,r)=>yC(n,r))}}class eS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length);let i=function(){return X8}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new eS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,it;function KD(t){switch(t){default:return Ee();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function HD(t){if(t===void 0)return nn("GRPC error has no .code"),J.UNKNOWN;switch(t){case ln.OK:return J.OK;case ln.CANCELLED:return J.CANCELLED;case ln.UNKNOWN:return J.UNKNOWN;case ln.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ln.INTERNAL:return J.INTERNAL;case ln.UNAVAILABLE:return J.UNAVAILABLE;case ln.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ln.NOT_FOUND:return J.NOT_FOUND;case ln.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ln.ABORTED:return J.ABORTED;case ln.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ln.DATA_LOSS:return J.DATA_LOSS;default:return Ee()}}(it=ln||(ln={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=new Iu([4294967295,4294967295],0);function wC(t){const e=QD().encode(t),n=new tD;return n.update(e),new Uint8Array(n.digest())}function EC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Iu([n,r],0),new Iu([i,s],0)]}class nS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ah(`Invalid padding: ${n}`);if(r<0)throw new Ah(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ah(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ah(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Iu.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Iu.fromNumber(r)));return i.compare(uK)===1&&(i=new Iu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=wC(e),[r,i]=EC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new nS(s,i,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=wC(e),[r,i]=EC(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ah extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new up(Ce.min(),i,new Pt(je),Cr(),ze())}}class lp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lp(r,n,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class YD{constructor(e,n){this.targetId=e,this.me=n}}class JD{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TC{constructor(){this.fe=0,this.ge=SC(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),n=ze(),r=ze();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new lp(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=SC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lK{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cr(),this.qe=IC(),this.Qe=new Pt(je)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Ey(s))if(r===0){const o=new ye(s.path);this.Ue(n,o,bt.newNoDocument(o,Ce.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,u;try{o=ca(r).toUint8Array()}catch(c){if(c instanceof ED)return fs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new nS(o,i,s)}catch(c){return fs(c instanceof Ah?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const u=this.Je(o);if(u){if(s.current&&Ey(u.target)){const c=new ye(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bt.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ze();this.qe.forEach((s,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new up(e,n,this.Qe,this.ke,r);return this.ke=Cr(),this.qe=IC(),this.Qe=new Pt(je),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new TC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(je),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new TC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function IC(){return new Pt(ye.comparator)}function SC(){return new Pt(ye.comparator)}const cK={asc:"ASCENDING",desc:"DESCENDING"},dK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hK={and:"AND",or:"OR"};class fK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function NE(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function Bc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pK(t,e){return Bc(t,e.toTimestamp())}function rn(t){return Re(!!t),Ce.fromTimestamp(function(n){const r=Zs(n);return new Mt(r.seconds,r.nanos)}(t))}function rS(t,e){return OE(t,e).canonicalString()}function OE(t,e){const n=function(i){return new Ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZD(t){const e=Ze.fromString(t);return Re(lL(e)),e}function bf(t,e){return rS(t.databaseId,e.path)}function ls(t,e){const n=ZD(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(nL(n))}function eL(t,e){return rS(t.databaseId,e)}function tL(t){const e=ZD(t);return e.length===4?Ze.emptyPath():nL(e)}function DE(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nL(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function RC(t,e,n){return{name:bf(t,e),fields:n.value.mapValue.fields}}function rL(t,e,n){const r=ls(t,e.name),i=rn(e.updateTime),s=e.createTime?rn(e.createTime):Ce.min(),o=new Fn({mapValue:{fields:e.fields}}),u=bt.newFoundDocument(r,i,s,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function mK(t,e){return"found"in e?function(r,i){Re(!!i.found),i.found.name,i.found.updateTime;const s=ls(r,i.found.name),o=rn(i.found.updateTime),u=i.found.createTime?rn(i.found.createTime):Ce.min(),c=new Fn({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(s,o,u,c)}(t,e):"missing"in e?function(r,i){Re(!!i.missing),Re(!!i.readTime);const s=ls(r,i.missing),o=rn(i.readTime);return bt.newNoDocument(s,o)}(t,e):Ee()}function gK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Re(p===void 0||typeof p=="string"),Yt.fromBase64String(p||"")):(Re(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Yt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const p=h.code===void 0?J.UNKNOWN:HD(h.code);return new ie(p,h.message||"")}(o);n=new JD(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ls(t,r.document.name),s=rn(r.document.updateTime),o=r.document.createTime?rn(r.document.createTime):Ce.min(),u=new Fn({mapValue:{fields:r.document.fields}}),c=bt.newFoundDocument(i,s,o,u),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Ng(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ls(t,r.document),s=r.readTime?rn(r.readTime):Ce.min(),o=bt.newNoDocument(i,s),u=r.removedTargetIds||[];n=new Ng([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ls(t,r.document),s=r.removedTargetIds||[];n=new Ng([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new aK(i,s),u=r.targetId;n=new YD(u,o)}}return n}function xf(t,e){let n;if(e instanceof od)n={update:RC(t,e.key,e.value)};else if(e instanceof ad)n={delete:bf(t,e.key)};else if(e instanceof ao)n={update:RC(t,e.key,e.data),updateMask:TK(e.fieldMask)};else{if(!(e instanceof XI))return Ee();n={verify:bf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const u=o.transform;if(u instanceof Uc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Fu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Uu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jc)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()}(t,e.precondition)),n}function LE(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Lt.updateTime(rn(s.updateTime)):s.exists!==void 0?Lt.exists(s.exists):Lt.none()}(e.currentDocument):Lt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,u){let c=null;if("setToServerValue"in u)Re(u.setToServerValue==="REQUEST_TIME"),c=new Uc;else if("appendMissingElements"in u){const p=u.appendMissingElements.values||[];c=new Fu(p)}else if("removeAllFromArray"in u){const p=u.removeAllFromArray.values||[];c=new Uu(p)}else"increment"in u?c=new jc(o,u.increment):Ee();const h=Dt.fromServerFormat(u.fieldPath);return new ap(h,c)}(t,i)):[];if(e.update){e.update.name;const i=ls(t,e.update.name),s=new Fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const h=c.fieldPaths||[];return new Pr(h.map(p=>Dt.fromServerFormat(p)))}(e.updateMask);return new ao(i,s,o,n,r)}return new od(i,s,n,r)}if(e.delete){const i=ls(t,e.delete);return new ad(i,n)}if(e.verify){const i=ls(t,e.verify);return new XI(i,n)}return Ee()}function yK(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?rn(i.updateTime):rn(s);return o.isEqual(Ce.min())&&(o=rn(s)),new iK(o,i.transformResults||[])}(n,e))):[]}function iL(t,e){return{documents:[eL(t,e.path)]}}function sL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eL(t,i);const s=function(h){if(h.length!==0)return uL(yt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(_){return{field:Gl(_.field),direction:vK(_.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=NE(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function oL(t){let e=tL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const _=aL(m);return _ instanceof yt&&HI(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(_=>function(T){return new Cf(Kl(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(_))}(n.orderBy));let u=null;n.limit&&(u=function(m){let _;return _=typeof m=="object"?m.value:m,rp(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(m){const _=!!m.before,A=m.values||[];return new fa(A,_)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const _=!m.before,A=m.values||[];return new fa(A,_)}(n.endAt)),ND(e,i,o,s,u,"F",c,h)}function _K(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aL(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kl(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Kl(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kl(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Kl(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Kl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yt.create(n.compositeFilter.filters.map(r=>aL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(t):Ee()}function vK(t){return cK[t]}function wK(t){return dK[t]}function EK(t){return hK[t]}function Gl(t){return{fieldPath:t.canonicalString()}}function Kl(t){return Dt.fromServerFormat(t.fieldPath)}function uL(t){return t instanceof et?function(n){if(n.op==="=="){if(uC(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(aC(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uC(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(aC(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:wK(n.op),value:n.value}}}(t):t instanceof yt?function(n){const r=n.getFilters().map(i=>uL(i));return r.length===1?r[0]:{compositeFilter:{op:EK(n.op),filters:r}}}(t):Ee()}function TK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lL(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i,s=Ce.min(),o=Ce.min(),u=Yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.ct=e}}function IK(t,e){let n;if(e.document)n=rL(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=Bu(e.noDocument.readTime);n=bt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=ye.fromSegments(e.unknownDocument.path),i=Bu(e.unknownDocument.version);n=bt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Mt(i[0],i[1]);return Ce.fromTimestamp(s)}(e.readTime)),n}function AC(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:bf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Bc(s,o.version.toTimestamp()),createTime:Bc(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ju(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:n.path.toArray(),version:ju(e.version)}}return r}function Sy(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ju(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bu(t){const e=new Mt(t.seconds,t.nanoseconds);return Ce.fromTimestamp(e)}function su(t,e){const n=(e.baseMutations||[]).map(s=>LE(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];o.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>LE(t.ct,s)),i=Mt.fromMillis(e.localWriteTimeMs);return new ZI(e.batchId,i,n,r)}function Ph(t){const e=Bu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bu(t.lastLimboFreeSnapshotVersion):Ce.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Re(s.documents.length===1),hr(sd(tL(s.documents[0])))}(t.query):function(s){return hr(oL(s))}(t.query),new Bs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Yt.fromBase64String(t.resumeToken))}function dL(t,e){const n=ju(e.snapshotVersion),r=ju(e.lastLimboFreeSnapshotVersion);let i;i=Ey(e.target)?iL(t.ct,e.target):sL(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vu(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iS(t){const e=oL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Iy(e,e.limit,"L"):e}function Yw(t,e){return new tS(e.largestBatchId,LE(t.ct,e.overlayMutation))}function PC(t,e){const n=e.path.lastSegment();return[t,dr(e.path.popLast()),n]}function CC(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ju(r.readTime),documentKey:dr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{getBundleMetadata(e,n){return bC(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Bu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return bC(e).put(function(i){return{bundleId:i.id,createTime:ju(rn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return xC(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:iS(s.bundledQuery),readTime:Bu(s.readTime)}}(r)})}saveNamedQuery(e,n){return xC(e).put(function(i){return{name:i.name,readTime:ju(rn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function bC(t){return Tn(t,"bundles")}function xC(t){return Tn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new R_(e,r)}getOverlay(e,n){return ch(e).get(PC(this.userId,n)).next(r=>r?Yw(this.serializer,r):null)}getOverlays(e,n){const r=ss();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const u=new tS(n,o);i.push(this.ht(e,u))}),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(dr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ch(e).j("collectionPathOverlayIndex",u))}),Q.waitFor(s)}getOverlaysForCollection(e,n,r){const i=ss(),s=dr(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ch(e).U("collectionPathOverlayIndex",o).next(u=>{for(const c of u){const h=Yw(this.serializer,c);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=ss();let o;const u=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ch(e).J({index:"collectionGroupOverlayIndex",range:u},(c,h,p)=>{const m=Yw(this.serializer,h);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):p.done()}).next(()=>s)}ht(e,n){return ch(e).put(function(i,s,o){const[u,c,h]=PC(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:xf(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function ch(t){return Tn(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{Pt(e){return Tn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Yt.fromUint8Array(r):Yt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Nt(e.integerValue));else if("doubleValue"in e){const r=Nt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Sf(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Zs(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ca(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?TD(e)?this.dt(n,Number.MAX_SAFE_INTEGER):T_(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",u=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Nt(u)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),ye.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}ou.vt=new ou;function AK(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function kC(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=AK(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class PK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=kC(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=kC(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class bK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class dh{constructor(){this.jt=new PK,this.Ht=new CK(this.jt),this.Jt=new bK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new au(this.indexId,this.documentKey,this.arrayValue,r)}}function bo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=NC(t.arrayValue,e.arrayValue),n!==0?n:(n=NC(t.directionalValue,e.directionalValue),n!==0?n:ye.comparator(t.documentKey,e.documentKey)))}function NC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.Xt=new Tt((n,r)=>Dt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Re(e.collectionGroup===this.collectionId),this.nn)return!1;const n=SE(e);if(n!==void 0&&!this.sn(n))return!1;const r=tu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const u=this.Xt.getIterator().getNext();if(!i.has(u.field.canonicalString())){const c=r[s];if(!this.on(u,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){const u=r[s];if(o>=this.en.length||!this._n(this.en[o++],u))return!1}return!0}an(){if(this.nn)return null;let e=new Tt(Dt.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Pg(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Pg(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Pg(r.field,r.dir==="asc"?0:1)));return new wy(wy.UNKNOWN_ID,this.collectionId,n,If.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){var e,n;if(Re(t instanceof et||t instanceof yt),t instanceof et){if(t instanceof kD){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>et.create(t.field,"==",s)))||[];return yt.create(i,"or")}return t}const r=t.filters.map(i=>hL(i));return yt.create(r,t.op)}function xK(t){if(t.getFilters().length===0)return[];const e=FE(hL(t));return Re(fL(e)),ME(e)||VE(e)?[e]:e.getFilters()}function ME(t){return t instanceof et}function VE(t){return t instanceof yt&&HI(t)}function fL(t){return ME(t)||VE(t)||function(n){if(n instanceof yt&&CE(n)){for(const r of n.getFilters())if(!ME(r)&&!VE(r))return!1;return!0}return!1}(t)}function FE(t){if(Re(t instanceof et||t instanceof yt),t instanceof et)return t;if(t.filters.length===1)return FE(t.filters[0]);const e=t.filters.map(r=>FE(r));let n=yt.create(e,t.op);return n=Ry(n),fL(n)?n:(Re(n instanceof yt),Re(Fc(n)),Re(n.filters.length>1),n.filters.reduce((r,i)=>sS(r,i)))}function sS(t,e){let n;return Re(t instanceof et||t instanceof yt),Re(e instanceof et||e instanceof yt),n=t instanceof et?e instanceof et?function(i,s){return yt.create([i,s],"and")}(t,e):DC(t,e):e instanceof et?DC(e,t):function(i,s){if(Re(i.filters.length>0&&s.filters.length>0),Fc(i)&&Fc(s))return CD(i,s.getFilters());const o=CE(i)?i:s,u=CE(i)?s:i,c=o.filters.map(h=>sS(h,u));return yt.create(c,"or")}(t,e),Ry(n)}function DC(t,e){if(Fc(e))return CD(e,t.getFilters());{const n=e.filters.map(r=>sS(t,r));return yt.create(n,"or")}}function Ry(t){if(Re(t instanceof et||t instanceof yt),t instanceof et)return t;const e=t.getFilters();if(e.length===1)return Ry(e[0]);if(AD(t))return t;const n=e.map(i=>Ry(i)),r=[];return n.forEach(i=>{i instanceof et?r.push(i):i instanceof yt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:yt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{constructor(){this.un=new oS}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Kr.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class oS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Ze.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=new Uint8Array(0);class NK{constructor(e,n){this.databaseId=n,this.cn=new oS,this.ln=new Aa(r=>Vu(r),(r,i)=>ip(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:dr(i)};return LC(e).put(s)}return Q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[lD(n),""],!1,!0);return LC(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(is(o.parent))}return r})}addFieldIndex(e,n){const r=hh(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ul(e);return s.next(u=>{o.put(CC(u,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=hh(e),i=Ul(e),s=Fl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=hh(e),r=Fl(e),i=Ul(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return Q.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new OC(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Fl(e);let i=!0;const s=new Map;return Q.forEach(this.hn(n),o=>this.Pn(e,o).next(u=>{i&&(i=!!u),s.set(o,u)})).next(()=>{if(i){let o=ze();const u=[];return Q.forEach(s,(c,h)=>{oe("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(F=>`${F.fieldPath}:${F.kind}`).join(",")}`}(c)} to execute ${Vu(n)}`);const p=function(I,F){const z=SE(F);if(z===void 0)return null;for(const G of Ty(I,z.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(h,c),m=function(I,F){const z=new Map;for(const G of tu(F))for(const C of Ty(I,G.fieldPath))switch(C.op){case"==":case"in":z.set(G.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return z.set(G.fieldPath.canonicalString(),C.value),Array.from(z.values())}return null}(h,c),_=function(I,F){const z=[];let G=!0;for(const C of tu(F)){const S=C.kind===0?fC(I,C.fieldPath,I.startAt):pC(I,C.fieldPath,I.startAt);z.push(S.value),G&&(G=S.inclusive)}return new fa(z,G)}(h,c),A=function(I,F){const z=[];let G=!0;for(const C of tu(F)){const S=C.kind===0?pC(I,C.fieldPath,I.endAt):fC(I,C.fieldPath,I.endAt);z.push(S.value),G&&(G=S.inclusive)}return new fa(z,G)}(h,c),T=this.In(c,h,_),k=this.In(c,h,A),x=this.Tn(c,h,m),P=this.En(c.indexId,p,T,_.inclusive,k,A.inclusive,x);return Q.forEach(P,R=>r.G(R,n.limit).next(I=>{I.forEach(F=>{const z=ye.fromSegments(F.documentKey);o.has(z)||(o=o.add(z),u.push(z))})}))}).next(()=>u)}return Q.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=xK(yt.create(e.filters,"and")).map(r=>xE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,u){const c=(n!=null?n.length:1)*Math.max(r.length,s.length),h=c/(n!=null?n.length:1),p=[];for(let m=0;m<c;++m){const _=n?this.dn(n[m/h]):tg,A=this.An(e,_,r[m%h],i),T=this.Rn(e,_,s[m%h],o),k=u.map(x=>this.An(e,_,x,!0));p.push(...this.createRange(A,T,k))}return p}An(e,n,r,i){const s=new au(e,ye.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new au(e,ye.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new OC(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const u of s)r.rn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return Q.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let h=new Tt(Dt.comparator),p=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:h=h.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new dh;for(const i of tu(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);ou.vt.It(s,o)}return r.zt()}dn(e){const n=new dh;return ou.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new dh;return ou.vt.It(Mu(this.databaseId,n),r.Yt(function(s){const o=tu(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new dh);let s=0;for(const o of tu(e)){const u=r[s++];for(const c of i)if(this.fn(n,o.fieldPath)&&Pf(u))i=this.gn(i,o,u);else{const h=c.Yt(o.kind);ou.vt.It(u,h)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const u of i){const c=new dh;c.seed(u.zt()),ou.vt.It(o,c.Yt(n.kind)),s.push(c)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof et&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=hh(e),i=Ul(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return Q.forEach(s,u=>i.get([u.indexId,this.uid]).next(c=>{o.push(function(p,m){const _=m?new If(m.sequenceNumber,new Kr(Bu(m.readTime),new ye(is(m.documentKey)),m.largestBatchId)):If.empty(),A=p.fields.map(([T,k])=>new Pg(Dt.fromServerFormat(T),k));return new wy(p.indexId,p.collectionGroup,A,_)}(u,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:je(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=hh(e),s=Ul(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(u=>Q.forEach(u,c=>s.put(CC(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?Q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),Q.forEach(u,c=>this.wn(e,i,c).next(h=>{const p=this.Sn(s,c);return h.isEqual(p)?Q.resolve():this.bn(e,s,c,h,p)}))))})}Dn(e,n,r,i){return Fl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Fl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=Fl(e);let s=new Tt(bo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,u)=>{s=s.add(new au(r.indexId,n,u.arrayValue,u.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Tt(bo);const i=this.Vn(n,e);if(i==null)return r;const s=SE(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Pf(o))for(const u of o.arrayValue.values||[])r=r.add(new au(n.indexId,e.key,this.dn(u),i))}else r=r.add(new au(n.indexId,e.key,tg,i));return r}bn(e,n,r,i,s){oe("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,h,p,m,_){const A=c.getIterator(),T=h.getIterator();let k=Vl(A),x=Vl(T);for(;k||x;){let P=!1,R=!1;if(k&&x){const I=p(k,x);I<0?R=!0:I>0&&(P=!0)}else k!=null?R=!0:P=!0;P?(m(x),x=Vl(T)):R?(_(k),k=Vl(A)):(k=Vl(A),x=Vl(T))}}(i,s,bo,u=>{o.push(this.Dn(e,n,r,u))},u=>{o.push(this.vn(e,n,r,u))}),Q.waitFor(o)}yn(e){let n=1;return Ul(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,u)=>bo(o,u)).filter((o,u,c)=>!u||bo(o,c[u-1])!==0);const i=[];i.push(e);for(const o of r){const u=bo(o,e),c=bo(o,n);if(u===0)i[0]=e.Zt();else if(u>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const u=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,tg,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,tg,[]];s.push(IDBKeyRange.bound(u,c))}return s}Cn(e,n){return bo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(MC)}getMinOffset(e,n){return Q.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Ee())).next(MC)}}function LC(t){return Tn(t,"collectionParents")}function Fl(t){return Tn(t,"indexEntries")}function hh(t){return Tn(t,"indexConfiguration")}function Ul(t){return Tn(t,"indexState")}function MC(t){Re(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;WI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Tr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Tr(e,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let u=0;const c=r.J({range:o},(p,m,_)=>(u++,_.delete()));s.push(c.next(()=>{Re(u===1)}));const h=[];for(const p of n.mutations){const m=gD(e,p.key.path,n.batchId);s.push(i.delete(m)),h.push(p.key)}return Q.waitFor(s).next(()=>h)}function Ay(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(41943040,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);class A_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new A_(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Hl(e),o=xo(e);return o.add({}).next(u=>{Re(typeof u=="number");const c=new ZI(u,n,r,i),h=function(A,T,k){const x=k.baseMutations.map(R=>xf(A.ct,R)),P=k.mutations.map(R=>xf(A.ct,R));return{userId:T,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:x,mutations:P}}(this.serializer,this.userId,c),p=[];let m=new Tt((_,A)=>je(_.canonicalString(),A.canonicalString()));for(const _ of i){const A=gD(this.userId,_.key.path,u);m=m.add(_.key.path.popLast()),p.push(o.put(h)),p.push(s.put(A,_8))}return m.forEach(_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[u]=c.keys()}),Q.waitFor(p).next(()=>c)})}lookupMutationBatch(e,n){return xo(e).get(n).next(r=>r?(Re(r.userId===this.userId),su(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?Q.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return xo(e).J({index:"userMutationsIndex",range:i},(o,u,c)=>{u.userId===this.userId&&(Re(u.batchId>=r),s=su(this.serializer,u)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xo(e).U("userMutationsIndex",n).next(r=>r.map(i=>su(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cg(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Hl(e).J({range:i},(o,u,c)=>{const[h,p,m]=o,_=is(p);if(h===this.userId&&n.path.isEqual(_))return xo(e).get(m).next(A=>{if(!A)throw Ee();Re(A.userId===this.userId),s.push(su(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(je);const i=[];return n.forEach(s=>{const o=Cg(this.userId,s.path),u=IDBKeyRange.lowerBound(o),c=Hl(e).J({range:u},(h,p,m)=>{const[_,A,T]=h,k=is(A);_===this.userId&&s.path.isEqual(k)?r=r.add(T):m.done()});i.push(c)}),Q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Cg(this.userId,r),o=IDBKeyRange.lowerBound(s);let u=new Tt(je);return Hl(e).J({range:o},(c,h,p)=>{const[m,_,A]=c,T=is(_);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(u=u.add(A)):p.done()}).next(()=>this.xn(e,u))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(xo(e).get(s).next(o=>{if(o===null)throw Ee();Re(o.userId===this.userId),r.push(su(this.serializer,o))}))}),Q.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return pL(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),Q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Hl(e).J({range:r},(s,o,u)=>{if(s[0]===this.userId){const c=is(s[1]);i.push(c)}else u.done()}).next(()=>{Re(i.length===0)})})}containsKey(e,n){return mL(e,this.userId,n)}Nn(e){return gL(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mL(t,e,n){const r=Cg(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Hl(t).J({range:s,H:!0},(u,c,h)=>{const[p,m,_]=u;p===e&&m===i&&(o=!0),h.done()}).next(()=>o)}function xo(t){return Tn(t,"mutations")}function Hl(t){return Tn(t,"documentMutations")}function gL(t){return Tn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $u(0)}static kn(){return new $u(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new $u(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Ce.fromTimestamp(new Mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>jl(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Re(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return jl(e).J((o,u)=>{const c=Ph(u);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Q.waitFor(s)).next(()=>i)}forEachTarget(e,n){return jl(e).J((r,i)=>{const s=Ph(i);n(s)})}qn(e){return FC(e).get("targetGlobalKey").next(n=>(Re(n!==null),n))}Qn(e,n){return FC(e).put("targetGlobalKey",n)}Kn(e,n){return jl(e).put(dL(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Vu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return jl(e).J({range:i,index:"queryTargetsIndex"},(o,u,c)=>{const h=Ph(u);ip(n,h.target)&&(s=h,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Vo(e);return n.forEach(o=>{const u=dr(o.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,o))}),Q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Vo(e);return Q.forEach(n,s=>{const o=dr(s.path);return Q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Vo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vo(e);let s=ze();return i.J({range:r,H:!0},(o,u,c)=>{const h=is(o[1]),p=new ye(h);s=s.add(p)}).next(()=>s)}containsKey(e,n){const r=dr(n.path),i=IDBKeyRange.bound([r],[lD(r)],!1,!0);let s=0;return Vo(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,u],c,h)=>{o!==0&&(s++,h.done())}).next(()=>s>0)}ot(e,n){return jl(e).get(n).next(r=>r?Ph(r):null)}}function jl(t){return Tn(t,"targets")}function FC(t){return Tn(t,"targetGlobal")}function Vo(t){return Tn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC([t,e],[n,r]){const i=je(t,n);return i===0?je(e,r):i}class DK{constructor(e){this.Un=e,this.buffer=new Tt(UC),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ra(n)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Sa(n)}await this.Hn(3e5)})}}class MK{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Ar.oe);const r=new DK(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(VC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VC):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,u,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,u=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Wl()<=Ye.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(u-o)+`ms
	Removed ${s} targets in `+(c-u)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function VK(t,e){return new MK(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,n){this.db=e,this.garbageCollector=VK(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return ng(e,r)}removeReference(e,n,r){return ng(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return ng(e,n)}nr(e,n){return function(i,s){let o=!1;return gL(i).Y(u=>mL(i,u,s).next(c=>(c&&(o=!0),Q.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,u)=>{if(u<=n){const c=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ce.min()),Vo(e).delete(function(m){return[0,dr(m.path)]}(o))))});i.push(c)}}).next(()=>Q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return ng(e,n)}tr(e,n){const r=Vo(e);let i,s=Ar.oe;return r.J({index:"documentTargetsIndex"},([o,u],{path:c,sequenceNumber:h})=>{o===0?(s!==Ar.oe&&n(new ye(is(i)),s),s=h,i=c):s=Ar.oe}).next(()=>{s!==Ar.oe&&n(new ye(is(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ng(t,e){return Vo(t).put(function(r,i){return{targetId:0,path:dr(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ja(e).put(r)}removeEntry(e,n,r){return Ja(e).delete(function(s,o){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Sy(o),u[u.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=bt.newInvalidDocument(n);return Ja(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fh(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:bt.newInvalidDocument(n)};return Ja(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fh(n))},(i,s)=>{r={document:this.ir(n,s),size:Ay(s)}}).next(()=>r)}getEntries(e,n){let r=Cr();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Cr(),i=new Pt(ye.comparator);return this._r(e,n,(s,o)=>{const u=this.ir(s,o);r=r.insert(s,u),i=i.insert(s,Ay(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return Q.resolve();let i=new Tt($C);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(fh(i.first()),fh(i.last())),o=i.getIterator();let u=o.getNext();return Ja(e).J({index:"documentKeyIndex",range:s},(c,h,p)=>{const m=ye.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&$C(u,m)<0;)r(u,null),u=o.getNext();u&&u.isEqual(m)&&(r(u,h),u=o.hasNext()?o.getNext():null),u?p.$(fh(u)):p.done()}).next(()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,u=[o.popLast().toArray(),o.lastSegment(),Sy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ja(e).U(IDBKeyRange.bound(u,c,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let p=Cr();for(const m of h){const _=this.ir(ye.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(op(n,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p})}getAllFromCollectionGroup(e,n,r,i){let s=Cr();const o=BC(n,r),u=BC(n,Kr.max());return Ja(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(c,h,p)=>{const m=this.ir(ye.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(m.key,m),s.size===i&&p.done()}).next(()=>s)}newChangeBuffer(e){return new jK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jC(e).get("remoteDocumentGlobalKey").next(n=>(Re(!!n),n))}rr(e,n){return jC(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=IK(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ce.min())))return r}return bt.newInvalidDocument(e)}}function _L(t){return new UK(t)}class jK extends yL{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Aa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Tt((s,o)=>je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const u=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,u.readTime)),o.isValidDocument()){const c=AC(this.cr.serializer,o);i=i.add(s.path.popLast());const h=Ay(c);r+=h-u.size,n.push(this.cr.addEntry(e,s,c))}else if(r-=u.size,this.trackRemovals){const c=AC(this.cr.serializer,o.convertToNoDocument(Ce.min()));n.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jC(t){return Tn(t,"remoteDocumentGlobal")}function Ja(t){return Tn(t,"remoteDocumentsV14")}function fh(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BC(t,e){const n=e.documentKey.path.toArray();return[t,Sy(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $C(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=je(n[s],r[s]),i)return i;return i=je(n.length,r.length),i||(i=je(n[n.length-2],r[r.length-2]),i||je(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wh(r.mutation,i,Pr.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ze()){const i=ss();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Rh();return s.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ss();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ze()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,i){let s=Cr();const o=zh(),u=function(){return zh()}();return n.forEach((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ao)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Wh(p.mutation,h,p.mutation.getFieldMask(),Mt.now())):o.set(h.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return u.set(h,new BK(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=zh();let i=new Pt((o,u)=>o-u),s=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||Pr.empty();p=u.applyToLocalView(h,p),r.set(c,p);const m=(i.get(u.batchId)||ze()).add(c);i=i.insert(u.batchId,m)})}).next(()=>{const o=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,p=c.value,m=FD();p.forEach(_=>{if(!s.has(_)){const A=qD(n.get(_),r.get(_));A!==null&&m.set(_,A),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(ss());let u=-1,c=s;return o.next(h=>Q.forEach(h,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?Q.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,ze())).next(p=>({batchId:u,changes:VD(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let i=Rh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Rh();return this.indexManager.getCollectionParents(e,s).next(u=>Q.forEach(u,c=>{const h=function(m,_){return new oo(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,bt.newInvalidDocument(p)))});let u=Rh();return o.forEach((c,h)=>{const p=s.get(c);p!==void 0&&Wh(p.mutation,h,Pr.empty(),Mt.now()),op(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:rn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:iS(i.bundledQuery),readTime:rn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{constructor(){this.overlays=new Pt(ye.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ss();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=ss(),s=n.length+1,o=new ye(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pt((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=ss(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const u=ss(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>u.set(h,p)),!(u.size()>=i)););return Q.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tS(n,r));let s=this.Ir.get(n);s===void 0&&(s=ze(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.Tr=new Tt(An.Er),this.dr=new Tt(An.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new An(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new An(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ye(new Ze([])),r=new An(n,e),i=new An(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new Ze([])),r=new An(n,e),i=new An(n,e+1);let s=ze();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new An(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class An{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||je(e.wr,n.wr)}static Ar(e,n){return je(e.wr,n.wr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(An.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ZI(s,n,r,i);this.mutationQueue.push(o);for(const u of i)this.br=this.br.add(new An(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new An(n,0),i=new An(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const u=this.Dr(o.wr);s.push(u)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(je);return n.forEach(i=>{const s=new An(i,0),o=new An(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],u=>{r=r.add(u.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const o=new An(new ye(s),0);let u=new Tt(je);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(c.wr)),!0)},o),Q.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,i=>{const s=new An(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new An(n,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e){this.Mr=e,this.docs=function(){return new Pt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Cr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Cr();const o=n.path,u=new ye(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||WI(dD(p),r)<=0||(i.has(p.key)||op(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ee()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KK(this)}getSize(e){return Q.resolve(this.size)}}class KK extends yL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.persistence=e,this.Nr=new Aa(n=>Vu(n),ip),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new aS,this.targetCount=0,this.kr=$u.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $u(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ar(0),this.Kr=!1,this.Kr=!0,this.$r=new WK,this.referenceDelegate=e(this),this.Ur=new HK(this),this.indexManager=new kK,this.remoteDocumentCache=function(i){return new GK(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cL(n),this.Gr=new $K(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qK(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new QK(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class QK extends fD{constructor(e){super(),this.currentSequenceNumber=e}}class P_{constructor(e){this.persistence=e,this.Jr=new aS,this.Yr=null}static Zr(e){return new P_(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e){this.serializer=e}O(e,n,r,i){const s=new w_("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0}),c.createObjectStore("documentMutations")}(e),zC(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=Q.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),zC(e)),o=o.next(()=>function(c){const h=c.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,h){return h.store("mutations").U().next(p=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nC,{unique:!0});const m=h.store("mutations"),_=p.map(A=>m.put(A));return Q.waitFor(_)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){const h=c.createObjectStore("documentOverlays",{keyPath:x8});h.createIndex("collectionPathOverlayIndex",k8,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",N8,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:v8});h.createIndex("documentKeyIndex",w8),h.createIndex("collectionGroupIndex",E8)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:A8}).createIndex("sequenceNumberIndex",P8,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:C8}).createIndex("documentKeyIndex",b8,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Ay(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>Q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(u=>Q.forEach(u,c=>{Re(c.userId===s.userId);const h=su(this.serializer,c);return pL(e,s.userId,h).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,u)=>{const c=new Ze(o),h=function(m){return[0,dr(m)]}(c);s.push(n.get(h).next(p=>p?Q.resolve():(m=>n.put({targetId:0,path:dr(m),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Q.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:R8});const r=n.store("collectionParents"),i=new oS,s=o=>{if(i.add(o)){const u=o.lastSegment(),c=o.popLast();return r.put({collectionId:u,parent:dr(c)})}};return n.store("remoteDocuments").J({H:!0},(o,u)=>{const c=new Ze(o);return s(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,u,c],h)=>{const p=is(u);return s(p.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=Ph(i),o=dL(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const u=n.store("remoteDocumentsV14"),c=function(m){return m.document?new ye(Ze.fromString(m.document.name).popFirst(5)):m.noDocument?ye.fromSegments(m.noDocument.path):m.unknownDocument?ye.fromSegments(m.unknownDocument.path):Ee()}(o).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(u.put(h))}).next(()=>Q.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=_L(this.serializer),s=new wL(P_.Zr,this.serializer.ct);return r.U().next(o=>{const u=new Map;return o.forEach(c=>{var h;let p=(h=u.get(c.userId))!==null&&h!==void 0?h:ze();su(this.serializer,c).keys().forEach(m=>p=p.add(m)),u.set(c.userId,p)}),Q.forEach(u,(c,h)=>{const p=new Cn(h),m=R_.lt(this.serializer,p),_=s.getIndexManager(p),A=A_.lt(p,this.serializer,_,s.referenceDelegate);return new vL(i,A,m,_).recalculateAndSaveOverlaysForDocumentKeys(new RE(n,Ar.oe),c).next()})})}}function zC(t){t.createObjectStore("targetDocuments",{keyPath:I8}).createIndex("documentTargetsIndex",S8,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T8,{unique:!0}),t.createObjectStore("targetGlobal")}const Jw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uS{constructor(e,n,r,i,s,o,u,c,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=u,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!uS.D())throw new ie(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FK(this,i),this.Ai=n+"main",this.serializer=new cL(c),this.Ri=new us(this.Ai,this.hi,new YK(this.serializer)),this.$r=new RK,this.Ur=new OK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_L(this.serializer),this.Gr=new SK,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&nn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(J.FAILED_PRECONDITION,Jw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ar(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ra(e))return oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ph(e).get("owner").next(n=>Q.resolve(this.vi(n)))}Ci(e){return rg(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Tn(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(u=>s.indexOf(u)===-1);return Q.forEach(o,u=>r.delete(u.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Q.resolve(!0):ph(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ie(J.FAILED_PRECONDITION,Jw);return!1}}return!(!this.networkEnabled||!this.inForeground)||rg(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||o&&u)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&oe("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new RE(e,Ar.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>rg(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return A_.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return R_.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){oe("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===17?L8:c===16?D8:c===15?GI:c===14?vD:c===13?_D:c===12?O8:c===11?yD:void Ee()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,u=>(o=new RE(u,this.Qr?this.Qr.next():Ar.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ie(J.FAILED_PRECONDITION,hD);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(u=>(o.raiseOnCommittedEvent(),u))}Ki(e){return ph(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ie(J.FAILED_PRECONDITION,Jw)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ph(e).put("owner",n)}static D(){return us.D()}bi(e){const n=ph(e);return n.get("owner").next(r=>this.vi(r)?(oe("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Q.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(nn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;YN()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ph(t){return Tn(t,"owner")}function rg(t){return Tn(t,"clientMetadata")}function lS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ze(),i=ze();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return YN()?8:pD(Wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new JK;return this.Xi(e,n,o).next(u=>{if(s.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Wl()<=Ye.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Wl()<=Ye.DEBUG&&oe("QueryEngine","Query:",ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wl()<=Ye.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):Q.resolve())}Yi(e,n){if(mC(n))return Q.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Iy(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ze(...s);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,u);return this.ns(n,h,o,c.readTime)?this.Yi(e,Iy(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,i){return mC(n)||i.isEqual(Ce.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Q.resolve(null):(Wl()<=Ye.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(n)),this.rs(e,o,n,cD(i,-1)).next(u=>u))})}ts(e,n){let r=new Tt(LD(e));return n.forEach((i,s)=>{op(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Wl()<=Ye.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ql(n)),this.Ji.getDocumentsMatchingQuery(e,n,Kr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Pt(je),this._s=new Aa(s=>Vu(s),ip),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function TL(t,e,n,r){return new XK(t,e,n,r)}async function IL(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],u=[];let c=ze();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of s){u.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:u}))})})}function ZK(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,h,p){const m=h.batch,_=m.keys();let A=Q.resolve();return _.forEach(T=>{A=A.next(()=>p.getEntry(c,T)).next(k=>{const x=h.docVersions.get(T);Re(x!==null),k.version.compareTo(x)<0&&(m.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ze();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function SL(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function eH(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const _=i.get(m);if(!_)return;u.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,m)));let A=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Yt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),i=i.insert(m,A),function(k,x,P){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(_,A,p)&&u.push(n.Ur.updateTargetData(s,A))});let c=Cr(),h=ze();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(RL(s,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(Ce.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return Q.waitFor(u).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.os=i,s))}function RL(t,e,n){let r=ze(),i=ze();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Cr();return n.forEach((u,c)=>{const h=s.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(Ce.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):oe("LocalStore","Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function tH(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $c(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function zc(t,e,n){const r=_e(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ra(o))throw o;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Py(t,e,n){const r=_e(t);let i=Ce.min(),s=ze();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=_e(c),_=m._s.get(p);return _!==void 0?Q.resolve(m.os.get(_)):m.Ur.getTargetData(h,p)}(r,o,hr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ce.min(),n?s:ze())).next(u=>(CL(r,DD(e),u),{documents:u,Ts:s})))}function AL(t,e){const n=_e(t),r=_e(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function PL(t,e){const n=_e(t),r=n.us.get(e)||Ce.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,cD(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CL(n,e,i),i))}function CL(t,e,n){let r=t.us.get(e)||Ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}async function nH(t,e,n,r){const i=_e(t);let s=ze(),o=Cr();for(const h of n){const p=e.Es(h.metadata.name);h.document&&(s=s.add(p));const m=e.ds(h);m.setReadTime(e.As(h.metadata.readTime)),o=o.insert(p,m)}const u=i.cs.newChangeBuffer({trackRemovals:!0}),c=await $c(i,function(p){return hr(sd(Ze.fromString(`__bundle__/docs/${p}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>RL(h,u,o).next(p=>(u.apply(h),p)).next(p=>i.Ur.removeMatchingKeysForTargetId(h,c.targetId).next(()=>i.Ur.addMatchingKeys(h,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,p.Ps,p.Is)).next(()=>p.Ps)))}async function rH(t,e,n=ze()){const r=await $c(t,hr(iS(e.bundledQuery))),i=_e(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=rn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const u=r.withResumeToken(Yt.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(u.targetId,u),i.Ur.updateTargetData(s,u).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function WC(t,e){return`firestore_clients_${t}_${e}`}function qC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Xw(t,e){return`firestore_targets_${t}_${e}`}class Cy{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new ie(i.error.code,i.error.message))),o?new Cy(e,n,i.state,s):(nn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ie(r.error.code,r.error.message))),s?new qh(e,r.state,i):(nn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class by{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=YI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=mD(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new by(e,s):(nn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class dS{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new dS(n.clientId,n.onlineState):(nn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class UE{constructor(){this.activeTargetIds=YI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zw{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pt(je),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=WC(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new UE),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(WC(this.persistenceKey,r));if(i){const s=by.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Xw(this.persistenceKey,e));if(i){const s=qh.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xw(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return oe("SharedClientState","READ",e,n),n}setItem(e,n){oe("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(oe("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=Ar.oe;if(s!=null)try{const u=JSON.parse(s);Re(typeof u=="number"),o=u}catch(u){nn("SharedClientState","Failed to read sequence number from WebStorage",u)}return o}(n.newValue);r!==Ar.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new Cy(this.currentUser,e,n,r),s=qC(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=qC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Xw(this.persistenceKey,e),s=new qh(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return by.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Cy.Rs(new Cn(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return qh.Rs(i,n)}Ls(e){return dS.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],u=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||u.push(c)}),this.syncEngine.io(o,u).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=YI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bL{constructor(){this.so=new UE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new UE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig=null;function e0(){return ig===null?ig=function(){return 268435456+Math.round(2147483648*Math.random())}():ig++,"0x"+ig.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class aH extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const u=e0(),c=this.xo(n,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,c,h,i).then(p=>(oe("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw fs("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,o,u){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+id}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=sH[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=e0();return new Promise((o,u)=>{const c=new nD;c.setWithCredentials(!0),c.listenOnce(rD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ag.NO_ERROR:const p=c.getResponseJson();oe(Qn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Ag.TIMEOUT:oe(Qn,`RPC '${e}' ${s} timed out`),u(new ie(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ag.HTTP_ERROR:const m=c.getStatus();if(oe(Qn,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_==null?void 0:_.error;if(A&&A.status&&A.message){const T=function(x){const P=x.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(P)>=0?P:J.UNKNOWN}(A.status);u(new ie(T,A.message))}else u(new ie(J.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ie(J.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{oe(Qn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);oe(Qn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=e0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=oD(),u=sD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");oe(Qn,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=o.createWebChannel(p,c);let _=!1,A=!1;const T=new oH({Io:x=>{A?oe(Qn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(_||(oe(Qn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),oe(Qn,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},To:()=>m.close()}),k=(x,P,R)=>{x.listen(P,I=>{try{R(I)}catch(F){setTimeout(()=>{throw F},0)}})};return k(m,Sh.EventType.OPEN,()=>{A||(oe(Qn,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),k(m,Sh.EventType.CLOSE,()=>{A||(A=!0,oe(Qn,`RPC '${e}' stream ${i} transport closed`),T.So())}),k(m,Sh.EventType.ERROR,x=>{A||(A=!0,fs(Qn,`RPC '${e}' stream ${i} transport errored:`,x),T.So(new ie(J.UNAVAILABLE,"The operation could not be completed")))}),k(m,Sh.EventType.MESSAGE,x=>{var P;if(!A){const R=x.data[0];Re(!!R);const I=R,F=I.error||((P=I[0])===null||P===void 0?void 0:P.error);if(F){oe(Qn,`RPC '${e}' stream ${i} received error:`,F);const z=F.status;let G=function(L){const V=ln[L];if(V!==void 0)return HD(V)}(z),C=F.message;G===void 0&&(G=J.INTERNAL,C="Unknown error status: "+z+" with message "+F.message),A=!0,T.So(new ie(G,C)),m.close()}else oe(Qn,`RPC '${e}' stream ${i} received:`,R),T.bo(R)}}),k(u,iD.STAT_EVENT,x=>{x.stat===IE.PROXY?oe(Qn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===IE.NOPROXY&&oe(Qn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return typeof window<"u"?window:null}function Og(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t){return new fK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,n,r,i,s,o,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ie(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uH extends kL{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gK(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?rn(o.readTime):Ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=DE(this.serializer),n.addTarget=function(s,o){let u;const c=o.target;if(u=Ey(c)?{documents:iL(s,c)}:{query:sL(s,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=XD(s,o.resumeToken);const h=NE(s,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ce.min())>0){u.readTime=Bc(s,o.snapshotVersion.toTimestamp());const h=NE(s,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=_K(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=DE(this.serializer),n.removeTarget=e,this.a_(n)}}class lH extends kL{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yK(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=DE(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>xf(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ie(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,OE(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(J.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,OE(n,r),i,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nn(n),this.D_=!1):oe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Pa(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=_e(c);h.L_.add(4),await ud(h),h.q_.set("Unknown"),h.L_.delete(4),await dp(h)}(this))})}),this.q_=new dH(r,i)}}async function dp(t){if(Pa(t))for(const e of t.B_)await e(!0)}async function ud(t){for(const e of t.B_)await e(!1)}function C_(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mS(n)?pS(n):cd(n).r_()&&fS(n,e))}function Wc(t,e){const n=_e(t),r=cd(n);n.N_.delete(e),r.r_()&&NL(n,e),n.N_.size===0&&(r.r_()?r.o_():Pa(n)&&n.q_.set("Unknown"))}function fS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cd(t).A_(e)}function NL(t,e){t.Q_.xe(e),cd(t).R_(e)}function pS(t){t.Q_=new lK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),cd(t).start(),t.q_.v_()}function mS(t){return Pa(t)&&!cd(t).n_()&&t.N_.size>0}function Pa(t){return _e(t).L_.size===0}function OL(t){t.Q_=void 0}async function fH(t){t.q_.set("Online")}async function pH(t){t.N_.forEach((e,n)=>{fS(t,e)})}async function mH(t,e){OL(t),mS(t)?(t.q_.M_(e),pS(t)):t.q_.set("Unknown")}async function gH(t,e,n){if(t.q_.set("Online"),e instanceof JD&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const u of s.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,o),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xy(t,r)}else if(e instanceof Ng?t.Q_.Ke(e):e instanceof YD?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ce.min()))try{const r=await SL(t.localStore);n.compareTo(r)>=0&&await function(s,o){const u=s.Q_.rt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const p=s.N_.get(c);if(!p)return;s.N_.set(c,p.withResumeToken(Yt.EMPTY_BYTE_STRING,p.snapshotVersion)),NL(s,c);const m=new Bs(p.target,c,h,p.sequenceNumber);fS(s,m)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await xy(t,r)}}async function xy(t,e,n){if(!Ra(e))throw e;t.L_.add(1),await ud(t),t.q_.set("Offline"),n||(n=()=>SL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dp(t)})}function DL(t,e){return e().catch(n=>xy(t,n,e))}async function ld(t){const e=_e(t),n=pa(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yH(e);)try{const i=await tH(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,_H(e,i)}catch(i){await xy(e,i)}LL(e)&&ML(e)}function yH(t){return Pa(t)&&t.O_.length<10}function _H(t,e){t.O_.push(e);const n=pa(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LL(t){return Pa(t)&&!pa(t).n_()&&t.O_.length>0}function ML(t){pa(t).start()}async function vH(t){pa(t).p_()}async function wH(t){const e=pa(t);for(const n of t.O_)e.m_(n.mutations)}async function EH(t,e,n){const r=t.O_.shift(),i=eS.from(r,e,n);await DL(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ld(t)}async function TH(t,e){e&&pa(t).V_&&await async function(r,i){if(function(o){return KD(o)&&o!==J.ABORTED}(i.code)){const s=r.O_.shift();pa(r).s_(),await DL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ld(r)}}(t,e),LL(t)&&ML(t)}async function KC(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=Pa(n);n.L_.add(3),await ud(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dp(n)}async function jE(t,e){const n=_e(t);e?(n.L_.delete(2),await dp(n)):e||(n.L_.add(2),await ud(n),n.q_.set("Unknown"))}function cd(t){return t.K_||(t.K_=function(n,r,i){const s=_e(n);return s.w_(),new uH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:fH.bind(null,t),Ro:pH.bind(null,t),mo:mH.bind(null,t),d_:gH.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mS(t)?pS(t):t.q_.set("Unknown")):(await t.K_.stop(),OL(t))})),t.K_}function pa(t){return t.U_||(t.U_=function(n,r,i){const s=_e(n);return s.w_(),new lH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vH.bind(null,t),mo:TH.bind(null,t),f_:wH.bind(null,t),g_:EH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ld(t)):(await t.U_.stop(),t.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,u=new gS(e,n,o,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dd(t,e){if(nn("AsyncQueue",`${e}: ${t}`),Ra(t))return new ie(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Rh(),this.sortedSet=new Pt(this.comparator)}static emptySet(e){return new Ec(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.W_=new Pt(ye.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qc{constructor(e,n,r,i,s,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new qc(e,n,Ec.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class SH{constructor(){this.queries=QC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_e(n),s=i.queries;i.queries=QC(),s.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new ie(J.ABORTED,"Firestore shutting down"))}}function QC(){return new Aa(t=>OD(t),sp)}async function yS(t,e){const n=_e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new IH,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const u=dd(o,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vS(n)}async function _S(t,e){const n=_e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RH(t,e){const n=_e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const u of o.j_)u.X_(i)&&(r=!0);o.z_=i}}r&&vS(n)}function AH(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function vS(t){t.Y_.forEach(e=>{e.next()})}var BE,YC;(YC=BE||(BE={})).ea="default",YC.Cache="cache";class wS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==BE.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.serializer=e}Es(e){return ls(this.serializer,e)}ds(e){return e.metadata.exists?rL(this.serializer,e.document,!1):bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return rn(e)}}class CH{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VL(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=Ze.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new JC(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const u=(n.get(o)||ze()).add(s);n.set(o,u)}}return n}async complete(){const e=await nH(this.localStore,new JC(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const r of this.queries)await rH(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function VL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.key=e}}class UL{constructor(e){this.key=e}}class jL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ze(),this.mutatedKeys=ze(),this.Aa=LD(e),this.Ra=new Ec(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new HC,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const _=i.get(p),A=op(this.query,m)?m:null,T=!!_&&this.mutatedKeys.has(_.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;_&&A?_.data.isEqual(A.data)?T!==k&&(r.track({type:3,doc:A}),x=!0):this.ga(_,A)||(r.track({type:2,doc:A}),x=!0,(c&&this.Aa(A,c)>0||h&&this.Aa(A,h)<0)&&(u=!0)):!_&&A?(r.track({type:0,doc:A}),x=!0):_&&!A&&(r.track({type:1,doc:_}),x=!0,(c||h)&&(u=!0)),x&&(A?(o=o.add(A),s=k?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:u,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(A,T){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return k(A)-k(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new qc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new HC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ze(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new UL(r))}),this.da.forEach(r=>{e.has(r)||n.push(new FL(r))}),n}ba(e){this.Ta=e.Ts,this.da=ze();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xH{constructor(e){this.key=e,this.va=!1}}class kH{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Aa(u=>OD(u),sp),this.Ma=new Map,this.xa=new Set,this.Oa=new Pt(ye.comparator),this.Na=new Map,this.La=new aS,this.Ba={},this.ka=new Map,this.qa=$u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function NH(t,e,n=!0){const r=b_(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await BL(r,e,n,!0),i}async function OH(t,e){const n=b_(t);await BL(n,e,!0,!1)}async function BL(t,e,n,r){const i=await $c(t.localStore,hr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await ES(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&C_(t.remoteStore,i),u}async function ES(t,e,n,r,i){t.Ka=(m,_,A)=>async function(k,x,P,R){let I=x.view.ma(P);I.ns&&(I=await Py(k.localStore,x.query,!1).then(({documents:C})=>x.view.ma(C,I)));const F=R&&R.targetChanges.get(x.targetId),z=R&&R.targetMismatches.get(x.targetId)!=null,G=x.view.applyChanges(I,k.isPrimaryClient,F,z);return $E(k,x.targetId,G.wa),G.snapshot}(t,m,_,A);const s=await Py(t.localStore,e,!0),o=new jL(e,s.Ts),u=o.ma(s.documents),c=lp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(u,t.isPrimaryClient,c);$E(t,n,h.wa);const p=new bH(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function DH(t,e,n){const r=_e(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!sp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Wc(r.remoteStore,i.targetId),Gc(r,i.targetId)}).catch(Sa)):(Gc(r,i.targetId),await zc(r.localStore,i.targetId,!0))}async function LH(t,e){const n=_e(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wc(n.remoteStore,r.targetId))}async function MH(t,e,n){const r=RS(t);try{const i=await function(o,u){const c=_e(o),h=Mt.now(),p=u.reduce((A,T)=>A.add(T.key),ze());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let T=Cr(),k=ze();return c.cs.getEntries(A,p).next(x=>{T=x,T.forEach((P,R)=>{R.isValidDocument()||(k=k.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,T)).next(x=>{m=x;const P=[];for(const R of u){const I=oK(R,m.get(R.key).overlayedDocument);I!=null&&P.push(new ao(R.key,I,SD(I.value.mapValue),Lt.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,P,u)}).next(x=>{_=x;const P=x.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(A,x.batchId,P)})}).then(()=>({batchId:_.batchId,changes:VD(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,u,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Pt(je)),h=h.insert(u,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await uo(r,i.changes),await ld(r.remoteStore)}catch(i){const s=dd(i,"Failed to persist write");n.reject(s)}}async function $L(t,e){const n=_e(t);try{const r=await eH(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Re(o.va):i.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await uo(n,r,e)}catch(r){await Sa(r)}}function XC(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const u=o.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(o,u){const c=_e(o);c.onlineState=u;let h=!1;c.queries.forEach((p,m)=>{for(const _ of m.j_)_.Z_(u)&&(h=!0)}),h&&vS(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VH(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pt(ye.comparator);o=o.insert(s,bt.newNoDocument(s,Ce.min()));const u=ze().add(s),c=new up(Ce.min(),new Map,new Pt(je),o,u);await $L(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),SS(r)}else await zc(r.localStore,e,!1).then(()=>Gc(r,e,n)).catch(Sa)}async function FH(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await ZK(n.localStore,e);IS(n,r,null),TS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await uo(n,i)}catch(i){await Sa(i)}}async function UH(t,e,n){const r=_e(t);try{const i=await function(o,u){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,u).next(m=>(Re(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);IS(r,e,n),TS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await uo(r,i)}catch(i){await Sa(i)}}async function jH(t,e){const n=_e(t);Pa(n.remoteStore)||oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const u=_e(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>u.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=dd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function TS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function IS(t,e,n){const r=_e(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Gc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zL(t,r)})}function zL(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Wc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),SS(t))}function $E(t,e,n){for(const r of n)r instanceof FL?(t.La.addReference(r.key,e),BH(t,r)):r instanceof UL?(oe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zL(t,r.key)):Ee()}function BH(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(oe("SyncEngine","New document in limbo: "+n),t.xa.add(r),SS(t))}function SS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ye(Ze.fromString(e)),r=t.qa.next();t.Na.set(r,new xH(n)),t.Oa=t.Oa.insert(n,r),C_(t.remoteStore,new Bs(hr(sd(n.path)),r,"TargetPurposeLimboResolution",Ar.oe))}}async function uo(t,e,n){const r=_e(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){i.push(h);const m=cS.Wi(c.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(c,h){const p=_e(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Q.forEach(h,_=>Q.forEach(_.$i,A=>p.persistence.referenceDelegate.addReference(m,_.targetId,A)).next(()=>Q.forEach(_.Ui,A=>p.persistence.referenceDelegate.removeReference(m,_.targetId,A)))))}catch(m){if(!Ra(m))throw m;oe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const A=p.os.get(_),T=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(_,k)}}}(r.localStore,s))}async function $H(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await IL(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(u=>{u.forEach(c=>{c.reject(new ie(J.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uo(n,r.hs)}}function zH(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return ze().add(r.key);{let i=ze();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const u=n.Fa.get(o);i=i.unionWith(u.view.Va)}return i}}async function WH(t,e){const n=_e(t),r=await Py(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&$E(n,e.targetId,i.wa),i}async function qH(t,e){const n=_e(t);return PL(n.localStore,e).then(r=>uo(n,r))}async function GH(t,e,n,r){const i=_e(t),s=await function(u,c){const h=_e(u),p=_e(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",m=>p.Mn(m,c).next(_=>_?h.localDocuments.getDocuments(m,_):Q.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ld(i.remoteStore):n==="acknowledged"||n==="rejected"?(IS(i,e,r||null),TS(i,e),function(u,c){_e(_e(u).mutationQueue).On(c)}(i.localStore,e)):Ee(),await uo(i,s)):oe("SyncEngine","Cannot apply mutation batch with id: "+e)}async function KH(t,e){const n=_e(t);if(b_(n),RS(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await ZC(n,r.toArray());n.Qa=!0,await jE(n.remoteStore,!0);for(const s of i)C_(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Gc(n,o),zc(n.localStore,o,!0))),Wc(n.remoteStore,o)}),await i,await ZC(n,r),function(o){const u=_e(o);u.Na.forEach((c,h)=>{Wc(u.remoteStore,h)}),u.La.pr(),u.Na=new Map,u.Oa=new Pt(ye.comparator)}(n),n.Qa=!1,await jE(n.remoteStore,!1)}}async function ZC(t,e,n){const r=_e(t),i=[],s=[];for(const o of e){let u;const c=r.Ma.get(o);if(c&&c.length!==0){u=await $c(r.localStore,hr(c[0]));for(const h of c){const p=r.Fa.get(h),m=await WH(r,p);m.snapshot&&s.push(m.snapshot)}}else{const h=await AL(r.localStore,o);u=await $c(r.localStore,h),await ES(r,WL(h),o,!1,u.resumeToken)}i.push(u)}return r.Ca.d_(s),i}function WL(t){return ND(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function HH(t){return function(n){return _e(_e(n).persistence).Qi()}(_e(t).localStore)}async function QH(t,e,n,r){const i=_e(t);if(i.Qa)return void oe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await PL(i.localStore,DD(s[0])),u=up.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Yt.EMPTY_BYTE_STRING);await uo(i,o,u);break}case"rejected":await zc(i.localStore,e,!0),Gc(i,e,r);break;default:Ee()}}async function YH(t,e,n){const r=b_(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){oe("SyncEngine","Adding an already active target "+i);continue}const s=await AL(r.localStore,i),o=await $c(r.localStore,s);await ES(r,WL(s),o.targetId,!1,o.resumeToken),C_(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await zc(r.localStore,i,!1).then(()=>{Wc(r.remoteStore,i),Gc(r,i)}).catch(Sa)}}function b_(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$L.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VH.bind(null,e),e.Ca.d_=RH.bind(null,e.eventManager),e.Ca.$a=AH.bind(null,e.eventManager),e}function RS(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UH.bind(null,e),e}function JH(t,e,n){const r=_e(t);(async function(s,o,u){try{const c=await o.getMetadata();if(await function(A,T){const k=_e(A),x=rn(T.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",P=>k.Gr.getBundleMetadata(P,T.id)).then(P=>!!P&&P.createTime.compareTo(x)>=0)}(s.localStore,c))return await o.close(),u._completeWith(function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}}(c)),Promise.resolve(new Set);u._updateProgress(VL(c));const h=new CH(c,s.localStore,o.serializer);let p=await o.Ua();for(;p;){const _=await h.la(p);_&&u._updateProgress(_),p=await o.Ua()}const m=await h.complete();return await uo(s,m.Ia,void 0),await function(A,T){const k=_e(A);return k.persistence.runTransaction("Save bundle","readwrite",x=>k.Gr.saveBundleMetadata(x,T))}(s.localStore,c),u._completeWith(m.progress),Promise.resolve(m.Pa)}catch(c){return fs("SyncEngine",`Loading bundle failed with ${c}`),u._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class kf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return TL(this.persistence,new EL,e.initialUser,this.serializer)}Ga(e){return new wL(P_.Zr,this.serializer)}Wa(e){return new bL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kf.provider={build:()=>new kf};class qL extends kf{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await RS(this.Ja.syncEngine),await ld(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return TL(this.persistence,new EL,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new LK(r,e.asyncQueue,n)}Ha(e,n){const r=new g8(n,this.persistence);return new m8(e.asyncQueue,r)}Ga(e){const n=lS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new uS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,xL(),Og(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bL}}class XH extends qL{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Zw&&(this.sharedClientState.syncEngine={no:GH.bind(null,n),ro:QH.bind(null,n),io:YH.bind(null,n),Qi:HH.bind(null,n),eo:qH.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await KH(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=xL();if(!Zw.D(n))throw new ie(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Nf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$H.bind(null,this.syncEngine),await jE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new SH}()}createDatastore(e){const n=cp(e.databaseInfo.databaseId),r=function(s){return new aH(s)}(e.databaseInfo);return function(s,o,u,c){return new cH(s,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,u){return new hH(r,i,s,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>XC(this.syncEngine,n,0),function(){return GC.D()?new GC:new iH}())}createSyncEngine(e,n){return function(i,s,o,u,c,h,p){const m=new kH(i,s,o,u,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_e(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ud(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Nf.provider={build:()=>new Nf};function eb(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new jn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),r=Number(n);isNaN(r)&&this.ru(`length string (${n}) is not valid number`);const i=await this.iu(r);return new PH(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=_e(i),u={documents:s.map(m=>bf(o.serializer,m))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,Ze.emptyPath(),u,s.length),h=new Map;c.forEach(m=>{const _=mK(o.serializer,m);h.set(_.key.toString(),_)});const p=[];return s.forEach(m=>{const _=h.get(m.toString());Re(!!_),p.push(_)}),p}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ad(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ye.fromPath(r);this.mutations.push(new XI(i,this.precondition(i)))}),await async function(r,i){const s=_e(r),o={writes:i.map(u=>xf(s.serializer,u))};await s.Mo("Commit",s.serializer.databaseId,Ze.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ee();n=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new ie(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ce.min())?Lt.exists(!1):Lt.updateTime(n):Lt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ce.min()))throw new ie(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lt.updateTime(n)}return Lt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new hS(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new e7(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!rp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!KD(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=uD.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function t0(t,e){t.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IL(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AS(t);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>KC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>KC(e.remoteStore,i)),t._onlineComponents=e}async function AS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await t0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fs("Error using user provided cache. Falling back to memory cache: "+n),await t0(t,new kf)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await t0(t,new kf);return t._offlineComponents}async function k_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await tb(t,t._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await tb(t,new Nf))),t._onlineComponents}function GL(t){return AS(t).then(e=>e.persistence)}function PS(t){return AS(t).then(e=>e.localStore)}function KL(t){return k_(t).then(e=>e.remoteStore)}function CS(t){return k_(t).then(e=>e.syncEngine)}function r7(t){return k_(t).then(e=>e.datastore)}async function Kc(t){const e=await k_(t),n=e.eventManager;return n.onListen=NH.bind(null,e.syncEngine),n.onUnlisten=DH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LH.bind(null,e.syncEngine),n}function i7(t){return t.asyncQueue.enqueue(async()=>{const e=await GL(t),n=await KL(t);return e.setNetworkEnabled(!0),function(i){const s=_e(i);return s.L_.delete(0),dp(s)}(n)})}function s7(t){return t.asyncQueue.enqueue(async()=>{const e=await GL(t),n=await KL(t);return e.setNetworkEnabled(!1),async function(i){const s=_e(i);s.L_.add(0),await ud(s),s.q_.set("Offline")}(n)})}function o7(t,e){const n=new jn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const u=await function(h,p){const m=_e(h);return m.persistence.runTransaction("read document","readonly",_=>m.localDocuments.getDocument(_,p))}(i,s);u.isFoundDocument()?o.resolve(u):u.isNoDocument()?o.resolve(null):o.reject(new ie(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const c=dd(u,`Failed to get document '${s} from cache`);o.reject(c)}}(await PS(t),e,n)),n.promise}function HL(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const p=new x_({next:_=>{p.Za(),o.enqueueAndForget(()=>_S(s,m));const A=_.docs.has(u);!A&&_.fromCache?h.reject(new ie(J.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&_.fromCache&&c&&c.source==="server"?h.reject(new ie(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new wS(sd(u.path),p,{includeMetadataChanges:!0,_a:!0});return yS(s,m)}(await Kc(t),t.asyncQueue,e,n,r)),r.promise}function a7(t,e){const n=new jn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const u=await Py(i,s,!0),c=new jL(s,u.Ts),h=c.ma(u.documents),p=c.applyChanges(h,!1);o.resolve(p.snapshot)}catch(u){const c=dd(u,`Failed to execute query '${s} against cache`);o.reject(c)}}(await PS(t),e,n)),n.promise}function QL(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,u,c,h){const p=new x_({next:_=>{p.Za(),o.enqueueAndForget(()=>_S(s,m)),_.fromCache&&c.source==="server"?h.reject(new ie(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),m=new wS(u,p,{includeMetadataChanges:!0,_a:!0});return yS(s,m)}(await Kc(t),t.asyncQueue,e,n,r)),r.promise}function u7(t,e){const n=new x_(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){_e(i).Y_.add(s),s.next()}(await Kc(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){_e(i).Y_.delete(s)}(await Kc(t),n))}}function l7(t,e,n,r){const i=function(o,u){let c;return c=typeof o=="string"?QD().encode(o):o,function(p,m){return new ZH(p,m)}(function(p,m){if(p instanceof Uint8Array)return eb(p,m);if(p instanceof ArrayBuffer)return eb(new Uint8Array(p),m);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),u)}(n,cp(e));t.asyncQueue.enqueueAndForget(async()=>{JH(await CS(t),i,r)})}function c7(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=_e(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(await PS(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e,n){if(!n)throw new ie(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JL(t,e,n,r){if(e===!0&&r===!0)throw new ie(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function rb(t){if(!ye.isDocumentKey(t))throw new ie(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ib(t){if(ye.isDocumentKey(t))throw new ie(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function N_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function lt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=N_(t);throw new ie(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XL(t,e){if(e<=0)throw new ie(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YL((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sb(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i8;switch(r.type){case"firstParty":return new u8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nb.get(n);r&&(oe("ComponentProvider","Removing Datastore"),nb.delete(n),r.terminate())}(this),Promise.resolve()}}function ZL(t,e,n,r={}){var i;const s=(t=lt(t,hp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=Cn.MOCK_USER;else{u=f9(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ie(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Cn(h)}t._authCredentials=new s8(new aD(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fr=class eM{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new eM(this.firestore,e,this._query)}},$t=class tM{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tM(this.firestore,e,this._key)}},na=class nM extends fr{constructor(e,n,r){super(e,n,sd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new ye(e))}withConverter(e){return new nM(this.firestore,e,this._path)}};function Su(t,e,...n){if(t=be(t),bS("collection","path",e),t instanceof hp){const r=Ze.fromString(e,...n);return ib(r),new na(t,null,r)}{if(!(t instanceof $t||t instanceof na))throw new ie(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return ib(r),new na(t.firestore,null,r)}}function d7(t,e){if(t=lt(t,hp),bS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ie(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fr(t,null,function(r){return new oo(Ze.emptyPath(),r)}(e))}function ma(t,e,...n){if(t=be(t),arguments.length===1&&(e=uD.newId()),bS("doc","path",e),t instanceof hp){const r=Ze.fromString(e,...n);return rb(r),new $t(t,null,new ye(r))}{if(!(t instanceof $t||t instanceof na))throw new ie(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ze.fromString(e,...n));return rb(r),new $t(t.firestore,t instanceof na?t.converter:null,new ye(r))}}function rM(t,e){return t=be(t),e=be(e),(t instanceof $t||t instanceof na)&&(e instanceof $t||e instanceof na)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function iM(t,e){return t=be(t),e=be(e),t instanceof fr&&e instanceof fr&&t.firestore===e.firestore&&sp(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hS(this,"async_queue_retry"),this.Vu=()=>{const r=Og();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Og();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Og();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ra(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw nn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gS.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function zE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class h7{constructor(){this._progressObserver={},this._taskCompletionResolver=new jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7=-1;let sn=class extends hp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ob,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ob(e),this._firestoreClient=void 0,await e}}};function p7(t,e){const n=typeof t=="object"?t:TI(),r=typeof t=="string"?t:"(default)",i=Qf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=d9("firestore");s&&ZL(i,...s)}return i}function Zn(t){if(t._terminated)throw new ie(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sM(t),t._firestoreClient}function sM(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,h,p){return new F8(u,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,YL(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n7(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}function m7(t,e){fs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return oM(t,Nf.provider,{build:r=>new qL(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function g7(t){fs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();oM(t,Nf.provider,{build:n=>new XH(n,e.cacheSizeBytes)})}function oM(t,e,n){if((t=lt(t,sn))._firestoreClient||t._terminated)throw new ie(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ie(J.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sM(t)}function y7(t){if(t._initialized&&!t._terminated)throw new ie(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!us.D())return Promise.resolve();const i=r+"main";await us.delete(i)}(lS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function _7(t){return function(n){const r=new jn;return n.asyncQueue.enqueueAndForget(async()=>jH(await CS(n),r)),r.promise}(Zn(t=lt(t,sn)))}function v7(t){return i7(Zn(t=lt(t,sn)))}function w7(t){return s7(Zn(t=lt(t,sn)))}function E7(t,e){const n=Zn(t=lt(t,sn)),r=new h7;return l7(n,t._databaseId,e,r),r}function T7(t,e){return c7(Zn(t=lt(t,sn)),e).then(n=>n?new fr(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(Yt.fromBase64String(e))}catch(n){throw new ie(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ms(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=/^__.*__$/;class S7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,n,this.fieldTransforms):new od(e,this.data,n,this.fieldTransforms)}}class aM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ao(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class D_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new D_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ky(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(uM(this.Cu)&&I7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class R7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cp(e)}Qu(e,n,r,i=!1){return new D_({Cu:e,methodName:n,qu:r,path:Dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nl(t){const e=t._freezeSettings(),n=cp(t._databaseId);return new R7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L_(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);VS("Data must be an object, but it was:",o,r);const u=dM(r,o);let c,h;if(s.merge)c=new Pr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const _=WE(e,m,n);if(!o.contains(_))throw new ie(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);fM(p,_)||p.push(_)}c=new Pr(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new S7(new Fn(u),c,h)}class fp extends tl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fp}}function lM(t,e,n){return new D_({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kS extends tl{_toFieldTransform(e){return new ap(e.path,new Uc)}isEqual(e){return e instanceof kS}}class NS extends tl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=lM(this,e,!0),r=this.Ku.map(s=>rl(s,n)),i=new Fu(r);return new ap(e.path,i)}isEqual(e){return e instanceof NS&&xc(this.Ku,e.Ku)}}class OS extends tl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=lM(this,e,!0),r=this.Ku.map(s=>rl(s,n)),i=new Uu(r);return new ap(e.path,i)}isEqual(e){return e instanceof OS&&xc(this.Ku,e.Ku)}}class DS extends tl{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new jc(e.serializer,jD(e.serializer,this.$u));return new ap(e.path,n)}isEqual(e){return e instanceof DS&&this.$u===e.$u}}function LS(t,e,n,r){const i=t.Qu(1,e,n);VS("Data must be an object, but it was:",i,r);const s=[],o=Fn.empty();el(r,(c,h)=>{const p=FS(e,c,n);h=be(h);const m=i.Nu(p);if(h instanceof fp)s.push(p);else{const _=rl(h,m);_!=null&&(s.push(p),o.set(p,_))}});const u=new Pr(s);return new aM(o,u,i.fieldTransforms)}function MS(t,e,n,r,i,s){const o=t.Qu(1,e,n),u=[WE(e,r,n)],c=[i];if(s.length%2!=0)throw new ie(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(WE(e,s[_])),c.push(s[_+1]);const h=[],p=Fn.empty();for(let _=u.length-1;_>=0;--_)if(!fM(h,u[_])){const A=u[_];let T=c[_];T=be(T);const k=o.Nu(A);if(T instanceof fp)h.push(A);else{const x=rl(T,k);x!=null&&(h.push(A),p.set(A,x))}}const m=new Pr(h);return new aM(p,m,o.fieldTransforms)}function cM(t,e,n,r=!1){return rl(n,t.Qu(r?4:3,e))}function rl(t,e){if(hM(t=be(t)))return VS("Unsupported field value:",e,t),dM(t,e);if(t instanceof tl)return function(r,i){if(!uM(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const u of r){let c=rl(u,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mt.fromDate(r);return{timestampValue:Bc(i.serializer,s)}}if(r instanceof Mt){const s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bc(i.serializer,s)}}if(r instanceof O_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ms)return{bytesValue:XD(i.serializer,r._byteString)};if(r instanceof $t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xS)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return JI(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${N_(r)}`)}(t,e)}function dM(t,e){const n={};return wD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):el(t,(r,i)=>{const s=rl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function hM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof O_||t instanceof ms||t instanceof $t||t instanceof tl||t instanceof xS)}function VS(t,e,n){if(!hM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=N_(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function WE(t,e,n){if((e=be(e))instanceof ga)return e._internalPath;if(typeof e=="string")return FS(t,e);throw ky("Field path arguments must be of type string or ",t,!1,void 0,n)}const A7=new RegExp("[~\\*/\\[\\]]");function FS(t,e,n){if(e.search(A7)>=0)throw ky(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw ky(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ky(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ie(J.INVALID_ARGUMENT,u+t+c)}function fM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(M_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class P7 extends Of{data(){return super.data()}}function M_(t,e){return typeof e=="string"?FS(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class US{}class pp extends US{}function Ds(t,e,...n){let r=[];e instanceof US&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof jS).length,u=s.filter(c=>c instanceof V_).length;if(o>1||o>0&&u>0)throw new ie(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class V_ extends pp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new V_(e,n,r)}_apply(e){const n=this._parse(e);return yM(e._query,n),new fr(e.firestore,e.converter,kE(e._query,n))}_parse(e){const n=nl(e.firestore);return function(s,o,u,c,h,p,m){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ie(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ub(m,p);const A=[];for(const T of m)A.push(ab(c,s,T));_={arrayValue:{values:A}}}else _=ab(c,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ub(m,p),_=cM(u,o,m,p==="in"||p==="not-in");return et.create(h,p,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mM(t,e,n){const r=e,i=M_("where",t);return V_._create(i,r,n)}class jS extends US{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const u=s.getFlattenedFilters();for(const c of u)yM(o,c),o=kE(o,c)}(e._query,n),new fr(e.firestore,e.converter,kE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class BS extends pp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new BS(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ie(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cf(s,o)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new oo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function C7(t,e="asc"){const n=e,r=M_("orderBy",t);return BS._create(r,n)}class F_ extends pp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new F_(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,Iy(e._query,this._limit,this._limitType))}}function b7(t){return XL("limit",t),F_._create("limit",t,"F")}function x7(t){return XL("limitToLast",t),F_._create("limitToLast",t,"L")}class U_ extends pp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new U_(e,n,r)}_apply(e){const n=gM(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,function(i,s){return new oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function k7(...t){return U_._create("startAt",t,!0)}function N7(...t){return U_._create("startAfter",t,!1)}class j_ extends pp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new j_(e,n,r)}_apply(e){const n=gM(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,function(i,s){return new oo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function O7(...t){return j_._create("endBefore",t,!1)}function D7(...t){return j_._create("endAt",t,!0)}function gM(t,e,n,r){if(n[0]=be(n[0]),n[0]instanceof Of)return function(s,o,u,c,h){if(!c)throw new ie(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const p=[];for(const m of wc(s))if(m.field.isKeyField())p.push(Mu(o,c.key));else{const _=c.data.field(m.field);if(E_(_))throw new ie(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const A=m.field.canonicalString();throw new ie(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}p.push(_)}return new fa(p,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nl(t.firestore);return function(o,u,c,h,p,m){const _=o.explicitOrderBy;if(p.length>_.length)throw new ie(J.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let T=0;T<p.length;T++){const k=p[T];if(_[T].field.isKeyField()){if(typeof k!="string")throw new ie(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof k}`);if(!QI(o)&&k.indexOf("/")!==-1)throw new ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${k}' contains a slash.`);const x=o.path.child(Ze.fromString(k));if(!ye.isDocumentKey(x))throw new ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const P=new ye(x);A.push(Mu(u,P))}else{const x=cM(c,h,k);A.push(x)}}return new fa(A,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function ab(t,e,n){if(typeof(n=be(n))=="string"){if(n==="")throw new ie(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QI(e)&&n.indexOf("/")!==-1)throw new ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ze.fromString(n));if(!ye.isDocumentKey(r))throw new ie(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mu(t,new ye(r))}if(n instanceof $t)return Mu(t,n._key);throw new ie(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${N_(n)}.`)}function ub(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yM(t,e){const n=function(i,s){for(const o of i)for(const u of o.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $S{convertValue(e,n="none"){switch(Lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return el(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Nt(o.doubleValue));return new xS(s)}convertGeoPoint(e){return new O_(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=KI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rf(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ze.fromString(e);Re(lL(r));const i=new da(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(n)||nn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class L7 extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let eo=class extends Of{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(M_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Gh=class extends eo{data(e={}){return super.data(e)}},ya=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gh(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(u=>{const c=new Gh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Gh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),p=o.indexOf(u.doc.key)),{type:M7(u.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function M7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function _M(t,e){return t instanceof eo&&e instanceof eo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ya&&e instanceof ya&&t._firestore===e._firestore&&iM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t){t=lt(t,$t);const e=lt(t.firestore,sn);return HL(Zn(e),t._key).then(n=>WS(e,t,n))}class il extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function F7(t){t=lt(t,$t);const e=lt(t.firestore,sn),n=Zn(e),r=new il(e);return o7(n,t._key).then(i=>new eo(e,r,t._key,i,new mu(i!==null&&i.hasLocalMutations,!0),t.converter))}function U7(t){t=lt(t,$t);const e=lt(t.firestore,sn);return HL(Zn(e),t._key,{source:"server"}).then(n=>WS(e,t,n))}function vM(t){t=lt(t,fr);const e=lt(t.firestore,sn),n=Zn(e),r=new il(e);return pM(t._query),QL(n,t._query).then(i=>new ya(e,r,t,i))}function j7(t){t=lt(t,fr);const e=lt(t.firestore,sn),n=Zn(e),r=new il(e);return a7(n,t._query).then(i=>new ya(e,r,t,i))}function B7(t){t=lt(t,fr);const e=lt(t.firestore,sn),n=Zn(e),r=new il(e);return QL(n,t._query,{source:"server"}).then(i=>new ya(e,r,t,i))}function lb(t,e,n){t=lt(t,$t);const r=lt(t.firestore,sn),i=B_(t.converter,e,n);return gp(r,[L_(nl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function qE(t,e,n,...r){t=lt(t,$t);const i=lt(t.firestore,sn),s=nl(i);let o;return o=typeof(e=be(e))=="string"||e instanceof ga?MS(s,"updateDoc",t._key,e,n,r):LS(s,"updateDoc",t._key,e),gp(i,[o.toMutation(t._key,Lt.exists(!0))])}function Dg(t){return gp(lt(t.firestore,sn),[new ad(t._key,Lt.none())])}function zS(t,e){const n=lt(t.firestore,sn),r=ma(t),i=B_(t.converter,e);return gp(n,[L_(nl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function mp(t,...e){var n,r,i;t=be(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zE(e[o])||(s=e[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zE(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,h,p;if(t instanceof $t)h=lt(t.firestore,sn),p=sd(t._key.path),c={next:m=>{e[o]&&e[o](WS(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=lt(t,fr);h=lt(m.firestore,sn),p=m._query;const _=new il(h);c={next:A=>{e[o]&&e[o](new ya(h,_,m,A))},error:e[o+1],complete:e[o+2]},pM(t._query)}return function(_,A,T,k){const x=new x_(k),P=new wS(A,x,T);return _.asyncQueue.enqueueAndForget(async()=>yS(await Kc(_),P)),()=>{x.Za(),_.asyncQueue.enqueueAndForget(async()=>_S(await Kc(_),P))}}(Zn(h),p,u,c)}function $7(t,e){return u7(Zn(t=lt(t,sn)),zE(e)?e:{next:e})}function gp(t,e){return function(r,i){const s=new jn;return r.asyncQueue.enqueueAndForget(async()=>MH(await CS(r),i,s)),s.promise}(Zn(t),e)}function WS(t,e,n){const r=n.docs.get(e._key),i=new il(t);return new eo(t,i,e._key,r,new mu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W7=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nl(e)}set(e,n,r){this._verifyNotCommitted();const i=Fo(e,this._firestore),s=B_(i.converter,n,r),o=L_(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Fo(e,this._firestore);let o;return o=typeof(n=be(n))=="string"||n instanceof ga?MS(this._dataReader,"WriteBatch.update",s._key,n,r,i):LS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fo(e,this._firestore);return this._mutations=this._mutations.concat(new ad(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fo(t,e){if((t=be(t)).firestore!==e)throw new ie(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q7=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=nl(n)}get(n){const r=Fo(n,this._firestore),i=new L7(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Ee();const o=s[0];if(o.isFoundDocument())return new Of(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Of(this._firestore,i,r._key,null,r.converter);throw Ee()})}set(n,r,i){const s=Fo(n,this._firestore),o=B_(s.converter,r,i),u=L_(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,u),this}update(n,r,i,...s){const o=Fo(n,this._firestore);let u;return u=typeof(r=be(r))=="string"||r instanceof ga?MS(this._dataReader,"Transaction.update",o._key,r,i,s):LS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,u),this}delete(n){const r=Fo(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Fo(e,this._firestore),r=new il(this._firestore);return super.get(e).then(i=>new eo(this._firestore,r,n._key,i._document,new mu(!1,!1),n.converter))}};function G7(t,e,n){t=lt(t,sn);const r=Object.assign(Object.assign({},z7),n);return function(s){if(s.maxAttempts<1)throw new ie(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,u){const c=new jn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await r7(s);new t7(s.asyncQueue,h,u,o,c).au()}),c.promise}(Zn(t),i=>e(new q7(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(){return new fp("deleteField")}function H7(){return new kS("serverTimestamp")}function Q7(...t){return new NS("arrayUnion",t)}function Y7(...t){return new OS("arrayRemove",t)}function J7(t){return new DS("increment",t)}(function(e,n=!0){(function(i){id=i})(Ta),aa(new ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),u=new sn(new o8(r.getProvider("auth-internal")),new c8(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ie(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),vi(ZP,"4.7.3",e),vi(ZP,"4.7.3","esm2017")})();const X7={apiKey:"AIzaSyCLA_RFXrPvBdN_vrApCUlj28a82ownuzg",authDomain:"fire-set.firebaseapp.com",databaseURL:"https://fire-set.firebaseio.com",projectId:"fire-set",storageBucket:"fire-set.appspot.com",messagingSenderId:"958559518798",appId:"1:958559518798:web:ec451bbfb4ac03f30ec31f",measurementId:"G-FCHHM3FEZE"},wM=u_(X7),gu=p7(wM),Ru=XG(wM);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,n){this._delegate=e,this.firebase=n,gf(e,new ds("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),II(this._delegate)))}_getService(e,n=sa){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=sa){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){gf(this._delegate,e)}_addOrOverwriteComponent(e){nO(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},cb=new Xu("app-compat","Firebase",eQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:vi,setLogLevel:oO,onLog:sO,apps:null,SDK_VERSION:Ta,INTERNAL:{registerComponent:u,removeApp:r,useAsService:c,modularAPIs:D6}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(h){delete e[h]}function i(h){if(h=h||sa,!AP(e,h))throw cb.create("no-app",{appName:h});return e[h]}i.App=t;function s(h,p={}){const m=u_(h,p);if(AP(e,m.name))return e[m.name];const _=new t(m,n);return e[m.name]=_,_}function o(){return Object.keys(e).map(h=>e[h])}function u(h){const p=h.name,m=p.replace("-compat","");if(aa(h)&&h.type==="PUBLIC"){const _=(A=i())=>{if(typeof A[m]!="function")throw cb.create("invalid-app-argument",{appName:p});return A[m]()};h.serviceProps!==void 0&&fy(_,h.serviceProps),n[m]=_,t.prototype[m]=function(...A){return this._getService.bind(this,p).apply(this,h.multipleInstances?A:[])}}return h.type==="PUBLIC"?n[m]:null}function c(h,p){return p==="serverAuth"?null:p}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(){const t=tQ(Z7);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:EM,extendNamespace:e,createSubscribe:JN,ErrorFactory:Xu,deepExtend:fy});function e(n){fy(t,n)}return t}const nQ=EM();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new a_("@firebase/app-compat"),rQ="@firebase/app-compat",iQ="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(t){vi(rQ,iQ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=zN();if(t.firebase!==void 0){db.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&db.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Hr=nQ;sQ();var oQ="firebase",aQ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr.registerVersion(oQ,aQ,"app-compat");const $s=t=>[...Array(t).keys()],uQ=(t,e=3)=>{let n;e===4?n=$s(3).map(r=>$s(4).map(s=>t.includes(4*r+s)?"x":"o").join("")):n=$s(4).map(r=>$s(3).map(s=>t.includes(3*r+s)?"x":"o").join("")),console.log(n.join(`
`))},Df=(t,{debug:e=!1,returnWhenFound:n=!1}={})=>{let r=0,i=[];for(let s=0;s<t.length-2;s++)for(let o=s+1;o<t.length-1;o++)for(let u=o+1;u<t.length;u++)if(i=[t[s],t[o],t[u]],br(i)&&(e&&uQ([s,o,u]),r++,n))return r;return r},yp=()=>{let t=[];return $s(3).forEach(e=>{$s(3).forEach(n=>{$s(3).forEach(r=>{$s(3).forEach(i=>{const s=""+e+r+n+i;t.push(s)})})})}),t},br=t=>{if(t.length!==3)return!1;const[e,n,r]=t;for(let i=0;i<4;i++)if((Number(e[i])+Number(n[i])+Number(r[i]))%3!==0)return!1;return!0},qS=(t,e)=>{let n,r,i="";for(let s=0;s<4;s++)t[s]===e[s]?i=i+t[s]:(n=Number(t[s])+Number(e[s]),r=(3-n).toString(),i=i+r);return i.trim()},$_=(t,e)=>e.includes(t)?e.filter(n=>n!==t):[...e,t],zu=({board:t=[],deck:e},n=12,r=1)=>{let i=jt.shuffle([...t,...e]);for(;Df(i.slice(0,n))<r&&Df(i,{returnWhenFound:!0})>0;)i=jt.shuffle(i);return{deck:i.slice(n),board:i.slice(0,n)}},lQ=(t=null)=>{if(t===null){let s=[...$o.shuffle(yp()).slice(0,2)];const o=qS(s[0],s[1]);return[s[0],s[1],o]}const e=["","",""];let n=[!1,!1,!1,!1];return $o.sampleSize($o.range(4),t).forEach(i=>{n[i]=Math.floor(Math.random()*3).toString()}),n.forEach(i=>{const s=$o.shuffle(["0","1","2"]);for(let o=0;o<3;o++)i===!1?e[o]=e[o]+s[o].toString():e[o]=e[o]+i}),e},cQ=({startingSetCards:t=2,boardSize:e=12,commonTraits:n}={})=>{let r=$o.shuffle(yp()),i=$o.shuffle(lQ(n)),s=i.slice(0,2);const o=i[2];r=r.filter(c=>!i.includes(c));let u=$o.shuffle([o,...r.slice(0,e-3)]);return s=[...s,...u],r=r.slice(e-3),{board:s,deck:r}},GS=t=>{const{board:e,deck:n,selected:r}=t,i=n.slice(0,3);let s=[...e],o=n.slice(3);for(r.forEach((u,c)=>{let h=s.indexOf(u);s[h]=i[c]});Df(s)===0;)({deck:o,board:s}=zu({board:s,deck:o}));return{deck:o,board:s,selected:[]}},dQ=()=>{const t=new pi;UI(Ru,t)},TM=()=>{const t=new Hr.auth.GoogleAuthProvider;Hr.auth().signInWithPopup(t).then(e=>{var n=e.credential;n.accessToken,e.user}).catch(e=>{e.code,e.message,e.email,e.credential})},n0=async(t,e)=>{let n;typeof t=="string"?n=ma(gu,"games",t):n=t;try{await qE(n,{...e,lastUpdate:Hr.firestore.FieldValue.serverTimestamp()})}catch(r){console.error("Error updating document: ",r)}},hb=(...t)=>(t.length===1&&Array.isArray(t[0])&&(t=t[0]),t.filter(e=>!!e).join(" ")),IM=t=>t?t instanceof Hr.firestore.Timestamp||t.toDate instanceof Function?t.toDate().toLocaleString():t instanceof Date?t.toLocaleString():typeof t=="number"?new Date(t).toLocaleString():t===Hr.firestore.FieldValue.serverTimestamp()?"Pending":(console.error("Invalid timestamp format:",t),"Invalid Date"):null,Tc={width:120,height:200,strokeWidth:4,padding:25},hQ=({fill:t,color:e})=>{let{padding:n,height:r,width:i,strokeWidth:s}=Tc;return w.jsxs("svg",{width:"120",height:"200",xmlns:"http://www.w3.org/2000/svg",children:[w.jsxs("g",{children:[w.jsx("rect",{fill:"#fff",id:"canvas_background",height:"202",width:"122",y:"-1",x:"-1"}),w.jsx("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:w.jsx("rect",{fill:"#fff",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),w.jsx("g",{children:w.jsx("path",{stroke:e,transform:`
          rotate(270,58.8,98)
          scale(0.8 1)
          translate(10 0)
          `,id:"svg_5",d:`
          m-17.49,66
          c50.83,-35.45 101.7,35.45
          152.5,0
          c30,-10 30,43.8
          0,63.8
          c-50.8,35.45 -101.6,-35.45
          -152.5,0
          c-30,15 -30,-45
          0,-63.59
          z
          `,fillOpacity:"null",strokeOpacity:"null",strokeWidth:s,fill:t})})]})},fQ=({shape:t,fill:e,color:n,num:r})=>{let{padding:i,height:s,width:o,strokeWidth:u}=Tc;return t==="0"?(i=i+1,w.jsx(hQ,{fill:e,color:n})):t==="1"?w.jsx("g",{children:w.jsx("ellipse",{stroke:n,ry:(s-2*i)/2,rx:(o-2*i)/2,cy:s/2,cx:o/2,fillOpacity:"null",strokeOpacity:"null",strokeWidth:Tc.strokeWidth,fill:e})}):t==="2"?w.jsx("g",{children:w.jsx("polygon",{points:`${i},${s/2}
          ${o/2},${i}
          ${o-i},${s/2}
          ${o/2},${s-i}`,style:{fill:e,stroke:n,strokeWidth:Tc.strokeWidth}})}):null};class ir extends B.Component{constructor(){super(...arguments);Rn(this,"colors",{0:"#61d020",1:"#1b2f92",2:"#FF0000",white:"#fff"});Rn(this,"getFill",(n,r)=>r==="1"?`url(#card-${n}-${r})`:r==="2"?this.colors[n]:this.colors.white);Rn(this,"drawShape",()=>{const[n,r,i,s]=this.props.desc.split("");return w.jsxs(B.Fragment,{children:[w.jsxs("g",{children:[w.jsx("title",{children:"background"}),w.jsx("rect",{fill:this.colors.white,id:"canvas_background",y:"-1",x:"-1"}),w.jsx("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:w.jsx("rect",{strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),w.jsx(fQ,{shape:i,num:n,fill:this.getFill(r,s),color:this.colors[r]})]})})}render(){const[n,r,,i]=this.props.desc.split("");return w.jsxs("div",{className:"game-card d-flex justify-content-center",children:[w.jsx("svg",{width:"0",height:"0",children:w.jsx("pattern",{id:`card-${r}-${i}`,width:120/12,height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse",children:w.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:this.colors[r],strokeWidth:"5"}})})}),$s(Number(n)+1).map(s=>w.jsx("svg",{className:`shape ${n==="1"?"double":""}`,viewBox:`0 0 ${Tc.width} ${Tc.height}`,xmlns:"http://www.w3.org/2000/svg",children:this.drawShape()},s))]})}}function pQ(t){const{url:e,cardName:n,description:r}=t;return w.jsxs("div",{className:"col-9 col-md-4",children:[w.jsx(wn,{to:e,children:w.jsx("div",{className:"card shadow-sm mb-3 mb-md-4",children:w.jsx(ir,{desc:n})})}),w.jsx("p",{className:"text-center",children:r})]})}function mQ(){const t=[{url:"/solo",cardName:"0012",description:"Solo/Local"},{url:"/lobby",cardName:"1121",description:"Join Game"},{url:"/host",cardName:"2200",description:"Host Game"}];return w.jsxs("div",{className:"container mt-3 mt-md-5",children:[w.jsx("h1",{className:"d-none d-md-block text-center mb-3 mb-md-5",children:"Main Menu"}),w.jsx("div",{className:"row justify-content-center",children:t.map((e,n)=>w.jsx(pQ,{...e},`card-${n}`))}),w.jsxs("div",{className:"d-none d-md-block",children:[w.jsx("hr",{}),w.jsx("p",{children:w.jsx(wn,{to:"/rules",children:"Rules"})}),w.jsx("p",{children:w.jsx(wn,{to:"/stats",children:"View Statistics"})}),w.jsx("p",{children:w.jsx(wn,{to:"/login",children:"Login"})})]})]})}function gQ({desc:t}){return w.jsx("div",{className:"col-4 my-2",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:t})})})}function yQ(){const t=["0000","1210","0022","2101","0120","2011"];return w.jsxs("div",{className:"rules container",children:[w.jsx("h2",{children:"Rules of the Game"}),w.jsx("p",{children:"The object of the same is to find sets of three cards that are either the same or different along each of four dimensions."}),w.jsx("p",{children:"If that makes perfect sense to you, then go ahead and start playing. Otherwise, I will explain a bit more."}),w.jsx("p",{children:"The game starts by laying out a board with twelve cards. Here are some example cards: "}),w.jsx("div",{className:"row",children:t.map((e,n)=>w.jsx(gQ,{desc:e},n))}),w.jsx("p",{children:"You'll notice that every card has four different characteristics:"}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color"}),w.jsx("li",{children:"number"}),w.jsx("li",{children:"shape"}),w.jsx("li",{children:"fill"})]}),w.jsx("p",{children:"and each of those characteristics has three different possibilities."}),w.jsxs("p",{children:["Three cards form a set if, for each of those four characteristics, the three cards are either ",w.jsx("em",{children:"all the same"})," or ",w.jsx("em",{children:"all different."})]}),w.jsx("p",{children:"It is easier to understand with examples, so here is an example set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"0112"})})})," ",w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"1111"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"2110"})})})]}),w.jsx("p",{children:"Which you can describe as follows:"}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - SAME"}),w.jsx("li",{children:"shape - SAME"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - DIFFERENT"})]}),w.jsx("p",{children:"Therefore, the three cards form a set."}),w.jsx("p",{children:"Here is another set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"2022"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"1112"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"0202"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - SAME"})]}),w.jsx("p",{children:"This is not a set:"}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"1220"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"1110"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"2000"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"fill - SAME"}),w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - NOT THE SAME OR DIFFERENT!"})]}),w.jsxs("p",{children:["Even though the cards have the same fill, different colors, and different shapes, the numbers are neither ",w.jsx("em",{children:"all the same"})," nor ",w.jsx("em",{children:"all different"}),", so it's not a set."]}),w.jsxs("p",{children:["It doesn't matter how many of the characteristics are the same, and how many are different, as long as for ",w.jsx("em",{children:"each"})," characteristic, the cards are all the same or all different. Here's one last example:"]}),w.jsxs("div",{className:"row my-3",children:[w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"1122"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"0201"})})}),w.jsx("div",{className:"col-4",children:w.jsx("div",{className:"card",children:w.jsx(ir,{desc:"2010"})})})]}),w.jsxs("ul",{className:"browser-default",children:[w.jsx("li",{children:"color - DIFFERENT"}),w.jsx("li",{children:"shape - DIFFERENT"}),w.jsx("li",{children:"number - DIFFERENT"}),w.jsx("li",{children:"fill - DIFFERENT"})]}),w.jsx("p",{children:"Each characteristic is different for all three cards, so this is a set."}),w.jsx("p",{children:w.jsx(wn,{to:"/",children:"Back Home"})})]})}var SM={exports:{}},RM={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=B;function _Q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vQ=typeof Object.is=="function"?Object.is:_Q,wQ=_p.useSyncExternalStore,EQ=_p.useRef,TQ=_p.useEffect,IQ=_p.useMemo,SQ=_p.useDebugValue;RM.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=EQ(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=IQ(function(){function c(A){if(!h){if(h=!0,p=A,A=r(A),i!==void 0&&o.hasValue){var T=o.value;if(i(T,A))return m=T}return m=A}if(T=m,vQ(p,A))return T;var k=r(A);return i!==void 0&&i(T,k)?T:(p=A,m=k)}var h=!1,p,m,_=n===void 0?null:n;return[function(){return c(e())},_===null?void 0:function(){return c(_())}]},[e,n,r,i]);var u=wQ(t,s[0],s[1]);return TQ(function(){o.hasValue=!0,o.value=u},[u]),SQ(u),u};SM.exports=RM;var RQ=SM.exports,ot="default"in E0?He:E0,fb=Symbol.for("react-redux-context"),pb=typeof globalThis<"u"?globalThis:{};function AQ(){if(!ot.createContext)return{};const t=pb[fb]??(pb[fb]=new Map);let e=t.get(ot.createContext);return e||(e=ot.createContext(null),t.set(ot.createContext,e)),e}var to=AQ(),AM=()=>{throw new Error("uSES not initialized!")};function KS(t=to){return function(){return ot.useContext(t)}}var PM=KS(),CM=AM,PQ=t=>{CM=t},CQ=(t,e)=>t===e;function bQ(t=to){const e=t===to?PM:KS(t),n=(r,i={})=>{const{equalityFn:s=CQ,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:c,getServerState:h,stabilityCheck:p,identityFunctionCheck:m}=e();ot.useRef(!0);const _=ot.useCallback({[r.name](T){return r(T)}}[r.name],[r,p,o.stabilityCheck]),A=CM(c.addNestedSub,u.getState,h||u.getState,_,s);return ot.useDebugValue(A),A};return Object.assign(n,{withTypes:()=>n}),n}var Vi=bQ(),xQ=Symbol.for("react.element"),kQ=Symbol.for("react.portal"),NQ=Symbol.for("react.fragment"),OQ=Symbol.for("react.strict_mode"),DQ=Symbol.for("react.profiler"),LQ=Symbol.for("react.provider"),MQ=Symbol.for("react.context"),VQ=Symbol.for("react.server_context"),bM=Symbol.for("react.forward_ref"),FQ=Symbol.for("react.suspense"),UQ=Symbol.for("react.suspense_list"),HS=Symbol.for("react.memo"),jQ=Symbol.for("react.lazy"),BQ=bM,$Q=HS;function zQ(t){if(typeof t=="object"&&t!==null){const e=t.$$typeof;switch(e){case xQ:{const n=t.type;switch(n){case NQ:case DQ:case OQ:case FQ:case UQ:return n;default:{const r=n&&n.$$typeof;switch(r){case VQ:case MQ:case bM:case jQ:case HS:case LQ:return r;default:return e}}}}case kQ:return e}}}function WQ(t){return zQ(t)===HS}function qQ(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let u=!1,c,h,p,m,_;function A(R,I){return c=R,h=I,p=t(c,h),m=e(r,h),_=n(p,m,h),u=!0,_}function T(){return p=t(c,h),e.dependsOnOwnProps&&(m=e(r,h)),_=n(p,m,h),_}function k(){return t.dependsOnOwnProps&&(p=t(c,h)),e.dependsOnOwnProps&&(m=e(r,h)),_=n(p,m,h),_}function x(){const R=t(c,h),I=!o(R,p);return p=R,I&&(_=n(p,m,h)),_}function P(R,I){const F=!s(I,h),z=!i(R,c,I,h);return c=R,h=I,F&&z?T():F?k():z?x():_}return function(I,F){return u?P(I,F):A(I,F)}}function GQ(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=e(t,i),o=n(t,i),u=r(t,i);return qQ(s,o,u,t,i)}function KQ(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function GE(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function mb(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function xM(t,e){return function(r,{displayName:i}){const s=function(u,c){return s.dependsOnOwnProps?s.mapToProps(u,c):s.mapToProps(u,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(u,c){s.mapToProps=t,s.dependsOnOwnProps=mb(t);let h=s(u,c);return typeof h=="function"&&(s.mapToProps=h,s.dependsOnOwnProps=mb(h),h=s(u,c)),h},s}}function QS(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function HQ(t){return t&&typeof t=="object"?GE(e=>KQ(t,e)):t?typeof t=="function"?xM(t):QS(t,"mapDispatchToProps"):GE(e=>({dispatch:e}))}function QQ(t){return t?typeof t=="function"?xM(t):QS(t,"mapStateToProps"):GE(()=>({}))}function YQ(t,e,n){return{...n,...t,...e}}function JQ(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(c,h,p){const m=t(c,h,p);return s?i(m,o)||(o=m):(s=!0,o=m),o}}}function XQ(t){return t?typeof t=="function"?JQ(t):QS(t,"mergeProps"):()=>YQ}function ZQ(t){t()}function eY(){let t=null,e=null;return{clear(){t=null,e=null},notify(){ZQ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var gb={notify(){},get:()=>[]};function kM(t,e){let n,r=gb,i=0,s=!1;function o(k){p();const x=r.subscribe(k);let P=!1;return()=>{P||(P=!0,x(),m())}}function u(){r.notify()}function c(){T.onStateChange&&T.onStateChange()}function h(){return s}function p(){i++,n||(n=e?e.addNestedSub(c):t.subscribe(c),r=eY())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=gb)}function _(){s||(s=!0,p())}function A(){s&&(s=!1,m())}const T={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:c,isSubscribed:h,trySubscribe:_,tryUnsubscribe:A,getListeners:()=>r};return T}var tY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nY=typeof navigator<"u"&&navigator.product==="ReactNative",Ny=tY||nY?ot.useLayoutEffect:ot.useEffect;function yb(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function r0(t,e){if(yb(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!yb(t[n[i]],e[n[i]]))return!1;return!0}var rY={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},iY={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sY={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},NM={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},oY={[BQ]:sY,[$Q]:NM};function _b(t){return WQ(t)?NM:oY[t.$$typeof]||rY}var aY=Object.defineProperty,uY=Object.getOwnPropertyNames,vb=Object.getOwnPropertySymbols,lY=Object.getOwnPropertyDescriptor,cY=Object.getPrototypeOf,wb=Object.prototype;function KE(t,e){if(typeof e!="string"){if(wb){const s=cY(e);s&&s!==wb&&KE(t,s)}let n=uY(e);vb&&(n=n.concat(vb(e)));const r=_b(t),i=_b(e);for(let s=0;s<n.length;++s){const o=n[s];if(!iY[o]&&!(i&&i[o])&&!(r&&r[o])){const u=lY(e,o);try{aY(t,o,u)}catch{}}}}return t}var OM=AM,dY=t=>{OM=t},hY=[null,null];function fY(t,e,n){Ny(()=>t(...e),n)}function pY(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function mY(t,e,n,r,i,s,o,u,c,h,p){if(!t)return()=>{};let m=!1,_=null;const A=()=>{if(m||!u.current)return;const k=e.getState();let x,P;try{x=r(k,i.current)}catch(R){P=R,_=R}P||(_=null),x===s.current?o.current||h():(s.current=x,c.current=x,o.current=!0,p())};return n.onStateChange=A,n.trySubscribe(),A(),()=>{if(m=!0,n.tryUnsubscribe(),n.onStateChange=null,_)throw _}}function gY(t,e){return t===e}function yY(t,e,n,{pure:r,areStatesEqual:i=gY,areOwnPropsEqual:s=r0,areStatePropsEqual:o=r0,areMergedPropsEqual:u=r0,forwardRef:c=!1,context:h=to}={}){const p=h,m=QQ(t),_=HQ(e),A=XQ(n),T=!!t;return x=>{const P=x.displayName||x.name||"Component",R=`Connect(${P})`,I={shouldHandleStateChanges:T,displayName:R,wrappedComponentName:P,WrappedComponent:x,initMapStateToProps:m,initMapDispatchToProps:_,initMergeProps:A,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:u};function F(C){const[S,L,V]=ot.useMemo(()=>{const{reactReduxForwardedRef:rt,...Vt}=C;return[C.context,rt,Vt]},[C]),U=ot.useMemo(()=>{let rt=p;return S!=null&&S.Consumer,rt},[S,p]),M=ot.useContext(U),O=!!C.store&&!!C.store.getState&&!!C.store.dispatch,he=!!M&&!!M.store,re=O?C.store:M.store,le=he?M.getServerState:re.getState,ue=ot.useMemo(()=>GQ(re.dispatch,I),[re]),[H,ae]=ot.useMemo(()=>{if(!T)return hY;const rt=kM(re,O?void 0:M.subscription),Vt=rt.notifyNestedSubs.bind(rt);return[rt,Vt]},[re,O,M]),me=ot.useMemo(()=>O?M:{...M,subscription:H},[O,M,H]),ge=ot.useRef(void 0),Se=ot.useRef(V),we=ot.useRef(void 0),Ne=ot.useRef(!1),Pe=ot.useRef(!1),Fe=ot.useRef(void 0);Ny(()=>(Pe.current=!0,()=>{Pe.current=!1}),[]);const fe=ot.useMemo(()=>()=>we.current&&V===Se.current?we.current:ue(re.getState(),V),[re,V]),Le=ot.useMemo(()=>Vt=>H?mY(T,re,H,ue,Se,ge,Ne,Pe,we,ae,Vt):()=>{},[H]);fY(pY,[Se,ge,Ne,V,we,ae]);let xe;try{xe=OM(Le,fe,le?()=>ue(le(),V):fe)}catch(rt){throw Fe.current&&(rt.message+=`
The error may be correlated with this previous error:
${Fe.current.stack}

`),rt}Ny(()=>{Fe.current=void 0,we.current=void 0,ge.current=xe});const Me=ot.useMemo(()=>ot.createElement(x,{...xe,ref:L}),[L,x,xe]);return ot.useMemo(()=>T?ot.createElement(U.Provider,{value:me},Me):Me,[U,Me,me])}const G=ot.memo(F);if(G.WrappedComponent=x,G.displayName=F.displayName=R,c){const S=ot.forwardRef(function(V,U){return ot.createElement(G,{...V,reactReduxForwardedRef:U})});return S.displayName=R,S.WrappedComponent=x,KE(S,x)}return KE(G,x)}}var _Y=yY;function vY({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=ot.useMemo(()=>{const h=kM(t);return{store:t,subscription:h,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),u=ot.useMemo(()=>t.getState(),[t]);Ny(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),u!==t.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,u]);const c=e||to;return ot.createElement(c.Provider,{value:o},n)}var wY=vY;function DM(t=to){const e=t===to?PM:KS(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var EY=DM();function TY(t=to){const e=t===to?EY:DM(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var hd=TY();PQ(RQ.useSyncExternalStoreWithSelector);dY(B.useSyncExternalStore);function Ln(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var IY=typeof Symbol=="function"&&Symbol.observable||"@@observable",Eb=IY,i0=()=>Math.random().toString(36).substring(7).split("").join("."),SY={INIT:`@@redux/INIT${i0()}`,REPLACE:`@@redux/REPLACE${i0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${i0()}`},Oy=SY;function YS(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function LM(t,e,n){if(typeof t!="function")throw new Error(Ln(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ln(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ln(1));return n(LM)(t,e)}let r=t,i=e,s=new Map,o=s,u=0,c=!1;function h(){o===s&&(o=new Map,s.forEach((x,P)=>{o.set(P,x)}))}function p(){if(c)throw new Error(Ln(3));return i}function m(x){if(typeof x!="function")throw new Error(Ln(4));if(c)throw new Error(Ln(5));let P=!0;h();const R=u++;return o.set(R,x),function(){if(P){if(c)throw new Error(Ln(6));P=!1,h(),o.delete(R),s=null}}}function _(x){if(!YS(x))throw new Error(Ln(7));if(typeof x.type>"u")throw new Error(Ln(8));if(typeof x.type!="string")throw new Error(Ln(17));if(c)throw new Error(Ln(9));try{c=!0,i=r(i,x)}finally{c=!1}return(s=o).forEach(R=>{R()}),x}function A(x){if(typeof x!="function")throw new Error(Ln(10));r=x,_({type:Oy.REPLACE})}function T(){const x=m;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(Ln(11));function R(){const F=P;F.next&&F.next(p())}return R(),{unsubscribe:x(R)}},[Eb](){return this}}}return _({type:Oy.INIT}),{dispatch:_,subscribe:m,getState:p,replaceReducer:A,[Eb]:T}}function RY(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Oy.INIT})>"u")throw new Error(Ln(12));if(typeof n(void 0,{type:Oy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ln(13))})}function AY(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{RY(n)}catch(s){i=s}return function(o={},u){if(i)throw i;let c=!1;const h={};for(let p=0;p<r.length;p++){const m=r[p],_=n[m],A=o[m],T=_(A,u);if(typeof T>"u")throw u&&u.type,new Error(Ln(14));h[m]=T,c=c||T!==A}return c=c||r.length!==Object.keys(o).length,c?h:o}}function Dy(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function PY(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Ln(15))};const o={getState:i.getState,dispatch:(c,...h)=>s(c,...h)},u=t.map(c=>c(o));return s=Dy(...u)(i.dispatch),{...i,dispatch:s}}}function CY(t){return YS(t)&&"type"in t&&typeof t.type=="string"}var MM=Symbol.for("immer-nothing"),Tb=Symbol.for("immer-draftable"),Qr=Symbol.for("immer-state");function Di(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Hc=Object.getPrototypeOf;function Wu(t){return!!t&&!!t[Qr]}function no(t){var e;return t?VM(t)||Array.isArray(t)||!!t[Tb]||!!((e=t.constructor)!=null&&e[Tb])||W_(t)||q_(t):!1}var bY=Object.prototype.constructor.toString();function VM(t){if(!t||typeof t!="object")return!1;const e=Hc(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===bY}function Ly(t,e){z_(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function z_(t){const e=t[Qr];return e?e.type_:Array.isArray(t)?1:W_(t)?2:q_(t)?3:0}function HE(t,e){return z_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function FM(t,e,n){const r=z_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function xY(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function W_(t){return t instanceof Map}function q_(t){return t instanceof Set}function nu(t){return t.copy_||t.base_}function QE(t,e){if(W_(t))return new Map(t);if(q_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VM(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Qr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],u=r[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[o]})}return Object.create(Hc(t),r)}else{const r=Hc(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function JS(t,e=!1){return G_(t)||Wu(t)||!no(t)||(z_(t)>1&&(t.set=t.add=t.clear=t.delete=kY),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>JS(r,!0))),t}function kY(){Di(2)}function G_(t){return Object.isFrozen(t)}var NY={};function qu(t){const e=NY[t];return e||Di(0,t),e}var Lf;function UM(){return Lf}function OY(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ib(t,e){e&&(qu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function YE(t){JE(t),t.drafts_.forEach(DY),t.drafts_=null}function JE(t){t===Lf&&(Lf=t.parent_)}function Sb(t){return Lf=OY(Lf,t)}function DY(t){const e=t[Qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Rb(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Qr].modified_&&(YE(e),Di(4)),no(t)&&(t=My(e,t),e.parent_||Vy(e,t)),e.patches_&&qu("Patches").generateReplacementPatches_(n[Qr].base_,t,e.patches_,e.inversePatches_)):t=My(e,n,[]),YE(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==MM?t:void 0}function My(t,e,n){if(G_(e))return e;const r=e[Qr];if(!r)return Ly(e,(i,s)=>Ab(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Vy(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Ly(s,(u,c)=>Ab(t,r,i,u,c,n,o)),Vy(t,i,!1),n&&t.patches_&&qu("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Ab(t,e,n,r,i,s,o){if(Wu(i)){const u=s&&e&&e.type_!==3&&!HE(e.assigned_,r)?s.concat(r):void 0,c=My(t,i,u);if(FM(n,r,c),Wu(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(no(i)&&!G_(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;My(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Vy(t,i)}}function Vy(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&JS(e,n)}function LY(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:UM(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=XS;n&&(i=[r],s=Mf);const{revoke:o,proxy:u}=Proxy.revocable(i,s);return r.draft_=u,r.revoke_=o,u}var XS={get(t,e){if(e===Qr)return t;const n=nu(t);if(!HE(n,e))return MY(t,n,e);const r=n[e];return t.finalized_||!no(r)?r:r===s0(t.base_,e)?(o0(t),t.copy_[e]=ZE(r,t)):r},has(t,e){return e in nu(t)},ownKeys(t){return Reflect.ownKeys(nu(t))},set(t,e,n){const r=jM(nu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=s0(nu(t),e),s=i==null?void 0:i[Qr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(xY(n,i)&&(n!==void 0||HE(t.base_,e)))return!0;o0(t),XE(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return s0(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,o0(t),XE(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=nu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Di(11)},getPrototypeOf(t){return Hc(t.base_)},setPrototypeOf(){Di(12)}},Mf={};Ly(XS,(t,e)=>{Mf[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Mf.deleteProperty=function(t,e){return Mf.set.call(this,t,e,void 0)};Mf.set=function(t,e,n){return XS.set.call(this,t[0],e,n,t[0])};function s0(t,e){const n=t[Qr];return(n?nu(n):t)[e]}function MY(t,e,n){var i;const r=jM(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function jM(t,e){if(!(e in t))return;let n=Hc(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Hc(n)}}function XE(t){t.modified_||(t.modified_=!0,t.parent_&&XE(t.parent_))}function o0(t){t.copy_||(t.copy_=QE(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var VY=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(c=s,...h){return o.produce(c,p=>n.call(this,p,...h))}}typeof n!="function"&&Di(6),r!==void 0&&typeof r!="function"&&Di(7);let i;if(no(e)){const s=Sb(this),o=ZE(e,void 0);let u=!0;try{i=n(o),u=!1}finally{u?YE(s):JE(s)}return Ib(s,r),Rb(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===MM&&(i=void 0),this.autoFreeze_&&JS(i,!0),r){const s=[],o=[];qu("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Di(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...u)=>this.produceWithPatches(o,c=>e(c,...u));let r,i;return[this.produce(e,n,(o,u)=>{r=o,i=u}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){no(t)||Di(8),Wu(t)&&(t=FY(t));const e=Sb(this),n=ZE(t,void 0);return n[Qr].isManual_=!0,JE(e),n}finishDraft(t,e){const n=t&&t[Qr];(!n||!n.isManual_)&&Di(9);const{scope_:r}=n;return Ib(r,e),Rb(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=qu("Patches").applyPatches_;return Wu(t)?r(t,e):this.produce(t,i=>r(i,e))}};function ZE(t,e){const n=W_(t)?qu("MapSet").proxyMap_(t,e):q_(t)?qu("MapSet").proxySet_(t,e):LY(t,e);return(e?e.scope_:UM()).drafts_.push(n),n}function FY(t){return Wu(t)||Di(10,t),BM(t)}function BM(t){if(!no(t)||G_(t))return t;const e=t[Qr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=QE(t,e.scope_.immer_.useStrictShallowCopy_)}else n=QE(t,!0);return Ly(n,(r,i)=>{FM(n,r,BM(i))}),e&&(e.finalized_=!1),n}var Yr=new VY,K_=Yr.produce;Yr.produceWithPatches.bind(Yr);Yr.setAutoFreeze.bind(Yr);Yr.setUseStrictShallowCopy.bind(Yr);Yr.applyPatches.bind(Yr);Yr.createDraft.bind(Yr);Yr.finishDraft.bind(Yr);function $M(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var UY=$M(),jY=$M,BY=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dy:Dy.apply(null,arguments)};function Pb(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(cs(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>CY(r)&&r.type===t,n}var zM=class Ch extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ch.prototype)}static get[Symbol.species](){return Ch}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ch(...e[0].concat(this)):new Ch(...e.concat(this))}};function Cb(t){return no(t)?K_(t,()=>{}):t}function bb(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(cs(10));const r=n.insert(e,t);return t.set(e,r),r}function $Y(t){return typeof t=="boolean"}var zY=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new zM;return n&&($Y(n)?o.push(UY):o.push(jY(n.extraArgument))),o},WY="RTK_autoBatch",WM=t=>e=>{setTimeout(e,t)},qY=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WM(10),GY=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const u=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?qY:t.type==="callback"?t.queueNotification:WM(t.timeout),h=()=>{o=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const m=()=>i&&p(),_=r.subscribe(m);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){var m;try{return i=!((m=p==null?void 0:p.meta)!=null&&m[WY]),s=!i,s&&(o||(o=!0,c(h))),r.dispatch(p)}finally{i=!0}}})},KY=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new zM(t);return r&&i.push(GY(typeof r=="object"?r:void 0)),i};function HY(t){const e=zY(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(YS(n))u=AY(n);else throw new Error(cs(1));let c;typeof r=="function"?c=r(e):c=e();let h=Dy;i&&(h=BY({trace:!1,...typeof i=="object"&&i}));const p=PY(...c),m=KY(p);let _=typeof o=="function"?o(m):m();const A=h(..._);return LM(u,s,A)}function qM(t){const e={},n=[];let r;const i={addCase(s,o){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(cs(28));if(u in e)throw new Error(cs(29));return e[u]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function QY(t){return typeof t=="function"}function YY(t,e){let[n,r,i]=qM(e),s;if(QY(t))s=()=>Cb(t());else{const u=Cb(t);s=()=>u}function o(u=s(),c){let h=[n[c.type],...r.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,m)=>{if(m)if(Wu(p)){const A=m(p,c);return A===void 0?p:A}else{if(no(p))return K_(p,_=>m(_,c));{const _=m(p,c);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return o.getInitialState=s,o}var JY=Symbol.for("rtk-slice-createasyncthunk");function XY(t,e){return`${t}/${e}`}function ZY({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[JY];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(cs(11));typeof process<"u";const u=(typeof i.reducers=="function"?i.reducers(tJ()):i.reducers)||{},c=Object.keys(u),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(I,F){const z=typeof I=="string"?I:I.type;if(!z)throw new Error(cs(12));if(z in h.sliceCaseReducersByType)throw new Error(cs(13));return h.sliceCaseReducersByType[z]=F,p},addMatcher(I,F){return h.sliceMatchers.push({matcher:I,reducer:F}),p},exposeAction(I,F){return h.actionCreators[I]=F,p},exposeCaseReducer(I,F){return h.sliceCaseReducersByName[I]=F,p}};c.forEach(I=>{const F=u[I],z={reducerName:I,type:XY(s,I),createNotation:typeof i.reducers=="function"};rJ(F)?sJ(z,F,p,e):nJ(z,F,p)});function m(){const[I={},F=[],z=void 0]=typeof i.extraReducers=="function"?qM(i.extraReducers):[i.extraReducers],G={...I,...h.sliceCaseReducersByType};return YY(i.initialState,C=>{for(let S in G)C.addCase(S,G[S]);for(let S of h.sliceMatchers)C.addMatcher(S.matcher,S.reducer);for(let S of F)C.addMatcher(S.matcher,S.reducer);z&&C.addDefaultCase(z)})}const _=I=>I,A=new Map;let T;function k(I,F){return T||(T=m()),T(I,F)}function x(){return T||(T=m()),T.getInitialState()}function P(I,F=!1){function z(C){let S=C[I];return typeof S>"u"&&F&&(S=x()),S}function G(C=_){const S=bb(A,F,{insert:()=>new WeakMap});return bb(S,C,{insert:()=>{const L={};for(const[V,U]of Object.entries(i.selectors??{}))L[V]=eJ(U,C,x,F);return L}})}return{reducerPath:I,getSelectors:G,get selectors(){return G(z)},selectSlice:z}}const R={name:s,reducer:k,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:x,...P(o),injectInto(I,{reducerPath:F,...z}={}){const G=F??o;return I.inject({reducerPath:G,reducer:k},z),{...R,...P(G,!0)}}};return R}}function eJ(t,e,n,r){function i(s,...o){let u=e(s);return typeof u>"u"&&r&&(u=n()),t(u,...o)}return i.unwrapped=t,i}var GM=ZY();function tJ(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function nJ({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!iJ(r))throw new Error(cs(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Pb(t,o):Pb(t))}function rJ(t){return t._reducerDefinitionType==="asyncThunk"}function iJ(t){return t._reducerDefinitionType==="reducerWithPrepare"}function sJ({type:t,reducerName:e},n,r,i){if(!i)throw new Error(cs(18));const{payloadCreator:s,fulfilled:o,pending:u,rejected:c,settled:h,options:p}=n,m=i(t,s,p);r.exposeAction(e,m),o&&r.addCase(m.fulfilled,o),u&&r.addCase(m.pending,u),c&&r.addCase(m.rejected,c),h&&r.addMatcher(m.settled,h),r.exposeCaseReducer(e,{fulfilled:o||sg,pending:u||sg,rejected:c||sg,settled:h||sg})}function sg(){}function cs(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const xb=()=>{const t=yp();return{...zu({deck:t.slice(12),board:t.slice(0,12)}),selected:[],players:{},created:!1,gameStarted:!1,setFound:!1,declarer:null,gameOver:"",gameTitle:""}},KM=GM({name:"game",initialState:xb(),reducers:{setGameTitle:(t,e)=>{t.gameTitle=e.payload},setMyName:(t,e)=>{t.myName=e.payload},setPlayers:(t,e)=>{t.players=e.payload},setCreated:(t,e)=>{t.created=e.payload},setGameStarted:(t,e)=>{t.gameStarted=e.payload},handleCardClick:(t,e)=>{if(!t.declarer){const n=$_(e.payload,t.selected);br(n)&&(t.setFound=!0,t.declarer=t.myName),t.selected=n}},handleRedeal:t=>{const e=zu(t);return{...t,...e}},removeSet:t=>{if(br(t.selected)){const e=GS(t);return{...t,...e,setFound:!1,declarer:null}}},resetGame:t=>xb(),updateGame:(t,e)=>({...t,...e.payload}),setFullGame:(t,e)=>({...e.payload})}}),{setGameTitle:rne,setMyName:ine,setPlayers:sne,setCreated:one,setGameStarted:ane,handleCardClick:une,handleRedeal:lne,removeSet:cne,updateGame:dne,setFullGame:HM,resetGame:QM}=KM.actions,oJ=KM.reducer;function aJ(t){const{gameOver:e,myName:n,solo:r,finalScore:i,reset:s}=t,o=hd();t.handleGameOver;const u=Vi(h=>h.user),{user:c}=u;return w.jsx("div",{className:"game-over container mt-5",children:w.jsx("div",{className:"row justify-content-center",children:w.jsx("div",{className:"col col-md-6",children:w.jsxs("div",{className:"card shadow",children:[w.jsx("h3",{className:"text-center mt-3",children:"GAME OVER!"}),isNaN(i)?w.jsxs("p",{className:"text-center mb-4",children:["Winner: ",e," "]}):w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsxs("p",{className:"text-center my-2",children:["Final Score: ",i," "]}),w.jsx("div",{className:"d-flex flex-row justify-content-center",children:w.jsx("button",{className:"btn btn-primary my-2",onClick:()=>s(),children:"Reset"})})]}),w.jsxs("div",{className:"row justify-content-center",children:[w.jsx("div",{className:"col-4",children:w.jsx("p",{className:"text-center",children:w.jsx(wn,{onClick:()=>{o(QM())},to:"/",children:"Main"})})}),r&&c!==null&&w.jsx("div",{className:"col-4",children:w.jsx("p",{className:"text-center",children:w.jsx(wn,{to:"/stats",children:"Stats"})})})]})]})})})})}var YM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var u=arguments[o];u&&(s=i(s,r(u)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var u in s)e.call(s,u)&&s[u]&&(o=i(o,u));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(YM);var uJ=YM.exports;const Jr=$f(uJ),fd=!!(typeof window<"u"&&window.document&&window.document.createElement);var eT=!1,tT=!1;try{var a0={get passive(){return eT=!0},get once(){return tT=eT=!0}};fd&&(window.addEventListener("test",a0,a0),window.removeEventListener("test",a0,!0))}catch{}function JM(t,e,n,r){if(r&&typeof r!="boolean"&&!tT){var i=r.once,s=r.capture,o=n;!tT&&i&&(o=n.__once||function u(c){this.removeEventListener(e,u,s),n.call(this,c)},n.__once=o),t.addEventListener(e,o,eT?r:s)}t.addEventListener(e,n,r)}function H_(t){return t&&t.ownerDocument||document}function nT(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}var og;function kb(t){if((!og&&og!==0||t)&&fd){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),og=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return og}function lJ(){return B.useState(null)}function cJ(t){const e=B.useRef(t);return B.useEffect(()=>{e.current=t},[t]),e}function ns(t){const e=cJ(t);return B.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Nb=t=>!t||typeof t=="function"?t:e=>{t.current=e};function dJ(t,e){const n=Nb(t),r=Nb(e);return i=>{n&&n(i),r&&r(i)}}function vp(t,e){return B.useMemo(()=>dJ(t,e),[t,e])}function hJ(t){const e=B.useRef(t);return e.current=t,e}function XM(t){const e=hJ(t);B.useEffect(()=>()=>e.current(),[])}function fJ(t){var e=H_(t);return e&&e.defaultView||window}function pJ(t,e){return fJ(t).getComputedStyle(t,e)}var mJ=/([A-Z])/g;function gJ(t){return t.replace(mJ,"-$1").toLowerCase()}var yJ=/^ms-/;function ag(t){return gJ(t).replace(yJ,"-ms-")}var _J=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function vJ(t){return!!(t&&_J.test(t))}function Au(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(ag(e))||pJ(t).getPropertyValue(ag(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(ag(i)):vJ(i)?r+=i+"("+s+") ":n+=ag(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}function Fy(t,e,n,r){return JM(t,e,n,r),function(){nT(t,e,n,r)}}function wJ(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function EJ(t){var e=Au(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function TJ(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||wJ(t,"transitionend",!0)},e+n),s=Fy(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function ZM(t,e,n,r){n==null&&(n=EJ(t)||0);var i=TJ(t,n,r),s=Fy(t,"transitionend",e);return function(){i(),s()}}function u0(t){t===void 0&&(t=H_());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Ob(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function IJ(){const t=B.useRef(!0),e=B.useRef(()=>t.current);return B.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function SJ(t){const e=B.useRef(null);return B.useEffect(()=>{e.current=t}),e.current}const RJ="data-rr-ui-";function AJ(t){return`${RJ}${t}`}function PJ(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Db=AJ("modal-open");class ZS{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return PJ(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Au(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(Db,""),Au(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Db),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const e2=B.createContext(fd?window:void 0);e2.Provider;function e1(){return B.useContext(e2)}const l0=(t,e)=>fd?t==null?(e||H_()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function CJ(t,e){const n=e1(),[r,i]=B.useState(()=>l0(t,n==null?void 0:n.document));if(!r){const s=l0(t);s&&i(s)}return B.useEffect(()=>{},[e,r]),B.useEffect(()=>{const s=l0(t);s!==r&&i(s)},[t,r]),r}const bJ=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",xJ=typeof document<"u",Lb=xJ||bJ?B.useLayoutEffect:B.useEffect;function kJ({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=B.useRef(null),o=B.useRef(e),u=ns(n);B.useEffect(()=>{e?o.current=!0:u(s.current)},[e,u]);const c=vp(s,t.ref),h=B.cloneElement(t,{ref:c});return e?h:i||!o.current&&r?null:h}function NJ(t){return t.code==="Escape"||t.keyCode===27}function t2(){const t=B.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const OJ=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function DJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LJ(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:o,addEndListener:u,children:c}=t,h=DJ(t,OJ);const{major:p}=t2(),m=p>=19?c.props.ref:c.ref,_=B.useRef(null),A=vp(_,typeof c=="function"?null:m),T=G=>C=>{G&&_.current&&G(_.current,C)},k=B.useCallback(T(e),[e]),x=B.useCallback(T(n),[n]),P=B.useCallback(T(r),[r]),R=B.useCallback(T(i),[i]),I=B.useCallback(T(s),[s]),F=B.useCallback(T(o),[o]),z=B.useCallback(T(u),[u]);return Object.assign({},h,{nodeRef:_},e&&{onEnter:k},n&&{onEntering:x},r&&{onEntered:P},i&&{onExit:R},s&&{onExiting:I},o&&{onExited:F},u&&{addEndListener:z},{children:typeof c=="function"?(G,C)=>c(G,Object.assign({},C,{ref:A})):B.cloneElement(c,{ref:A})})}const MJ=["component"];function VJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}const FJ=B.forwardRef((t,e)=>{let{component:n}=t,r=VJ(t,MJ);const i=LJ(r);return w.jsx(n,Object.assign({ref:e},i))});function UJ({in:t,onTransition:e}){const n=B.useRef(null),r=B.useRef(!0),i=ns(e);return Lb(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),Lb(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function jJ({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=B.useState(!e);e&&s&&o(!1);const u=UJ({in:!!e,onTransition:h=>{const p=()=>{h.isStale()||(h.in?r==null||r(h.element,h.initial):(o(!0),n==null||n(h.element)))};Promise.resolve(i(h)).then(p,m=>{throw h.in||o(!0),m})}}),c=vp(u,t.ref);return s&&!e?null:B.cloneElement(t,{ref:c})}function Mb(t,e,n){return t?w.jsx(FJ,Object.assign({},n,{component:t})):e?w.jsx(jJ,Object.assign({},n,{transition:e})):w.jsx(kJ,Object.assign({},n))}const BJ=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function $J(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}let c0;function zJ(t){return c0||(c0=new ZS({ownerDocument:t==null?void 0:t.document})),c0}function WJ(t){const e=e1(),n=t||zJ(e),r=B.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:B.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:B.useCallback(i=>{r.current.backdrop=i},[])})}const n2=B.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:u=!0,keyboard:c=!0,onBackdropClick:h,onEscapeKeyDown:p,transition:m,runTransition:_,backdropTransition:A,runBackdropTransition:T,autoFocus:k=!0,enforceFocus:x=!0,restoreFocus:P=!0,restoreFocusOptions:R,renderDialog:I,renderBackdrop:F=We=>w.jsx("div",Object.assign({},We)),manager:z,container:G,onShow:C,onHide:S=()=>{},onExit:L,onExited:V,onExiting:U,onEnter:M,onEntering:O,onEntered:he}=t,re=$J(t,BJ);const le=e1(),ue=CJ(G),H=WJ(z),ae=IJ(),me=SJ(n),[ge,Se]=B.useState(!n),we=B.useRef(null);B.useImperativeHandle(e,()=>H,[H]),fd&&!me&&n&&(we.current=u0(le==null?void 0:le.document)),n&&ge&&Se(!1);const Ne=ns(()=>{if(H.add(),Me.current=Fy(document,"keydown",Le),xe.current=Fy(document,"focus",()=>setTimeout(Fe),!0),C&&C(),k){var We,ei;const an=u0((We=(ei=H.dialog)==null?void 0:ei.ownerDocument)!=null?We:le==null?void 0:le.document);H.dialog&&an&&!Ob(H.dialog,an)&&(we.current=an,H.dialog.focus())}}),Pe=ns(()=>{if(H.remove(),Me.current==null||Me.current(),xe.current==null||xe.current(),P){var We;(We=we.current)==null||We.focus==null||We.focus(R),we.current=null}});B.useEffect(()=>{!n||!ue||Ne()},[n,ue,Ne]),B.useEffect(()=>{ge&&Pe()},[ge,Pe]),XM(()=>{Pe()});const Fe=ns(()=>{if(!x||!ae()||!H.isTopModal())return;const We=u0(le==null?void 0:le.document);H.dialog&&We&&!Ob(H.dialog,We)&&H.dialog.focus()}),fe=ns(We=>{We.target===We.currentTarget&&(h==null||h(We),u===!0&&S())}),Le=ns(We=>{c&&NJ(We)&&H.isTopModal()&&(p==null||p(We),We.defaultPrevented||S())}),xe=B.useRef(),Me=B.useRef(),ct=(...We)=>{Se(!0),V==null||V(...We)};if(!ue)return null;const rt=Object.assign({role:r,ref:H.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},re,{style:s,className:i,tabIndex:-1});let Vt=I?I(rt):w.jsx("div",Object.assign({},rt,{children:B.cloneElement(o,{role:"document"})}));Vt=Mb(m,_,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:L,onExiting:U,onExited:ct,onEnter:M,onEntering:O,onEntered:he,children:Vt});let vt=null;return u&&(vt=F({ref:H.setBackdropRef,onClick:fe}),vt=Mb(A,T,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:vt})),w.jsx(w.Fragment,{children:ac.createPortal(w.jsxs(w.Fragment,{children:[vt,Vt]}),ue)})});n2.displayName="Modal";const qJ=Object.assign(n2,{Manager:ZS});function GJ(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function KJ(t,e){t.classList?t.classList.add(e):GJ(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}var HJ=Function.prototype.bind.call(Function.prototype.call,[].slice);function Bl(t,e){return HJ(t.querySelectorAll(e))}function Vb(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function QJ(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Vb(t.className,e):t.setAttribute("class",Vb(t.className&&t.className.baseVal||"",e))}const $l={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class YJ extends ZS{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,Au(n,{[e]:`${parseFloat(Au(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Au(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(KJ(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Bl(n,$l.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Bl(n,$l.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),Bl(n,$l.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();QJ(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Bl(n,$l.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Bl(n,$l.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Bl(n,$l.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let d0;function JJ(t){return d0||(d0=new YJ(t)),d0}function XJ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function rT(t,e){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rT(t,e)}function ZJ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rT(t,e)}var r2={exports:{}},eX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tX=eX,nX=tX;function i2(){}function s2(){}s2.resetWarningCache=i2;var rX=function(){function t(r,i,s,o,u,c){if(c!==nX){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s2,resetWarningCache:i2};return n.PropTypes=n,n};r2.exports=rX();var iX=r2.exports;const h0=$f(iX),Fb={disabled:!1},o2=He.createContext(null);var sX=function(e){return e.scrollTop},bh="unmounted",ru="exited",Do="entering",uu="entered",iT="exiting",lo=function(t){ZJ(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,u=o&&!o.isMounting?r.enter:r.appear,c;return s.appearStatus=null,r.in?u?(c=ru,s.appearStatus=Do):c=uu:r.unmountOnExit||r.mountOnEnter?c=bh:c=ru,s.state={status:c},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===bh?{status:ru}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Do&&o!==uu&&(s=Do):(o===Do||o===uu)&&(s=iT)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,u;return s=o=u=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,u=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:u}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Do){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ac.findDOMNode(this);o&&sX(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ru&&this.setState({status:bh})},n.performEnter=function(i){var s=this,o=this.props.enter,u=this.context?this.context.isMounting:i,c=this.props.nodeRef?[u]:[ac.findDOMNode(this),u],h=c[0],p=c[1],m=this.getTimeouts(),_=u?m.appear:m.enter;if(!i&&!o||Fb.disabled){this.safeSetState({status:uu},function(){s.props.onEntered(h)});return}this.props.onEnter(h,p),this.safeSetState({status:Do},function(){s.props.onEntering(h,p),s.onTransitionEnd(_,function(){s.safeSetState({status:uu},function(){s.props.onEntered(h,p)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),u=this.props.nodeRef?void 0:ac.findDOMNode(this);if(!s||Fb.disabled){this.safeSetState({status:ru},function(){i.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:iT},function(){i.props.onExiting(u),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ru},function(){i.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(u){o&&(o=!1,s.nextCallback=null,i(u))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ac.findDOMNode(this),u=i==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],h=c[0],p=c[1];this.props.addEndListener(h,p)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===bh)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var u=XJ(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return He.createElement(o2.Provider,{value:null},typeof o=="function"?o(i,u):He.cloneElement(He.Children.only(o),u))},e}(He.Component);lo.contextType=o2;lo.propTypes={};function zl(){}lo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:zl,onEntering:zl,onEntered:zl,onExit:zl,onExiting:zl,onExited:zl};lo.UNMOUNTED=bh;lo.EXITED=ru;lo.ENTERING=Do;lo.ENTERED=uu;lo.EXITING=iT;function Ub(t,e){const n=Au(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function oX(t,e){const n=Ub(t,"transitionDuration"),r=Ub(t,"transitionDelay"),i=ZM(t,s=>{s.target===t&&(i(),e(s))},n+r)}function aX(t){t.offsetHeight}function uX(t){return t&&"setState"in t?ac.findDOMNode(t):t??null}const lX=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:u,childRef:c,...h},p)=>{const m=B.useRef(null),_=vp(m,c),A=G=>{_(uX(G))},T=G=>C=>{G&&m.current&&G(m.current,C)},k=B.useCallback(T(t),[t]),x=B.useCallback(T(e),[e]),P=B.useCallback(T(n),[n]),R=B.useCallback(T(r),[r]),I=B.useCallback(T(i),[i]),F=B.useCallback(T(s),[s]),z=B.useCallback(T(o),[o]);return w.jsx(lo,{ref:p,...h,onEnter:k,onEntered:P,onEntering:x,onExit:R,onExited:F,onExiting:I,addEndListener:z,nodeRef:m,children:typeof u=="function"?(G,C)=>u(G,{...C,ref:A}):He.cloneElement(u,{ref:A})})}),cX={[Do]:"show",[uu]:"show"},t1=B.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},u=B.useCallback((p,m)=>{aX(p),r==null||r(p,m)},[r]),{major:c}=t2(),h=c>=19?e.props.ref:e.ref;return w.jsx(lX,{ref:s,addEndListener:oX,...o,onEnter:u,childRef:h,children:(p,m)=>B.cloneElement(e,{...m,className:Jr("fade",t,e.props.className,cX[p],n[p])})})});t1.displayName="Fade";const dX=["xxl","xl","lg","md","sm","xs"],hX="xs",a2=B.createContext({prefixes:{},breakpoints:dX,minBreakpoint:hX});function Ca(t,e){const{prefixes:n}=B.useContext(a2);return t||n[e]||e}function fX(){const{dir:t}=B.useContext(a2);return t==="rtl"}const u2=B.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Ca(e,"modal-body"),w.jsx(n,{ref:i,className:Jr(t,e),...r})));u2.displayName="ModalBody";const l2=B.createContext({onHide(){}}),n1=B.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:u,...c},h)=>{t=Ca(t,"modal");const p=`${t}-dialog`,m=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return w.jsx("div",{...c,ref:h,className:Jr(p,e,i&&`${t}-${i}`,r&&`${p}-centered`,u&&`${p}-scrollable`,s&&m),children:w.jsx("div",{className:Jr(`${t}-content`,n),children:o})})});n1.displayName="ModalDialog";const c2=B.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=Ca(e,"modal-footer"),w.jsx(n,{ref:i,className:Jr(t,e),...r})));c2.displayName="ModalFooter";const pX={"aria-label":h0.string,onClick:h0.func,variant:h0.oneOf(["white"])},r1=B.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>w.jsx("button",{ref:i,type:"button",className:Jr("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));r1.displayName="CloseButton";r1.propTypes=pX;const mX=B.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const u=B.useContext(l2),c=ns(()=>{u==null||u.onHide(),r==null||r()});return w.jsxs("div",{ref:o,...s,children:[i,n&&w.jsx(r1,{"aria-label":t,variant:e,onClick:c})]})}),d2=B.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=Ca(t,"modal-header"),w.jsx(mX,{ref:s,...i,className:Jr(e,t),closeLabel:n,closeButton:r})));d2.displayName="ModalHeader";const gX=t=>B.forwardRef((e,n)=>w.jsx("div",{...e,ref:n,className:Jr(e.className,t)})),yX=gX("h4"),h2=B.forwardRef(({className:t,bsPrefix:e,as:n=yX,...r},i)=>(e=Ca(e,"modal-title"),w.jsx(n,{ref:i,className:Jr(t,e),...r})));h2.displayName="ModalTitle";function _X(t){return w.jsx(t1,{...t,timeout:null})}function vX(t){return w.jsx(t1,{...t,timeout:null})}const f2=B.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=n1,"data-bs-theme":u,"aria-labelledby":c,"aria-describedby":h,"aria-label":p,show:m=!1,animation:_=!0,backdrop:A=!0,keyboard:T=!0,onEscapeKeyDown:k,onShow:x,onHide:P,container:R,autoFocus:I=!0,enforceFocus:F=!0,restoreFocus:z=!0,restoreFocusOptions:G,onEntered:C,onExit:S,onExiting:L,onEnter:V,onEntering:U,onExited:M,backdropClassName:O,manager:he,...re},le)=>{const[ue,H]=B.useState({}),[ae,me]=B.useState(!1),ge=B.useRef(!1),Se=B.useRef(!1),we=B.useRef(null),[Ne,Pe]=lJ(),Fe=vp(le,Pe),fe=ns(P),Le=fX();t=Ca(t,"modal");const xe=B.useMemo(()=>({onHide:fe}),[fe]);function Me(){return he||JJ({isRTL:Le})}function ct(Ve){if(!fd)return;const wt=Me().getScrollbarWidth()>0,gr=Ve.scrollHeight>H_(Ve).documentElement.clientHeight;H({paddingRight:wt&&!gr?kb():void 0,paddingLeft:!wt&&gr?kb():void 0})}const rt=ns(()=>{Ne&&ct(Ne.dialog)});XM(()=>{nT(window,"resize",rt),we.current==null||we.current()});const Vt=()=>{ge.current=!0},vt=Ve=>{ge.current&&Ne&&Ve.target===Ne.dialog&&(Se.current=!0),ge.current=!1},We=()=>{me(!0),we.current=ZM(Ne.dialog,()=>{me(!1)})},ei=Ve=>{Ve.target===Ve.currentTarget&&We()},an=Ve=>{if(A==="static"){ei(Ve);return}if(Se.current||Ve.target!==Ve.currentTarget){Se.current=!1;return}P==null||P()},gs=Ve=>{T?k==null||k(Ve):(Ve.preventDefault(),A==="static"&&We())},sl=(Ve,wt)=>{Ve&&ct(Ve),V==null||V(Ve,wt)},Ii=Ve=>{we.current==null||we.current(),S==null||S(Ve)},$n=(Ve,wt)=>{U==null||U(Ve,wt),JM(window,"resize",rt)},ys=Ve=>{Ve&&(Ve.style.display=""),M==null||M(Ve),nT(window,"resize",rt)},Bi=B.useCallback(Ve=>w.jsx("div",{...Ve,className:Jr(`${t}-backdrop`,O,!_&&"show")}),[_,O,t]),co={...n,...ue};co.display="block";const $i=Ve=>w.jsx("div",{role:"dialog",...Ve,style:co,className:Jr(e,t,ae&&`${t}-static`,!_&&"show"),onClick:A?an:void 0,onMouseUp:vt,"data-bs-theme":u,"aria-label":p,"aria-labelledby":c,"aria-describedby":h,children:w.jsx(o,{...re,onMouseDown:Vt,className:r,contentClassName:i,children:s})});return w.jsx(l2.Provider,{value:xe,children:w.jsx(qJ,{show:m,ref:Fe,backdrop:A,container:R,keyboard:!0,autoFocus:I,enforceFocus:F,restoreFocus:z,restoreFocusOptions:G,onEscapeKeyDown:gs,onShow:x,onHide:P,onEnter:sl,onEntering:$n,onEntered:C,onExit:Ii,onExiting:L,onExited:ys,manager:Me(),transition:_?_X:void 0,backdropTransition:_?vX:void 0,renderBackdrop:Bi,renderDialog:$i})})});f2.displayName="Modal";const Jn=Object.assign(f2,{Body:u2,Header:d2,Title:h2,Footer:c2,Dialog:n1,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),i1=["light-blue","pink","amber","light-green","purple","orange","error-red"];function wX(t,e){const n=B.useRef();B.useEffect(()=>{n.current=t},[t]),B.useEffect(()=>{function r(){n.current()}if(e!==null){let i=setInterval(r,e);return()=>clearInterval(i)}},[e])}const jb=t=>{const e=i=>{var s="00",o=(s+i).slice(-s.length);return o},n=Math.floor(t/60),r=t-60*n;return`${n}:${e(r)}`};function EX({gameMode:t,deck:e,board:n,declarer:r,setsFound:i,players:s,elapsedTime:o,timeLeft:u}){const c=Df(n);switch(t){case"shared-device":return null;case"versus":return w.jsx("div",{className:`topbar py-2 bg-${r?"light":"dark"}-orange`,children:w.jsx("nav",{className:"text-white",children:w.jsxs("div",{className:"d-flex justify-content-around text-center",children:[w.jsxs("div",{children:["Sets: ",c]}),w.jsx("div",{children:r&&w.jsxs(w.Fragment,{children:["SET! ",r]})})]})})});case"puzzle":return w.jsx("div",{className:"navbar-fixed",children:w.jsx("nav",{children:w.jsxs("div",{className:"nav-wrapper",style:{display:"flex",justifyContent:"space-between"},children:[w.jsxs("div",{children:["Total Sets: ",c]}),w.jsxs("div",{children:["Remaining: ",c-i.length]}),w.jsxs("div",{children:["Time: ",jb(o)]})]})})});case"training":return w.jsx("div",{className:"topbar py-2 bg-dark-orange navbar-fixed",children:w.jsx("nav",{children:w.jsxs("div",{className:"nav-wrapper d-flex justify-content-around",children:[w.jsxs("div",{children:["Time: ",jb(o)]}),w.jsxs("div",{children:["Score: ",s.you.score]}),w.jsxs("div",{children:["Remaining: ",u>0?u:"X"]})]})})});default:return null}}function p2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=p2(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wo(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=p2(t))&&(r&&(r+=" "),r+=e);return r}const Vf=t=>typeof t=="number"&&!isNaN(t),Pu=t=>typeof t=="string",zr=t=>typeof t=="function",Lg=t=>Pu(t)||zr(t)?t:null,sT=t=>B.isValidElement(t)||Pu(t)||zr(t)||Vf(t);function TX(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function Q_(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:u,position:c,preventExitTransition:h,done:p,nodeRef:m,isIn:_,playToast:A}=o;const T=r?`${e}--${c}`:e,k=r?`${n}--${c}`:n,x=B.useRef(0);return B.useLayoutEffect(()=>{const P=m.current,R=T.split(" "),I=F=>{F.target===m.current&&(A(),P.removeEventListener("animationend",I),P.removeEventListener("animationcancel",I),x.current===0&&F.type!=="animationcancel"&&P.classList.remove(...R))};P.classList.add(...R),P.addEventListener("animationend",I),P.addEventListener("animationcancel",I)},[]),B.useEffect(()=>{const P=m.current,R=()=>{P.removeEventListener("animationend",R),i?TX(P,p,s):p()};_||(h?R():(x.current=1,P.className+=` ${k}`,P.addEventListener("animationend",R)))},[_]),He.createElement(He.Fragment,null,u)}}function Bb(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const ur=new Map;let Ff=[];const oT=new Set,IX=t=>oT.forEach(e=>e(t)),m2=()=>ur.size>0;function g2(t,e){var n;if(e)return!((n=ur.get(e))==null||!n.isToastActive(t));let r=!1;return ur.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function y2(t,e){sT(t)&&(m2()||Ff.push({content:t,options:e}),ur.forEach(n=>{n.buildToast(t,e)}))}function $b(t,e){ur.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function SX(t){const{subscribe:e,getSnapshot:n,setProps:r}=B.useRef(function(s){const o=s.containerId||1;return{subscribe(u){const c=function(p,m,_){let A=1,T=0,k=[],x=[],P=[],R=m;const I=new Map,F=new Set,z=()=>{P=Array.from(I.values()),F.forEach(S=>S())},G=S=>{x=S==null?[]:x.filter(L=>L!==S),z()},C=S=>{const{toastId:L,onOpen:V,updateId:U,children:M}=S.props,O=U==null;S.staleId&&I.delete(S.staleId),I.set(L,S),x=[...x,S.props.toastId].filter(he=>he!==S.staleId),z(),_(Bb(S,O?"added":"updated")),O&&zr(V)&&V(B.isValidElement(M)&&M.props)};return{id:p,props:R,observe:S=>(F.add(S),()=>F.delete(S)),toggle:(S,L)=>{I.forEach(V=>{L!=null&&L!==V.props.toastId||zr(V.toggle)&&V.toggle(S)})},removeToast:G,toasts:I,clearQueue:()=>{T-=k.length,k=[]},buildToast:(S,L)=>{if((Se=>{let{containerId:we,toastId:Ne,updateId:Pe}=Se;const Fe=we?we!==p:p!==1,fe=I.has(Ne)&&Pe==null;return Fe||fe})(L))return;const{toastId:V,updateId:U,data:M,staleId:O,delay:he}=L,re=()=>{G(V)},le=U==null;le&&T++;const ue={...R,style:R.toastStyle,key:A++,...Object.fromEntries(Object.entries(L).filter(Se=>{let[we,Ne]=Se;return Ne!=null})),toastId:V,updateId:U,data:M,closeToast:re,isIn:!1,className:Lg(L.className||R.toastClassName),bodyClassName:Lg(L.bodyClassName||R.bodyClassName),progressClassName:Lg(L.progressClassName||R.progressClassName),autoClose:!L.isLoading&&(H=L.autoClose,ae=R.autoClose,H===!1||Vf(H)&&H>0?H:ae),deleteToast(){const Se=I.get(V),{onClose:we,children:Ne}=Se.props;zr(we)&&we(B.isValidElement(Ne)&&Ne.props),_(Bb(Se,"removed")),I.delete(V),T--,T<0&&(T=0),k.length>0?C(k.shift()):z()}};var H,ae;ue.closeButton=R.closeButton,L.closeButton===!1||sT(L.closeButton)?ue.closeButton=L.closeButton:L.closeButton===!0&&(ue.closeButton=!sT(R.closeButton)||R.closeButton);let me=S;B.isValidElement(S)&&!Pu(S.type)?me=B.cloneElement(S,{closeToast:re,toastProps:ue,data:M}):zr(S)&&(me=S({closeToast:re,toastProps:ue,data:M}));const ge={content:me,props:ue,staleId:O};R.limit&&R.limit>0&&T>R.limit&&le?k.push(ge):Vf(he)?setTimeout(()=>{C(ge)},he):C(ge)},setProps(S){R=S},setToggle:(S,L)=>{I.get(S).toggle=L},isToastActive:S=>x.some(L=>L===S),getSnapshot:()=>P}}(o,s,IX);ur.set(o,c);const h=c.observe(u);return Ff.forEach(p=>y2(p.content,p.options)),Ff=[],()=>{h(),ur.delete(o)}},setProps(u){var c;(c=ur.get(o))==null||c.setProps(u)},getSnapshot(){var u;return(u=ur.get(o))==null?void 0:u.getSnapshot()}}}(t)).current;r(t);const i=B.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return t.newestOnTop&&i.reverse(),i.forEach(u=>{const{position:c}=u.props;o.has(c)||o.set(c,[]),o.get(c).push(u)}),Array.from(o,u=>s(u[0],u[1]))},isToastActive:g2,count:i==null?void 0:i.length}}function RX(t){const[e,n]=B.useState(!1),[r,i]=B.useState(!1),s=B.useRef(null),o=B.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:c,closeToast:h,onClick:p,closeOnClick:m}=t;var _,A;function T(){n(!0)}function k(){n(!1)}function x(I){const F=s.current;o.canDrag&&F&&(o.didMove=!0,e&&k(),o.delta=t.draggableDirection==="x"?I.clientX-o.start:I.clientY-o.start,o.start!==I.clientX&&(o.canCloseOnClick=!1),F.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,F.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function P(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",P);const I=s.current;if(o.canDrag&&o.didMove&&I){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();I.style.transition="transform 0.2s, opacity 0.2s",I.style.removeProperty("transform"),I.style.removeProperty("opacity")}}(A=ur.get((_={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||A.setToggle(_.id,_.fn),B.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||k(),window.addEventListener("focus",T),window.addEventListener("blur",k),()=>{window.removeEventListener("focus",T),window.removeEventListener("blur",k)}},[t.pauseOnFocusLoss]);const R={onPointerDown:function(I){if(t.draggable===!0||t.draggable===I.pointerType){o.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",P);const F=s.current;o.canCloseOnClick=!0,o.canDrag=!0,F.style.transition="none",t.draggableDirection==="x"?(o.start=I.clientX,o.removalDistance=F.offsetWidth*(t.draggablePercent/100)):(o.start=I.clientY,o.removalDistance=F.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(I){const{top:F,bottom:z,left:G,right:C}=s.current.getBoundingClientRect();I.nativeEvent.type!=="touchend"&&t.pauseOnHover&&I.clientX>=G&&I.clientX<=C&&I.clientY>=F&&I.clientY<=z?k():T()}};return u&&c&&(R.onMouseEnter=k,t.stacked||(R.onMouseLeave=T)),m&&(R.onClick=I=>{p&&p(I),o.canCloseOnClick&&h()}),{playToast:T,pauseToast:k,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:R}}function AX(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:u,controlledProgress:c,progress:h,rtl:p,isIn:m,theme:_}=t;const A=s||c&&h===0,T={...u,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};c&&(T.transform=`scaleX(${h})`);const k=Wo("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${_}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":p}),x=zr(o)?o({rtl:p,type:i,defaultClassName:k}):Wo(k,o),P={[c&&h>=1?"onTransitionEnd":"onAnimationEnd"]:c&&h<1?null:()=>{m&&r()}};return He.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":A},He.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${_} Toastify__progress-bar--${i}`}),He.createElement("div",{role:"progressbar","aria-hidden":A?"true":"false","aria-label":"notification timer",className:x,style:T,...P}))}let PX=1;const _2=()=>""+PX++;function CX(t){return t&&(Pu(t.toastId)||Vf(t.toastId))?t.toastId:_2()}function Kh(t,e){return y2(t,e),e.toastId}function Uy(t,e){return{...e,type:e&&e.type||t,toastId:CX(e)}}function ug(t){return(e,n)=>Kh(e,Uy(t,n))}function Rt(t,e){return Kh(t,Uy("default",e))}Rt.loading=(t,e)=>Kh(t,Uy("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Rt.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=Pu(i)?Rt.loading(i,n):Rt.loading(i.render,{...n,...i}));const u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(p,m,_)=>{if(m==null)return void Rt.dismiss(r);const A={type:p,...u,...n,data:_},T=Pu(m)?{render:m}:m;return r?Rt.update(r,{...A,...T}):Rt(T.render,{...A,...T}),_},h=zr(t)?t():t;return h.then(p=>c("success",o,p)).catch(p=>c("error",s,p)),h},Rt.success=ug("success"),Rt.info=ug("info"),Rt.error=ug("error"),Rt.warning=ug("warning"),Rt.warn=Rt.warning,Rt.dark=(t,e)=>Kh(t,Uy("default",{theme:"dark",...e})),Rt.dismiss=function(t){(function(e){var n;if(m2()){if(e==null||Pu(n=e)||Vf(n))ur.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=ur.get(e.containerId);r?r.removeToast(e.id):ur.forEach(i=>{i.removeToast(e.id)})}}else Ff=Ff.filter(r=>e!=null&&r.options.toastId!==e)})(t)},Rt.clearWaitingQueue=function(t){t===void 0&&(t={}),ur.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Rt.isActive=g2,Rt.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=ur.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:_2()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,Kh(o,s)}},Rt.done=t=>{Rt.update(t,{progress:1})},Rt.onChange=function(t){return oT.add(t),()=>{oT.delete(t)}},Rt.play=t=>$b(!0,t),Rt.pause=t=>$b(!1,t);const bX=typeof window<"u"?B.useLayoutEffect:B.useEffect,lg=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return He.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},f0={info:function(t){return He.createElement(lg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return He.createElement(lg,{...t},He.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return He.createElement(lg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return He.createElement(lg,{...t},He.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return He.createElement("div",{className:"Toastify__spinner"})}},xX=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=RX(t),{closeButton:o,children:u,autoClose:c,onClick:h,type:p,hideProgressBar:m,closeToast:_,transition:A,position:T,className:k,style:x,bodyClassName:P,bodyStyle:R,progressClassName:I,progressStyle:F,updateId:z,role:G,progress:C,rtl:S,toastId:L,deleteToast:V,isIn:U,isLoading:M,closeOnClick:O,theme:he}=t,re=Wo("Toastify__toast",`Toastify__toast-theme--${he}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":O}),le=zr(k)?k({rtl:S,position:T,type:p,defaultClassName:re}):Wo(re,k),ue=function(ge){let{theme:Se,type:we,isLoading:Ne,icon:Pe}=ge,Fe=null;const fe={theme:Se,type:we};return Pe===!1||(zr(Pe)?Fe=Pe({...fe,isLoading:Ne}):B.isValidElement(Pe)?Fe=B.cloneElement(Pe,fe):Ne?Fe=f0.spinner():(Le=>Le in f0)(we)&&(Fe=f0[we](fe))),Fe}(t),H=!!C||!c,ae={closeToast:_,type:p,theme:he};let me=null;return o===!1||(me=zr(o)?o(ae):B.isValidElement(o)?B.cloneElement(o,ae):function(ge){let{closeToast:Se,theme:we,ariaLabel:Ne="close"}=ge;return He.createElement("button",{className:`Toastify__close-button Toastify__close-button--${we}`,type:"button",onClick:Pe=>{Pe.stopPropagation(),Se(Pe)},"aria-label":Ne},He.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},He.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(ae)),He.createElement(A,{isIn:U,done:V,position:T,preventExitTransition:n,nodeRef:r,playToast:s},He.createElement("div",{id:L,onClick:h,"data-in":U,className:le,...i,style:x,ref:r},He.createElement("div",{...U&&{role:G},className:zr(P)?P({type:p}):Wo("Toastify__toast-body",P),style:R},ue!=null&&He.createElement("div",{className:Wo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},ue),He.createElement("div",null,u)),me,He.createElement(AX,{...z&&!H?{key:`pb-${z}`}:{},rtl:S,theme:he,delay:c,isRunning:e,isIn:U,closeToast:_,hide:m,type:p,style:F,className:I,controlledProgress:H,progress:C||0})))},Y_=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},kX=Q_(Y_("bounce",!0)),NX=Q_(Y_("slide",!0));Q_(Y_("zoom"));Q_(Y_("flip"));const OX={position:"top-right",transition:kX,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function DX(t){let e={...OX,...t};const n=t.stacked,[r,i]=B.useState(!0),s=B.useRef(null),{getToastToRender:o,isToastActive:u,count:c}=SX(e),{className:h,style:p,rtl:m,containerId:_}=e;function A(k){const x=Wo("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":m});return zr(h)?h({position:k,rtl:m,defaultClassName:x}):Wo(x,Lg(h))}function T(){n&&(i(!0),Rt.play())}return bX(()=>{if(n){var k;const x=s.current.querySelectorAll('[data-in="true"]'),P=12,R=(k=e.position)==null?void 0:k.includes("top");let I=0,F=0;Array.from(x).reverse().forEach((z,G)=>{const C=z;C.classList.add("Toastify__toast--stacked"),G>0&&(C.dataset.collapsed=`${r}`),C.dataset.pos||(C.dataset.pos=R?"top":"bot");const S=I*(r?.2:1)+(r?0:P*G);C.style.setProperty("--y",`${R?S:-1*S}px`),C.style.setProperty("--g",`${P}`),C.style.setProperty("--s",""+(1-(r?F:0))),I+=C.offsetHeight,F+=.025})}},[r,c,n]),He.createElement("div",{ref:s,className:"Toastify",id:_,onMouseEnter:()=>{n&&(i(!1),Rt.pause())},onMouseLeave:T},o((k,x)=>{const P=x.length?{...p}:{...p,pointerEvents:"none"};return He.createElement("div",{className:A(k),style:P,key:`container-${k}`},x.map(R=>{let{content:I,props:F}=R;return He.createElement(xX,{...F,stacked:n,collapseAll:T,isIn:u(F.toastId,F.containerId),style:F.style,key:`toast-${F.key}`},I)}))}))}function zb({players:t,declarer:e,handlePlayerClick:n}){return w.jsx("div",{className:"row my-4 text-center justify-content-between",children:t.map(r=>w.jsx("div",{className:`col-2 bg-${r.color} ${r.name==e?"active-player":""}`,onClick:()=>{n(r.name)},children:w.jsx("p",{className:"my-2 align-middle",children:r.name==e?"SET!":r.score})},r.name))})}function J_({gameMode:t,handlePlayerClick:e,handleCardClick:n,handleRedeal:r,handleGameOver:i=()=>{}}){const[s,o]=B.useState(null),[u,c]=B.useState(window.innerHeight),h=Vi(U=>U.game),p=Vi(U=>U.user.user.nickname),{board:m,selected:_,declarer:A,players:T,gameOver:k,sharedDevice:x,solo:P,hostConfirmedSet:R}=h,I=br(_),F=({customText:U="Set Found"}={})=>{Rt.success(U,{transition:NX,position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"})};B.useEffect(()=>{console.log(h),R&&I&&F({customText:`Set Found by ${A}`})},[R]),B.useEffect(()=>{const U=jt.debounce(()=>{c(window.innerHeight)},150);return window.addEventListener("resize",U),function(){window.removeEventListener("resize",U)}},[]),B.useEffect(()=>{o(Df(m,{debug:!1}))},[m]);const G=(({declarer:U,players:M})=>U?jt.get(M,`${U}.color`,""):jt.get(M,`${p}.color`,""))({declarer:A,players:T});if(!jt.isEmpty(k))return w.jsx(aJ,{gameOver:k,myName:p,solo:P,handleGameOver:i});let C=jt.map(T,(U,M)=>({name:M,...U}));C=$o.orderBy(C,U=>U.position,"asc");const S=Math.ceil(C.length/2),L=C.slice(0,S),V=C.slice(S);return w.jsxs(B.Fragment,{children:[(C.length===0||!Object.keys(T).includes(p))&&w.jsxs(Jn,{show:!0,children:[w.jsx(Jn.Header,{children:w.jsx(Jn.Title,{children:"Waiting to join..."})}),w.jsxs(Jn.Body,{children:[w.jsx("h4",{children:"Players:"}),w.jsx("ul",{className:"collection",children:jt.map(T,(U,M)=>w.jsx("li",{className:"collection-item",children:w.jsxs("span",{className:"player-name",children:[M," ",U.host&&"(host)"]})},M))})]})]}),w.jsx(EX,{gameMode:t,...h}),w.jsxs("div",{className:"container",children:[x&&w.jsx(zb,{players:L,declarer:A,handlePlayerClick:e}),w.jsxs("div",{className:"board d-flex flex-column align-items-center",children:[w.jsx("div",{className:"board-main-container",children:m.map(U=>w.jsx("div",{className:"card-wrapper",onClick:()=>{n(U)},children:w.jsx("div",{className:hb(["card-holder",_.includes(U)?`bg-${G}`:null]),children:w.jsx("div",{className:hb(["card",I&&_.length===3&&!_.includes(U)?"blurry":null]),children:w.jsx(ir,{desc:U})})})},U))}),!x&&!["puzzle","training"].includes(t)&&w.jsx("div",{className:"row my-1 text-center fixed-bottom",children:jt.map(C,U=>{const{name:M}=U;return w.jsx("div",{className:"col s4 m3",children:w.jsxs("span",{className:`player-name bg-${U.color}`,children:[M,": ",U.score]})},M)})}),r&&w.jsx("div",{className:"row mt-3",children:w.jsx("div",{className:"col mt-3 mt-md-4",children:w.jsx("button",{onClick:r,className:"btn btn-primary",children:"Shuffle"})})})]}),x&&w.jsx(zb,{players:V,declarer:A,handlePlayerClick:e})]})]})}var v2={},s1={},o1={},pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.Direction=void 0;var Wb;(function(t){t.Right="to right",t.Left="to left",t.Down="to bottom",t.Up="to top"})(Wb||(pd.Direction=Wb={}));(function(t){var e=_n&&_n.__spreadArray||function(M,O,he){if(he||arguments.length===2)for(var re=0,le=O.length,ue;re<le;re++)(ue||!(re in O))&&(ue||(ue=Array.prototype.slice.call(O,0,re)),ue[re]=O[re]);return M.concat(ue||Array.prototype.slice.call(O))};Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.useThumbOverlap=t.assertUnreachable=t.voidFn=t.getTrackBackground=t.replaceAt=t.schd=t.translate=t.getClosestThumbIndex=t.translateThumbs=t.getPaddingAndBorder=t.getMargin=t.checkInitialOverlap=t.checkValuesAgainstBoundaries=t.checkBoundaries=t.isVertical=t.relativeValue=t.normalizeValue=t.isStepDivisible=t.isTouchEvent=t.getStepDecimals=void 0;var n=B,r=pd,i=function(M){var O=M.toString().split(".")[1];return O?O.length:0};t.getStepDecimals=i;function s(M){return M.touches&&M.touches.length||M.changedTouches&&M.changedTouches.length}t.isTouchEvent=s;function o(M,O,he){var re=(O-M)/he,le=8,ue=Number(re.toFixed(le));return parseInt(ue.toString(),10)===ue}t.isStepDivisible=o;function u(M,O,he,re,le,ue,H){var ae=1e11;if(M=Math.round(M*ae)/ae,!ue){var me=H[O-1],ge=H[O+1];if(me&&me>M)return me;if(ge&&ge<M)return ge}if(M>re)return re;if(M<he)return he;var Se=Math.floor(M*ae-he*ae)%Math.floor(le*ae),we=Math.floor(M*ae-Math.abs(Se)),Ne=Se===0?M:we/ae,Pe=Math.abs(Se/ae)<le/2?Ne:Ne+le,Fe=(0,t.getStepDecimals)(le);return parseFloat(Pe.toFixed(Fe))}t.normalizeValue=u;function c(M,O,he){return(M-O)/(he-O)}t.relativeValue=c;function h(M){return M===r.Direction.Up||M===r.Direction.Down}t.isVertical=h;function p(M,O,he){if(O>=he)throw new RangeError("min (".concat(O,") is equal/bigger than max (").concat(he,")"));if(M<O)throw new RangeError("value (".concat(M,") is smaller than min (").concat(O,")"));if(M>he)throw new RangeError("value (".concat(M,") is bigger than max (").concat(he,")"))}t.checkBoundaries=p;function m(M,O,he){return M<O?O:M>he?he:M}t.checkValuesAgainstBoundaries=m;function _(M){if(!(M.length<2)&&!M.slice(1).every(function(O,he){return M[he]<=O}))throw new RangeError("values={[".concat(M,"]} needs to be sorted when allowOverlap={false}"))}t.checkInitialOverlap=_;function A(M){var O=window.getComputedStyle(M);return{top:parseInt(O["margin-top"],10),bottom:parseInt(O["margin-bottom"],10),left:parseInt(O["margin-left"],10),right:parseInt(O["margin-right"],10)}}t.getMargin=A;function T(M){var O=window.getComputedStyle(M);return{top:parseInt(O["padding-top"],10)+parseInt(O["border-top-width"],10),bottom:parseInt(O["padding-bottom"],10)+parseInt(O["border-bottom-width"],10),left:parseInt(O["padding-left"],10)+parseInt(O["border-left-width"],10),right:parseInt(O["padding-right"],10)+parseInt(O["border-right-width"],10)}}t.getPaddingAndBorder=T;function k(M,O,he){var re=he?-1:1;M.forEach(function(le,ue){return P(le,re*O[ue].x,O[ue].y)})}t.translateThumbs=k;function x(M,O,he,re){for(var le=0,ue=V(M[0],O,he,re),H=1;H<M.length;H++){var ae=V(M[H],O,he,re);ae<ue&&(ue=ae,le=H)}return le}t.getClosestThumbIndex=x;function P(M,O,he){M.style.transform="translate(".concat(O,"px, ").concat(he,"px)")}t.translate=P;var R=function(M){var O=[],he=null,re=function(){for(var le=[],ue=0;ue<arguments.length;ue++)le[ue]=arguments[ue];O=le,!he&&(he=requestAnimationFrame(function(){he=null,M.apply(void 0,O)}))};return re};t.schd=R;function I(M,O,he){var re=M.slice(0);return re[O]=he,re}t.replaceAt=I;function F(M){var O=M.values,he=M.colors,re=M.min,le=M.max,ue=M.direction,H=ue===void 0?r.Direction.Right:ue,ae=M.rtl,me=ae===void 0?!1:ae;me&&H===r.Direction.Right?H=r.Direction.Left:me&&r.Direction.Left&&(H=r.Direction.Right);var ge=O.slice(0).sort(function(we,Ne){return we-Ne}).map(function(we){return(we-re)/(le-re)*100}),Se=ge.reduce(function(we,Ne,Pe){return"".concat(we,", ").concat(he[Pe]," ").concat(Ne,"%, ").concat(he[Pe+1]," ").concat(Ne,"%")},"");return"linear-gradient(".concat(H,", ").concat(he[0]," 0%").concat(Se,", ").concat(he[he.length-1]," 100%)")}t.getTrackBackground=F;function z(){}t.voidFn=z;function G(M){throw new Error("Didn't expect to get here")}t.assertUnreachable=G;var C=function(M,O,he,re,le){le===void 0&&(le=function(H){return H});var ue=Math.ceil(e([M],Array.from(M.children),!0).reduce(function(H,ae){var me=Math.ceil(ae.getBoundingClientRect().width);if(ae.innerText&&ae.innerText.includes(he)&&ae.childElementCount===0){var ge=ae.cloneNode(!0);ge.innerHTML=le(O.toFixed(re)),ge.style.visibility="hidden",document.body.appendChild(ge),me=Math.ceil(ge.getBoundingClientRect().width),document.body.removeChild(ge)}return me>H?me:H},M.getBoundingClientRect().width));return ue},S=function(M,O,he,re,le,ue,H){H===void 0&&(H=function(ge){return ge});var ae=[],me=function(ge){var Se=C(he[ge],re[ge],le,ue,H),we=O[ge].x;O.forEach(function(Ne,Pe){var Fe=Ne.x,fe=C(he[Pe],re[Pe],le,ue,H);ge!==Pe&&(we>=Fe&&we<=Fe+fe||we+Se>=Fe&&we+Se<=Fe+fe)&&(ae.includes(Pe)||(ae.push(ge),ae.push(Pe),ae=e(e([],ae,!0),[ge,Pe],!1),me(Pe)))})};return me(M),Array.from(new Set(ae.sort()))},L=function(M,O,he,re,le,ue){re===void 0&&(re=.1),le===void 0&&(le=" - "),ue===void 0&&(ue=function(Pe){return Pe});var H=(0,t.getStepDecimals)(re),ae=(0,n.useState)({}),me=ae[0],ge=ae[1],Se=(0,n.useState)(ue(O[he].toFixed(H))),we=Se[0],Ne=Se[1];return(0,n.useEffect)(function(){if(M){var Pe=M.getThumbs();if(Pe.length<1)return;var Fe={},fe=M.getOffsets(),Le=S(he,fe,Pe,O,le,H,ue),xe=ue(O[he].toFixed(H));if(Le.length){var Me=Le.reduce(function(We,ei,an,gs){return We.length?e(e([],We,!0),[fe[gs[an]].x],!1):[fe[gs[an]].x]},[]);if(Math.min.apply(Math,Me)===fe[he].x){var ct=[];Le.forEach(function(We){ct.push(O[We].toFixed(H))}),xe=Array.from(new Set(ct.sort(function(We,ei){return parseFloat(We)-parseFloat(ei)}))).map(ue).join(le);var rt=Math.min.apply(Math,Me),Vt=Math.max.apply(Math,Me),vt=Pe[Le[Me.indexOf(Vt)]].getBoundingClientRect().width;Fe.left="".concat(Math.abs(rt-(Vt+vt))/2,"px"),Fe.transform="translate(-50%, 0)"}else Fe.visibility="hidden"}Ne(xe),ge(Fe)}},[M,O]),[we,me]};t.useThumbOverlap=L;function V(M,O,he,re){var le=M.getBoundingClientRect(),ue=le.left,H=le.top,ae=le.width,me=le.height;return h(re)?Math.abs(he-(H+me/2)):Math.abs(O-(ue+ae/2))}var U=function(){var M,O=((M=navigator.userAgentData)===null||M===void 0?void 0:M.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(O)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};t.isIOS=U})(o1);var LX=_n&&_n.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MX=_n&&_n.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),VX=_n&&_n.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),FX=_n&&_n.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&MX(e,t,n);return VX(e,t),e},qb=_n&&_n.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(s1,"__esModule",{value:!0});var cg=FX(B),st=o1,gn=pd,UX=["ArrowRight","ArrowUp","k","PageUp"],jX=["ArrowLeft","ArrowDown","j","PageDown"],BX=function(t){LX(e,t);function e(n){var r=t.call(this,n)||this;if(r.trackRef=cg.createRef(),r.thumbRefs=[],r.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(r.props.values.length).fill(0).map(function(i,s){return s}),isChanged:!1,markOffsets:[]},r.getOffsets=function(){var i=r.props,s=i.direction,o=i.values,u=i.min,c=i.max,h=r.trackRef.current;if(!h)return console.warn("No track element found."),[];var p=h.getBoundingClientRect(),m=(0,st.getPaddingAndBorder)(h);return r.getThumbs().map(function(_,A){var T={x:0,y:0},k=_.getBoundingClientRect(),x=(0,st.getMargin)(_);switch(s){case gn.Direction.Right:return T.x=(x.left+m.left)*-1,T.y=((k.height-p.height)/2+m.top)*-1,T.x+=p.width*(0,st.relativeValue)(o[A],u,c)-k.width/2,T;case gn.Direction.Left:return T.x=(x.right+m.right)*-1,T.y=((k.height-p.height)/2+m.top)*-1,T.x+=p.width-p.width*(0,st.relativeValue)(o[A],u,c)-k.width/2,T;case gn.Direction.Up:return T.x=((k.width-p.width)/2+x.left+m.left)*-1,T.y=-m.left,T.y+=p.height-p.height*(0,st.relativeValue)(o[A],u,c)-k.height/2,T;case gn.Direction.Down:return T.x=((k.width-p.width)/2+x.left+m.left)*-1,T.y=-m.left,T.y+=p.height*(0,st.relativeValue)(o[A],u,c)-k.height/2,T;default:return(0,st.assertUnreachable)(s)}})},r.getThumbs=function(){return r.trackRef&&r.trackRef.current?Array.from(r.trackRef.current.children).filter(function(i){return i.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},r.getTargetIndex=function(i){return r.getThumbs().findIndex(function(s){return s===i.target||s.contains(i.target)})},r.addTouchEvents=function(i){document.addEventListener("touchmove",r.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",r.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",r.schdOnEnd,{passive:!1})},r.addMouseEvents=function(i){document.addEventListener("mousemove",r.schdOnMouseMove),document.addEventListener("mouseup",r.schdOnEnd)},r.onMouseDownTrack=function(i){var s;if(!(i.button!==0||(0,st.isIOS)()))if(i.persist(),i.preventDefault(),r.addMouseEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(u){var c;return(c=u.current)===null||c===void 0?void 0:c.contains(i.target)}))return;r.setState({draggedTrackPos:[i.clientX,i.clientY]},function(){return r.onMove(i.clientX,i.clientY)})}else{var o=(0,st.getClosestThumbIndex)(r.thumbRefs.map(function(u){return u.current}),i.clientX,i.clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.clientX,i.clientY)})}},r.onResize=function(){(0,st.translateThumbs)(r.getThumbs(),r.getOffsets(),r.props.rtl),r.calculateMarkOffsets()},r.onTouchStartTrack=function(i){var s;if(i.persist(),r.addTouchEvents(i.nativeEvent),r.props.values.length>1&&r.props.draggableTrack){if(r.thumbRefs.some(function(u){var c;return(c=u.current)===null||c===void 0?void 0:c.contains(i.target)}))return;r.setState({draggedTrackPos:[i.touches[0].clientX,i.touches[0].clientY]},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}else{var o=(0,st.getClosestThumbIndex)(r.thumbRefs.map(function(u){return u.current}),i.touches[0].clientX,i.touches[0].clientY,r.props.direction);(s=r.thumbRefs[o].current)===null||s===void 0||s.focus(),r.setState({draggedThumbIndex:o},function(){return r.onMove(i.touches[0].clientX,i.touches[0].clientY)})}},r.onMouseOrTouchStart=function(i){if(!r.props.disabled){var s=(0,st.isTouchEvent)(i);if(!(!s&&i.button!==0)){var o=r.getTargetIndex(i);o!==-1&&(s?r.addTouchEvents(i):r.addMouseEvents(i),r.setState({draggedThumbIndex:o,thumbZIndexes:r.state.thumbZIndexes.map(function(u,c){return c===o?Math.max.apply(Math,r.state.thumbZIndexes):u<=r.state.thumbZIndexes[o]?u:u-1})}))}}},r.onMouseMove=function(i){i.preventDefault(),r.onMove(i.clientX,i.clientY)},r.onTouchMove=function(i){i.preventDefault(),r.onMove(i.touches[0].clientX,i.touches[0].clientY)},r.onKeyDown=function(i){var s=r.props,o=s.values,u=s.onChange,c=s.step,h=s.rtl,p=s.direction,m=r.state.isChanged,_=r.getTargetIndex(i.nativeEvent),A=h||p===gn.Direction.Left||p===gn.Direction.Down?-1:1;_!==-1&&(UX.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:_,isChanged:!0}),u((0,st.replaceAt)(o,_,r.normalizeValue(o[_]+A*(i.key==="PageUp"?c*10:c),_)))):jX.includes(i.key)?(i.preventDefault(),r.setState({draggedThumbIndex:_,isChanged:!0}),u((0,st.replaceAt)(o,_,r.normalizeValue(o[_]-A*(i.key==="PageDown"?c*10:c),_)))):i.key==="Tab"?r.setState({draggedThumbIndex:-1},function(){m&&r.fireOnFinalChange()}):m&&r.fireOnFinalChange())},r.onKeyUp=function(i){var s=r.state.isChanged;r.setState({draggedThumbIndex:-1},function(){s&&r.fireOnFinalChange()})},r.onMove=function(i,s){var o=r.state,u=o.draggedThumbIndex,c=o.draggedTrackPos,h=r.props,p=h.direction,m=h.min,_=h.max,A=h.onChange,T=h.values,k=h.step,x=h.rtl;if(u===-1&&c[0]===-1&&c[1]===-1)return null;var P=r.trackRef.current;if(!P)return null;var R=P.getBoundingClientRect(),I=(0,st.isVertical)(p)?R.height:R.width;if(c[0]!==-1&&c[1]!==-1){var F=i-c[0],z=s-c[1],G=0;switch(p){case gn.Direction.Right:case gn.Direction.Left:G=F/I*(_-m);break;case gn.Direction.Down:case gn.Direction.Up:G=z/I*(_-m);break;default:(0,st.assertUnreachable)(p)}if(x&&(G*=-1),Math.abs(G)>=k/2){for(var C=0;C<r.thumbRefs.length;C++){if(T[C]===_&&Math.sign(G)===1||T[C]===m&&Math.sign(G)===-1)return;var S=T[C]+G;S>_?G=_-T[C]:S<m&&(G=m-T[C])}for(var L=T.slice(0),C=0;C<r.thumbRefs.length;C++)L=(0,st.replaceAt)(L,C,r.normalizeValue(T[C]+G,C));r.setState({draggedTrackPos:[i,s]}),A(L)}}else{var V=0;switch(p){case gn.Direction.Right:V=(i-R.left)/I*(_-m)+m;break;case gn.Direction.Left:V=(I-(i-R.left))/I*(_-m)+m;break;case gn.Direction.Down:V=(s-R.top)/I*(_-m)+m;break;case gn.Direction.Up:V=(I-(s-R.top))/I*(_-m)+m;break;default:(0,st.assertUnreachable)(p)}x&&(V=_+m-V),Math.abs(T[u]-V)>=k/2&&A((0,st.replaceAt)(T,u,r.normalizeValue(V,u)))}},r.normalizeValue=function(i,s){var o=r.props,u=o.min,c=o.max,h=o.step,p=o.allowOverlap,m=o.values;return(0,st.normalizeValue)(i,s,u,c,h,p,m)},r.onEnd=function(i){if(i.preventDefault(),document.removeEventListener("mousemove",r.schdOnMouseMove),document.removeEventListener("touchmove",r.schdOnTouchMove),document.removeEventListener("mouseup",r.schdOnEnd),document.removeEventListener("touchend",r.schdOnEnd),document.removeEventListener("touchcancel",r.schdOnEnd),r.state.draggedThumbIndex===-1&&r.state.draggedTrackPos[0]===-1&&r.state.draggedTrackPos[1]===-1)return null;r.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){r.fireOnFinalChange()})},r.fireOnFinalChange=function(){r.setState({isChanged:!1});var i=r.props,s=i.onFinalChange,o=i.values;s&&s(o)},r.updateMarkRefs=function(i){if(!i.renderMark){r.numOfMarks=void 0,r.markRefs=void 0;return}r.numOfMarks=(i.max-i.min)/r.props.step,r.markRefs=[];for(var s=0;s<r.numOfMarks+1;s++)r.markRefs[s]=cg.createRef()},r.calculateMarkOffsets=function(){if(!(!r.props.renderMark||!r.trackRef||!r.numOfMarks||!r.markRefs||r.trackRef.current===null)){for(var i=window.getComputedStyle(r.trackRef.current),s=parseInt(i.width,10),o=parseInt(i.height,10),u=parseInt(i.paddingLeft,10),c=parseInt(i.paddingTop,10),h=[],p=0;p<r.numOfMarks+1;p++){var m=9999,_=9999;if(r.markRefs[p].current){var A=r.markRefs[p].current.getBoundingClientRect();m=A.height,_=A.width}r.props.direction===gn.Direction.Left||r.props.direction===gn.Direction.Right?h.push([Math.round(s/r.numOfMarks*p+u-_/2),-Math.round((m-o)/2)]):h.push([Math.round(o/r.numOfMarks*p+c-m/2),-Math.round((_-s)/2)])}r.setState({markOffsets:h})}},n.step===0)throw new Error('"step" property should be a positive number');return r.schdOnMouseMove=(0,st.schd)(r.onMouseMove),r.schdOnTouchMove=(0,st.schd)(r.onTouchMove),r.schdOnEnd=(0,st.schd)(r.onEnd),r.thumbRefs=n.values.map(function(){return cg.createRef()}),r.updateMarkRefs(n),r}return e.prototype.componentDidMount=function(){var n=this,r=this.props,i=r.values,s=r.min,o=r.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",n.onResize)},unobserve:function(){return window.removeEventListener("resize",n.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,st.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(u){return(0,st.checkBoundaries)(u,n.props.min,n.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,st.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),i.forEach(function(u){(0,st.isStepDivisible)(s,u,o)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},e.prototype.componentDidUpdate=function(n,r){var i=this.props,s=i.max,o=i.min,u=i.step,c=i.values,h=i.rtl;(n.max!==s||n.min!==o||n.step!==u)&&this.updateMarkRefs(this.props),(0,st.translateThumbs)(this.getThumbs(),this.getOffsets(),h),(n.max!==s||n.min!==o||n.step!==u||r.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),c.forEach(function(p){(0,st.isStepDivisible)(o,p,u)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},e.prototype.componentWillUnmount=function(){var n={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,n),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},e.prototype.render=function(){var n=this,r=this.props,i=r.label,s=r.labelledBy,o=r.renderTrack,u=r.renderThumb,c=r.renderMark,h=c===void 0?function(){return null}:c,p=r.values,m=r.min,_=r.max,A=r.allowOverlap,T=r.disabled,k=this.state,x=k.draggedThumbIndex,P=k.thumbZIndexes,R=k.markOffsets;return o({props:{style:{transform:"scale(1)",cursor:x>-1?"grabbing":this.props.draggableTrack?(0,st.isVertical)(this.props.direction)?"ns-resize":"ew-resize":p.length===1&&!T?"pointer":"inherit"},onMouseDown:T?st.voidFn:this.onMouseDownTrack,onTouchStart:T?st.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:T,children:qb(qb([],R.map(function(I,F,z){return h({props:{style:n.props.direction===gn.Direction.Left||n.props.direction===gn.Direction.Right?{position:"absolute",left:"".concat(I[0],"px"),marginTop:"".concat(I[1],"px")}:{position:"absolute",top:"".concat(I[0],"px"),marginLeft:"".concat(I[1],"px")},key:"mark".concat(F),ref:n.markRefs[F]},index:F})}),!0),p.map(function(I,F){var z=n.state.draggedThumbIndex===F;return u({index:F,value:I,isDragged:z,props:{style:{position:"absolute",zIndex:P[F],cursor:T?"inherit":z?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:F,tabIndex:T?void 0:0,"aria-valuemax":A?_:p[F+1]||_,"aria-valuemin":A?m:p[F-1]||m,"aria-valuenow":I,draggable:!1,ref:n.thumbRefs[F],"aria-label":i,"aria-labelledby":s,role:"slider",onKeyDown:T?st.voidFn:n.onKeyDown,onKeyUp:T?st.voidFn:n.onKeyUp}})}),!0)})},e.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:gn.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},e}(cg.Component);s1.default=BX;(function(t){var e=_n&&_n.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesAgainstBoundaries=t.relativeValue=t.useThumbOverlap=t.Direction=t.getTrackBackground=t.Range=void 0;var n=e(s1);t.Range=n.default;var r=o1;Object.defineProperty(t,"getTrackBackground",{enumerable:!0,get:function(){return r.getTrackBackground}}),Object.defineProperty(t,"useThumbOverlap",{enumerable:!0,get:function(){return r.useThumbOverlap}}),Object.defineProperty(t,"relativeValue",{enumerable:!0,get:function(){return r.relativeValue}}),Object.defineProperty(t,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return r.checkValuesAgainstBoundaries}});var i=pd;Object.defineProperty(t,"Direction",{enumerable:!0,get:function(){return i.Direction}})})(v2);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $X=2e3;async function zX(t,e,n){var r;const{BuildInfo:i}=Gu();Ui(e.sessionId,"AuthEvent did not contain a session ID");const s=await HX(e.sessionId),o={};return Xf()?o.ibi=i.packageName:Jf()?o.apn=i.packageName:kn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,TE(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function WX(t){const{BuildInfo:e}=Gu(),n={};Xf()?n.iosBundleId=e.packageName:Jf()?n.androidPackageName=e.packageName:kn(t,"operation-not-supported-in-this-environment"),await XO(t,n)}function qX(t){const{cordova:e}=Gu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,rW()?"_blank":"_system","location=yes"),n(i)})})}async function GX(t,e,n){const{cordova:r}=Gu();let i=()=>{};try{await new Promise((s,o)=>{let u=null;function c(){var m;s();const _=(m=r.plugins.browsertab)===null||m===void 0?void 0:m.close;typeof _=="function"&&_(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){u||(u=window.setTimeout(()=>{o(En(t,"redirect-cancelled-by-user"))},$X))}function p(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),Jf()&&document.addEventListener("visibilitychange",p,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",p,!1),u&&window.clearTimeout(u)}})}finally{i()}}function KX(t){var e,n,r,i,s,o,u,c,h,p;const m=Gu();de(typeof((e=m==null?void 0:m.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof((n=m==null?void 0:m.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de(typeof((s=(i=(r=m==null?void 0:m.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((c=(u=(o=m==null?void 0:m.cordova)===null||o===void 0?void 0:o.plugins)===null||u===void 0?void 0:u.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((p=(h=m==null?void 0:m.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||p===void 0?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function HX(t){const e=QX(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function QX(t){if(Ui(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=20;class JX extends YO{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function XX(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:tZ(),postBody:null,tenantId:t.tenantId,error:En(t,"no-auth-event")}}function ZX(t,e){return aT()._set(uT(t),e)}async function Gb(t){const e=await aT()._get(uT(t));return e&&await aT()._remove(uT(t)),e}function eZ(t,e){var n,r;const i=rZ(e);if(i.includes("/__/auth/callback")){const s=Mg(i),o=s.firebaseError?nZ(decodeURIComponent(s.firebaseError)):null,u=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],c=u?En(u):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function tZ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<YX;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function aT(){return $r(m_)}function uT(t){return Eu("authEvent",t.config.apiKey,t.name)}function nZ(t){try{return JSON.parse(t)}catch{return null}}function rZ(t){const e=Mg(t),n=e.link?decodeURIComponent(e.link):void 0,r=Mg(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Mg(i).link||i||r||n||t}function Mg(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return uc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ=500;class sZ{constructor(){this._redirectPersistence=ua,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=v_,this._overrideRedirectResult=BI}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new JX(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){kn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){KX(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),lG(),await this._originValidation(e);const o=XX(e,r,i);await ZX(e,o);const u=await zX(e,o,n),c=await qX(u);return GX(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WX(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Gu(),o=setTimeout(async()=>{await Gb(e),n.onEvent(Kb())},iZ),u=async p=>{clearTimeout(o);const m=await Gb(e);let _=null;m&&(p!=null&&p.url)&&(_=eZ(m,p.url)),n.onEvent(_||Kb())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,u);const c=i,h=`${s.packageName.toLowerCase()}://`;Gu().handleOpenURL=async p=>{if(p.toLowerCase().startsWith(h)&&u({url:p}),typeof c=="function")try{c(p)}catch(m){console.error(m)}}}}const oZ=sZ;function Kb(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:En("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t,e){Qt(t)._logFramework(e)}var uZ="@firebase/auth-compat",lZ="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cZ=1e3;function Hh(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function dZ(){return Hh()==="http:"||Hh()==="https:"}function w2(t=Wt()){return!!((Hh()==="file:"||Hh()==="ionic:"||Hh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function hZ(){return vI()||_I()}function fZ(){return QN()&&(document==null?void 0:document.documentMode)===11}function pZ(t=Wt()){return/Edge\/\d+/.test(t)}function mZ(t=Wt()){return fZ()||pZ(t)}function E2(){try{const t=self.localStorage,e=tp();if(t)return t.setItem(e,"1"),t.removeItem(e),mZ()?mf():!0}catch{return a1()&&mf()}return!1}function a1(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function p0(){return(dZ()||HN()||w2())&&!hZ()&&E2()&&!a1()}function T2(){return w2()&&typeof document<"u"}async function gZ(){return T2()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},cZ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function yZ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={LOCAL:"local",NONE:"none",SESSION:"session"},mh=de,I2="persistence";function _Z(t,e){if(mh(Object.values(jr).includes(e),t,"invalid-persistence-type"),vI()){mh(e!==jr.SESSION,t,"unsupported-persistence-type");return}if(_I()){mh(e===jr.NONE,t,"unsupported-persistence-type");return}if(a1()){mh(e===jr.NONE||e===jr.LOCAL&&mf(),t,"unsupported-persistence-type");return}mh(e===jr.NONE||E2(),t,"unsupported-persistence-type")}async function lT(t){await t._initializationPromise;const e=S2(),n=Eu(I2,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function vZ(t,e){const n=S2();if(!n)return[];const r=Eu(I2,t,e);switch(n.getItem(r)){case jr.NONE:return[Oc];case jr.LOCAL:return[Lc,ua];case jr.SESSION:return[ua];default:return[]}}function S2(){var t;try{return((t=yZ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wZ=de;class qo{constructor(){this.browserResolver=$r(ZO),this.cordovaResolver=$r(oZ),this.underlyingResolver=null,this._redirectPersistence=ua,this._completeRedirectFn=v_,this._overrideRedirectResult=BI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return T2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wZ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await gZ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){return t.unwrap()}function EZ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(t){return A2(t)}function IZ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new SZ(t,_q(t,e))}else if(r){const i=A2(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function A2(t){const{_tokenResponse:e}=t instanceof cr?t.customData:t;if(!e)return null;if(!(t instanceof cr)&&"temporaryProof"in e&&"phoneNumber"in e)return Du.credentialFromResult(t);const n=e.providerId;if(!n||n===lh.PASSWORD)return null;let r;switch(n){case lh.GOOGLE:r=pi;break;case lh.FACEBOOK:r=Zi;break;case lh.GITHUB:r=es;break;case lh.TWITTER:r=ts;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:u,nonce:c}=e;return!s&&!o&&!i&&!u?null:u?n.startsWith("saml.")?Dc._create(n,u):hs._fromParams({providerId:n,signInMethod:n,pendingToken:u,idToken:i,accessToken:s}):new _c(n).credential({idToken:i,accessToken:s,rawNonce:c})}return t instanceof cr?r.credentialFromError(t):r.credentialFromResult(t)}function Ir(t,e){return e.catch(n=>{throw n instanceof cr&&IZ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:TZ(n),additionalUserInfo:pq(n),user:zs.getOrCreate(i)}})}async function cT(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Ir(t,n.confirm(r))}}class SZ{constructor(e,n){this.resolver=n,this.auth=EZ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Ir(R2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._delegate=e,this.multiFactor=Tq(e)}static getOrCreate(e){return zs.USER_MAP.has(e)||zs.USER_MAP.set(e,new zs(e)),zs.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Ir(this.auth,DO(this._delegate,e))}async linkWithPhoneNumber(e,n){return cT(this.auth,Jq(this._delegate,e,n))}async linkWithPopup(e){return Ir(this.auth,sG(this._delegate,e,qo))}async linkWithRedirect(e){return await lT(Qt(this.auth)),pG(this._delegate,e,qo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Ir(this.auth,LO(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return cT(this.auth,Xq(this._delegate,e,n))}reauthenticateWithPopup(e){return Ir(this.auth,iG(this._delegate,e,qo))}async reauthenticateWithRedirect(e){return await lT(Qt(this.auth)),hG(this._delegate,e,qo)}sendEmailVerification(e){return rq(this._delegate,e)}async unlink(e){return await zW(this._delegate,e),this}updateEmail(e){return aq(this._delegate,e)}updatePassword(e){return uq(this._delegate,e)}updatePhoneNumber(e){return Zq(this._delegate,e)}updateProfile(e){return oq(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return iq(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}zs.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=de;class dT{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;gh(r,"invalid-api-key",{appName:e.name}),gh(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?qo:void 0;this._delegate=n.initialize({options:{persistence:RZ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(M6),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){AO(this._delegate,e,n)}applyActionCode(e){return HW(this._delegate,e)}checkActionCode(e){return MO(this._delegate,e)}confirmPasswordReset(e,n){return KW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Ir(this._delegate,YW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return nq(this._delegate,e)}isSignInWithEmailLink(e){return ZW(this._delegate,e)}async getRedirectResult(){gh(p0(),this._delegate,"operation-not-supported-in-this-environment");const e=await gG(this._delegate,qo);return e?Ir(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){aZ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=Hb(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=Hb(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return XW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return GW(this._delegate,e,n||void 0)}async setPersistence(e){_Z(this._delegate,e);let n;switch(e){case jr.SESSION:n=ua;break;case jr.LOCAL:n=await $r(Lc)._isAvailable()?Lc:m_;break;case jr.NONE:n=Oc;break;default:return kn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Ir(this._delegate,$W(this._delegate))}signInWithCredential(e){return Ir(this._delegate,f_(this._delegate,e))}signInWithCustomToken(e){return Ir(this._delegate,qW(this._delegate,e))}signInWithEmailAndPassword(e,n){return Ir(this._delegate,JW(this._delegate,e,n))}signInWithEmailLink(e,n){return Ir(this._delegate,eq(this._delegate,e,n))}signInWithPhoneNumber(e,n){return cT(this._delegate,Yq(this._delegate,e,n))}async signInWithPopup(e){return gh(p0(),this._delegate,"operation-not-supported-in-this-environment"),Ir(this._delegate,UI(this._delegate,e,qo))}async signInWithRedirect(e){return gh(p0(),this._delegate,"operation-not-supported-in-this-environment"),await lT(this._delegate),cG(this._delegate,e,qo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return QW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}dT.Persistence=jr;function Hb(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&zs.getOrCreate(o)),error:e,complete:n}}function RZ(t,e){const n=vZ(t,e);if(typeof self<"u"&&!n.includes(Lc)&&n.push(Lc),typeof window<"u")for(const r of[m_,ua])n.includes(r)||n.push(r);return n.includes(Oc)||n.push(Oc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.providerId="phone",this._delegate=new Du(R2(Hr.auth()))}static credential(e,n){return Du.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}u1.PHONE_SIGN_IN_METHOD=Du.PHONE_SIGN_IN_METHOD;u1.PROVIDER_ID=Du.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AZ=de;class PZ{constructor(e,n,r=Hr.app()){var i;AZ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new Hq(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ="auth-compat";function bZ(t){t.INTERNAL.registerComponent(new ds(CZ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new dT(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ml.EMAIL_SIGNIN,PASSWORD_RESET:Ml.PASSWORD_RESET,RECOVER_EMAIL:Ml.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ml.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ml.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ml.VERIFY_EMAIL}},EmailAuthProvider:Ia,FacebookAuthProvider:Zi,GithubAuthProvider:es,GoogleAuthProvider:pi,OAuthProvider:_c,SAMLAuthProvider:gy,PhoneAuthProvider:u1,PhoneMultiFactorGenerator:eD,RecaptchaVerifier:PZ,TwitterAuthProvider:ts,Auth:dT,AuthCredential:nd,Error:cr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(uZ,lZ)}bZ(Hr);const xZ="@firebase/firestore-compat",kZ="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function Yb(){if(!M8())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}let P2=class hT{constructor(e){this._delegate=e}static fromBase64String(e){return Yb(),new hT(ms.fromBase64String(e))}static fromUint8Array(e){return Qb(),new hT(ms.fromUint8Array(e))}toBase64(){return Yb(),this._delegate.toBase64()}toUint8Array(){return Qb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){return NZ(t,["next","error","complete"])}function NZ(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{enableIndexedDbPersistence(e,n){return m7(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return g7(e._delegate)}clearIndexedDbPersistence(e){return y7(e._delegate)}}class C2{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&fs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){ZL(this._delegate,e,n,r)}enableNetwork(){return v7(this._delegate)}disableNetwork(){return w7(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return _7(this._delegate)}onSnapshotsInSync(e){return $7(this._delegate,e)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qc(this,Su(this._delegate,e))}catch(n){throw ar(n,"collection()","Firestore.collection()")}}doc(e){try{return new gi(this,ma(this._delegate,e))}catch(n){throw ar(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new or(this,d7(this._delegate,e))}catch(n){throw ar(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return G7(this._delegate,n=>e(new b2(this,n)))}batch(){return Zn(this._delegate),new x2(new W7(this._delegate,e=>gp(this._delegate,e)))}loadBundle(e){return E7(this._delegate,e)}namedQuery(e){return T7(this._delegate,e).then(n=>n?new or(this,n):null)}}class X_ extends $S{constructor(e){super(),this.firestore=e}convertBytes(e){return new P2(new ms(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return gi.forKey(n,this.firestore,null)}}function DZ(t){n8(t)}class b2{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}get(e){const n=yu(e);return this._delegate.get(n).then(r=>new Uf(this._firestore,new eo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=yu(e);return r?(l1("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=yu(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=yu(e);return this._delegate.delete(n),this}}class x2{constructor(e){this._delegate=e}set(e,n,r){const i=yu(e);return r?(l1("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=yu(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=yu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ku{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Gh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jf(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ku.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ku(e,new X_(e),n),i.set(n,s)),s}}Ku.INSTANCES=new WeakMap;class gi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}static forPath(e,n,r){if(e.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gi(n,new $t(n._delegate,r,new ye(e)))}static forKey(e,n,r){return new gi(n,new $t(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qc(this.firestore,Su(this._delegate,e))}catch(n){throw ar(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=be(e),e instanceof $t?rM(this._delegate,e):!1}set(e,n){n=l1("DocumentReference.set",n);try{return n?lb(this._delegate,e,n):lb(this._delegate,e)}catch(r){throw ar(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?qE(this._delegate,e):qE(this._delegate,e,n,...r)}catch(i){throw ar(i,"updateDoc()","DocumentReference.update()")}}delete(){return Dg(this._delegate)}onSnapshot(...e){const n=k2(e),r=N2(e,i=>new Uf(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return mp(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=F7(this._delegate):(e==null?void 0:e.source)==="server"?n=U7(this._delegate):n=V7(this._delegate),n.then(r=>new Uf(this.firestore,new eo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new gi(this.firestore,e?this._delegate.withConverter(Ku.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ar(t,e,n){return t.message=t.message.replace(e,n),t}function k2(t){for(const e of t)if(typeof e=="object"&&!fT(e))return e;return{}}function N2(t,e){var n,r;let i;return fT(t[0])?i=t[0]:fT(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Uf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return _M(this._delegate,e._delegate)}}class jf extends Uf{data(e){const n=this._delegate.data(e);return this._delegate._converter||r8(n!==void 0),n}}class or{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new X_(e)}where(e,n,r){try{return new or(this.firestore,Ds(this._delegate,mM(e,n,r)))}catch(i){throw ar(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new or(this.firestore,Ds(this._delegate,C7(e,n)))}catch(r){throw ar(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new or(this.firestore,Ds(this._delegate,b7(e)))}catch(n){throw ar(n,"limit()","Query.limit()")}}limitToLast(e){try{return new or(this.firestore,Ds(this._delegate,x7(e)))}catch(n){throw ar(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new or(this.firestore,Ds(this._delegate,k7(...e)))}catch(n){throw ar(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new or(this.firestore,Ds(this._delegate,N7(...e)))}catch(n){throw ar(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new or(this.firestore,Ds(this._delegate,O7(...e)))}catch(n){throw ar(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new or(this.firestore,Ds(this._delegate,D7(...e)))}catch(n){throw ar(n,"endAt()","Query.endAt()")}}isEqual(e){return iM(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=j7(this._delegate):(e==null?void 0:e.source)==="server"?n=B7(this._delegate):n=vM(this._delegate),n.then(r=>new pT(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=k2(e),r=N2(e,i=>new pT(this.firestore,new ya(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return mp(this._delegate,n,r)}withConverter(e){return new or(this.firestore,e?this._delegate.withConverter(Ku.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class LZ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new jf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pT{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new or(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new LZ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new jf(this._firestore,r))})}isEqual(e){return _M(this._delegate,e._delegate)}}class Qc extends or{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gi(this.firestore,e):null}doc(e){try{return e===void 0?new gi(this.firestore,ma(this._delegate)):new gi(this.firestore,ma(this._delegate,e))}catch(n){throw ar(n,"doc()","CollectionReference.doc()")}}add(e){return zS(this._delegate,e).then(n=>new gi(this.firestore,n))}isEqual(e){return rM(this._delegate,e._delegate)}withConverter(e){return new Qc(this.firestore,e?this._delegate.withConverter(Ku.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function yu(t){return lt(t,$t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(...e){this._delegate=new ga(...e)}static documentId(){return new c1(Dt.keyField().canonicalString())}isEqual(e){return e=be(e),e instanceof ga?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=H7();return e._methodName="FieldValue.serverTimestamp",new lu(e)}static delete(){const e=K7();return e._methodName="FieldValue.delete",new lu(e)}static arrayUnion(...e){const n=Q7(...e);return n._methodName="FieldValue.arrayUnion",new lu(n)}static arrayRemove(...e){const n=Y7(...e);return n._methodName="FieldValue.arrayRemove",new lu(n)}static increment(e){const n=J7(e);return n._methodName="FieldValue.increment",new lu(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MZ={Firestore:C2,GeoPoint:O_,Timestamp:Mt,Blob:P2,Transaction:b2,WriteBatch:x2,DocumentReference:gi,DocumentSnapshot:Uf,Query:or,QueryDocumentSnapshot:jf,QuerySnapshot:pT,CollectionReference:Qc,FieldPath:c1,FieldValue:lu,setLogLevel:DZ,CACHE_SIZE_UNLIMITED:f7};function VZ(t,e){t.INTERNAL.registerComponent(new ds("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},MZ)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FZ(t){VZ(t,(e,n)=>new C2(e,n,new OZ)),t.registerVersion(xZ,kZ)}FZ(Hr);const UZ={loading:!1,user:{signedIn:!1,nickname:localStorage.getItem("nickname")||""}},jZ={...UZ},O2=GM({name:"user",initialState:jZ,reducers:{updateUser:(t,e)=>({...t,...e.payload}),updateNickname:(t,e)=>{t.user.nickname=e.payload},logOut:t=>({loading:!1,user:null})}}),{updateUser:hne,updateNickname:BZ,logOut:$Z}=O2.actions,zZ=O2.reducer;function D2(){const t=hd(),e=MN(),n=()=>{Hr.auth().signOut().then(()=>{t($Z()),console.log("Signed out."),e("/")})};return w.jsx("div",{className:"my-3",style:{cursor:"pointer"},children:w.jsx("p",{className:"text-right text-white",children:w.jsx("a",{className:"btn btn-danger",onClick:n,children:"Sign Out"})})})}function L2(t,e){return function(){return t.apply(e,arguments)}}const{toString:WZ}=Object.prototype,{getPrototypeOf:d1}=Object,Z_=(t=>e=>{const n=WZ.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ji=t=>(t=t.toLowerCase(),e=>Z_(e)===t),ev=t=>e=>typeof e===t,{isArray:md}=Array,Bf=ev("undefined");function qZ(t){return t!==null&&!Bf(t)&&t.constructor!==null&&!Bf(t.constructor)&&qr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const M2=ji("ArrayBuffer");function GZ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&M2(t.buffer),e}const KZ=ev("string"),qr=ev("function"),V2=ev("number"),tv=t=>t!==null&&typeof t=="object",HZ=t=>t===!0||t===!1,Vg=t=>{if(Z_(t)!=="object")return!1;const e=d1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},QZ=ji("Date"),YZ=ji("File"),JZ=ji("Blob"),XZ=ji("FileList"),ZZ=t=>tv(t)&&qr(t.pipe),eee=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qr(t.append)&&((e=Z_(t))==="formdata"||e==="object"&&qr(t.toString)&&t.toString()==="[object FormData]"))},tee=ji("URLSearchParams"),[nee,ree,iee,see]=["ReadableStream","Request","Response","Headers"].map(ji),oee=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wp(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),md(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let u;for(r=0;r<o;r++)u=s[r],e.call(null,t[u],u,t)}}function F2(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const _u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U2=t=>!Bf(t)&&t!==_u;function mT(){const{caseless:t}=U2(this)&&this||{},e={},n=(r,i)=>{const s=t&&F2(e,i)||i;Vg(e[s])&&Vg(r)?e[s]=mT(e[s],r):Vg(r)?e[s]=mT({},r):md(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wp(arguments[r],n);return e}const aee=(t,e,n,{allOwnKeys:r}={})=>(wp(e,(i,s)=>{n&&qr(i)?t[s]=L2(i,n):t[s]=i},{allOwnKeys:r}),t),uee=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lee=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},cee=(t,e,n,r)=>{let i,s,o;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!u[o]&&(e[o]=t[o],u[o]=!0);t=n!==!1&&d1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},dee=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},hee=t=>{if(!t)return null;if(md(t))return t;let e=t.length;if(!V2(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},fee=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&d1(Uint8Array)),pee=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},mee=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},gee=ji("HTMLFormElement"),yee=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Jb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),_ee=ji("RegExp"),j2=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};wp(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},vee=t=>{j2(t,(e,n)=>{if(qr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(qr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wee=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return md(t)?r(t):r(String(t).split(e)),n},Eee=()=>{},Tee=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,m0="abcdefghijklmnopqrstuvwxyz",Xb="0123456789",B2={DIGIT:Xb,ALPHA:m0,ALPHA_DIGIT:m0+m0.toUpperCase()+Xb},Iee=(t=16,e=B2.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function See(t){return!!(t&&qr(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ree=t=>{const e=new Array(10),n=(r,i)=>{if(tv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=md(r)?[]:{};return wp(r,(o,u)=>{const c=n(o,i+1);!Bf(c)&&(s[u]=c)}),e[i]=void 0,s}}return r};return n(t,0)},Aee=ji("AsyncFunction"),Pee=t=>t&&(tv(t)||qr(t))&&qr(t.then)&&qr(t.catch),$2=((t,e)=>t?setImmediate:e?((n,r)=>(_u.addEventListener("message",({source:i,data:s})=>{i===_u&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),_u.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qr(_u.postMessage)),Cee=typeof queueMicrotask<"u"?queueMicrotask.bind(_u):typeof process<"u"&&process.nextTick||$2,Z={isArray:md,isArrayBuffer:M2,isBuffer:qZ,isFormData:eee,isArrayBufferView:GZ,isString:KZ,isNumber:V2,isBoolean:HZ,isObject:tv,isPlainObject:Vg,isReadableStream:nee,isRequest:ree,isResponse:iee,isHeaders:see,isUndefined:Bf,isDate:QZ,isFile:YZ,isBlob:JZ,isRegExp:_ee,isFunction:qr,isStream:ZZ,isURLSearchParams:tee,isTypedArray:fee,isFileList:XZ,forEach:wp,merge:mT,extend:aee,trim:oee,stripBOM:uee,inherits:lee,toFlatObject:cee,kindOf:Z_,kindOfTest:ji,endsWith:dee,toArray:hee,forEachEntry:pee,matchAll:mee,isHTMLForm:gee,hasOwnProperty:Jb,hasOwnProp:Jb,reduceDescriptors:j2,freezeMethods:vee,toObjectSet:wee,toCamelCase:yee,noop:Eee,toFiniteNumber:Tee,findKey:F2,global:_u,isContextDefined:U2,ALPHABET:B2,generateString:Iee,isSpecCompliantForm:See,toJSONObject:Ree,isAsyncFn:Aee,isThenable:Pee,setImmediate:$2,asap:Cee};function $e(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Z.inherits($e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const z2=$e.prototype,W2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{W2[t]={value:t}});Object.defineProperties($e,W2);Object.defineProperty(z2,"isAxiosError",{value:!0});$e.from=(t,e,n,r,i,s)=>{const o=Object.create(z2);return Z.toFlatObject(t,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),$e.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const bee=null;function gT(t){return Z.isPlainObject(t)||Z.isArray(t)}function q2(t){return Z.endsWith(t,"[]")?t.slice(0,-2):t}function Zb(t,e,n){return t?t.concat(e).map(function(i,s){return i=q2(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function xee(t){return Z.isArray(t)&&!t.some(gT)}const kee=Z.toFlatObject(Z,{},null,function(e){return/^is[A-Z]/.test(e)});function nv(t,e,n){if(!Z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,x){return!Z.isUndefined(x[k])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(e);if(!Z.isFunction(i))throw new TypeError("visitor must be a function");function h(T){if(T===null)return"";if(Z.isDate(T))return T.toISOString();if(!c&&Z.isBlob(T))throw new $e("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(T)||Z.isTypedArray(T)?c&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function p(T,k,x){let P=T;if(T&&!x&&typeof T=="object"){if(Z.endsWith(k,"{}"))k=r?k:k.slice(0,-2),T=JSON.stringify(T);else if(Z.isArray(T)&&xee(T)||(Z.isFileList(T)||Z.endsWith(k,"[]"))&&(P=Z.toArray(T)))return k=q2(k),P.forEach(function(I,F){!(Z.isUndefined(I)||I===null)&&e.append(o===!0?Zb([k],F,s):o===null?k:k+"[]",h(I))}),!1}return gT(T)?!0:(e.append(Zb(x,k,s),h(T)),!1)}const m=[],_=Object.assign(kee,{defaultVisitor:p,convertValue:h,isVisitable:gT});function A(T,k){if(!Z.isUndefined(T)){if(m.indexOf(T)!==-1)throw Error("Circular reference detected in "+k.join("."));m.push(T),Z.forEach(T,function(P,R){(!(Z.isUndefined(P)||P===null)&&i.call(e,P,Z.isString(R)?R.trim():R,k,_))===!0&&A(P,k?k.concat(R):[R])}),m.pop()}}if(!Z.isObject(t))throw new TypeError("data must be an object");return A(t),e}function ex(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function h1(t,e){this._pairs=[],t&&nv(t,this,e)}const G2=h1.prototype;G2.append=function(e,n){this._pairs.push([e,n])};G2.toString=function(e){const n=e?function(r){return e.call(this,r,ex)}:ex;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Nee(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K2(t,e,n){if(!e)return t;const r=n&&n.encode||Nee,i=n&&n.serialize;let s;if(i?s=i(e,n):s=Z.isURLSearchParams(e)?e.toString():new h1(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class tx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Z.forEach(this.handlers,function(r){r!==null&&e(r)})}}const H2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Oee=typeof URLSearchParams<"u"?URLSearchParams:h1,Dee=typeof FormData<"u"?FormData:null,Lee=typeof Blob<"u"?Blob:null,Mee={isBrowser:!0,classes:{URLSearchParams:Oee,FormData:Dee,Blob:Lee},protocols:["http","https","file","blob","url","data"]},f1=typeof window<"u"&&typeof document<"u",yT=typeof navigator=="object"&&navigator||void 0,Vee=f1&&(!yT||["ReactNative","NativeScript","NS"].indexOf(yT.product)<0),Fee=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uee=f1&&window.location.href||"http://localhost",jee=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f1,hasStandardBrowserEnv:Vee,hasStandardBrowserWebWorkerEnv:Fee,navigator:yT,origin:Uee},Symbol.toStringTag,{value:"Module"})),Or={...jee,...Mee};function Bee(t,e){return nv(t,new Or.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Or.isNode&&Z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function $ee(t){return Z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zee(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function Q2(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),c=s>=n.length;return o=!o&&Z.isArray(i)?i.length:o,c?(Z.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Z.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Z.isArray(i[o])&&(i[o]=zee(i[o])),!u)}if(Z.isFormData(t)&&Z.isFunction(t.entries)){const n={};return Z.forEachEntry(t,(r,i)=>{e($ee(r),i,n,0)}),n}return null}function Wee(t,e,n){if(Z.isString(t))try{return(e||JSON.parse)(t),Z.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(t)}const Ep={transitional:H2,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Z.isObject(e);if(s&&Z.isHTMLForm(e)&&(e=new FormData(e)),Z.isFormData(e))return i?JSON.stringify(Q2(e)):e;if(Z.isArrayBuffer(e)||Z.isBuffer(e)||Z.isStream(e)||Z.isFile(e)||Z.isBlob(e)||Z.isReadableStream(e))return e;if(Z.isArrayBufferView(e))return e.buffer;if(Z.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Bee(e,this.formSerializer).toString();if((u=Z.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return nv(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Wee(e)):e}],transformResponse:[function(e){const n=this.transitional||Ep.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Z.isResponse(e)||Z.isReadableStream(e))return e;if(e&&Z.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(o)throw u.name==="SyntaxError"?$e.from(u,$e.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Or.classes.FormData,Blob:Or.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],t=>{Ep.headers[t]={}});const qee=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gee=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&qee[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},nx=Symbol("internals");function yh(t){return t&&String(t).trim().toLowerCase()}function Fg(t){return t===!1||t==null?t:Z.isArray(t)?t.map(Fg):String(t)}function Kee(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Hee=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function g0(t,e,n,r,i){if(Z.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Z.isString(e)){if(Z.isString(r))return e.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(e)}}function Qee(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Yee(t,e){const n=Z.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Dr{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(u,c,h){const p=yh(c);if(!p)throw new Error("header name must be a non-empty string");const m=Z.findKey(i,p);(!m||i[m]===void 0||h===!0||h===void 0&&i[m]!==!1)&&(i[m||c]=Fg(u))}const o=(u,c)=>Z.forEach(u,(h,p)=>s(h,p,c));if(Z.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Z.isString(e)&&(e=e.trim())&&!Hee(e))o(Gee(e),n);else if(Z.isHeaders(e))for(const[u,c]of e.entries())s(c,u,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=yh(e),e){const r=Z.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Kee(i);if(Z.isFunction(n))return n.call(this,i,r);if(Z.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=yh(e),e){const r=Z.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||g0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=yh(o),o){const u=Z.findKey(r,o);u&&(!n||g0(r,r[u],u,n))&&(delete r[u],i=!0)}}return Z.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||g0(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Z.forEach(this,(i,s)=>{const o=Z.findKey(r,s);if(o){n[o]=Fg(i),delete n[s];return}const u=e?Qee(s):String(s).trim();u!==s&&delete n[s],n[u]=Fg(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Z.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[nx]=this[nx]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=yh(o);r[u]||(Yee(i,o),r[u]=!0)}return Z.isArray(e)?e.forEach(s):s(e),this}}Dr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Dr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Z.freezeMethods(Dr);function y0(t,e){const n=this||Ep,r=e||n,i=Dr.from(r.headers);let s=r.data;return Z.forEach(t,function(u){s=u.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Y2(t){return!!(t&&t.__CANCEL__)}function gd(t,e,n){$e.call(this,t??"canceled",$e.ERR_CANCELED,e,n),this.name="CanceledError"}Z.inherits(gd,$e,{__CANCEL__:!0});function J2(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new $e("Request failed with status code "+n.status,[$e.ERR_BAD_REQUEST,$e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Jee(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Xee(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const h=Date.now(),p=r[s];o||(o=h),n[i]=c,r[i]=h;let m=s,_=0;for(;m!==i;)_+=n[m++],m=m%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),h-o<e)return;const A=p&&h-p;return A?Math.round(_*1e3/A):void 0}}function Zee(t,e){let n=0,r=1e3/e,i,s;const o=(h,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const p=Date.now(),m=p-n;m>=r?o(h,p):(i=h,s||(s=setTimeout(()=>{s=null,o(i)},r-m)))},()=>i&&o(i)]}const jy=(t,e,n=3)=>{let r=0;const i=Xee(50,250);return Zee(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,c=o-r,h=i(c),p=o<=u;r=o;const m={loaded:o,total:u,progress:u?o/u:void 0,bytes:c,rate:h||void 0,estimated:h&&u&&p?(u-o)/h:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(m)},n)},rx=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},ix=t=>(...e)=>Z.asap(()=>t(...e)),ete=Or.hasStandardBrowserEnv?function(){const e=Or.navigator&&/(msie|trident)/i.test(Or.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const u=Z.isString(o)?i(o):o;return u.protocol===r.protocol&&u.host===r.host}}():function(){return function(){return!0}}(),tte=Or.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Z.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Z.isString(r)&&o.push("path="+r),Z.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nte(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function rte(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function X2(t,e){return t&&!nte(e)?rte(t,e):e}const sx=t=>t instanceof Dr?{...t}:t;function Hu(t,e){e=e||{};const n={};function r(h,p,m){return Z.isPlainObject(h)&&Z.isPlainObject(p)?Z.merge.call({caseless:m},h,p):Z.isPlainObject(p)?Z.merge({},p):Z.isArray(p)?p.slice():p}function i(h,p,m){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return r(void 0,h,m)}else return r(h,p,m)}function s(h,p){if(!Z.isUndefined(p))return r(void 0,p)}function o(h,p){if(Z.isUndefined(p)){if(!Z.isUndefined(h))return r(void 0,h)}else return r(void 0,p)}function u(h,p,m){if(m in e)return r(h,p);if(m in t)return r(void 0,h)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(h,p)=>i(sx(h),sx(p),!0)};return Z.forEach(Object.keys(Object.assign({},t,e)),function(p){const m=c[p]||i,_=m(t[p],e[p],p);Z.isUndefined(_)&&m!==u||(n[p]=_)}),n}const Z2=t=>{const e=Hu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=e;e.headers=o=Dr.from(o),e.url=K2(X2(e.baseURL,e.url),t.params,t.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(Z.isFormData(n)){if(Or.hasStandardBrowserEnv||Or.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[h,...p]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...p].join("; "))}}if(Or.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(e)),r||r!==!1&&ete(e.url))){const h=i&&s&&tte.read(s);h&&o.set(i,h)}return e},ite=typeof XMLHttpRequest<"u",ste=ite&&function(t){return new Promise(function(n,r){const i=Z2(t);let s=i.data;const o=Dr.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:h}=i,p,m,_,A,T;function k(){A&&A(),T&&T(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function P(){if(!x)return;const I=Dr.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),z={data:!u||u==="text"||u==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:I,config:t,request:x};J2(function(C){n(C),k()},function(C){r(C),k()},z),x=null}"onloadend"in x?x.onloadend=P:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(P)},x.onabort=function(){x&&(r(new $e("Request aborted",$e.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new $e("Network Error",$e.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let F=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const z=i.transitional||H2;i.timeoutErrorMessage&&(F=i.timeoutErrorMessage),r(new $e(F,z.clarifyTimeoutError?$e.ETIMEDOUT:$e.ECONNABORTED,t,x)),x=null},s===void 0&&o.setContentType(null),"setRequestHeader"in x&&Z.forEach(o.toJSON(),function(F,z){x.setRequestHeader(z,F)}),Z.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),u&&u!=="json"&&(x.responseType=i.responseType),h&&([_,T]=jy(h,!0),x.addEventListener("progress",_)),c&&x.upload&&([m,A]=jy(c),x.upload.addEventListener("progress",m),x.upload.addEventListener("loadend",A)),(i.cancelToken||i.signal)&&(p=I=>{x&&(r(!I||I.type?new gd(null,t,x):I),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const R=Jee(i.url);if(R&&Or.protocols.indexOf(R)===-1){r(new $e("Unsupported protocol "+R+":",$e.ERR_BAD_REQUEST,t));return}x.send(s||null)})},ote=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(h){if(!i){i=!0,u();const p=h instanceof Error?h:this.reason;r.abort(p instanceof $e?p:new gd(p instanceof Error?p.message:p))}};let o=e&&setTimeout(()=>{o=null,s(new $e(`timeout ${e} of ms exceeded`,$e.ETIMEDOUT))},e);const u=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Z.asap(u),c}},ate=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},ute=async function*(t,e){for await(const n of lte(t))yield*ate(n,e)},lte=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},ox=(t,e,n,r)=>{const i=ute(t,e);let s=0,o,u=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:h,value:p}=await i.next();if(h){u(),c.close();return}let m=p.byteLength;if(n){let _=s+=m;n(_)}c.enqueue(new Uint8Array(p))}catch(h){throw u(h),h}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},rv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eV=rv&&typeof ReadableStream=="function",cte=rv&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),tV=(t,...e)=>{try{return!!t(...e)}catch{return!1}},dte=eV&&tV(()=>{let t=!1;const e=new Request(Or.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ax=64*1024,_T=eV&&tV(()=>Z.isReadableStream(new Response("").body)),By={stream:_T&&(t=>t.body)};rv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!By[e]&&(By[e]=Z.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new $e(`Response type '${e}' is not supported`,$e.ERR_NOT_SUPPORT,r)})})})(new Response);const hte=async t=>{if(t==null)return 0;if(Z.isBlob(t))return t.size;if(Z.isSpecCompliantForm(t))return(await new Request(Or.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(t)||Z.isArrayBuffer(t))return t.byteLength;if(Z.isURLSearchParams(t)&&(t=t+""),Z.isString(t))return(await cte(t)).byteLength},fte=async(t,e)=>{const n=Z.toFiniteNumber(t.getContentLength());return n??hte(e)},pte=rv&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:c,responseType:h,headers:p,withCredentials:m="same-origin",fetchOptions:_}=Z2(t);h=h?(h+"").toLowerCase():"text";let A=ote([i,s&&s.toAbortSignal()],o),T;const k=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let x;try{if(c&&dte&&n!=="get"&&n!=="head"&&(x=await fte(p,r))!==0){let z=new Request(e,{method:"POST",body:r,duplex:"half"}),G;if(Z.isFormData(r)&&(G=z.headers.get("content-type"))&&p.setContentType(G),z.body){const[C,S]=rx(x,jy(ix(c)));r=ox(z.body,ax,C,S)}}Z.isString(m)||(m=m?"include":"omit");const P="credentials"in Request.prototype;T=new Request(e,{..._,signal:A,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:P?m:void 0});let R=await fetch(T);const I=_T&&(h==="stream"||h==="response");if(_T&&(u||I&&k)){const z={};["status","statusText","headers"].forEach(L=>{z[L]=R[L]});const G=Z.toFiniteNumber(R.headers.get("content-length")),[C,S]=u&&rx(G,jy(ix(u),!0))||[];R=new Response(ox(R.body,ax,C,()=>{S&&S(),k&&k()}),z)}h=h||"text";let F=await By[Z.findKey(By,h)||"text"](R,t);return!I&&k&&k(),await new Promise((z,G)=>{J2(z,G,{data:F,headers:Dr.from(R.headers),status:R.status,statusText:R.statusText,config:t,request:T})})}catch(P){throw k&&k(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new $e("Network Error",$e.ERR_NETWORK,t,T),{cause:P.cause||P}):$e.from(P,P&&P.code,t,T)}}),vT={http:bee,xhr:ste,fetch:pte};Z.forEach(vT,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ux=t=>`- ${t}`,mte=t=>Z.isFunction(t)||t===null||t===!1,nV={getAdapter:t=>{t=Z.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!mte(n)&&(r=vT[(o=String(n)).toLowerCase()],r===void 0))throw new $e(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(ux).join(`
`):" "+ux(s[0]):"as no adapter specified";throw new $e("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:vT};function _0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gd(null,t)}function lx(t){return _0(t),t.headers=Dr.from(t.headers),t.data=y0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),nV.getAdapter(t.adapter||Ep.adapter)(t).then(function(r){return _0(t),r.data=y0.call(t,t.transformResponse,r),r.headers=Dr.from(r.headers),r},function(r){return Y2(r)||(_0(t),r&&r.response&&(r.response.data=y0.call(t,t.transformResponse,r.response),r.response.headers=Dr.from(r.response.headers))),Promise.reject(r)})}const rV="1.7.7",p1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{p1[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const cx={};p1.transitional=function(e,n,r){function i(s,o){return"[Axios v"+rV+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(e===!1)throw new $e(i(o," has been removed"+(n?" in "+n:"")),$e.ERR_DEPRECATED);return n&&!cx[o]&&(cx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,u):!0}};function gte(t,e,n){if(typeof t!="object")throw new $e("options must be an object",$e.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const u=t[s],c=u===void 0||o(u,s,t);if(c!==!0)throw new $e("option "+s+" must be "+c,$e.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new $e("Unknown option "+s,$e.ERR_BAD_OPTION)}}const wT={assertOptions:gte,validators:p1},ko=wT.validators;class Cu{constructor(e){this.defaults=e,this.interceptors={request:new tx,response:new tx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Hu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&wT.assertOptions(r,{silentJSONParsing:ko.transitional(ko.boolean),forcedJSONParsing:ko.transitional(ko.boolean),clarifyTimeoutError:ko.transitional(ko.boolean)},!1),i!=null&&(Z.isFunction(i)?n.paramsSerializer={serialize:i}:wT.assertOptions(i,{encode:ko.function,serialize:ko.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Z.merge(s.common,s[n.method]);s&&Z.forEach(["delete","get","head","post","put","patch","common"],T=>{delete s[T]}),n.headers=Dr.concat(o,s);const u=[];let c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(c=c&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const h=[];this.interceptors.response.forEach(function(k){h.push(k.fulfilled,k.rejected)});let p,m=0,_;if(!c){const T=[lx.bind(this),void 0];for(T.unshift.apply(T,u),T.push.apply(T,h),_=T.length,p=Promise.resolve(n);m<_;)p=p.then(T[m++],T[m++]);return p}_=u.length;let A=n;for(m=0;m<_;){const T=u[m++],k=u[m++];try{A=T(A)}catch(x){k.call(this,x);break}}try{p=lx.call(this,A)}catch(T){return Promise.reject(T)}for(m=0,_=h.length;m<_;)p=p.then(h[m++],h[m++]);return p}getUri(e){e=Hu(this.defaults,e);const n=X2(e.baseURL,e.url);return K2(n,e.params,e.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(e){Cu.prototype[e]=function(n,r){return this.request(Hu(r||{},{method:e,url:n,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,u){return this.request(Hu(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Cu.prototype[e]=n(),Cu.prototype[e+"Form"]=n(!0)});class m1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,u){r.reason||(r.reason=new gd(s,o,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new m1(function(i){e=i}),cancel:e}}}function yte(t){return function(n){return t.apply(null,n)}}function _te(t){return Z.isObject(t)&&t.isAxiosError===!0}const ET={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ET).forEach(([t,e])=>{ET[e]=t});function iV(t){const e=new Cu(t),n=L2(Cu.prototype.request,e);return Z.extend(n,Cu.prototype,e,{allOwnKeys:!0}),Z.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return iV(Hu(t,i))},n}const on=iV(Ep);on.Axios=Cu;on.CanceledError=gd;on.CancelToken=m1;on.isCancel=Y2;on.VERSION=rV;on.toFormData=nv;on.AxiosError=$e;on.Cancel=on.CanceledError;on.all=function(e){return Promise.all(e)};on.spread=yte;on.isAxiosError=_te;on.mergeConfig=Hu;on.AxiosHeaders=Dr;on.formToJSON=t=>Q2(Z.isHTMLForm(t)?new FormData(t):t);on.getAdapter=nV.getAdapter;on.HttpStatusCode=ET;on.default=on;const cu={turnTime:4e3,colors:i1,playingTo:6,cpuDelay:1200},dx=t=>{let e=Number(t);return Number.isNaN(e)&&(e=1),24e3/(5*e)},hx=()=>{const t=yp(),e=[];return{...zu({deck:t.slice(12),board:t.slice(0,12)}),selected:e}},fx={players:{you:{score:0,color:cu.colors[0]},cpu:{score:0,color:cu.colors[1]}},gameStarted:!1,myName:"you",setFound:!1,declarer:null,gameOver:null,cpuTurnInterval:1e3,startTime:new Date};class vte extends B.Component{constructor(n){super(n);Rn(this,"handleStartGame",n=>{n.preventDefault(),this.setState({gameStarted:!0,startTime:new Date}),console.log(`Turns every ${this.state.cpuTurnInterval} ms`),setTimeout(()=>{const r=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:r})},cu.cpuDelay)});Rn(this,"componentDidMount",()=>{const n=window.localStorage.getItem("soloDifficulty");let r=n?Number(n):2;const i=dx(r);this.setState({difficulty:r,cpuTurnInterval:i})});Rn(this,"componentWillUnmount",()=>{this.state.cpuTimer!==null&&window.clearInterval(this.state.cpuTimer)});Rn(this,"cpuTurn",()=>{const{board:n,declarer:r,gameOver:i}=this.state;if(r||i)return;const[s,o]=jt.shuffle(n).slice(0,2),u=qS(s,o);n.includes(u)&&(this.setState({declarer:"cpu",selected:[s],cpuFound:[o,u],setFound:!0}),this.state.cpuTimer!==null&&clearInterval(this.state.cpuTimer),this.setState({cpuAnimation:window.setInterval(this.animateCpuChoice,900)}))});Rn(this,"animateCpuChoice",()=>{const{selected:n,cpuFound:r}=this.state,i=[...r];if(i.length===0)return;const s=[...n,i.pop()];this.setState({cpuFound:i,selected:s}),s.length===3&&(this.state.cpuAnimation!==null&&clearInterval(this.state.cpuAnimation),this.updateSelected(s,"cpu"))});Rn(this,"updatePlayerScore",(n,r)=>{const{players:i}=this.state,s=i[n].score+r;return[K_(i,u=>{u[n].score=s}),s]});Rn(this,"expireDeclare",()=>{const{declarer:n,selected:r}=this.state;if(n&&!br(r)){const[i]=this.updatePlayerScore(n,-.5);this.setState({players:i,declarer:null,timeDeclared:void 0,selected:[]})}});Rn(this,"markPointForDeclarer",n=>{const[r,i]=this.updatePlayerScore(n,1),{user:s}=this.props.userReducer,o=i>=cu.playingTo?n:"",u={players:r,gameOver:o};if(!jt.isEmpty(o)){const c=s&&s.uid||"anonymous",h=n=="you"?1:0,p=Math.round((new Date().getTime()-this.state.startTime.getTime())/1e3);on.post("/api/game",{uid:c,total_time:p,player_won:h,difficulty_level:this.state.difficulty,winning_score:i}).then(()=>{console.log("Game sent")}).catch(m=>{console.log("Error sending game")})}return this.setState(u),u});Rn(this,"performDeclare",n=>{if(!this.state.declarer){const r=new Date().getTime(),i={declarer:n,timeDeclared:r};this.setState(i),this.setState({undeclareId:window.setTimeout(()=>{this.expireDeclare()},cu.turnTime)})}});Rn(this,"updateSelected",(n,r)=>{const i={setFound:br(n),selected:n,declarer:r};i.setFound&&(this.state.undeclareId&&clearTimeout(this.state.undeclareId),setTimeout(()=>{this.removeSet()},2e3)),this.setState(i)});Rn(this,"handleCardClick",n=>{const{setFound:r,declarer:i,myName:s}=this.state;if(!r&&i!=="cpu"){const o=$_(n,this.state.selected);i||this.performDeclare(s),this.setState({selected:o}),br(o)&&this.updateSelected(o,"you")}});Rn(this,"handleRedeal",()=>{const n=zu(this.state);this.setState(n)});Rn(this,"removeSet",()=>{const{declarer:n,selected:r}=this.state;if(n&&br(r)){console.log("Set found, removing"),this.markPointForDeclarer(n);const i={setFound:!1,declarer:null,timeDeclared:void 0,...GS(this.state)};this.setState(i)}this.state.cpuTimer&&clearInterval(this.state.cpuTimer),setTimeout(()=>{const i=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:i})},cu.cpuDelay)});Rn(this,"resetGame",()=>{this.state.cpuTimer&&window.clearInterval(this.state.cpuTimer),this.setState({...jt.cloneDeep(fx),...hx()})});this.state={...jt.cloneDeep(fx),...hx(),difficulty:2}}render(){const{board:n,deck:r,selected:i,declarer:s,players:o,gameStarted:u,setFound:c}=this.state,{userReducer:h}=this.props,{user:p}=h;return h.loading?"Loading...":u?w.jsx(He.Fragment,{children:w.jsx(J_,{board:n,deck:r,selected:i,declarer:s,handleCardClick:this.handleCardClick,handleDeclare:()=>{},handleRedeal:this.handleRedeal,players:o,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.myName,resetGame:this.resetGame,solo:!0,gameMode:"versus"})}):w.jsxs("div",{className:"container main-content",children:[p!==null&&w.jsx(D2,{}),w.jsx("h3",{className:"text-center mb-4",children:"Solo Play vs. Computer"}),w.jsx("h4",{className:"mb-4",children:"Choose difficulty level:"}),w.jsxs("div",{className:"row",children:[w.jsxs("div",{className:"col-12",children:[w.jsxs("form",{onSubmit:this.handleStartGame,children:[w.jsx("div",{className:"col-10 col-md-6 mb-5",children:w.jsx(v2.Range,{step:1,min:1,max:8,values:[this.state.difficulty],onChange:m=>{const _=dx(m);window.localStorage.setItem("soloDifficulty",m.toString()),this.setState({cpuTurnInterval:_,difficulty:m})},renderTrack:({props:m,children:_})=>w.jsx("div",{...m,style:{...m.style,height:"6px",width:"100%",backgroundColor:"#ccc"},children:_}),renderThumb:({props:m})=>w.jsx("div",{...m,style:{...m.style,height:"24px",width:"24px",backgroundColor:"#999"}})})}),w.jsx("input",{type:"submit",value:"Start",className:"btn btn-primary"})]}),w.jsxs("p",{style:{marginTop:"24px"},children:["First to ",cu.playingTo," points is the winner"]})]}),w.jsxs("div",{className:"row mt-4",children:[w.jsx("p",{children:"Other Game Options:"}),w.jsxs("ul",{style:{listStyleType:"none"},children:[w.jsx("li",{className:"mb-4",children:w.jsx(wn,{to:"/local",children:"Local Multiplayer"})}),w.jsx("li",{className:"mb-4",children:w.jsx(wn,{to:"/training",children:"Training"})}),w.jsx("hr",{}),w.jsx("li",{children:w.jsx(wn,{to:"/",children:"Back to Main Menu"})})]})]})]}),!p&&w.jsx("div",{className:"row mt-4",children:w.jsxs("div",{children:[w.jsx("p",{children:"To save your game statistics, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:TM,className:"btn btn-info",children:"Sign in"})})]})})]})}}const wte=t=>({userReducer:t.user}),Ete=_Y(wte)(vte),Tte=["as","disabled"];function Ite(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ste(t){return!t||t.trim()==="#"}function sV({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:u=0,type:c}){t||(n!=null||r!=null||i!=null?t="a":t="button");const h={tagName:t};if(t==="button")return[{type:c||"button",disabled:e},h];const p=_=>{if((e||t==="a"&&Ste(n))&&_.preventDefault(),e){_.stopPropagation();return}o==null||o(_)},m=_=>{_.key===" "&&(_.preventDefault(),p(_))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:u,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:p,onKeyDown:m},h]}const Rte=B.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=Ite(t,Tte);const[s,{tagName:o}]=sV(Object.assign({tagName:n,disabled:r},i));return w.jsx(o,Object.assign({},i,s,{ref:e}))});Rte.displayName="Button";const g1=B.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...u},c)=>{const h=Ca(e,"btn"),[p,{tagName:m}]=sV({tagName:t,disabled:s,...u}),_=m;return w.jsx(_,{...p,...u,ref:c,disabled:s,className:Jr(o,h,i&&"active",n&&`${h}-${n}`,r&&`${h}-${r}`,u.href&&s&&"disabled")})});g1.displayName="Button";const Ate=({show:t,handleClose:e})=>w.jsx(w.Fragment,{children:w.jsxs(Jn,{show:t,children:[w.jsx(Jn.Header,{className:"justify-content-center",children:w.jsx(Jn.Title,{children:"Training Mode"})}),w.jsx(Jn.Body,{children:w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsx("p",{className:"my-2",children:"Find the one card that completes a set with the two highlighted cards."}),w.jsx("p",{className:"my-2",children:"Try to keep finding SETs for as long as you can."})]})}),w.jsx(Jn.Footer,{children:w.jsx("div",{className:"d-flex justify-content-center",children:w.jsx(g1,{onClick:e,variant:"primary",children:"Let's Go!"})})})]})}),Pte=({handleClose:t,show:e,finalScore:n})=>w.jsx(w.Fragment,{children:w.jsxs(Jn,{show:e,children:[w.jsxs(Jn.Body,{children:[w.jsx("h3",{className:"text-center mt-3",children:"GAME OVER!"}),w.jsxs("div",{className:"d-flex flex-column justify-content-center",children:[w.jsxs("p",{className:"text-center my-2",children:["Final Score: ",n," "]}),w.jsxs("p",{className:"text-center my-2",children:["Best Score: ",localStorage.getItem("highScoreTraining")||0]})]})]}),w.jsxs(Jn.Footer,{children:[w.jsx("button",{className:"btn btn-primary",onClick:t,children:w.jsx(wn,{style:{color:"white",textDecoration:"none"},to:"/",children:"Main Menu"})}),w.jsx(g1,{onClick:t,variant:"secondary",children:"Restart"})]})]})}),v0={turnTime:4e3,colors:i1,playingTo:6,cpuDelay:1200,initialTurnTime:7e3,minimumTurnTime:1600},Cte=()=>{const[t,e]=B.useState([]),[n,r]=B.useState([]),[i,s]=B.useState(0),[o,u]=B.useState(null),[c,h]=B.useState(0),[p,m]=B.useState(null),[_,A]=B.useState(v0.initialTurnTime/1e3),T=B.useRef(null);T.current=_;const k=B.useRef(null);k.current=i;const[x,P]=B.useState(!0),[R,I]=B.useState(!1),[F,z]=B.useState(!1),[G,C]=B.useState(!1),S=re=>{const le=Math.round(v0.initialTurnTime-1100*Math.log2(re+1));return Math.max(le,v0.minimumTurnTime)},L=({score:re})=>{m(Date.now()),z(!1)};B.useEffect(()=>{u(Date.now()),L({score:0})},[]);const V=({precise:re=!1}={})=>{const le=Date.now()-p;return((S(k.current)-le)/1e3).toFixed(1)};wX(()=>{const re=Date.now(),le=Math.round((re-o)/1e3),ue=Math.round(re-p),H=S(k.current)-ue;h(le),A((H/1e3).toFixed(1)),H<0&&!F&&O()},F||x?null:200);const U=({select:re=!0}={})=>{const{board:le,deck:ue}=cQ({boardSize:8,commonTraits:null});e([...le.slice(0,2),"0333",...le.slice(2)]),re&&r(le.slice(0,2))};B.useEffect(()=>{U({select:!1})},[]);const M=re=>{const le=V();A(le),!(n.length===3||x)&&(br([...n,re])?(z(!0),s(i+1),r([...n,re]),window.setTimeout(()=>{U(),L({score:i+1})},650)):O())},O=()=>{P(!0);const re=qS(...n);r([...n,re]),Number(localStorage.getItem("highScoreTraining"))<i&&localStorage.setItem("highScoreTraining",i),window.setTimeout(()=>{I(!0)},2500)},he=()=>{P(!1),I(!1),z(!1),s(0),U(),u(Date.now()),L({score:0})};return w.jsxs("div",{className:"container",children:[w.jsx("div",{className:"d-flex flex-column justify-content-between",children:w.jsx("div",{children:w.jsx(J_,{board:t,deck:[],selected:n,declarer:null,handleCardClick:M,handleDeclare:()=>{},players:{you:{name:"you",score:i,color:x?"error-red":"light-blue"}},setFound:!1,gameOver:x,myName:"you",resetGame:()=>{},solo:!0,gameMode:"training",elapsedTime:c,timeLeft:_})})}),w.jsx(Ate,{show:!G,setShow:C,handleClose:()=>{C(!0),he()}}),w.jsx(Pte,{show:G&&x&&R,finalScore:i,handleClose:he})]})};function Ws({children:t}){return w.jsx("div",{className:"container mt-4 p-3 text-center",children:w.jsx("div",{className:"card shadow",children:w.jsx("div",{className:"card-body",children:t})})})}function oV({isHost:t,players:e,setState:n}){jt.findKey(e,i=>i.host);let r=jt.map(e,(i,s)=>({name:s,...i}));return r=r.sort((i,s)=>i.position-s.position),w.jsxs(Ws,{children:[w.jsx("h4",{children:"Players:"}),w.jsx("ul",{className:"list-group my-3",children:r.map(i=>{const{name:s}=i;return w.jsx("li",{className:"list-group-item",children:w.jsxs("span",{className:"player-name",children:[s," ",i.host&&"(host)"]})},s)})}),t?w.jsx("button",{className:"btn btn-primary",onClick:()=>{n({gameStarted:!0})},children:"Start Game"}):w.jsx("p",{children:"Waiting for host to start game..."})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bte(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function u(p){try{h(r.next(p))}catch(m){o(m)}}function c(p){try{h(r.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(u,c)}h((r=r.apply(t,[])).next())})}function xte(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=e.call(t,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lc=function(){return lc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lc.apply(this,arguments)},aV=function(t){return{loading:t==null,value:t}},kte=function(){return function(t,e){switch(e.type){case"error":return lc(lc({},t),{error:e.error,loading:!1,value:void 0});case"reset":return aV(e.defaultValue);case"value":return lc(lc({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},Nte=function(t){var e=t?t():void 0,n=B.useReducer(kte(),aV(e)),r=n[0],i=n[1],s=B.useCallback(function(){var c=t?t():void 0;i({type:"reset",defaultValue:c})},[t]),o=B.useCallback(function(c){i({type:"error",error:c})},[]),u=B.useCallback(function(c){i({type:"value",value:c})},[]);return B.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:u,value:r.value}},[r.error,r.loading,s,o,u,r.value])},iv=function(t,e){var n=Nte(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,u=n.value;return B.useEffect(function(){var c=yq(t,function(h){return bte(void 0,void 0,void 0,function(){var p;return xte(this,function(m){switch(m.label){case 0:return[3,4];case 1:return m.trys.push([1,3,,4]),[4,e.onUserChanged(h)];case 2:return m.sent(),[3,4];case 3:return p=m.sent(),s(p),[3,4];case 4:return o(h),[2]}})})},s);return function(){c()}},[t]),[u,i,r]};function uV({handleSetName:t}){const e=hd(),n=Vi(r=>r.user.user);return w.jsx(w.Fragment,{children:w.jsxs("div",{className:"text-center",children:[w.jsx("h4",{children:"Enter your nickname:"}),w.jsx("form",{onSubmit:t,children:w.jsx("div",{className:"row my-4 d-flex justify-content-center",children:w.jsx("div",{className:"col-md-6 mb-3 mr-md-4",children:w.jsxs("div",{className:"input-group",children:[w.jsx("input",{type:"text",className:"form-control",autoFocus:!0,placeholder:"Enter your nickname",value:n.nickname,onChange:r=>{e(BZ(r.target.value)),window.localStorage.setItem("nickname",r.target.value)}}),w.jsx("div",{className:"input-group-append",children:w.jsx("button",{type:"submit",className:"btn btn-primary",children:"Set Name"})})]})})})})]})})}const w0={turnTime:5e3,colors:i1,playingTo:6};function Ote(){const t=Vi(fe=>fe.user),[e,n,r]=iv(Ru),{user:i}=t,s=hd();B.useState("");const o=Vi(fe=>fe.user.loading),c=B.useRef({}).current,h=yp();({...zu({deck:h.slice(12),board:h.slice(0,12)})});const[p,m]=B.useState(),[_,A]=B.useState(""),[T,k]=B.useState();B.useState();const[x,P]=B.useState(),R=Vi(fe=>fe.game),I=fe=>{s(HM(fe))},F=B.useRef(R);F.current=R,B.useEffect(()=>{const fe=async()=>{try{const Le=Ds(Su(gu,"games"),mM("creator_uid","==",e.uid));(await vM(Le)).forEach(Me=>{const ct={...Me.data(),gameTitle:Me.id};console.log("Old game: ",ct),m(ct),c.game=Me.ref})}catch(Le){console.log("Error getting documents: ",Le)}};e&&e.uid&&fe()},[e]),B.useEffect(()=>function(){window.clearInterval(T)},[T]);const z=fe=>{I({...F.current,...fe})},G=async()=>{console.log("game in progress",c.game);try{if(!c.game){console.error("Document reference is not set");return}await Dg(c.game),console.log("Document deleted successfully."),m(null),c.game=null,s(QM())}catch(fe){console.error("Error deleting document: ",fe)}},C=fe=>{const{myName:Le}=R;if(!R.declarer){const xe=$_(fe,R.selected);br(xe)&&me(xe,Le),z({selected:xe})}},S=()=>{const fe=zu(R);H(fe)},L=fe=>{const Le=Su(fe,"actions");return mp(Le,xe=>{xe.docChanges().forEach(Me=>{if(Me.type==="added"){const ct=Me.doc.data();console.log(ct),le(ct),Dg(Me.doc.ref)}Me.type==="removed"&&console.log("Removed action: ",Me.doc.data())})}),Le},V=async fe=>{c.game=ma(gu,"games",fe);const Le=window.setInterval(()=>{n0(fe,{})},3e4);k(Le);const xe=L(c.game);P(xe)},U=()=>{const fe=jt.findKey(p.players,xe=>xe.host),{gameTitle:Le}=p;z({gameTitle:Le}),V(Le),z({myName:fe,created:!0,...p,lastUpdate:IM(p.lastUpdate)})},M=async fe=>{fe.preventDefault();const Le=i.nickname,xe=jt.isEmpty(_)?`${Le}'s game`:_;z({gameTitle:xe});try{const Me=await zS(Su(gu,"games"),{title:xe,creator_uid:e.uid,lastUpdate:Hr.firestore.FieldValue.serverTimestamp(),...R});c.game=Me,c.actions=L(Me);const ct=window.setInterval(()=>{n0(c.game,{})},3e4);k(ct),z({created:!0})}catch(Me){console.error("Error adding document: ",Me)}},O=fe=>{fe.preventDefault(),console.log("uid",e.uid),Fe(!0),z({myName:i.nickname,players:{[i.nickname]:{host:!0,uid:e.uid,score:0,color:w0.colors[0],position:0}}})},he=async()=>{try{const fe=ma(gu,"games",R.gameTitle);await Dg(fe),console.log("Document deleted successfully.")}catch(fe){console.error("Error deleting document: ",fe)}},re=fe=>{if(!fe)return{};const{players:Le}=F.current,xe=Le[fe].score+1,Me=K_(Le,rt=>{rt[fe].score=xe}),ct=xe>=w0.playingTo?fe:"";return ct&&window.setTimeout(()=>{he(),clearInterval(T)},3e3),{players:Me,gameOver:ct}},le=fe=>{const{type:Le,payload:xe}=fe,{players:Me,declarer:ct,board:rt}=F.current,Vt=Math.max(...Object.values(Me).map(vt=>vt.position));switch(Le){case"join":if(Object.keys(Me).includes(xe.name))return;const vt={...Me,[xe.name]:{host:!1,score:0,color:w0.colors[Object.keys(Me).length],position:Vt+1}};H({players:vt});break;case"found":!ct&&ae(rt,xe.selected)&&me(xe.selected,xe.name);break;default:return}},ue=(fe,Le)=>{if(br(fe)){const xe=re(Le),Me={...F.current,setFound:!1,declarer:null,hostConfirmedSet:!1,...xe,...GS(F.current)};H(Me)}},H=fe=>{console.log("updating",fe),z(fe),n0(c.game,fe)},ae=(fe,Le)=>{for(let xe=0;xe<Le.length;xe++)if(!fe.includes(Le[xe]))return!1;return!0},me=(fe,Le)=>{const xe=br(fe),Me={setFound:xe,selected:fe,hostConfirmedSet:xe,declarer:Le};H(Me),Me.setFound&&setTimeout(()=>{ue(fe,Le)},4e3)},{players:ge,created:Se,gameStarted:we}=R,Ne=i.nickname,[Pe,Fe]=B.useState(!1);return o?"Loading...":e?p&&!R.created?w.jsxs(Ws,{children:[w.jsx("p",{children:"You are already hosting a game. Return to it?"}),w.jsx("button",{className:"btn btn-primary mr-5",onClick:()=>U(),children:"YES!"}),w.jsx("button",{className:"btn btn-danger",onClick:G,children:"No, remove it"})]}):!Pe||Ne===""?w.jsxs(Ws,{children:[w.jsx(uV,{handleSetName:O}),w.jsx(D2,{}),w.jsx("div",{children:w.jsx("p",{children:w.jsx(wn,{to:"/",children:"Main Menu"})})})]}):Se?we?w.jsx("div",{className:"container",style:{maxWidth:"1000px"},children:w.jsx(J_,{handleGameOver:he,handleCardClick:C,handleRedeal:S,gameMode:"versus"})}):w.jsx(oV,{isHost:!0,players:ge,setState:H}):w.jsxs(Ws,{children:[w.jsx("h4",{children:"Name your game:"}),w.jsxs("form",{onSubmit:M,children:[w.jsx("div",{className:"mb-3",children:w.jsx("input",{autoFocus:!0,placeholder:`${Ne}'s game`,onChange:fe=>{A(fe.target.value)},value:_})}),w.jsx("div",{children:w.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create"})})]})]}):w.jsxs(Ws,{children:[w.jsx("p",{children:"To host a game, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:dQ,className:"btn btn-info",children:"Sign in"})})]})}const Dte=()=>{const[t,e,n]=iv(Ru);console.log(t);const r=()=>{const s=new pi;UI(Ru,s)},i=()=>{Ru.signOut()};return w.jsx("div",{className:"container mt-3",children:t?w.jsxs("div",{children:[w.jsxs("p",{children:["Welcome, ",t.displayName]}),w.jsx("p",{children:w.jsx(wn,{to:"/",children:"Home"})}),w.jsx("button",{className:"btn btn-primary",onClick:i,children:"Sign Out"})]}):w.jsx("button",{className:"btn btn-primary",onClick:r,children:"Sign In with Google"})})};function Lte(){const[t,e]=B.useState([]),[n,r]=B.useState(!1);if(B.useEffect(()=>{const s=Su(gu,"games"),o=mp(s,u=>{const c=[];u.forEach(h=>{c.push({name:h.id,...h.data()})}),e(c),r(!0)});return()=>o()},[]),console.log(t),!n)return null;const i=t.filter(s=>!0);return w.jsx("div",{className:"container",style:{height:"100vh"},children:i.length===0?w.jsx(Ws,{children:w.jsx(B.Fragment,{children:w.jsx("div",{className:"row justify-content-center",children:w.jsxs("div",{className:"col-8 col-md-6",children:[w.jsx("div",{className:"card-panel teal",children:w.jsx("span",{className:"white-text",children:"There are currently no active games."})}),w.jsxs("p",{children:["Click ",w.jsx(wn,{to:"/host",children:"here"})," to host one"]}),w.jsx("p",{children:w.jsx(wn,{className:"btn btn-primary",to:"/",children:"Main Menu"})})]})})})}):w.jsx(Ws,{children:w.jsxs(B.Fragment,{children:[w.jsx("h4",{className:"text-center my-4",children:"Available games"}),w.jsx("div",{className:"row align-content-center",children:i.map((s,o)=>w.jsx("div",{className:"col-6 col-md-4",children:w.jsx("div",{className:"card available-game",children:w.jsx("div",{className:"my-auto text-center",children:w.jsx(wn,{to:`/guest/${s.name}`,children:s.title})})})},s.name))}),w.jsx("div",{className:"row",children:w.jsx("div",{className:"col mt-4",children:w.jsx(wn,{className:"btn btn-primary",to:"/",children:"Back"})})})]})})})}const lV=B.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:s,...o},u)=>{t=Ca(t,"spinner");const c=`${t}-${n}`;return w.jsx(i,{ref:u,...o,className:Jr(s,c,r&&`${c}-${r}`,e&&`text-${e}`)})});lV.displayName="Spinner";function Mte(t){const[e,n,r]=iv(Ru),i=Vi(re=>re.user),{user:s,loading:o}=i,u=hd(),c=O5(),h=Vi(re=>re.game),p=re=>{u(HM(re))},[m,_]=B.useState(!1),A=Vi(re=>re.user.user.nickname),k=B.useRef({}).current,x=B.useRef(h);x.current=h;const P=re=>{p({...x.current,...re})},R=()=>{const{declarer:re,selected:le}=x.current;jt.isEmpty(re)&&le.length===3&&!br(le)&&P({selected:[]})},I=re=>{const{declarer:le,selected:ue}=x.current;if(le)return;const H=$_(re,ue);if(H.length>3)return;const ae={};if(H.length===3)if(br(H)){const me={type:"found",payload:{selected:H,name:A}};console.log("Found set, sending..."),G(me),ae.popupVisible=!0}else console.log("Bad set selected!"),window.setTimeout(R,1e3);P({...ae,selected:H})},F=re=>{re.preventDefault();const le=s.nickname;if(jt.isEmpty(le))return;_(!0);const ue={name:le};e&&(ue.uid=e.uid),G({type:"join",payload:ue})},z=re=>{const le={...re.data()};le.lastUpdate=IM(le.lastUpdate);const{selected:ue}=x.current;if(jt.isEmpty(le))return;const H=ue.length<3&&jt.isEmpty(le.declarer)?ue:le.selected;P({...le,selected:H,popupVisible:!1})},G=async re=>{console.log("Creating on",k.actions),zS(k.actions,{...re,created:Hr.firestore.FieldValue.serverTimestamp()}).then(le=>{if(re.type==="found"){const ue=le.id;console.log("Document written with ID: ",ue),P({pending:ue})}})};B.useEffect(()=>{const{gameName:re}=c;k.game=ma(gu,"games",re),k.actions=Su(k.game,"actions");const le=mp(k.game,ue=>{z(ue)});return function(){k.game&&le()}},[]);const{board:C,deck:S,selected:L,declarer:V,players:U,popupVisible:M}=h;if(i.loading)return"Loading profile...";if(jt.isEmpty(s))return w.jsxs(Ws,{children:[w.jsx("p",{children:"To join a game, sign in with your Google account."}),w.jsx("p",{children:w.jsx("button",{onClick:TM,className:"btn btn-info",children:"Sign in"})}),w.jsx("p",{children:w.jsx(wn,{to:"/lobby",children:"Back"})})]});if(!m||A==="")return w.jsx("div",{className:"container",children:w.jsx(Ws,{children:w.jsx(uV,{handleSetName:F})})});const{gameOver:O,gameStarted:he}=h;return he?w.jsxs(He.Fragment,{children:[w.jsxs(Jn,{show:h.pending&&M,children:[w.jsx(Jn.Header,{children:w.jsx(Jn.Title,{children:"Submitting action..."})}),w.jsxs(Jn.Body,{children:[w.jsx("p",{className:"text-center",children:"SET!"}),w.jsx("div",{className:"text-center",children:w.jsx(lV,{animation:"border"})})]})]}),w.jsx(J_,{handleCardClick:I,gameOver:O,gameMode:"versus"})]}):w.jsx(oV,{players:U,isHost:!1})}function Vte(t){const[e,n,r]=iv(Ru);console.log(e);const i=Vi(c=>c.user),{user:s}=i,[o,u]=B.useState(null);return hd(),B.useEffect(()=>{const c=async()=>{on.get(`/api/user/stats/${s.uid}`).then(h=>{u(h.data)})};!i.loading&&s!==null&&c()},[i.loading]),i.loading?"Loading...":w.jsxs("div",{className:"container mt-2 mt-md-4",children:[w.jsx("h3",{children:"Statistics"}),w.jsxs("table",{className:"table table-striped",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Difficulty"}),w.jsx("th",{children:"Games Played"}),w.jsx("th",{children:"Winning Percentage"})]})}),w.jsx("tbody",{children:o&&o.map((c,h)=>w.jsxs("tr",{children:[w.jsx("td",{children:c.difficulty_level}),w.jsx("td",{children:c.games_played}),w.jsxs("td",{children:[Math.round(100*(c.games_won/c.games_played)),"%"]})]},`stats-${h}`))})]}),w.jsx("p",{children:w.jsx(wn,{to:"/",children:"Main Menu"})})]})}function Fte(){return w.jsx(e9,{children:w.jsxs(w.Fragment,{children:[w.jsxs(K5,{children:[w.jsx(Yi,{path:"/",element:w.jsx(mQ,{})}),w.jsx(Yi,{path:"/rules",element:w.jsx(yQ,{})}),w.jsx(Yi,{path:"/solo",element:w.jsx(Ete,{})}),w.jsx(Yi,{path:"/training",element:w.jsx(Cte,{})}),w.jsx(Yi,{path:"/host",element:w.jsx(Ote,{})}),w.jsx(Yi,{path:"/lobby",element:w.jsx(Lte,{})}),w.jsx(Yi,{path:"/guest/:gameName",element:w.jsx(Mte,{})}),w.jsx(Yi,{path:"/login",element:w.jsx(Dte,{})}),w.jsx(Yi,{path:"/stats",element:w.jsx(Vte,{})})]}),w.jsx(DX,{})]})})}const Ute=HY({reducer:{user:zZ,game:oJ}});PN(document.getElementById("root")).render(w.jsx(wY,{store:Ute,children:w.jsx(Fte,{})}));
